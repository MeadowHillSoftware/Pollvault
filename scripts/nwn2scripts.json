{"1":{"Name":"Timestamp","Author":"Ryne Anderson","Submitted":20061021,"Updated":20061122,"Category":"Scripting routines","Type":"Type - Time","Format":"Code Only","Patch":"1.00","Description":"A timestamp routine - every PW needs one right? These timestamps have been tested on the NWN2 pre-release toolset and NWN2 MP Beta - so they should be accurate. Should someone find an issue with them, please let me know so I can fix it right away!\n\nAlso if you have any ideas for features you would like to see added, let me know. :).\n\nThe use of the script is fairly straightforward, call TimeStamp() when you want to get the current time (probably want to store this somewhere). You can compare timestamps to see if a certain amount of time has passed - i.e., a monster spawning 5 minutes after it has been defeated.\n\n//------------------------------------------------------------------------------\n--------\n//Written by Ryne Anderson of the Bid for Transcendence: The Age of Knowledge PW team.\n//http://www.age-of-knowledge.com/\n//Feel free to duplicate or modify this code to your content. But please be kind\n//and give credit where credit is due =).\n//\n//Before calling TimeStamp() - make sure you have configured how many\n//Minutes per hour your module is set up for (the default is 2). To configure it\n//simply call SetMinPerHour(xxx) once - a good place to do it is on the event 'On Module Load'\n//*To see how many minutes/hour your module is set to, go to \n//View -> Module Properties -> Minutes Per Game Hour\n//\n//TimeStamp() usage\n//Just call TimeStamp() when you want to store the current time of the module.\n//To see if something occurred x minutes ago...\n//1) Create a new timestamp \n//2) Retrieve the previously stored timestamp\n//3) Subtract the previously stored timestamp from the new timestamp\n//4) If the result is greater than x, then x minutes have passed.\n//\n//ex)\n//int iMinutesPassed = 10;\n//int iCurrentTime = TimeStamp();\n//int iPreviousTime = GetLocalInt(GetModule(),\"LastStoredTime\");\n//if(iCurrentTime - iPreviousTime >= iMinutesPassed)\n//{\n//...do stuff here\n//}\n//Note : All time comparisons must be done in minutes.\n//------------------------------------------------------------------------------\n--------\n","Rating":10,"Votes":1,"Awards":[]},"4":{"Name":"SendText with ColorText Support","Author":"demetrious","Submitted":20061101,"Updated":20061122,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.00","Description":"Updated to Version 1a1\n\nThis is a relatively simple include file that aims to improve basic message sending with NWN2. It includes 5 basic functions for sending text to players with color text support.\n\n\nWhy use this?\n\nSendMessageToPC() and FloatingTextString() do not support coloring text inherently. Second, the format between the two is not consistent. Third, they are long functions to type. Finally, party messaging / DM messaging / Variable based messaging are not strongly supported without writing the code yourself. This include file addresses each of these issues. I wrote it for myself for DMFI development and have uploaded it here for public use.\n\n\nIt is a sub-component of the future DMFI Tools for NWN2. It is also a sub-component of the Custom Token Dialog System.\n\nDocumentation is included. If there are errors, please post and they will be corrected.\n\nIncluded functions:\n\n\nSentText(): Player / faction color messaging.\n\nSendTalkText(): Forced speak color messaging.\n\nSendDMText(): DM oriented color messaging.\n\nSendPartyText(): Party based color messaging.\n\nSendPCText(): PC Integer state based color messaging.\n\nColorText(): Add color text support.\n\nRevision Log:\n1a1: Only function changed was ColorText(). Fixed a few colors that were not working and spent an hour tweaking the various colors so that they were more varied.\n\n","Rating":10,"Votes":2,"Awards":[]},"5":{"Name":"Custom Token Dialog System","Author":"demetrious","Submitted":20061101,"Updated":20070117,"Category":"Scripting routines","Type":"Type - Conversations","Format":"Module and Code","Patch":"1.00","Description":"Version 1a1\n\nThis is a powerful custom token dialog sytem that hopefully allows average scripters to be able to create custom token based conversations. It is essentially a port of Paul Speed's Z-Dialog System for NWN1 with several NWN2 oriented enhancements.\n\nThe strength of the system is building complex conversations where lists are dynamically built or there is a long listing of data. Great examples include billboards, riddle scripts, inventory management, 2da data lists, teleport or object selection etc. etc. All this gets done with one script per each \"new\" conversation. Examples are included.\n\n\nThe package includes SendText with ColorText Support as a sub-component that improves messaging and offers color text support for NWN2. It also includes a number of very robust list oriented API functions. (These are unchanged from Paul Speed's original release - allowing data manipulation in lists and linking objects, integers, and strings). So there is a quite a bit of very useful stuff buried in the main include file.\n\n\nThe package includes documentation, an example module, and an erf.\n\nPlease take the time to vote and leave comments if you seriously looked at/have used the package. Thanks. \n\nRevision History:\nVersion 1a1: Minor code update to ONLY update ColorText() function. Updated documentation, streamlined code in one example and added example template to erf with the update.\n ","Rating":10,"Votes":3,"Awards":[]},"6":{"Name":"Environmental Fatigue Engine v2.2.2 for NWN2","Author":"Edret","Submitted":20061105,"Updated":20080328,"Category":"Area","Type":"Type - Other","Format":"Code Only","ShowCode":"Installation Instructions: \n\nAll changes are made to the area you want to include environmental fatigue in since setup of the environmental fatigue engine is done on an area by area basis. Only areas you install the environmental fatigue engine will have the environmental fatigue affect. \n\n(1) Alter the area's onEnter script: Include as one of the preprocessor directives for the area's onEnter script \n\n#include \"enft_startengine\" \n\nThen, somewhere in the script (preferably at the very end before you leave the script) include the line \n\nstartEngine(oEnterer); \n\nAn example script would look like this \n\n\n#include \"enft_startengine\" \n\nvoid main() \n{ \nobject oEnterer; \n\n// Get entering character \noEnterer = GetEnteringObject( ); \n\n/* \n... Other area onEnter code \n*/ \n\nstartEngine(oEnterer); \n} \n\n\n(2) Flag the area to use the Environmental Fatigue Engine: Add the variable \n\nENV_FATIGUE_AREA \n\nto the area and set it to 1 if the area is extremely cold and 2 if the area is extremely hot. You can add and set a variable for an area by going into the area's properties window, accessing \"variables\" by pressing the \"...\" button next to it, and adding the ENV_FATIGUE_AREA as a ValueInt and setting the appropriate value. Pressing this button will bring up the Variables dialog box.Select All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"This behavior is based on the description of the dangers of the environment, specifically heat and cold dangers, on page 86 of the third edition of the Dungeon Master's Guide. This or a later version of the DMG should be the primary resource for describing environmental fatigue. The Environmental Fatigue Engine tries to simulate the model described in the DMG as closely as possible but in some areas the Aurora toolset just didn't provide the functionality needed to do this. Also, the description of environmental fatigue is a little sparse in the DMG, and hence, I've had to take liberties and use creative license in certain areas. For example, no description is given for when a body falls to excessive temperatures and is then resurrected a little while later in the same area. My assumption was that they got all their life back with no damage (subdual or otherwise) but the body was still hot so the DC was not reset. \n\nBasically, when you are in an excessively hot or cold place, you have to do a fortitude saving throw every hour (or 10 minutes in insanely hot or cold places). The first hour you are there the DC is 15. Every successive throw adds 1 to that DC. When you fail a fortitude saving throw due to environmental fatigue, you must take subdual damage. If you're in a cold place, you take 1D6 of subdual damage. If you are in a hot place you take 1D4 subdual damage. \n\nPlease note that subdual damage in the Environmental Fatigue engine doesn't work exactly like subdual damage described in the DMG. The main difference is this damage is local to the environmental fatigue scripts. In other words, if you take subdual damage from a punch (if we were to add a subdual damage system), the system as setup presently will not include this when tallying your subdual damage from the environment. \n\nWhen you take subdual damage due to environmental fatigue you then get fatigue. There is no fatigue effect in NWN (as far as I know) so I simulate it by reducing the PC's dexterity and strength by 2. This is how fatigue due to the elements is supposed to affect you according to the DMG. \n\nYou can find relief from the elements by going near a waypoint that is properly tagged with ENFT_RELIEF_SPOT, having an environmental protection spell cast on you (this will also protect you from future fatigue form the elements for the duration of the spell), or coming to a temperate area (an area not flagged for the Environmental Fatigue engine). Relief will take away all the subdual damage, the fatigue effect if any, and reset your fortitude saving throw to 15. I should note that immunity to hot or cold will protect you from taking damage (subdual damage or otherwise) although your DC will still rise. \n\nIf you don't find relief and your subdual damage exceeds your HP, you fall unconscious. Unconscious means you can't move and are lying on the ground (well, hopefully). If you fall unconscious due to the cold, your skin also turns a nice shade of blue (the ice skin visual effect is applied to you). When you fall unconscious you roll as usual using an ever increasing DC and take damage with the same dice. However, now instead of subdual damage you take real heat or cold damage. You continue to take this damage until you find relief or die. \n\nWhen you die, your subdual damage returns to zero and you are no longer unconscious. This isn't much consolation anymore but is important should you be raised.\n\nThis version of the Environmental Fatigue Engine is compatible with NWN2.","Rating":9.17,"Votes":5,"Awards":[]},"7":{"Name":"Vuldrick's Flavor Text System for NWN 2","Author":"Vuldrick","Submitted":20061105,"Updated":20061122,"Category":"Conversation","Type":"Type - Conversations","Format":"Code Only","ShowCode":"////////////////////////////////////////////////////////////////////////////////\n// HOW TO USE THIS SYSTEM\n// All you need to do to use this system is to place a generic trigger down and\n// give it a unique tag.  Make sure you remember the name of the tag as you will\n// need it to set up the proper text to be shown to the PC.  For tag naming\n// conventions on the triggers, I suggest using the area tag and a number like\n// 001 with the number increasing for each successive flavor text trigger.\n//\n// Under the scripts section of the tag, put this in the onenter event:\n// vg_flavor_txt\n//\n// After laying the trigger and noting the tag, open the properties of the area\n// by right clicking the area and going to properties.  Go to the advanced tab\n// and click the button that says 'variables'.  Make a new variable and set its\n// name to the actual tag of your trigger.\n//\n// Make sure the variable is set as a string and then in the last field of the\n// variable put in the text you want shown to the PC.\n//\n// You can also change the color of the flavor text using the following color\n// designators\n/*\n//Color used by saving throws.\nconst string COLOR_BLUE         = \"<cf��>\";\n\n//Color used for electric damage.\nconst string COLOR_DARK_BLUE    = \"<c f�>\";\n\n//Color used for negative damage.\nconst string COLOR_GRAY         = \"<c™™™>\";\n\n//Color used for acid damage.\nconst string COLOR_GREEN        = \"<c � >\";\n\n//Color used for the player's name, and cold damage.\nconst string COLOR_LIGHT_BLUE   = \"<c™��>\";\n\n//Color used for system messages.\nconst string COLOR_LIGHT_GRAY   = \"<c���>\";\n\n//Color used for sonic damage.\nconst string COLOR_LIGHT_ORANGE = \"<c�™ >\";\n\n//Color used for a target's name.\nconst string COLOR_LIGHT_PURPLE = \"<c�™�>\";\n\n//Color used for attack rolls and physical damage.\nconst string COLOR_ORANGE       = \"<c�f >\";\n\n//Color used for spell casts, as well as magic damage.\nconst string COLOR_PURPLE       = \"<c�w�>\";\n\n//Color used for fire damage.\nconst string COLOR_RED          = \"<c�  >\";\n\n//Color used for positive damage.\nconst string COLOR_WHITE        = \"<c���>\";\n\n//Color used for healing, and sent messages.\nconst string COLOR_YELLOW       = \"<c�� >\";\n*/\nvoid main()\n{\nobject oEnterer = GetEnteringObject();\nobject oArea = GetArea(OBJECT_SELF);\nstring sPlayerID = GetPCPlayerName(oEnterer) + GetName(oEnterer);\nstring sTrigTag = GetTag(OBJECT_SELF);\nint bSeenOnce = GetLocalInt(OBJECT_SELF, sPlayerID+\"SeenOnce\");\n\nstring sString = GetLocalString(oArea,sTrigTag);\n\nif (GetIsPC(oEnterer) == TRUE && bSeenOnce == FALSE)\n    {\n    //Play sound\n    //AssignCommand(oEnterer, PlaySound(\"gui_spell_mem\"));\n    AssignCommand(oEnterer, PlaySound(\"as_cv_flute2\"));\n    //Send message to Player.\n    AssignCommand(oEnterer, SendMessageToPC(oEnterer,sString));\n    //Flag the player as having seen the message.\n    SetLocalInt(OBJECT_SELF, sPlayerID+\"SeenOnce\", TRUE);\n    }\n}Select All Text | View Code in separate window","Patch":"1.00","Description":"This handy little script allows the module builder to add unlimited amounts of flavor text to their module with only one script handling it all. \n\nThis code is very short, yet powerful. All \"textual information\" is handled as strings pulled off the area object. Full instructions are given in the code itself.","Rating":"N/A","Awards":[]},"9":{"Name":"Spell Duration Increase v0.5","Author":"CWolf","Submitted":20061108,"Updated":20061122,"Category":"Spells","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.01","Description":"These scripts were written to increase the duration of most buff and summon spells in NWN2. \n\nWhen I came to NWN2 I found the spell durations were too short. I heard talk that 3.5 rules reduced the spell duration but in the end I play a game to enjoy it. Having to rebuff my druid every few seconds just isn't fun for me. \n\nThis is a rough release. After 3 days of working to figure out things without much help on the nwn2 forums I came to this. Feedback will be most valuable. This includes 240 .ncs and .nss files which are recompiled spell scripts with little additions/modifications.\n\nNote: You will need to start a new game for this to work","Rating":"N/A","Awards":[]},"12":{"Name":"A way to play under other character name","Author":"Anthraxcite","Submitted":20061111,"Updated":20061122,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","ShowCode":"void main()\n{\n\tobject oActivator = GetItemActivator();\n\tobject oActivated = GetItemActivated();\n\tif(GetTag(oActivated)==\"TagHood\")\n\t{\n\t\tlocation locActivator = GetLocation(oActivator);\n\t\tif(GetLocalInt(oActivator,\"HoodedCharacter\")==1)\n\t\t{\n\t\t\tAssignCommand(oActivator,SpeakString(\"ici\"));\n\t\t\t//oActivator is the Hooded Character\n\t\t\tobject oPC = GetLocalObject(oActivator,\"MyPC\");\n\t\t\tAssignCommand(oPC,JumpToLocation(GetLocation(oActivator)));\n\t\t\tDespawnRosterMember(\"HC\");\n\t\t\tSetPlotFlag(oPC,FALSE);\n\t\t\teffect eEffectCutInvisibility = GetFirstEffect(oPC);\n\t\t\twhile(GetEffectType(eEffectCutInvisibility)!=EFFECT_TYPE_INVALIDEFFECT)\n\t\t\t{\n\t\t\t\tif(GetEffectType(eEffectCutInvisibility)==EFFECT_TYPE_VISUALEFFECT)\n\t\t\t\t{\n\t\t\t\t\tRemoveEffect(oPC,eEffectCutInvisibility);\n\t\t\t\t}\n\t\t\t\teEffectCutInvisibility = GetNextEffect(oPC);\n\t\t\t}\n\t\t}\n\t\telse if(!GetIsRosterMember(oActivator))\n\t\t{\n\t\t\t//oActivator is the PC\n\t\t\tobject oCopy = CopyObject(oActivator,locActivator);\n\t\t\tAddRosterMemberByCharacter(\"HC\", oCopy);\n\t\t\tAddRosterMemberToParty(\"HC\",oActivator);\n\t\t\tSetFirstName(oCopy,\"Hooded character\");\n\t\t\tSetLastName(oCopy,\"\");\n\t\t\tSetLocalInt(oCopy,\"HoodedCharacter\",1);\n\t\t\tSetOwnersControlledCompanion(oActivator,oCopy);\n\t\t\tApplyEffectToObject(DURATION_TYPE_PERMANENT,EffectVisualEffect(VFX_DUR_CUTSCENE_\nINVISIBILITY),oActivator);\n\t\t\tSetPlotFlag(oActivator,TRUE);\n\t\t\tSetLocalObject(oCopy,\"MyPC\",oActivator);\n\t\t}\n\t}\n}Select All Text | View Code in separate window","Patch":"1.00","Description":"Just a simple way to play your character under another name. Useful in multiplayer games if you want that your character unrecognizable by other players. The script is not perfect it's just a way to view how to do.\n\nInstallation\n-Create an item with the tag \"TagHood\" and with the power Unique Power Self\n-Place the script in OnActivateItem(modules properties)\n\nVersion francaise\nSimplement une fa�on de jouer son personnage sous un nom diff�rent. C'est util en multijoueur lorsque l'on souhaite que son personnage ne soit pas reconnaissable par les autres joueurs. Le script n'est pas parfait, il montre juste comment faire.\n\nInstallation\n-Cr�er un objet(item) avec le tag \"TagHood\" et la propri�t� \"Pouvoir unique sur soi uniquement\", de pr�f�rence avec la propri�t� Utilisation illimit�e\n-Placer le script dans l'emplacement \"Script d�clench� par l'activation d'un objet\" dans les propri�t�s du module.\n\nEnjoy,\n\nAnthraxcite","Rating":"N/A","Awards":[]},"13":{"Name":"Epic Gate (character and item filter)","Author":"Azmount Aryl","Submitted":20061112,"Updated":20061122,"Category":"Area","Type":"Type - Other","Format":"Module Only","Patch":"1.00","Description":"Anti Bad Strref filter.\nClasses Hack detector.\nAdvanced Log keeper.\n\nAs seen in Epic Arena.\n","Rating":"N/A","Awards":[]},"14":{"Name":"Lightable Torch holders","Author":"Puychaud","Submitted":20061112,"Updated":20061126,"Category":"Scripting routines","Type":"Type - Lighting","Format":"Code Only","ShowCode":"//This script ko_torch_ou will light a torch (or tiki) when a pc uses a torch on the object\n//It makes use of the placeable in MISC PROPS - Secret Object\n//1. Set a torch placeable where you want it, and place this script in the onused slot\n//2. Set Usable? to True, and Static to False\n//3. Create Secret Object from misc props somewhere you can find it again,open properties  \n//4. Give it the tag \"TorchFlame\", delete the OnHeartbeat script, and keep properties open.\n//5. Creat a torchglow from the Placed Effects blueprints and place it on the torch where you want the flame to appear\n//6. Open the torch glow properties and Copy and paste the figures in \"Position No Snap\" to the \"Position No Snap\" of the secret object\n//7. Close secret object properties and it should move to above the torch.  Delete the torchglow effect. \n//8. For the final touch, place a sound \"Torch Fire Medium\" on your torch, and set its Active property to false.\n\n//You will want to use more than one torch, group the torch and secret object, and export the group as a group prefab file\n//(usually to your module folder).  Move the Pfb file to your NWN2 folder \"overide\" and it will appear in your module placeables,\n// to be used repeatedly.  Unfortunately the Sound object will have to be set for each torch individually as it does not appear\n//as part of the prefab group\n\nvoid main()\n{\n   object oPC = GetLastUsedBy();\n   object oItem = GetItemInSlot(INVENTORY_SLOT_LEFTHAND, oPC);\n   string sItem = GetTag(oItem);\n   object oFlame = GetNearestObjectByTag(\"TorchFlame\");\n   location lLoc = GetLocation(oFlame);\n   effect eFlame = EffectNWN2SpecialEffectFile(\"fx_torchglow\", oFlame);\n   object oSound=GetNearestObjectByTag(\"TorchFireMedium\");\n   \n   \n   //Does the pc have a torch in left hand, and is torch already lit?\n \nif (sItem != \"NW_IT_TORCH001\")\n{\nstring sString = \"You must have a torch equipped to light this item.\";\nAssignCommand(oPC, SendMessageToPC(oPC,sString));\n}\n\n\n       if ((GetLocalInt(OBJECT_SELF,\"LIT?\") == 0)&&(sItem == \"NW_IT_TORCH001\"))\n   \t\t {\n\t\t //If so, apply effect to the hidden object\n   \t\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eFlame, oFlame);\n\t\tSetLocalInt(OBJECT_SELF,\"LIT?\",1);\n\t    //DelayCommand(0.5,RecomputeStaticLighting(GetArea(oSelf)));\n\t\t//Give torch some light effect\n        effect eLight = EffectVisualEffect(VFX_DUR_LIGHT_YELLOW_15);\n\t\tSoundObjectPlay(oSound);\n        ApplyEffectToObject(DURATION_TYPE_PERMANENT, eLight, oFlame);\n    }\n   \n}Select All Text | View Code in separate window","Patch":"1.02","Description":"This will allow PCs to light torches and tikis they find in the dungeon provide they have a torch in their hand - they simply have to use the torch holder or tiki - full instructions in the script. Feedback welcome","Rating":8.33,"Votes":3,"Awards":[]},"15":{"Name":"Fireburst ","Author":"Roeg","Submitted":20061112,"Updated":20061122,"Category":"Spells","Forum Thread":"Link","Type":"Type - Spell effects","Format":"Module Only","Patch":"1.02","Description":"Fixes a problem where fireburst will damage the caster in hardcore mode that existed as of 1.02. Targa on NWN2 board suggeted the code, I have compiled and packaged. Seems to work, your mileage may vary.\n\nPlace the two files in\n\nC:\\Documents and Settings\\\\My Documents\\Neverwinter Nights 2\\override\n\nBe sure to remove if Obsidian updates this spell in 1.03.\n","Rating":"N/A","Awards":[]},"16":{"Name":"Scripted Lighting System Version 2 (SLS2)","Author":"Brendan 'Slayster' Ellis","Submitted":20061112,"Updated":20100501,"Category":"Other","Type":"Type - Lighting","Format":"Code Only","Patch":"1.10","NWN2Game":"All","Description":"The Scripted Lighting System Version 2 (SLS2) is a set of scripts, blueprints and prefabs for Neverwinter Nights 2 module builders. The system allows builders to setup complex lighting effects without the need for extensive scripting knowledge.\nAll the main setup is done though variables.\n\nThe original SLS was a basic system which let builders set their lights to turn on and off at specified times of day allowing you to have an exterior area where the lights turned off during the day.\n\nI saw room for improvement and started working on SLS2. This ended up being a complete rewrite with SLS2 becoming a complete lighting control and event system.\n\nOf course SLS2 still allows you to set automatic day/night schedules for your lights but there are now many other ways of controlling what your lights do. Triggers, conversations and scripts can all be used to modify lights in different ways.\n\nThis is a replacement for SLS1 rather than an upgrade, more info in the docs.\nThe system requires MOTB or at least patch 1.10 so I've left the old version available should you require it.\n\nKey Features:\n* Day/Night settings for your lights \n* Control light from conversations/cutscenes \n* Change light with triggers \n* Easy script access to your lights \n* Turn lights on or off and change their colour \n* Set lights to run in a sequence \n* Have your guards automatically equip torches at night \n\nSLS2 Includes:\n* 43 light blueprints \n* 27 placed effect blueprints \n* Some fire re-colours for your more magical settings \n ( Link )\n* 54 placeable blueprints with preset variables \n* 109 prefabs ready to go with very little setup \n* All the scripts you need and a few miscellaneous extras\n \nIt's hard to show lighting effects properly in a screenshot\nso why not watch the video:\nLink\nor play the demo module:\nLink\n","Rating":9.5,"Votes":26,"Awards":["Hall of Fame"]},"17":{"Name":"Listen Based Text Capture","Author":"demetrious","Submitted":20061116,"Updated":20070118,"Category":"Scripting routines","Type":"Type - Combat","Format":"Code Only","Patch":"1.03","Description":"CREDIT: Deva B. Winblood for work on optimization of Listener\n\nListen Based Text Capture is a script system that allows novice scripters to utilize text capture via the standard chat interface in their modules. With respect to capturing the text, the installation of the system is very minimal. Basic scripting is required by the end user to perform desired actions on the captured text.\n\nThe entire package is 4 scripts and 1 creature template.\n\nAs with all my publically released work, if there are errors or if you have problems, please post or contact me and I'll work to help you out and/or improve the package.\n\nPlease take the time to vote and leave comments if you seriously looked at/have used the package in your work. Thanks.\n","Rating":8.92,"Votes":3,"Awards":[]},"18":{"Name":"Disregard","Author":"Mask","Submitted":20061116,"Updated":20081229,"Category":"Skill/Feats","Type":"Type - Combat","Format":"Code Only","Patch":"1.02","NWN2Game":"All","Description":"09MAY07 - As per Jasperre's post this is fixed as of 1.06 entry will be removed shortly after 1.06 is general release. \n\n29DEC08 - Finally got around to trashing this, has been fixed a long time now.","Rating":9,"Votes":1,"Awards":[]},"20":{"Name":"MPWC Spawn Beta6","Author":"mykael22000","Submitted":20061119,"Updated":20061207,"Category":"Spawning","Type":"Type - Spawning","Format":"Code Only","Patch":"1.03","Description":"Myks Persistant World Core\nSpawn Subsystem\nBeta 6\n\nSmart spawning of areas, including area cleanup.","Rating":9.44,"Votes":21,"Awards":[]},"21":{"Name":"UOAbigail's Crafting System v2.01c","Author":"UOAbigail","Submitted":20061120,"Updated":20070121,"Category":"Rulesets","Type":"Type - Trade Skill and Item Creation","Format":"Module and Code","Patch":"1.03","Description":"UOACraft v2.01c. UOACraft for NWN2 is still under development. This is an update containing bugfixes, two new skills, and many new items. Currently 6 skills are available. Lumberjacking, Mining, Smelting, Digging, Foraging, and Farming. More in next update.","Rating":9.85,"Votes":7,"Awards":[]},"22":{"Name":"Exploding Barrel","Author":"dirtywick","Submitted":20061122,"Updated":20061122,"Category":"Placeable Item","Type":"Type - Other","Format":"Module and Code","ShowCode":"//barrel explodes dealing damage to everything around it\n//set-up:  paint an explosive barrel (or whatever).  Create a new faction for this barrel,\n//and set the faction to hostile against everything, and everything friendly to it.  This \n//ensures that it can destroy the rock with the fireball, and that nothing will hit the \n//barrel except a PC.  Change the tag of the barrel to \"barrel01\" and set it's hit points\n//to some high number\n//\n//\n//place another object near it.  scale down that other object to a very small size and \n//place it \"inside\" of the barrel.  Change the tag of the object to \"TARGET_barrel01\".  \n//Set the hit points of the object to 1.\n//\n//\n//Make a script for the object as follows and place it in OnDeath:\n\n//\n//Make this script for the barrel and place it in OnDamage\n//\n//You got yourself and exploding barrel.  Other spells/effects work too with \n//some minor changes.\n\n\nvoid main()\n{\t\n\t\n    \n\n\tstring sTarget = \"TARGET_\" + GetTag(OBJECT_SELF);\n\tlocation lTarget = GetLocation(GetObjectByTag(sTarget));//gets location of object to destroy the barrel\n\n\teffect eVis = EffectVisualEffect(VFX_IMP_FLAME_M);//flames\n\teffect eExplode = EffectDamage (d6(5), DAMAGE_TYPE_FIRE);//damage dealt\n\t\n\tint nNth = 1;\n\tobject oTarget = GetNearestObject(OBJECT_TYPE_ALL, OBJECT_SELF, nNth);//chooses target\n\t\n\tActionCastSpellAtLocation(SPELL_FIREBALL,lTarget,METAMAGIC_NONE,TRUE,PROJECTILE_\nPATH_TYPE_DEFAULT,TRUE);//visual effect/destroys object that destroys barrel\n\t\n\twhile(GetDistanceBetween(OBJECT_SELF, oTarget) <= 5.0f)//ensures only effects things within 5 feet, if nothing else is there ends loop\n\t{\n\t\t\n\t\t\n\t\tint DoOnce = GetLocalInt(oTarget, GetTag(OBJECT_SELF));\n\t\tif (DoOnce==TRUE) return;\n\t\tSetLocalInt(oTarget, GetTag(OBJECT_SELF), TRUE);//makes sure it only happens once\n\t\t\n\t\tApplyEffectToObject(DURATION_TYPE_INSTANT, eVis, oTarget);\n\t\tApplyEffectToObject(DURATION_TYPE_INSTANT, eExplode, oTarget);//applies fire/damage\n\t\t\n\t\tnNth++;\n\t\toTarget = GetNearestObject(OBJECT_TYPE_ALL, OBJECT_SELF, nNth);//moves on to next object\n\t}\n}Select All Text | View Code in separate window","Patch":"1.02","Description":"Hit the barrel and it explodes, but don't stand too close.","Rating":10,"Votes":2,"Awards":[]},"23":{"Name":"Glowing eye Patch1.1","Author":"Butcha","Submitted":20061122,"Updated":20061125,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.00","Description":"Very easy script but it looks very nice :)\n1.1 patched\nAlignments:\nGood = Blue eye glow\nNeutral = Yellow eye glow\nEvil = Red eye glow\n\naddet OnPlayerDeath eye fix","Rating":10,"Votes":2,"Awards":[]},"24":{"Name":"Fixed Greater Fireburst","Author":"masotime","Submitted":20061124,"Updated":20061125,"Category":"Spells","Type":"Type - Combat","Format":"Code Only","Patch":"1.02","Description":"Fixes a bug in the Greater Fireburst spell script that was causing the spell to do half damage rather than the full [lvl]d8.","Rating":"N/A","Awards":[]},"25":{"Name":"Add Persistent Displacement","Author":"masotime","Submitted":20061124,"Updated":20061125,"Category":"Spells","Type":"Type - Combat","Format":"Code Only","Patch":"1.02","Description":"Allows the persistent feat to work on the displacement spell, making it a level 9 alternative to NWN1's Improved Invis (in terms of a long-duration 50% concealment).","Rating":6,"Votes":1,"Awards":[]},"26":{"Name":"Area Scripts- Magic damage and penalties","Author":"Joe Hines","Submitted":20061125,"Updated":20110811,"Category":"Area","Type":"Type - Other","Format":"Module Only","ShowCode":"void RemoveXPFromParty(int nXP, object oPC, int bAllParty=TRUE)\n{\n\nif (!bAllParty)\n   {\n   nXP=(GetXP(oPC)-nXP)>=0 ? GetXP(oPC)-nXP : 0;\n   SetXP(oPC, nXP);\n   }\nelse\n   {\n   object oMember=GetFirstFactionMember(oPC, TRUE);\n\n   while (GetIsObjectValid(oMember))\n      {\n      nXP=(GetXP(oMember)-nXP)>=0 ? GetXP(oMember)-nXP : 0;\n      SetXP(oMember, nXP);\n      oMember=GetNextFactionMember(oPC, TRUE);\n      }\n   }\n}\nvoid main()\n{\n\nobject oPC = GetEnteringObject();\n\nif (!GetIsPC(oPC)) return;\n\nif (!GetIsSkillSuccessful(oPC, SKILL_SPELLCRAFT, 20))\n   return;\n\nif (d100()>75)\n   return;\n\neffect eEffect;\neEffect = EffectDamage(3, DAMAGE_TYPE_MAGICAL, DAMAGE_POWER_NORMAL);\n\nApplyEffectToObject(DURATION_TYPE_INSTANT, eEffect, oPC);\n\nAssignCommand(oPC, ActionSpeakString(\"*flinches*\"));\n\nobject oTarget;\noTarget = oPC;\n\neEffect = EffectSpellFailure(100, SPELL_SCHOOL_GENERAL);\n\nApplyEffectToObject(DURATION_TYPE_TEMPORARY, eEffect, oTarget, 6.0f);\n\neEffect = EffectNegativeLevel(1);\n\neEffect = SupernaturalEffect(eEffect);\n\nApplyEffectToObject(DURATION_TYPE_TEMPORARY, eEffect, oTarget, 20.0f);\n\neEffect = EffectDazed();\n\nApplyEffectToObject(DURATION_TYPE_TEMPORARY, eEffect, oTarget, 3.0f);\n\nRemoveXPFromParty(20, oPC, FALSE);\n\n}\nSelect All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"This handy-dandy script can be put into areas full of little arcane treasures.\n\njust plop it into the area's heartbeat script, and characters will have to make a spellcraft check (DC 20), or there is a 75% chance that they have 3 points of magical damage done to them, have a negative level put on them for 20 seconds, \nbe dazed for 3 seconds, and for the next 6 seconds, be unable to cast a spell.\n\n\nThis is not to be used in PvP modules. If it seems like this script is being used in a PvP arena module, please drop me a line at \"Link6746@comcast.net\"\n\ninclude:\n\nThe module name, the server name, what the script did, and the state in which you live \n(in case the server is only playable by those in a certain state or area of the US)\n\n\nAlso, I have yet to test this script, so it would be appriciated if one of the users could tell me if it works.\n\nit compiled correctly, but I don't know if it will work as intended.\n\nThis is intended to make entrance to the area a bit more interesting for spellcasters and melee classes.","Rating":9.5,"Votes":1,"Awards":[]},"27":{"Name":"MPWC Biography Beta 6","Author":"Mik Clarke","Submitted":20061125,"Updated":20061207,"Category":"Inventory Item","Type":"Type - Other","Format":"Code Only","Patch":"1.03","Description":"Myks Persistant World Core\nBiography Subsystem\nBeta 6\n\nProvides three items to assist with RP\n\nAn examine wand that let people attach dynamic descriptions to their characters.\n\nA journal, that lets people write things and which can be copied or given to others.\n\nA pen, which lets them rename things.\n\nRequires the MPWC PC Hide package.","Rating":"N/A","Awards":[]},"28":{"Name":"MPWC Medic Beta 6","Author":"Mik Clarke","Submitted":20061125,"Updated":20061207,"Category":"Inventory Item","Type":"Type - Other","Format":"Code Only","Patch":"1.03","Description":"Myks Persistant World Core\nMedic Subsystem\nBeta 6\n\nA set of objects to replace heal packs.\n\nBandages, to heal some wounds.\nAn antidote kit to treat poisons.\nAn apothercry's kit to treat diseases.\nA wand to determine what is wrong with people.\n","Rating":"N/A","Awards":[]},"29":{"Name":"MPWC PC Hide Beta 6","Author":"Mik Clarke","Submitted":20061125,"Updated":20061207,"Category":"Scripting routines","Type":"Type - PC Players","Format":"Code Only","Patch":"1.03","Description":"Myks Persistant World Core\nPC Hide Subsystem\nBeta 6\n\nAn API for a PC hide system, and a minimalist impelmentation.\n\nUsing a PC hide on a PW allows you to store persistant data about that PC (provided they are a server vault character).\n\nNote that using it also requires that you turn the ELC check off.","Rating":"N/A","Awards":[]},"30":{"Name":"Markshire Quill of PC Recording","Author":"Markshire","Submitted":20061127,"Updated":20110429,"Category":"Inventory Item","Forum Thread":"http://www.markshire.com/phpBB2/index.php","Type":"Type - PC Players","Format":"Code Only","ShowCode":"Add this to your OnEnter script for your start area and it will hand out the Quill automatically.\n\n//// CODE ////\n\n#include \"nw_i0_plot\"\n\nvoid main ()\n{\n\tif (HasItem(GetEnteringObject(), \"ms_savewidget\") == FALSE) CreateItemOnObject(\"ms_savewidget\", GetEnteringObject());\n}\n\n//// END CODE ////Select All Text | View Code in separate window","Patch":"1.05","NWN2Game":"All","Description":"Now on Facebook!\n\nA custom item and script pair for saving PCs to the servervault (multiplayer) or localvault (single player).\n\nThis is an updated version of our original script for NWN1. (http://nwvault.ign.com/View.php?view=Scripts.Detail&id=2820)\n\nWe wanted to include a message to the PC stating that their character had been saved. The message includes the Module's name.\n\nIt also writes the fact that the player saved to the server log for tracking purposes.\n\nSee the attached screenshot for a sample message. Both messages can easily be updated within the script. \n\nThe included ERF is built to use the new tagbased scripting of NWN2. Simply import it into your module and hand out the item located in Plot Items.\n\nLogging is included based on NWN1. We are still researching logging for NWN2 and will update the script for any changes necessary.\n\n\nFor a lot more screenshots from our world please visit: Markshire. \n\nOther NW Vault Submissions:\nGame World\n\nMarkshire :: Kingdom of IceScripts for NWN1 \n\nMagic Carpet TransitionsMarkshire Experience and Teamwork SystemMarkshire's Nerfed Pulse DrownMarkshire's NomenclatureMPCS: Markshire Persistent Chest SystemQuill of PC RecordingScripts for NWN2 \n\nMarkshire Climbing SystemMarkshire Explosive BarrelsMarkshire Quill of PC Recording Fan Fiction \n\nA Missed Adventure Kurm and the Sewer King's Curse A Harrowing Story Loki's Foulest TrickRising ForceThe Mad Red Titan: Part OneThe Mad Red Titan: Part TwoThe Mad Red Titan: Part ThreeScreenshots\n\nA Cold New WorldA Community of FriendsA Dangerous RealmGiant Plots DevelopHidden StrongholdsOur Loyal Fans!Releasing the ThirteenNWN Ideas\n\nDisguise SystemNWN 2 Ideas\n\nJournal Export PluginExpansions on Markshire Submissions\n\nAerisarn's edited Markshire Persistent Portable Chests by AerisarnJournal exporter/importer by Sothis BPC Role-Play Disguise Kit by Velkyn","Rating":8.33,"Votes":5,"Awards":[]},"31":{"Name":"Vector Library v1.02","Author":"Clement Poh","Submitted":20061128,"Updated":20061204,"Category":"Area","Type":"Type - Other","Format":"Code Only","Patch":"1.02","Description":"A basic library for vectors. Vector library per se might be a misnomer because the point of the library was so that one doesn't need to fiddle around with vectors, just that vectors are used internally. However the library does come with in built functions for things like dot and cross products in the case the user wants to work at a lower level. More for proof of concept than anything else.\n\nUpdate History:\n04/12/06 - v1.02:\n- Added short demonstration module, more strange functions can be found in the module, so please check it out.\n- Changed the way family of LocAtAngleTo* functions work. the angle of 0.0 degrees is the facing of the reference location or object.\n- Added slightly more abstraction.\n\nNotes:\nGenerally, a vector has a magnitude, and a direction. In the case of NWN2, vectors are used to represent positions in an area. these vectors consist of three parts, the x, y and z coordinates because NWN2 Areas are three dimensional.\n\nUses:\nBecause vectors are so abstract, they're useful to find locations relative to other objects or locations.\ne.g. LocInFrontOfObj(oPC, 5.0);\nwould return a *Location* (not vector) 5.0 units in front of the PC.\n\ntherefore you can use it in the context:\nActionJumpToLocation(LocBehindObj(oPC, 5.0));\nAnd the action subject will teleport 5.0 units behind the PC.\n","Rating":10,"Votes":2,"Awards":[]},"32":{"Name":"Dave's Simple Creature Respawn","Author":"Dave","Submitted":20061129,"Updated":20061130,"Category":"Entire Module/PW systems","Type":"Type - Spawning","Format":"Code Only","Patch":"1.02","Description":"This is a VERY simple to use script to replace two default scripts that cause all creatures to respawn according to two variables. Help file is included.","Rating":9.81,"Votes":4,"Awards":[]},"33":{"Name":"Flavor Text System","Author":"Lord Niah","Submitted":20061202,"Updated":20061203,"Category":"Other","Type":"Type - Other","Format":"Code Only","Patch":"1.02","Description":"Import ch_flavortextsystem into your module and then use any of the three following triggers (located under trigger blueprints � Flavor Text):\n \n#1 Flavor Text Trigger -- this will display a custom text message to the player. \n#2 Skill Check Trigger � this will run a skill check and display a custom message if successful.\n#3 Ability Check Trigger � this will run an ability check and display a custom message if successful.\n\nTo configure each trigger you will have to change the values of several variables. The most important one is sMessage, which should contain the text you want to display. For more information on configuring the triggers, see the notes in each trigger�s description.\n\n\nIf you experience any bugs, please report them here.\n\n","Rating":9.67,"Votes":5,"Awards":[]},"34":{"Name":"Daves World","Author":"Dave","Submitted":20061202,"Updated":20080713,"Category":"Entire Module/PW systems","Type":"Type - Other","Format":"Module and Code","Patch":"1.12","NWN2Game":"All","Description":"This is an example module and .erf featuring a few seperate systems/ NPCs/ Useful items.\n\nRandomly Generated Weapons and Armor\nRespawnable Traps\nRest Altar\nSuper Easy Respawn System (for creatures and chests)\nNo frills shopkeeper NPC\nNo frills Priest NPC\nPW Friendly Secret Doors\n\nThey are all designed around being very easy to use and implement. ","Rating":8.38,"Votes":6,"Awards":[]},"36":{"Name":"The Watching Eye Filter","Author":"Nepherte","Submitted":20061205,"Updated":20110211,"Category":"Rulesets","Type":"Type - Anti Cheating","Format":"Code Only","Patch":"1.03","Description":"This is a filter script, based on CFBMoo1's Moo Filter 1.3, that scans items and enforces valid players. It is designed for local vault pvp, other purposes are also possible.\nIt is easy configurable by editing twe_fsettings_inc and the whole script is documented for the scripters among us. Some features: configurable Ac, Ab, Eb, res, stats and skills on items.\nLooks for invalid achieved classes, invalid properties (such as immunities, regeneration, on hits (all optional), crashing characters, hacks,\nnerfing invalid appearances and polymorph bug. Contains an antithief feature, filters vs. none items (optional) and Badstreff items. Bug report to nepherte@gmail.com","Rating":9.56,"Votes":4,"Awards":[]},"37":{"Name":" DMFI Player / DM User Package","Author":"Demetrious / DMFI Design Team","Submitted":20061207,"Updated":20080727,"Category":"Scripting routines","Type":"Type - Classic PnP","Format":"Module and Code","Patch":"1.10","NWN2Game":"All","Description":" DMFI Player / DM User Package: Version 1.10b\n\nRelated DMFI Developer Package\n\nThis package is designed for Players or DMs who would like to try out the DMFI package and / or use the package on a multiplayer server.\n\nThe DM-Friendly Initiative (DMFI) Tools Package is a community-built package that aims to improve the player and DM experience in multiplayer games.\n\nThis download package contains end-user files for both DMs and Players:\n\nDMFI NWN2 Tools hak (required)\nVersion 1.10 readme\nDMFI demo/tutorial module\n\n\nNEW FEATURES IN 1.10\n- The target tool: this new UI screen will take care of all the functions in the old contextmenu. It's separated by two panes, one for the server options and another for the object options. It will show the name of the current target and the buttons will fire the commands.\n- The manager tool: This UI screen will store items and creatures in a database to retrieve them later. Up to 20 slots.\n- Battle tool: 2 more buttons to add or decrease Spell Resistance.\n- Placeables: Make placeable \"plot\", destroy placeable, and destroy placeables in 3 different radius.\n- Report Location: will show a screen with PC's locations, PublicCDKeys, Current Hit Points and debug numbers.\n- Weather: added weather functions.\n- DM Party Tools:\nGetOutOfMyWay: fires the new OEI joke, gets players out of the way who are around you.\nJump a party to DM: Jump all players to DM and jump player to his party leader.\nCreate Teleport Portals.\nSend Message Popups to all players or targeted party.\n- Added FOLLOW buttons to DM bar.\n- VFX Tool, added support for Custom NWN2 effects. Just type the name of the effect and fire it on location or target.\n- Added a little button to DMFI text which allows a player's language to be changed quickly.\n\nDOWNLOAD:\n\nDownload the version 1.10b package. \n\nINSTALLATION:\n\nPlace the DMFI hak file into your NWN2/hak folder.\n\nFeedback and suggestions are always welcomed. Visit the DMFI guild forums for discussion and latest news.","Rating":9.96,"Votes":40,"Awards":["Hall of Fame"]},"38":{"Name":" DMFI Developer Package","Author":"Demetrious / DMFI Design Team","Submitted":20061207,"Updated":20080727,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Classic PnP","Format":"Module and Code","Patch":"1.10","NWN2Game":"All","Description":"DMFI Developer Package: Version 1.10b\n\nRelated DMFI Player / DM User Package\nThis package is designed for builders and developers who will install the DMFI Tools into a working module.\n\nDM-Friendly Initiative (DMFI) Tools Package is community-built package that aims to improve the player and DM experience in MP games. Your feedback and comments are welcome, see the link above to the DMFI forums.\n\nThe NWN2 version represents brand new code with a new structure from the ground up. We have been fortunate to have several very talented professional programmers from within the NWN1 community contribute to helping create this new foundation. This is a project that has been in serious development for over 6 months with initial discussions dating back over a year.\n\n\nMAJOR FEATURES\n\n- 100% UI Driven\n\nThe current DMFI Tools do not use listeners, instead the entire package is UI driven.\n\n- Commands\n\nNew UIs and additions to the context menu provide far better access to commands!\n\n- Text Entry UI\n\nA new text entry box supports voice throws, languages, emotes, and player messaging through one nice interface - again with no listeners. \n \n- Documentation\n\nVersion 1.10 readme file included, along with an example demo/tutorial mod to help ease you into the package. \n\nNEW FEATURES IN 1.10\n- The target tool: this new UI screen will take care of all the functions in the old contextmenu. It's separated by two panes, one for the server options and another for the object options. It will show the name of the current target and the buttons will fire the commands.\n- The manager tool: This UI screen will store items and creatures in a database to retrieve them later. Up to 20 slots.\n- Battle tool: 2 more buttons to add or decrease Spell Resistance.\n- Placeables: Make placeable \"plot\", destroy placeable, and destroy placeables in 3 different radius.\n- Report Location: will show a screen with PC's locations, PublicCDKeys, Current Hit Points and debug numbers.\n- Weather: added weather functions.\n- GetOutOfMyWay: fires the new OEI joke, gets players out of the way who are around you.\n- Jump a party to DM: Jump all players to DM and jump player to his party leader.\n- Create Teleport Portals.\n- Send Message Popups to all players or targeted party.\n- Added FOLLOW buttons to DM bar.\n- VFX Tool, added support for Custom NWN2 effects. Just type the name of the effect and fire it on location or target.\n- Added a little button to DMFI text which allows a player's language to be changed quickly.\n\n\n DOWNLOAD\n\n- Download the v1.10b developer package. \n\nINSTALLATION\n\n- Installation of DMFI files into your own mod: associate the DMFI version 1.10 hak with your mod, import the included erf file, compile module scripts. Place the dmfi_mod_pcload script in the On PC Loaded Script event of your module.\n\n\n1.10 PATCH NOTES:\n\nFixes:\n- DMFI Tools now work with NWN2 and Mask of the Betrayer patch 1.10\n- Added support for DisplayguiScreen() updated function. This means you no longer need a modified .ini file.\n- Support for Mask of the Betrayer content: appearances, music, ambient sound.\n- Languages: DMs could not understand racial languages while possessing NPCs. Fix provided by Dragonsbane777.\n- Languages: previously any chat line starting with a number crashed the system. (However, see below known issues)\n- CopyObject (used for making copies of PCs): copies were previously hostile faction and lootable. Fix provided by Dragonsbane777.\n\nKnown issues:\n- Languages: only text between quotation marks (\" \") or apostrophes (' ') will appear if these are used in chat, not the rest of the chat line. This occurs because of the XML processor and cannot be fixed at this time, but a work-around is available: put the entire chat line in quotation marks.\n- If you start a phrase on the chat line with a number, the server/module still has a 10% chance to crash. Hopefully OEI will fix this in a future as sometimes the string values are interpreted as integers.\n\nFeedback and suggestions are always welcomed. Visit the DMFI guild forums for discussion and latest news.","Rating":9.91,"Votes":35,"Awards":["Hall of Fame"]},"39":{"Name":"MPWC Campaign DB Beta 6","Author":"Mykael22000","Submitted":20061207,"Updated":20061207,"Category":"Scripting routines","Type":"Type - Player State Tracking","Format":"Code Only","Patch":"1.03","Description":"Myks Persistant World Core\nCampaign DB Subsystem\nBeta 6\n\nThis provides an API for a campaign database and a minimalist implementation.","Rating":"N/A","Awards":[]},"40":{"Name":"MPWC NPC Beta 6","Author":"mykael22000","Submitted":20061207,"Updated":20061207,"Category":"Scripting routines","Type":"Type - Spawning","Format":"Code Only","Patch":"1.03","Description":"Myks Persistant World Core\nNPC Subsystem\nBeta 6\n\nRoutines for persistant random NPC customization, npc variation and an alternate XP subsystem.\n\nRequires MPWC Campaign DB","Rating":"N/A","Awards":[]},"41":{"Name":"MPWC Polyinflate Beta 6","Author":"mykael22000","Submitted":20061207,"Updated":20061207,"Category":"Scripting routines","Type":"Type - Spawning","Format":"Code Only","Patch":"1.03","Description":"Myks Persistant World Core\nPolyinflate Subsystem\nBeta 6\n\nA routine to turn a dropper object into one or more real objects, designed to randomly equip critters, randomly generate loot and randomly stock stores.\n\nIncludes a number of blueprints for items and droppers.","Rating":9.38,"Votes":2,"Awards":[]},"42":{"Name":"csf - common scripting framework","Author":"EPOlson","Submitted":20061208,"Updated":20070209,"Category":"Entire Module/PW systems","Type":"Type - Event","Format":"Module and Code","Patch":"1.03","Description":"The Common Scripting Framework (CSF) addresses the problems that designers encounter when incorporating various packaged systems into their module. Many modules will use several systems (e.g. DMFI, HABD, HCR, NESS, etc) Most require the editing/merging of module or area event scripts and demand the designer follow detailed instructions to install and update the systems. CSF allows the module designer to easily install, remove and configure any number of packaged systems. It is essentially a simple way to manage queues of scripts for various module events.\n\nThe CSF was based on ideas, discussions and examples from many people in the NWN scripting community, including Pentane, Demetrious, rdjparadis, futurewavecs, Sunjammer and many other. All of the bugs in the CSF code are strictly mine (EPOlson) \n\nThe CSF code and documentation has been updated for NWN2 and includes a toolset plugin that simplifies installation and configuration. ","Rating":9.86,"Votes":9,"Awards":[]},"43":{"Name":"To sit on objects (v1.76)","Author":"Patcha","Submitted":20061209,"Updated":20070615,"Category":"Placeable Item","Type":"Type - Sitting","Format":"Module and Code","Patch":"1.06","Description":"ENGLISH:\nI'm providing to you the way to let objects be \"sittable\" and the script that allow PC to sit on them!\n\nv1.00\nIncluded files are:\n- script (in a .erf to import)\n- the English and Italian tutorial to bring objects \"sittable\"\n- a module with many benchs and chairs, to test this method\n\nv1.50\n- Now the system/method is adapted to different sized PCs.\n- Now the .erf contains a dialog, for feedbacks, too.\n\nv1.60\n- Now the twisting degrees for sitting PCs and the PC size target are setted by local PLCs' \"Variables\" in the \"Properties\" window, no more by specific forced target.\n- Tutorial explains how to update from old versions.\n- [NWN2 Patch 1.03] Italian female feedback now avaible for wrong sized PCs.\n- Now you can decide to download an .erf version which contains 4 sample benchs already setted.\n\nv1.65\nThat update interests only tutorials and SitArea sample module.\nIt adds a suggestion on how to make double or multiple seat objects.\nIt's yet based on 1.60 \"pat_sitting\" script, so doesn't require an update of old single seat objects.\n\nv1.75\n- New alternative system to create auto-fitting sit objects for both PCs height (compatible with old system)!\n- Invisible sit boxes' blueprints for 1.65's multiple seat objects (instead of lowered stools)!\n- \"pat_sitting\" script will automatically recognize taken seats.\n- 4 benchs samples blueprints (various types), and auto-fit samples blueprints: 2 stools and 2 chair.\n- While sitting, PCs heading will not overcome 360°.\n- Tutorial file is in pdf format. You may need Adobe Acrobat Reader 8.0 to read it: Link\n- Italian and English materials are splitted into only two main downloads (plus SitArea sample module).\n\nv1.76\n- [NWN2 Patch 1.06] Now feedbacks will be whispered instead of talked.\n\nNOTE: that solution doesn't use the script \"ActionSit()\" and doesn't require an hackpack. \nAnd potentially may work with every object! Not just chairs and benchs! \nIt only needs some \"manual work\"... (READ THE TUTORIAL!!!). \n\n\n------------------------\n\nITALIANO:\nVi fornisco il modo per rendere \"sedibili\" (suona da schifo, ma a me piace così :D) gli oggetti e lo script per permettere ai PG di sedercisi sopra!\n\nv1.00\nI file inclusi sono:\n- script (contenuto in un .erf da importare)\n- i tutorial in inglese e in italiano per rendere \"sedibili\" gli oggetti\n- un modulo con delle sedie e delle panche, per provare questo metodo\n\nv1.50\n- Ora il sistema/metodo è stato adattato ai PG dalla statura differente.\n- Ora il .erf contiene anche un dialogo, per i feedback.\n\nv1.60\n- Ora i gradi per girare i PG seduti e la categoria di dimensione dedicata sono settati tramite \"Variabili\" locali dei PLC nella finestra delle \"Proprietà\", non più tramite specifici target forzati.\n- Il manuale spiega come aggiornare dalle versioni precedenti.\n- [Patch 1.03 di NWN2] Ora sono disponibili i feedback in italiano per i PG femminili di dimensioni non consentite.\n- Ora potete decidere di scaricare una versione del .erf che contiene 4 esempi di panchine già settate.\n\nv1.65\nQuesto aggiornamento riguarda soltanto i manuali ed il modulo dimostrativo SitArea.\nAggiunge un suggerimento su come creare oggetti dalla seduta doppia o multipla.\nÈ ancora basato sullo script pat_sitting 1.60, quindi non richiede l'aggiornamento dei vecchi oggetti a seduta singola.\n\nv1.75\n- Nuovo sistema alternativo per creare oggetti auto-adattanti alla statura del PG che si sta sedendo (compatibile col vecchio sistema)!\n- Dei progetti di Box invisibili per la seduta, inclusi per gli oggetti a seduta multipla della 1.65 (invece degli sbabelli ribassati)!\n- Lo script \"pat_sitting\" riconoscerà automaticamente i posti a sedere già occupati.\n- 4 progetti di panche d'esempio (vari tipi), e progetti auto-adattanti d'esempio: 2 sgabelli e 2 sedie.\n- Mentre si siedono, la direzione dello sguardo dei PG non andrà più oltre i 360°.\n- Il manuale è in formato pdf. Potreste aver bisogno di Adobe Acrobat Reader 8.0 per leggerlo: Link\n- Il materiale italiano ed inglese è stato diviso in due download principali (più il modulo d'esempio SitArea).\n\nv1.76\n- [Patch 1.06 di NWN2] Ora i feedback verranno sussurrati invece che parlati.\n\nNOTA: questa soluzione non usa lo script \"ActionSit()\" e non richiede un hackpack. \nE potenzialmente può funzionare con qualsiasi oggetto! Non solo sedie e panchine! \nServe solo un po' di \"lavoro manuale\"... (LEGGETE IL MANUALE!!!).","Rating":8.81,"Votes":14,"Awards":[]},"44":{"Name":"Gith Silver Sword implement","Author":"Patcha from Obsidian OC","Submitted":20061209,"Updated":20070420,"Category":"Inventory Item","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.02","Description":"Needed script files to let Gith's Silver Sword works properly in your NEW personal modules and let new players use their old OC characters.\nLet me know if there are things that seems still not working!\n\nNOTE: Just import the .erf that contains script files... the sword will works automatically (if owned by PC). Nothing else needed.","Rating":7.44,"Votes":4,"Awards":[]},"45":{"Name":"Change companion class","Author":"Rowne, bladi","Submitted":20061210,"Updated":20070105,"Category":"NPCs","Type":"Type - Henchmen","Format":"Module and Code","Patch":"1.03","Description":"Is a stupid script that permit to change the class of your npc in the game.\nFor example i prefear shandra to be a barbarian and neeshka to be a ranger.\n\nIs the same script that change kelgar from \"fighter to XXXX\"\n\nBasic Instructions ...\n\nThese are acquired by using just charmgr().\n\nEvery instance of charmgr() must be prefixed with rs whilst in debugmode, for example:\n\nDebugMode 1\nrs charmgr()\n(And when you're done ...)\nDebugMode 0\n\nThis will cite the three main utilities this function provides; to be able to reset a character to any level, to be able to change companions class and to be able to alter alignment in any way the player desires.\n\nChanging Class ...\n\nOnly companions can do this, here's the complete list ...\n\n1. Bard\n2. Warlock\n3. Barbarian\n4. Cleric\n5. Druid\n6. Ranger\n7. Fighter\n8. Sorcerer\n9. Mage\n10. Monk\n11. Paladin\n12. Rogue","Rating":8,"Votes":3,"Awards":[]},"46":{"Name":"Working Sundial / Meridiana Funzionante (v3.1)","Author":"Patcha","Submitted":20061212,"Updated":20070615,"Category":"Placeable Item","Type":"Type - Time","Format":"Code Only","Patch":"1.06","Description":"ENGLISH\nWorking Sundial v3.1\n\nThis zipped file conteins a .erf file to be imported into your module.\nImporting the .erf file, you'll add 1 dialogue, 2 script files and 7 placeable blueprints.\nThe dialogue is:\n- pat_sundial : conteins autotranslating (ENG/ITA/FRE) time texts, that are the sundial feedback.\nThe three script files are the next:\n- pat_sundial_time : checks the time and gives you the right time answer through sundial's dialogue.\n- pat_time_advance : allow you to move forward the time by placeable variables settings.\nThe seven blueprints regard:\n- Manmade Props:\n-- Sundial {working} : Working Sundial's blueprint\n- Misc Props:\n-- One Hour Forward Lever : the lever's blueprint that allows you move forward by an hour (game)\n-- One Minute Forward Lever : the lever's blueprint that allows you move forward by a minute (real)\n-- Five Hours Forward Lever : the lever's blueprint that allows you move forward by 5 hours (game)\n-- Five Minutes Forward Lever : the lever's blueprint that allows you move forward by 5 minutes (real)\n-- Midday / Midnight Time Lever : the lever's blueprint that switchs to next midday / midnight (game)\n-- Template Time Lever : just a template to create new custom time levers\n\nSunidial dialogue:\nThe dialogue support English, Italian and French (by lePendu), but you can translate or customize each sentence.\n\nSundial scripts:\nThe script will automatically adapt to your \"Minute per game hours\" module's property.\nThe sundial starts working at dawn and shuts off at sunset.\n\nLevers scripts:\nLevers' script return only English sentences.\nLevers has only a test utility. Not needed to be present into the module.\nYou can create custom multi-funcional new levers.\n\nNOTE: If you create a new translation, let me know!\nv3.01:\n- a minor bug fixed in the \"Midday/Midnight Lever\" feedback.\n- setted a default description to the Sundial.\nv3.02:\n- a minor inaccuracy fixed: now script will be totally jumped in dark hours.\n- sundial uses original NWN1 sundials description by ResRef (by default NWN2 uses no description)\n- readme file is in pdf format. You may need Adobe Acrobat Reader 8.0 to read it: Link\nv3.10:\n- Lighter: now main script will be executed only one time, instead than up to 50 times!\n- [NWN2 Patch 1.06] Now feedbacks will be whispered instead of talked.\n- Italian and English materials are splitted into two main downloads.\n\n--------------------------------\n\n\nITALIANO\nMeridiana Funzionante v3.1\n\nQuesto file zippato contiene un .erf da importare nel vostro modulo.\nImportando il .erf, aggiungere 1 dialogo, 2 file di script e 7 progetti di posizionabili.\nIl dialogo è:\n- pat_sundial : contiene gli orari autotradotti (ING/ITA/FRA), che sono il feedback della meridiana.\nI tre file di script sono i seguenti:\n- pat_sundial_time : verifica l'orario e ritorna la risposta giusta tramite il dialogo della meridiana.\n- pat_time_advance : vi permette di far avanzare il tempo in base alle variabili dell'oggetto.\nI sette progetti riguardano:\n- Accessori fatti dall'uomo:\n-- Sundial {working} : il progetto della meridiana\n- Accessori vari:\n-- One Hour Forward Lever : progetto della leva che permettere d'avanzare di un'ora (di gioco)\n-- One Minute Forward Lever : progetto della leva che permettere d'avanzare d'un minuto (reale)\n-- Five Hours Forward Lever : progetto della leva che permettere d'avanzare di 5 ore (di gioco)\n-- Five Minutes Forward Lever : progetto della leva che permettere d'avanzare di 5 minuti (reali)\n-- Midday / Midnight Time Lever : progetto della leva che passa al/la prossimo/a mezzogiorno/notte\n-- Template Time Lever : un template per creare nuove leve del tempo personalizzate\n\nDialoghi della Meridiana:\nIl dialogo supporta inglese, italiano e francese (by lePendu), ma potete tradurre o personalizzare ogni frase.\n\nScript della Meridiana:\nLo script si adatterà automaticamente al settaggio \"Minuti per ora di gioco\" nelle proprietà del modulo.\nLa meridiana inizia a funzionare all'alba e smette al tramonto.\n\nScript delle Leve:\nGli script per le leve ritornano solo frasi in inglese, ma la parte importante è comunque comprensibile.\nLe leve sono state inserite a titolo di testing. Non è obbligatoria la loro presenza nel modulo.\nPotete creare nuove leve personalizzate e multifunzione.\n\nNOTE: se create una nuova traduzione, fatemelo sapere!\nv3.01:\n- corretto un bug minore nella frase di ritorno della \"Leva Mezzogiorno/Mezzanotte\"\n- inserita una descrizione di default per la Meridiana\nv3.02:\n- corretta una piccola imprecisione: ora lo script verrà totalmente saltato nelle ore di buio.\n- la meridiana usa la descrizione originale di NWN1 tramite ResRef (di default NWN2 non usa descrizioni)\n- il file leggimi è in formato pdf. Potreste aver bisogno di Adobe Acrobat Reader 8.0 per leggerlo: Link\nv3.10:\n- Più leggero: ora lo script principale sarà eseguito solo una volta, invece che fino a 50 volte!\n- [Patch 1.06 di NWN2] Ora i feedback verranno sussurrati invece che parlati.\n- Il materiale italiano ed inglese è stato diviso in due download principali.","Rating":9.67,"Votes":5,"Awards":[]},"47":{"Name":"Warlock Spell Buffs","Author":"alex404","Submitted":20061215,"Updated":20061215,"Category":"Scripting routines","Type":"Type - Combat","Format":"Code Only","Patch":"1.03","Description":"I really like the warlock in nwn2, unfortunately a lot of the spells are implemented poorly. I wanted to a more melee combat oriented warlock too. So I edited a few of the spell scripts to either fix/change/buff them.\n\nFlee the Scene: Now self effect only. Gives haste, as well as a bonus to tumble equal to your caster level. Lasts for one round per caster level.\n\nRetributive Invisibility: Now lasts for up to 6 rounds.\n\nCurse of Despair: Is now actually useful. By level 20, can decrease attributes by six, or attack by three if they resist.\n\nDark Foresight: No longer gives redundant damage resistance. Instead, gives + 4 to attack, damage, natural armor, and gives immunity to critical hits as well. Lasts for up to 10 rounds.\n\nBeguiling Influence: Now adds +6 to appraise.","Rating":7.5,"Votes":6,"Awards":[]},"48":{"Name":"Bard Songs that don't Stop Inspirations","Author":"clubok","Submitted":20061215,"Updated":20061227,"Category":"Skill/Feats","Type":"Type - Multiple Effects","Format":"Code Only","Patch":"1.03","Description":"An annoying bug with bardsongs is that they cancel any inspirations you have going, making them far less useful than they ought to be. This fixes that problem, so bardsongs will not cancel inspirations.\n\nUnzip into your override directory, and enjoy!\nVersion 1.1: fixed Ironskin so that it actually works","Rating":9.5,"Votes":7,"Awards":[]},"49":{"Name":"Weapon functions","Author":"Clement Poh","Submitted":20061216,"Updated":20061218,"Category":"Inventory Item","Type":"Type - Other","Format":"Code Only","Patch":"1.03","Description":"A library to discern the basic properties of items, primarily weapons that are currently not provided for by the system functions. eg, if a weapon is light, one-handed or two-handed etc.\n\nI'm not sure if a script like this exists already, but I hope it can come in handy to someone.\n\n ****** Re-uploaded!!! fixed dodgy compile errors that didn't show up when I compiled it first few times.\nNotes:\nThe Get* functions are wrapper functions for the functions for their counterparts.","Rating":"N/A","Awards":[]},"50":{"Name":"IFspawn 2.0","Author":"If_Only","Submitted":20061217,"Updated":20061217,"Category":"Spawning","Type":"Type - Spawning","Format":"Module and Code","Patch":"1.03","Description":"IFspawn is back..and better. \nIFspawn_minimal.erf is ready for NWN2. \nNo heartbeats, no area scripts needed, local spawning, compact and elegant. DM's in game can modify spawning behaviour. Spawn creatures, items, placeables, traps(NWN1.68 patch only), any OBJECT_TYPE_XXX. Repeating cascading spawns(no more fireballing entire areas), spawn scaling, true random encounters. As simple as putting down waypoints. Sample mod included with all the examples you need. Minimal Erf is just two scripts.","Rating":5.5,"Votes":2,"Awards":[]},"51":{"Name":"Bard Song Buffs with Instruments","Author":"clubok","Submitted":20061217,"Updated":20061218,"Category":"Rulesets","Type":"Type - Other","Format":"Module Only","Patch":"1.03","Description":"Mandolins, drums and flutes gathering dust in your inventory? This makes your bard songs and inspirations more effective, if you choose to wield an instrument instead of a weapon and shield.\n\nDetails of the bonuses are in the Readme. \n\nI'm calling this version 0.1, because it probably needs serious balancing. All suggestions to improve balancing are welcome - please be as specific as possible!","Rating":8.33,"Votes":3,"Awards":[]},"52":{"Name":"Math Functions","Author":"Syrsnein","Submitted":20061217,"Updated":20061218,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.03","Description":"A group of math functions not present in nwscript and improved random number functions\n\n* Floor returns the largest float value that is less than or equal to the argument and is equal to an integer.\n* Ceil returns the smallest float value that is greater than or equal to the argument and is equal to an integer.\n* Round returns the closest integer to the argument by adding 1/2 and then taking the floor of the result.\n* MaxFloat returns the greater of two float values.\n* MinFloat returns the lesser of two float values.\n* MaxInt returns the greater of two integer values.\n* MinInt returns the lesser of two integer values.\n* Hypot returns the square root of the sum of x squared and y squared.\n* RandomInit initializes a history buffer on an object for RandomFloat and RandomInt.\n* RandomFloat returns a random float between two float values.\n* RandomInt returns a random integer between two integer values.\n\nThis is a minor rewrite of my NWN sy_inc_random script with a couple of new functions.","Rating":9.63,"Votes":4,"Awards":[]},"53":{"Name":"_ILLvatu'z NWN2_Custom Uber NO Prop Regen and Hitpoints","Author":"ILLvatu","Submitted":20061218,"Updated":20100801,"Category":"Other","Type":"Type - Other","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"\"ILLvatu's NWN2 Custom Regenerate & Hitpoints\" Work around for Uber-Legit Custom Regenerate Values. This even replaces the need for ItemProp Regenerate! Less Props equals less LAG!! Designed for Uber Dueling Modules! Variable Regen Values will let you Adjust for any Level of combat!! Each Script in itself, tells what other scripts it can work with. Easy to patch in to your own scripts or use as is. I Also included a thief script , a PC scanner script and a No Trash /Trade script. Choices for Activation:>>---> 1) OnClientEnter Event. 2) OnAreaEnter Event. 3) OnPCLoaded Event. 4) OnPlayerRest Event. 5) OnPlayerDeath Event. Install ILLvatu'z Uber Regen :)~ 1)Back-Up your Module! (\"Noob\" 101 precaution). 2)Open a module and import the scripts ERF. 3)Locate ALL files prefixed \"_ill_\" with script editor in toolset. 4)Read Details in each Script, and configure to your liking. 5) Place Scripts into Module or Area Event slots. 6)Save Module. 7)Test Module. If Trouble, or you need to reconfigure repeat steps 3-7. Comments/Questions welcome.\n\nEnjoy, ][LLv@tu\n","Rating":10,"Votes":5,"Awards":[]},"54":{"Name":"Cache by Abraxas77","Author":"Abraxas77","Submitted":20061220,"Updated":20061221,"Category":"Scripting routines","Type":"Type - Arrays","Format":"Code Only","Patch":"1.00","Description":"Cache temporary or shared data painlessly, create 2-dimensional arrays, and more!\n\nThis is a data structure built on the premise of flexibility. Cache 2da files, store shared data, create parallel (2D) arrays, or simply use it as a repository for temporary data.\n\nThe system uses a collection of waypoints to store data. Bit fields track which elements are in use and which are available.\n\nCheck out the documentation in the packaged .PDF file for usage instructions and addition information.","Rating":9,"Votes":1,"Awards":[]},"55":{"Name":"FRW Base Module 1.01","Author":"Lord Niah","Submitted":20061220,"Updated":20070226,"Category":"Entire Module/PW systems","Forum Thread":"Link","Type":"Type - Other","Format":"Module Only","Patch":"1.03","Description":"This module includes base scripts and items for the Forgotten Realms Weave (FRW) project, including a player starting area with a trainer and basic merchant.\n\nOther features Include:\n\n-- Wandering Monster and Rest tag system\n-- Hardcore bleeding or OC death system\n-- Chest-based Random Loot system w/ breakable items\n-- Flavor text, ability, and skill check triggers\n-- Demonstration companion and \"Sunken Flagon\" style Inn\n-- Demonstration OOC (Out of Character) Start Area\n-- Patcha's Sitable chairs\n\nNote: This is currently tested for singleplayer only, but should work for non-persistent multiplayer.\n\n\nUpdate: Ver 1.01 Now includes a revised start area based on Berlaid's FRWCC and also includes masterwork items and armors.","Rating":9,"Votes":8,"Awards":[]},"56":{"Name":"Buff Pets","Author":"evlyn","Submitted":20061223,"Updated":20070104,"Category":"Creature Related","Type":"Type - Other","Format":"Code Only","Patch":"1.03","Description":"Want to play an uber pet? This script adds a bunch of automatic feats to your summoned pets plus a few other bonuses. Files included for Animal Companion or Familiar.\nNOTE: This replaces Buff Familiar v1.0. Now, no need to run the script, it runs automatically when you summon pet.","Rating":"N/A","Awards":[]},"57":{"Name":"Corrected Magic Circle","Author":"Doynia","Submitted":20061223,"Updated":20070102,"Category":"Spells","Forum Thread":"Link","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.03","Description":"This corrects Magic Circle vs Alignment so it's effects are properly applied to party members. Just unzip to your Override directory.\nUpdate 12/27/06: Changed VFX to eliminate sound effects. Also implemented some new code to the OnExit event handler. ver 0.5\nUpdate 12/30/06: Final Version. ver 1.0\nUpdate 1/02/06: Added a version with no visual effects for entering the Magic Circle AoE.","Rating":9.5,"Votes":2,"Awards":[]},"58":{"Name":"The Dead Walk","Author":"Oni5115","Submitted":20061224,"Updated":20080213,"Category":"Spells","Type":"Type - Combat","Format":"Code Only","Patch":"1.11","NWN2Game":"All","Description":"Notes on Old Version\nv0.2 is out dated and not really needed anymore. If you are using the Combined Works pack, it is quite pointless since similar changes are already included there.\n\nNew Version\nThe new version is simply The Dead Walk. It's an override script designed to work with the Combined Works pack.\n\nThe Dead Walk\nControl up to 4xCL in undead.\nSummon up to 2xCL per cast. \n\nCasting on a summon can make it permanent for the cost of 25 GP per HD of the summon [as per PnP].\n\nTo simulate finding corpses of different quality to raise, it automatically levels the summons to a random value between CL and 80% of your CL.\n\nNote:ALL of those options are highly configurable in the inc_summon.nss file. You can easily change CL to HD, or even to a specified value. The script was made with players and module builders in mind.\n\nI do plan to add some more things to this script, but wanted to get a version out there for people to check out.\n\nInstallation Instructions\n1) Extract into the override folder.\n2) Summon hordes of Undead\n\nThe folder has been named z_The_Dead_Walk, so that it should be placed last in your override directory, to overwrite other packs versions of the spell.\n\nFuture Ideas\nPossibly adding in more templates. At the very least a few more skeleton/zombies because 3 looks is dull. Possibly, adding in the option for the spell to actually summon other undead types as per Create (Greater) Undead [might not be PnP, but would be an OPTION!].\n\nCurse form of the spell. When casted on a living target they are cursed. When they die, they become your new pet. [A fun way to simulate needing a corpse.]\n\nAdd other summon undead spell, and potentially other summons.\n\nPossibly add duration values, summons could all be configured to have custom durations in the include, instead of having to edit all the scripts / recompile them for a server.","Rating":9.25,"Votes":2,"Awards":[]},"59":{"Name":"Combat Familiars 0.1","Author":"Simone Biagini","Submitted":20061224,"Updated":20061227,"Category":"Creature Related","Type":"Type - Combat","Format":"Code Only","ShowCode":"//::///////////////////////////////////////////////\n//:: Summon Familiar\n//:: NW_S2_Familiar\n//:: Copyright (c) 2001 Bioware Corp.\n//:://////////////////////////////////////////////\n/*\n    This spell summons an Arcane casters familiar\n*/\n//:://////////////////////////////////////////////\n//:: Created By: Preston Watamaniuk\n//:: Created On: Sept 27, 2001\n//:: Modified By: Simone Biagini\n//:: Modified On: Dec 24, 2006\n//:://////////////////////////////////////////////\n\nvoid main()\n{\n    //Yep thats it\n    SummonFamiliar();\n\t\n\t//Simone Biagini - BEGIN\n\t\n\t//Test caster level to know familiar's power \n\tint iClass=GetLastSpellCastClass();\n\tint iLevel=GetLevelByClass(iClass);\t\n\tif (iLevel == 0) iLevel=GetHitDice(OBJECT_SELF);\n\tif (iLevel > 20) iLevel=20; //no epic familiars :)\n\t\n\tobject oFamiliar=GetAssociate(ASSOCIATE_TYPE_FAMILIAR);\n\t\n\t//Scale is 1.0 for 1st level familiar and 1.9 for 20th level\n\t \n\tfloat fScale=1.0;\n\tfScale=1.0+(0.9/(20-iLevel+1));\n\tif (fScale>1.9) fScale=1.9;\n    effect eScale = SupernaturalEffect(EffectSetScale(fScale));\n    ApplyEffectToObject(DURATION_TYPE_PERMANENT, eScale,oFamiliar);\n\t\n\t//Attributes bonus (min = 2, max = 12)\n\t//STR +1 / 1.5 levels\n\t//DEX +1 / 1.5 levels\n\t//CON +1 / 1.5 level\n\t//INT +1 / 3 levels\n\t//WIS +1 / 5 levels\n\t//CHA +1 / 4 levels\n\t\n\tint iMod=0;\n\teffect eAbility;\n\t\n\t// 1/1.5 modifiers\n\t\n\tiMod=FloatToInt(1.0*iLevel/1.5);\n\tif (iMod>12) iMod=12;\n\tif (iMod<2) iMod=2;\n\teAbility = SupernaturalEffect(EffectAbilityIncrease(ABILITY_STRENGTH,iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\n    eAbility = SupernaturalEffect(EffectAbilityIncrease(ABILITY_DEXTERITY,iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\n    eAbility = SupernaturalEffect(EffectAbilityIncrease(ABILITY_CONSTITUTION,iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\t\n\t\n\t// 1/3 modifiers\n\t\n\tiMod=FloatToInt(1.0*iLevel/3.0);\n\tif (iMod>12) iMod=12;\n\tif (iMod<2) iMod=2;\n\teAbility = SupernaturalEffect(EffectAbilityIncrease(ABILITY_INTELLIGENCE,iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\n\t\n\t// 1/4  modifiers\n\t\n\tiMod=FloatToInt(1.0*iLevel/4.0);\n\tif (iMod>12) iMod=12;\n\tif (iMod<2) iMod=2;\t\n\teAbility = SupernaturalEffect(EffectAbilityIncrease(ABILITY_CHARISMA,iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\n\t\n\t// 1/5 modifiers\n\t\n\tiMod=FloatToInt(1.0*iLevel/5.0);\n\tif (iMod>12) iMod=12;\n\tif (iMod<2) iMod=2;\t\n\teAbility = SupernaturalEffect(EffectAbilityIncrease(ABILITY_WISDOM,iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\t\n\t\n\t//damage bonus (fixed slashing + variable piercing)\n\t\n\t//PIERCING\n\t\n\tiMod=FloatToInt(1.0*iLevel/3.0);\n\tint iDamage=DAMAGE_BONUS_1d4;\n\tif (iMod<=1) iDamage=DAMAGE_BONUS_1d4;\n    else if (iMod==2) iDamage=DAMAGE_BONUS_1d6;\t\n    else if (iMod==3) iDamage=DAMAGE_BONUS_1d8;\n    else if (iMod==4) iDamage=DAMAGE_BONUS_1d10;\t\t\t\n    else if (iMod==5) iDamage=DAMAGE_BONUS_2d6;\t\n    else if (iMod==6) iDamage=DAMAGE_BONUS_2d8;\t\n    else if (iMod>=7) iDamage=DAMAGE_BONUS_2d10;\t\n\teAbility = SupernaturalEffect(EffectDamageIncrease(iDamage,DAMAGE_TYPE_PIERCING));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\n\t\n\t//SLASHING\n\t\n\tiMod=FloatToInt(1.0*iLevel/4.0);\n\tiDamage=DAMAGE_BONUS_4;\n\tif (iMod<=1) iDamage=DAMAGE_BONUS_4;\n    else if (iMod==2) iDamage=DAMAGE_BONUS_5;\t\n    else if (iMod==3) iDamage=DAMAGE_BONUS_6;\n    else if (iMod==4) iDamage=DAMAGE_BONUS_7;\t\t\t\n    else if (iMod==5) iDamage=DAMAGE_BONUS_8;\t\n    eAbility = SupernaturalEffect(EffectDamageIncrease(iDamage,DAMAGE_TYPE_SLASHING));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\t\n\t\n\t//BAB minimum = level / 1.5\n\tiMod=FloatToInt(1.0*iLevel/1.5);\n\teAbility = SupernaturalEffect(EffectBABMinimum(iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\n\t\n\t//HP bonus = 2hps / level\n\tiMod=FloatToInt(2.0*iLevel);\n\tif (iMod>40) iMod=40;\n\tif (iMod<2) iMod=2;\n\teAbility = SupernaturalEffect(EffectBonusHitpoints(iMod));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT, eAbility,oFamiliar);\n\t//Heal bonus hps\n\teffect eHeal = EffectHeal(iMod);\n\tApplyEffectToObject(DURATION_TYPE_INSTANT, eHeal,oFamiliar);\t\t\t\t\t \t\t\n\t\n\t//Simone Biagini - END\n\t\n\t}Select All Text | View Code in separate window","Patch":"1.03","Description":"This is a simple override script to transform your weak arcane familiar in an ally for combat.\n\nThe familiar will increase in size and combat power with you.\n\nDownload the \"nw_s2_familiar.NCS\" file and put in your override folder to use it (works in OC).\n\nNote: familiars in NWN2 haven't combat animation so your pretty cat will stay still while biting the evil orcs... :( ","Rating":9,"Votes":2,"Awards":[]},"60":{"Name":"x0_i0_walkway update","Author":"Obsidian (modified)","Submitted":20061224,"Updated":20061224,"Category":"Scripting routines","Type":"Type - NPC Players","Format":"Module Only","Patch":"1.00","Description":"Modified copy of waypoint library, fixed to work correctly with day/night transitions and POST_/NIGHT waypoints.\n\nNOTE: any creature to use this code must have a local copy of the heartbeat script, even if it just uses the default nw_c2_default1 with no changes.","Rating":"N/A","Awards":[]},"61":{"Name":"HCR2 for NWN2","Author":"0100010","Submitted":20061225,"Updated":20100103,"Category":"Rulesets","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"HCR2 for NWN2 v1.05 by 0100010\n\nFeature List:\n\nComplete scripting framework provided by the HCR2 core lets you:\n\nManage multiple script systems just by editing module variables.\n\nAllow multiple scripts to be run per module and area events, without needing to merge\nscripts or edit existing event scripts.\n\nHandles hooking into area, creature, paceable and door events at a global \nlevel and at the instance level\n\nAllow multiple scripts to be hooked in for spell-hooks.\n\nProvide several common and easy to use script functions\n\nAdd your own custom conversation menu tree's to a GUI accessible player menu \nconversation with a single script function.\n\nEasily change core configuration settings from a single script file.\n\nAll functions that access an external database are routed through a set of custom\nchangeable wrapper functions, so you can choose what DB system you want.\n\nAll text feedback is contained within their own set of scripts, so you\ncan swap them out for alternate language versions.\n\nSet limits on maximum player count to allow room for DMs.\n\nSet a limit on the number of registered character player are allowed to have, \nor set no limit at all.\n\nPlayers can have the option of retiring a character they no longer wish to play in \norder to register a new one. Players are booted when they log in with a retired \ncharacter.\n\nChoose whether or not to strip players of items upon their first login.\n\nSet up your own welcome greeting on login.\n\nBanned players can be tracked by the external database you have chosen to use.\n\nAutomatically save PC locations over resets.\n\nChoose to individually determine whether or not hitponts, spells, or feats\nare gained after a player completes a rest with some simple script functions.\n(the core by default has no restrictions on this)\n\n\nAccess New Events: \nOnPlayerStruck\nOnPreLevelUp\nOnCancelLevelUp\nOnPostLevelUp\nOnHotbarClick\n\n\nOptional Subsystems:\n\nRest Subsystem:\nChoose to create a rest time limit restriction of a duration of your choice.\nResting without waiting for the minimum time to past prevents the regaining of\nspells, hitpoints or feats.\nChoose the amount of hitponts a character can gain after a rest.\nChoose whether or not you wish to restrict resting to within specific triggers, or\nif the PC is near a campfire.\nChoose to create special rest trigger where a PC may rest and ignore any minimum rest time period.\n\nFugue subsystem:\nWhen a player dies they are sent to the fugue plane and cannot leave unless resurrected\nor moved by a DM.\nThe player's death state is saved over resets, and they are automatically ported\nback to fugue when the log back in with a dead character.\n\nBleed subsystem:\nWhen a player drops to 0 to -9 they enter a bleeding state, and lose a set amount of HP per round\nwith a chance to stabilize. If a player stabilizes they have a chance per hour to recover back to 1 HP,\nor risk further HP loss.\nPlayer can use the heal skill to provide first aid to dying characters.\nPlayer can use potions to heal dying characters.\nPlayer can use heal spells to heal dying characters.\n\nPC Loot able corpse subsystem:\nChoose whether or not a dying or dead PC drops their items into a loot bag accessible by other players.\nWhen a PC dies a visible corpse of them appears and contains a corpse token within it.\nThis corpse token can be used the resurrect the dead character by NPCs, other players or DMs.\nThis corpse token can be moved so that the player corpse also moves whenever it it put back\ndown on the ground.\nChoose whether or not to allow players to resurrect player at all.\nChoose whether or not to apply an XP penalty for resurrection.\nChoose how much it costs in gold to cast the raise dead and resurrection spells.\nSet up NPCs to raise a player when the corpse token is used on the NPC.\nPlayers resurrect dead characters by casting the appropriate spell on the corpse token.\n\nAdditional Optional Subsystems:\n---------------------------------------------------\nDeity resurrection - \nspecify % chance for PC's deity to resurrection them on death.\n\nTorches and Lanterns - \nTorches that burn out and lanterns that use oil. Throwable oil flasks.\nNew lantern model.\n\nHunger, Thirst & Fatigue - \nTrack rates of hunger, thirst, fatigue, and alcohol effects. \nVarious generic food items included\n\nUn-ID on Drop - \nUn-identifies discarded items after a time limit.\n\nAlternate NWNX/mySQL database scripts, to easily swap out the default ones.\n\nExtensive PDF documentation.\nThanks to all who tested out the Final NWN1 version of HCR2: Link\nwithout which the NWN2 version would not have been possible.\n","Rating":9.81,"Votes":61,"Awards":["Hall of Fame"]},"62":{"Name":"Date & Time Functions","Author":"WizardStorm Think Group","Submitted":20070102,"Updated":20070102,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.00","Description":"WizardStorm Think Group is pleased to provide a full compliment of Date & Time functions which are compatible with standard database DateTime strings. Please use and enjoy! Please report any bugs found to: Development@WizardStorm.com.\n\nThe provided functions are:\n\n//generates YYYY-MM-DD string of current date\nstring GetCurrentDate();\n\n//generates HH:MM:SS string of current time\nstring GetCurrentTime();\n\n//generates YYYY-MM-DD HH:MM:SS string of current date and time\nstring GetCurrentDateTime();\n\n//generates a string YYYY-MM-DD out of given dates\nstring GetDateString(int nYear, int nMonth, int nDay);\n\n//generates a string HH:MM:SS out of given times\nstring GetTimeString(int nHour, int nMinute, int nSecond);\n\n//generates a string YYYY-MM-DD HH:MM:SS out of given dates and times\nstring GetDateTimeString(int nYear, int nMonth, int nDay, int nHour, int nMinute, int nSecond);\n\n//returns a year, month or day portion of a date as an integer\n//usage: nDay = ParseDateString(\"1977-09-07\", \"day\");\nint ParseDateString(string sDateString, string sOption);\n\n//returns a hour, minute or second portion of a time as an integer\n//usage: nHour = ParseTimeString(\"17:03:21\", \"hour\");\nint ParseTimeString(string sTimeString, string sOption);\n\n//returns a year, month, day, hour, minute or second portion of a DateTime as an integer\n//usage: nHour = ParseDateTimeString(\"1977-09-07 17:03:21\", \"hour\");\nint ParseDateTimeString(string sDateTimeString, string sOption);\n\n//usage: iNumOfDaysElapsed = GetDateDifference(\"1352-1-14\", \"1977-7-9\", \"days\");\n//uses NWN calendar settings for # of days in month (28)\n//values for sOption are: years, months, days\n//note: sDate1 MUST BE <= SDate2\n//i.e. GetDateDifference(\"1356-01-14\", \"1355-01-14\", \"months\") will return -1\nint GetDateDifference(string sDate1, string sDate2, string sOption);\n\n//usage: iNumOfMinutesElapsed = GetTimeDifference(\"06:14:22\", \"14:49:31\", \"minutes\");\n//uses NWN calendar settings for # of hours in day (0-23)\n//values for sOption are: hours, minutes, seconds\n//note: sTime1 MUST BE <= STime2\n//i.e. GetTimeDifference(\"16:14:22\", \"14:49:31\", \"minutes\") will return -1\nint GetTimeDifference(string sTime1, string sTime2, string sOption);\n\n//usage: sDueDate = GetFutureDate(GetCurrentDate(), 7, 1, 0);\n//this will return a string 7 days and 1 month in the future\nstring GetFutureDate(string sStartDate, int nIncYear = 0, int nIncMonth = 0, int nIncDay = 0);\n\n//usage: sBDay = GetPastDate(GetCurrentDate(), 0, 0, 50);\n//this will return a string 50 years in the past\nstring GetPastDate(string sStartDate, int nIncYear = 0, int nIncMonth = 0, int nIncDay = 0);\n\n//purpose: test if sDate1 == sDate2\nint CompareDates(string sDate1, string sDate2);\n\n//Converts sDateTime to Seconds\nint DateTimeToSeconds(string sDateTime);","Rating":9.7,"Votes":7,"Awards":[]},"63":{"Name":"Rowell's Persistent World Toolkit","Author":"Rowell","Submitted":20070102,"Updated":20080401,"Category":"Entire Module/PW systems","Forum Thread":"Link","Type":"Type - Other","Format":"Module and Code","Patch":"1.04","NWN2Game":"All","Description":"REQUIREMENTS:\n - Latest NWN2 Patch (1.04)\n - Latest NWNX4 Version (1.07)\n\nDESCRIPTION:\nThe ERF file included in this package (Rowells_PW_kit.erf) and the \nmodule file (Rowells_PW_Module.mod) contain all the scripts and\nobjects necessary to create a very basic Persistent World.\n\nIncluded in this ToolKit:\n\n - Rowell's FairPlay Chest\n - Rowell's Bashable Door\n - Rowell's Banking System\n - Rowell's Bank Vault for Items\n - Rowell's Faction System\n - Rowell's Quest System\n - Rowell's Discovery System\n - Rowell's Database System (using the NWNX4 add-on, can access both SQLite and MySQL Databases)\n\n\nThis toolkit relies heavily upon the Neverwinter Nights Extender\n(http://www.nwnx.org/) by Ingmar Stieger. You can download the \nlatest version of this excellent addon by visiting:\n\n http://www.nwnx.org/index.php?id=nwnx4\n\n\nThe included file (nwn2.db) is a SQLite Database file that works\nwell with NWNX4. You can download the SQLite files for free from:\n\n http://www.sqlite.org/download.html\n\n\nMany scripts in this toolkit rely on Database actions to store\npersistent data. Player, Character, Item, Area, Faction, Calendar,\nIP Address, Public CD Key, Loot Drop and Locations are some of the\ninformation that gets stored.\n\nOnce a piece of information is loaded from the database, it is stored\nin a Local Variable, to minimize Database hits. Updates are made to\nboth the Database and the Local Variable.\n\nThis is a work-in-progress. There are still things to be done. There \nare also many bugs in NWN2 which may cause some scripts to behave \nsomewhat varied from what is expected (with the Faction System,\nfor example). The Tradeskill system is not functioning; it is merely\na barebones start of something more to come.\n\nAll of the tables are created by the toolkit, which means that\nas far as populating data, there is little to do. The scripts will\ncreate any tables that are missing from the database; you do not need\nto pre-make them.","Rating":9.13,"Votes":27,"Awards":["Hall of Fame"]},"64":{"Name":"~77~ Library","Author":"Abraxas77","Submitted":20070103,"Updated":20070103,"Category":"Area","Type":"Type - Combat","Format":"Code Only","ShowCode":"//__________________________\n// String Formating Library\n//��������������������������\n// Returns a formated a string\n// - sString: string to format\n// - nWidth: length (in characters) to format the returned string\n// - bAlignRight: TRUE will align the string to the right of the fill characters\n//                FALSE will align the string left\n// - sFillChar: specify a character(s) to fill whitespace. Default is \" \".\nstring FormatString(string sString,int nWidth, int bAlignRight=TRUE, string sFillChar=\" \" );\n\n\n// Convert an integer into a formated string\n// - nInt: integer to convert\n// - nWidth: length (in characters) to format the returned string\n// - bAlignRight: TRUE will align the string to the right of the fill characters\n//                FALSE will align the string left\n// - sFillChar: specify a character(s) to fill whitespace. Default is \" \".\nstring FormatIntToString(int nInt, int nWidth, int bAlignRight=TRUE, string sFillChar=\" \" );\n\n// Converts a bitfield (integer flags) into a 32 character string of 0s and 1s\n// - nBitField: bitfield (integer flags) to convert\n// - bSmallestLast: specify the direction the string should be created\n//   * TRUE will put the smallest bit at the right-most position in the string (default)\n//\t * FALSE does the opposite: the 1-bit would be the left-most character, the 2-second,\n//     the 4-bit third, and so on.\nstring IntToBitString( int nBitField, int bSmallestLast=TRUE );\n\n//_____________________________\n// Math and Conversion Library\n//�����������������������������\n// Power function for integers\n// * returns:  1 if iExponent equals 0\n// * returns: -1 if iExponent is less than 0\nint IntPow(int iValue, int iExponent);\n\n// Converts a hex-string into an integer\n// ** The hex-string cannot be prefixed, like \"0x\"; only strings of hex-digits are valid\nint HexToInt(string sHex);\n\n// This function doesn't return the \"0x\" prefix like IntToHexString().\n// - nFormat: specify a length for the returned hex-sting\n// * returns an empty string on error\n// ** IntToHexString() is prolly a faster function, though I've never run any tests to see)\nstring IntToHex(int iValue, int nFormat=0);Select All Text | View Code in separate window","Patch":"1.00","Description":"A collection of the tools and global includes I've created over the years. Included in this package are 3 very useful GUI scripts; a few functions that format strings; an include with hex-to-int and int-to-hex conversions, and a script you can use to make a standard script template like oNWN.\n____________\n GUI Library\n������������\nThese were intended for debugging, but I've found they works well in conversation nodes as well as UI XML definitions.\n- guiss (\"GUI Show Screen\"): Use this script to open, close, or toggle a UI Screen.\n- guiso (\"GUI Set Object Hidden\"): Use this script to show, hide, or toggle a UIObject's hidden state.\n- guish (\"GUI Swap Hidden States\"): Use this script to swap the hidden states of two UI Objects in a single UI screen.\n(the comments in each contain pretty detailed usage info.)\n\n_________________________\n String Formating Library\n�������������������������\nA collection of functions for formating and manipulating strings. (There's only 3 atm)\n- FormatString()\n- FormatIntToString()\n- IntToBitString()\n(prototypes in the code below)\n\n____________________________\n Math and Conversion Library\n����������������������������\nOnly three functions in this one as well (for the meantime).\n- IntPow()\n- HexToInt()\n- IntToHex()\n(prototypes in the code below)\n\n________________\n Script Template\n����������������\nThis script contains all my comment templates: a file header sectioned for a title, script name, date, summary, notes/usage, author, and change log. \n\nBelow are various topic headers that help me spot things quicker and look neater. Including sectioned topis for: configureable constants, warning not to edit the code below, headers for constants, prototypes, definitions, and end of file. There's also a slim header I use to mark each definition.\n\nImport the erf and save it as a template (the parts you like)","Rating":"N/A","Awards":[]},"65":{"Name":"Warlock - the Imbue Item feat","Author":"ndsman","Submitted":20070103,"Updated":20070930,"Category":"Skill/Feats","Forum Thread":"Link","Type":"Type - Trade Skill and Item Creation","Format":"Code Only","Patch":"1.10","Description":"Imbue Item QuickFix for 1.10\n\nThe Imbue Item feat is finally available. However, we still can't use it because warlock can't learn \"Craft Magical Arms and Armor\" and \"Craft Wondrous Items\" feats. WTH......\n\nAnyway, you can either use givefeat 1092/1093 or you can download my quickfix to skip the checks.\n\nI've no idea how the official Imbue Item different from the D&D 3.5, but I do find a known issue with the new imbue item progamming mechanism. Due to the fact that Invisibility and Silence, Melf's Acid Arrow and Poison share the similar recipes, the current logic uses only Invisibility and Poison.\n\nFor example:\nImbue item + Armor + Fire opal + Faint Water = Armor with Hide +5\nImbue item + Weapon + Emerald + Weak Earth = Weapon with Poison\n\n*********************Previous Log*********************\n\nUpdated with new 1.05.912 feat.2da\n\n1.05......crafting feats are still not available for selection but can be forced to be included as a class feat.\n\nSince it doesn't make a difference, I didn't change the scripts to make warlock gains two extra feats for no reason. Just kept the code as simple as it was and updated the 2da file only.\n\n\nAbout Imbue Item:\n\n\"A warlock of 12th level or higher can use his supernatural to create magic items, even if he does not know the spells required to make an item(although he must know the appropriate item creation feat). He can substitute a Use Magic Device check(DC15 + spell level of arcane spells or 25 + spell level of divine spells) in place of a required spell he doesn't know or can't cast.\nIf the check succeeds, the warlock can create the item as if he had cast the required spell. If he fails, he cannot complete the item. He does not expend the XP or gp costs for making the item; his progress is simply arrested. He cannot retry this Use Magic Device check for that spell until he gains a new level.\" - quoted from Complete Arcane (3.5)\n\nVersion 0.7(d20Check and NoRoll)\n\n-At level 12, warlock gains the feat.(pls use givefeat 1430 if your warlock is over 12 )\n\n-Warlock invokes the BASIC eldritch blast to create items.\n\n-In d20Check, the warlock can ignore the required caster level of that item. Warlock must pass a d20 + UMD vs DC15(25) + Arcane(Divine) spell level check in order to create the item. If he/she fails, the essence and the gem gone \n\n-In NoRoll, If the warlock's UMD + 5 > DC15(25) + Arcane(Divine) spell level, item created. Otherwise, nothing happens.\n\nKnown issues:\n\n1) Since Invisibility and Silence, Melf's Acid Arrow and Poison share the similar recipes. I use Dark One's Own Luck as an indicator. If the required spell is either Invisibility or Melf's Acid Arrow, pls cast Dark One's Own Luck before invoke the blast. On the other hand, make sure you don't have Dark One's Own Luck effect for Silence or Poision.\n\n2) The in-game feat description is....nevermind... \n\n3) Need help to enable \"Craft Magical Arms and Armor\" and \"Craft Wondrous Items\" feats. Warlock is not able to get those feats since 1.03 patch . I spent hrs to test both classes.2da and cls_feat_wlck.2DA but it seems they blocked the whole item creation feats from Warlock somewhere else (Meanwhile, you can still create stuffs as a warlock. I disabled those checks if your character has the imbue item feat.)\n\n","Rating":9.5,"Votes":4,"Awards":[]},"66":{"Name":"Warlock - Eldritch Blast Fix","Author":"ndsman","Submitted":20070104,"Updated":20070418,"Category":"Spells","Forum Thread":"Link","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.04","Description":"Updated with new 1.05.912 spells.2da\n\n\nEldritch Blast Fix V1.0:\n\n1) Fix the Eldritch Essence bug: Basically, you hit a mob with an eldritch essence and it supposed to last few more rounds. Whenever you use the same blast again and miss, all effects gone instantly.\n\n2) Fix the Eldritch Chain ranged touch check bug: when the chain jumps from the first to the second target, it does two ranged touch checks on the second target. Tiny bug tho.\n\n3) PnP Eldritch Doom: \"An eldritch doom deals eldritch blast damage to any number of targets designated by you and within 20 feet\" from Complete Arcane(3.5)\nI can't make \"any number of targets designated by you\" happen but I'm sure it won't hurt you and your allies anymore Btw, it blasts from you and not a long range AoE anymore.\n\n4) Target-self Hideous Blow also comes with this package.\n\n5) All ranged touch blasts are able to do sneak attack and critical really means double damages, not just a text only.\n","Rating":9,"Votes":3,"Awards":[]},"67":{"Name":"(Obsolete) Flee the Scene fix","Author":"player1","Submitted":20070105,"Updated":20090221,"Category":"Scripting routines","Type":"Type - Spell effects","Format":"Code Only","ShowCode":"Changed lines:\n//    DoExpeditiousRetreatEffects( oCaster, OBJECT_SELF, nMetaMagic );\n    DoHasteEffects( oCaster, OBJECT_SELF, nMetaMagic );Select All Text | View Code in separate window","Patch":"1.04","NWN2Game":"All","Description":"This small script fixes the effects of Flee the Scene invocation.\n\nThe original script was a mess, since it gave haste effects to all party members, *exempt* the caster, for 30 sec.\n\nCaster, on the other hand, got speed increase and +2 dodge bonus to AC (for 1 hour). And dodge bonus could stack with itself infinite times, in order to get super-high AC.\n\nI fixed this, so it gave haste effects to everybody, while dropping that (bugged) dodge bonus to caster.\nAfter all, invocation description in no way suggests that caster is treated in any different way then other party members.\n\n\nInstall:\nUnpack contents of the zip file to your Override folder.\n\nNOTE:\nDue to issue being fixed with 1.06 patch, this fix is now Obsolete.","Rating":"N/A","Awards":[]},"68":{"Name":"City of Eros GUI","Author":"Arkosis","Submitted":20070105,"Updated":20070211,"Category":"Entire Module/PW systems","Forum Thread":"Link","Type":"Type - Other","Format":"Code Only","Patch":"1.00","Description":"This is the GUI script needed to play Pirate Cards (by Adam Miller) on the Social server City of Eros.\n\nYou must place this file in \nc:\\Program Files\\Atari\\NWN2\\UI\\default\nand\nc:\\My Documents\\NWN2\\UI\\default\n\nBACK UP your existing gui file first! You may need to create some or all of the folder path; simply 'Create New Folder' with the appropriate name.\n\n\nVisit http://nwnhaven.com for more information.","Rating":"N/A","Awards":[]},"69":{"Name":"Spell Points System","Author":"sdawm1","Submitted":20070105,"Updated":20070724,"Category":"Rulesets","Type":"Type - Magic","Format":"Code Only","Patch":"1.03","Description":"==================================\nTHIS CODE IS NO LONGER SUPPORTED\n==================================\n\nSpell Points System v1.1\n==========================\nThis system modifies the default 'spells per day' magic system used by NWN2 into a 'spell points' magic system. Each of the 7 spell casters (not including Warlocks b/c they have unlimited spells per day) is assigned a spell point amount based on their caster levels. Each time a caster casts a spell, spell points are subtracted from the casters available spell points. Once the caster has exhausted all of his spell points for the day he is unable to cast any more spells.\n\nChange Log\n============\n- v1.1\nAdded a custom gui window that displays the current number of spell points for the selected character. More code clean up.\n\n- v1.051\nIntegrated the systme with Even AI v.07357. More code clean up.\n\n- v1.05\nAdded support for custom spell point items. Items with tag ending in _spsxx (where xx is a number from 0 to 99) will add that amount of spell points to the caster. For example a ring with a tag ring_sps25 will add 25 spell points to the character.\n\n- v1.04\nGot the world map transitions to work. Got the spell points to work when the caster is contolled by the AI. Got the spell point bonuses to work at the correct level. Got the ability bonus to get the correct bonus based on the current caster level.\n\n- v1.03\nReworked the entry points for the system. Uses ExecuteScript at the rest/cast/equip/unequip events. This should make it easier to incorporate it anywhere you like. Gives casters bonus spell points based on their ability modifier up to the level of spells they can cast. Renamed and reorganized the files and functions to be easier to read and manage.\n\n- v1.02\nDid more clean up of the UDM code. Figured out how to do the OnEquip and OnUnequip checks.\n\n- v1.01\nMoved the restore spell points functionality from the onrest script into the my_inc_spellpoints to make it easier to add the spell points system to other modules. Cleaned up the UMD script sections a bit. Figured out why the onrest script that Even uses actually works in the OC, Duh. \n\n- v1.0 beta\nInitial Release","Rating":9.38,"Votes":6,"Awards":[]},"70":{"Name":"List Functions 1.02","Author":"WizardStorm Think Group","Submitted":20070108,"Updated":20070925,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.07","Description":"Version 1.03\nAdded an additional function called ListCompare.\n\n========= ========== =========== =========\nVersion 1.02\nBug Fixes and such.\n\n========= ========== =========== =========\nVersion 1.01\n\nWizardStorm Think Group is pleased to present to you three addional String Functions \nand nine new List functions. We think you will find these functions invaluable in your \nfuture projects. Enjoy!!! \n\nIf you find any bugs or want to suggest adding something to this library, \nplease post below or send an email to Development@WizardStorm.com \n\n/**************************************** \nSTRING FUNCTIONS \n****************************************/ \n//Description: Removes the leading/trailing spaces from either the LEFT, \n//RIGHT or BOTH ends of a sString. Default = BOTH. \n//Returns: A copy of sString with the specified end trimmed of leading/trailing spaces.\nstring GetStringTrim(string sString, string sTrimEnd=\"BOTH\");\n\n\n//Description: Extracts a SubString from a String. \n//Returns: A string; the set of characters from sString, beginning at nStart, \n//of length nCount.\nstring GetStringMid(string sString, int nStart, int nCount);\n\n\n//Description: Replaces all instances of sOldSubString with sNewSubString. \n//By default, this is Case Sensitive, but this can be set to be Non-Case Sensitive. \n//Returns: A copy of sString with all instances of sOldSubString replaced with sNewSubString.\nstring StringReplaceAll(string sString, string sOldSubString, string sNewSubString, int nCaseSensitive=TRUE) ;\n\n/**************************************** \nLIST FUNCTIONS \n****************************************/ \n//Descrption: Gets the first element of a list. \n//Returns: The first element of a list. If the list is empty, returns an empty string.\nstring ListGetFirst(string sList, string sDelimiters=\",\") ;\n\n\n//Descrption: Gets the last element of a list. \n//Returns: The last element of a list. If the list is empty, returns an empty string.\nstring ListGetLast(string sList, string sDelimiters=\",\") ;\n\n\n//Descrption: Gets the number of elements in a list. \n//Returns: The number of elements in list.\nint ListLen(string sList, string sDelimiters=\",\") ;\n\n\n//Descrption: Gets the list element at a specified index. \n//Returns: The element at a specified index. If element is empty at the specified index, \n//returns a empty string.\nstring ListGetAt(string sList, int nIndex, string sDelimiters=\",\");\n\n\n//Descrption: Inserts an element at the end of a list. \n//Returns: A copy of the list, with sValue appended.\nstring ListAppend(string sList, string sValue, string sDelimiters=\",\");\n\n\n//Descrption: Inserts an element at the beginning of a list. \n//Returns: A copy of the list, with sValue inserted at the first position.\nstring ListPrepend(string sList, string sValue, string sDelimiters=\",\");\n\n\n//Descrption: Deletes the element from a list at the specified index. \n//Returns: A copy of the list, without the specified element.\nstring ListDeleteAt(string sList, int nIndex, string sDelimiters=\",\");\n\n\n//Descrption: Inserts an element in a list at a specified index. \n//Returns: A copy of the list, with the value inserted at the specified index.\nstring ListInsertAt(string sList, int nIndex, string sValue, string sDelimiters=\",\");\n\n\n//Descrption: Replaces the contents of a list element. \n//Returns: A copy of the list, with the new value assigned to the element at a specified index.\nstring ListSetAt(string sList, int nIndex, string sValue, string sDelimiters=\",\");\n\n\n//Descrption: Changes a list delimiter. \n//Returns: A copy of the list, with each delimiter character replaced with sNewDelimiter.\nstring ListChangeDelimiter(string sList, string sNewDelimiter, string sDelimiters=\",\");\n\n\n//Descrption: Determines the index of the first list element that contains sSubString, \n//not neccessarily equal to. \n//If nCaseSensitive equals TRUE, the result will consider case in the search. \n//Returns: Index of the first list element that contains sSubstring. If not found, returns 0.\nint ListContains(string sList, string sSubString, int nCaseSensitive=TRUE, string sDelimiters=\",\");\n\n\n//Descrption: Counts the instances of a specified value in a list. \n//If nCaseSensitive equals TRUE, the result will consider case in the search. \n//If nExactMatch equals TRUE, a list element must be an exact match to specified value. \n//Else, the specified value can be within a list element. \n//Returns: The number of instances that a list element equals sValue.\nint ListValueCount(string sList, string sValue, int nExactMatch=TRUE, int nCaseSensitive=TRUE, string sDelimiters=\",\");\n\n\n//Descrption: Determines the index of all list elements that contain the sSubString. \n//If nCaseSensitive equals TRUE, the result will consider case in the search. \n//If nExactMatch equals TRUE, a list element must equal the sSubString to be counted. \n//If the sSubString is within the list element and nExactMatch equals FALSE, \n//the list element is considered a match. \n//Returns: Comma separated list of index values of the list elements that contains or \n//is equal to the sSubstring. \n//If not found, returns an empty string.\nstring ListFind(string sList, string sSubString, int nExactMatch=TRUE, int nCaseSensitive=TRUE, string sDelimiters=\",\");","Rating":9.42,"Votes":5,"Awards":[]},"71":{"Name":"Manually Lights/onoff incl.FX","Author":"Puket","Submitted":20070113,"Updated":20070115,"Category":"Scripting routines","Type":"Type - Lights (Subtype - Other)","Format":"Module and Code","Patch":"1.03","Description":"This little script turns on and off any placeable you want to use as a light with fx and light.\n\n1 Mod 2 Scripts 1 Object\n\nHow to do:\n\n1.Pick a placeable (Torch,Candle,Lamp etc.)\n2.Make it non-static and useable\n3.Put the script \"puk_lights in onused of the placeable\n4.Take the invisible object (to find under different models/looks like a waypoint)\n5.Place this object above the placeable (xyz location > look into the mod)\n6.Give this object a significant TAG name (example > torch_object)\n7.Go to variables of the placeable (Torch,Candle,Lamp etc.)\n Write FX_SEF fx_torchglow (example > to find under Effects/Special Effects)\n Write SEF_OBJECT the TAG of the object (example > torch_object)\n8.Done\n\nHave fun!\n\n!!Updated:Added a second script(needs a torch equipped).Example included.\nPLEASE VOTE!","Rating":8.13,"Votes":2,"Awards":[]},"72":{"Name":"Alignment Checker for NWN2","Author":"Andarian","Submitted":20070115,"Updated":20070115,"Category":"Other","Type":"Type - Other","Format":"Module Only","Patch":"1.03","Description":"This script can be run from the console to output the precise numeric values associated with the currently controlled character's alignment to the output window.\n\nSee the enclosed README file for directions.","Rating":"N/A","Awards":[]},"73":{"Name":"Teleport spells","Author":"Mik Drad","Submitted":20070116,"Updated":20070124,"Category":"Spells","Type":"Type - Combat","Format":"Module and Code","Patch":"1.03","Description":"Mik Drad's Teleportation Suit v1.0 final (or, Colocation for fun and profit)\n\nIn order to use these, 5 steps are necessary;\n1) unzip the files\n2) place the .2DA files in your Documents and Settings/Neverwinter Nights 2/Override folder\n3) place dialog2.TLK in Documents and Settings/Neverwinter Nights 2/tlk\n4) place dialog2 (with no extension) in your NWN2 install folder, where dialog.TLK is.\n5) place the ERF file somewhere you know where to find it (I put them in /modules, personally), and import the ERF into your module. Make sure all scripts are compiled before running.*\n\nAs always, you must know... this will effect all games played on that machine henceforth, so if you do not wish to be able to teleport in your other games, reverse the above process to remove this package.\n\n* - You may note that all spell and combat-related scripts exist as module resources. Messy, I know... but necessary for the combat and rest conditions to occur properly. Hopefully to be chunked out after patch 1.04.\n\nArcane Mark\n\nCaster Level(s): Wizard / Sorcerer 0, Cleric 0, Druid 0, Bard 0 \nInnate Level: 0\nSchool: Conjuration\nDescriptor(s):\nComponent(s): Somatic\nRange: Touch\nArea of Effect / Target: Target\nDuration: Instant\nSave: None\nSpell Resistance: No\n\nArcane mark allows the imprinting of a location, to provide a target for higher level spells (eg Scry). Through mystical study and focus, you imprint the local area into your mind... effectively \"marking\" it as familiar.\n\nWizard Eye\nCaster Level(s): Wizard / Sorcerer 2 \nInnate Level: 2\nSchool: Divination\nDescriptor(s):\nComponent(s): Verbal, Somatic\nRange: Long\nArea of Effect / Target: Target\nDuration: 1 Second/level\nSave: None\nSpell Resistance: No\n\nWizard Eye allows the caster to magically view their surroundings.\nUpon invocation of the Wizard Eye spell, a Scry Sensor is created at the targetted location. The Caster's consciousness is projected into the Scry Sensor, and they can move and observe freely until the spell expires (1 Second/Level).\nThey are unable to cast spells, and may only percieve what would normally be visible to them.\nThe Scry Sensor represents the focussed intent of the caster; as such, if any hostile intent is directed towards it, it will be destroyed.\nThe Scry Sensor is minute and invisible, but creatures able to see invisible objects may become aware of it.\nIf the Scry Sensor is destroyed or dispelled, the spell effect ends and the caster is returned to their body.\n\nDimension Door\nCaster Level(s): Wizard / Sorcerer 4\nInnate Level: 4\nSchool: Conjuration\nDescriptor(s):\nComponent(s): Verbal\nRange: Long\nArea of Effect / Target: Target\nDuration: Instant\nSave: None\nSpell Resistance: No\n\nDimension Door allows the caster to magically transport to a location within line-of-sight.\nUpon invocation of the Dimension Door spell, the caster vanishes from their current location, and immediately appears at the targetted location. All of the caster's personal effects are effected by Dimension Door, but any party members, companions or henchmen are not.\n\nScry\nCaster Level(s): Wizard / Sorcerer 4, Cleric 4, Druid 4, Bard 3\nInnate Level: 4\nSchool: Divination\nComponent(s): Verbal, Somatic\nRange: Special\nArea of Effect / Target: Caster\nDuration: 1 Round / level\nSave: None\nSpell Resistance: No \n\nScry allows the caster to magically view a previously determined location.\nAn arcane mark is required (lvl 0). Upon invocation of the Scry spell, a Scry Sensor is created at the selected Arcane Mark. The Caster's consciousness is projected into the Scry Sensor, and they can move and observe freely until the spell expires (1 Round/Level).\nThey are able to cast a limited number of spells, including Darkvision, Find Traps and True Seeing. Any other spell is disruptive to the ethereal nature of the sensor; as such, attempting to cast any other spell will destroy it.\nThe Scry Sensor represents the focussed intent of the caster; as such, if any hostile intent is directed towards it, it will be destroyed.\nThe Scry Sensor is minute and invisible, but creatures able to see invisible objects may become aware of it.\nIf the Scry Sensor is destroyed or dispelled, the spell effect ends and the caster is returned to their body.\n\nTeleport\nCaster Level(s): Wizard / Sorcerer 5 \nInnate Level: 5\nSchool: Conjuration\nDescriptor(s):\nComponent(s): Verbal\nRange: Special\nArea of Effect / Target: Self\nDuration: Instant\nSave: None\nSpell Resistance: No\n\nTeleport allows the caster to magically transport to a previously determined location.\nAn arcane mark is required (Wiz/Sorc lvl 0). Upon invocation of the Teleport spell, the caster vanishes from their current location, and immediately appears at the marked location. Distance is irrelevant; all of the caster's personal effects are effected by Teleport, but any party members, companions or henchmen are not.\nComplete concentration is necessary to successfully teleport. Without proper concentration, an error may occur (the result of accidentally reforming inside another solid object). Upon arrival to the new destination, a concentration check (DC 25) is made to make sure that no error occurred. In the case of an error, the following rolls are made;\n1) 90% chance of normal error (caster takes damage equal to their level, and are returned to the original casting point)\n2) 10% chance of a terrible error occurring (caster takes damage equal to 4 times their level, and one of the following);\n 2a) 50% chance of being sent to another of their arcane marks\n 2b) 50% chance of being sent to a random location in the same area\n\nTeleport without error\nCaster Level(s): Wizard / Sorcerer 7 \nInnate Level: 7\nSchool: Conjuration\nDescriptor(s):\nComponent(s): Verbal\nRange: Special\nArea of Effect / Target: Self\nDuration: Instant\nSave: None\nSpell Resistance: No\n\nTeleport without error functions as the 5th level spell Teleport, except there is no chance for error.\n\nTeleportation Circle\nCaster Level(s): Wizard / Sorcerer 9\nInnate Level: 9\nSchool: Conjuration\nDescriptor(s):\nComponent(s): Verbal, Somatic\nRange: Special\nArea of Effect / Target: Party\nDuration: Instant\nSave: None\nSpell Resistance: No\n\nTeleportation Circle functions as the 7th level spell Teleport without error, except all of the caster's party members within a 10 ft radius will be likewise transported.\n\n\nProjected Revisions:\n1) Changing the Mark Selection to use maps instead of dialog\n2) Changes to content, pending 1.04 patch","Rating":"N/A","Awards":[]},"74":{"Name":"BashLoot v2.0","Author":"Alaster Wolf","Submitted":20070117,"Updated":20070119,"Category":"Placeable Item","Type":"Type - Manipulation","Format":"Module and Code","Patch":"1.03","Description":"Bashing placeable for a loot\nYou can use this script with any placeable and set an item as a loot from bashing it. For example - player may bash the table to get a club.\n\nFeatures:\n- Chance that the placeable will be too damaged in bashing, destroying the loot\n- Give XP for the successful bash (also can be negative, to penalize)\n- Alignment shift\n- Message to be displayed after the bashing (when bashing is part of the story, for example)\n\nSome ideas for usage:\n- Use the bashing script for simple mining and resource gathering (when you don't mind the tool and the competence), such as the wooden table that will provide some planks for crafting\n- Bash the bookcase to find a secret door behind it (the script provides XP and the message)\n- Bash the holy altar to strengthen your chaotic/evil disposition\n- Bash the cage to free the prisoners (the script provides XP, the message and the alignment shift, just set the values)\n- Bash the broken chair that will provide you with a spiked club (for more bashing around)\n- Or, just place the script and you don't have to set anything else, so that all placeables leave a broken item, not just disappear","Rating":8,"Votes":1,"Awards":[]},"75":{"Name":"Script to feed before rest","Author":"LichKing","Submitted":20070118,"Updated":20070120,"Category":"Resting","Type":"Type - Other","Format":"Module and Code","Patch":"1.03","Description":"In order to make taverns useful, I created a script to prevent players from resting if they don't have food in their inventories.\n\n1) How to use it?\nImport the foodforrest.erf into your module. You will find a script to use into the onPlayerRest module script.\nNow that the script is properly placed, you can save and launch your module.\nEach time you try to rest, the script checks for the presence of food into your inventory.\nIf you have some, then one unit of food is removed and your character begins to rest, otherwise you just can't rest.\n\n2) How to create food for your module?\nYou can create any item and make it some food by setting its tag to \"foodForRest\".\n\n3) The test module?\nI have prepared a little module as an example.\nAll you have to do is to talk to the innkeeper and ask for food.\n\n","Rating":8.17,"Votes":3,"Awards":[]},"76":{"Name":"Secret Doors","Author":"FalloutBoy","Submitted":20070121,"Updated":20070121,"Category":"Scripting routines","Type":"Type - Doors","Format":"Module and Code","Patch":"1.03","Description":"This package contains some script fixes that allow you to easily add secret doors to your NWN 2 modules. There is a readme with a step-by-step guide on how to utilize these scripts. There is an example module so you can see how it works from the player's perspective.","Rating":9.6,"Votes":16,"Awards":[]},"77":{"Name":"Sorceress Ashura's Basic Weather System","Author":"SorceressAshura","Submitted":20070126,"Updated":20070126,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Event","Format":"Module Only","Patch":"1.03","Description":"Hello community.\n\nI'm no script expert be any means, however I do know my way around some functions, and variables. This is a basic weather system, designed specifically for single player modules. It may work for persistent worlds, I've tinkered with it for a while to see if it was possible. I haven't been able to truly test it with other players, but I do know it works for single player modules. \n\nThe installation is very simple, just place the Weather Box in the center of an area, and attach the weather script into the Area's OnEnter script slot. Bake/rebake the area, and your all set. \n\nThe way it works, is through a series of dice rolls, and variable checks. First it will roll a 3 sided die, 1 for snow, 2 for rain, 3 for clear day. Once rolled, it will add a +1 value to the variable attached to the vfx that is placed on the Weather Box. Now in theory; for modules with more then one player it should check each variable to see what weather variable is set to +1. If there is, it will roll another set of dice to determine if it should remain raining/snowing. Then add or remove the vfx, based on the roll. I've included RP messages to the PC if the rain/snow stops, or starts for debugging, and ambience reasons. \n\nI've also added sound to the system, I've left them commented out, so that you can put in your own for specific areas with different ambient settings. Just fill in with the area tag, and the ambient tracks for night/day. When you set them, simply remove the \"//\" in front of them.\n\nFor the weather VFX, I'm using the files from my VFX Pack located here on the vault. You can find it here; http://nwvault.ign.com/View.php?view=NWN2VisualEffects.Detail&id=9\n","Rating":"N/A","Awards":[]},"78":{"Name":"Autobuff","Author":"D. Campbell","Submitted":20070127,"Updated":20070128,"Category":"Other","Type":"Type - Multiple Spells","Format":"Module Only","Patch":"1.03","Description":"Autobuff is a script that instantly casts all buffing spells that are memorized. Autobuff is very easy to use and requires only basic knowledge of folders and the toolset to apply. This is the latest for NWN2 using nearly every available castable spell. It also includes warlock invocations. This script was designed to enhance creature AI and to increase encounter difficulty. It was also designed to give players a break from the repetetive clicking of buttons to cast all of their buffs on themselves after each rest (hey, I dont want carpal-tunnel either). Autobuff is not meant to be a cheat tool for PCs. It can be used legitimately while not in combat and really save you alot of time. Autobuff can also be used to have your companions instantly buff themselves (if you are playing the campaign module).\n\nWhat is different about this buffing script than others that are available?\n-can be used for creatures (i.e. on perception) and/or players (via activate item), depending on your preference\n-there is no limit to the number of buffs cast\n-includes most relevant NWN2 spells including invocations and a monster ability (fear aura)\n-casts any spell from memory including metamagic\n-\"smart casting\" won't buff redundant spells (i.e. greater invisibility & invisibility or righteous might & enlarge)","Rating":"N/A","Awards":[]},"79":{"Name":"(Obsolete) Eldritch Chain Fix for Warlocks","Author":"player1","Submitted":20070131,"Updated":20090221,"Category":"Scripting routines","Type":"Type - Spell effects","Format":"Module Only","Patch":"1.04","NWN2Game":"All","Description":"Bugs fixed:\n\n-Chain targeted secondary targets even when primary one was missed\n-First secondary target was checked twice with ranged attack roll\n-Lightning animation was not showing for missed targets\n\n\nInstall instructions:\n\nJust put files from archive to your Override folder.\n\n\nTip for moders:\n\nIn order to make this more easily portable, I haven't modified nw_i0_invocatns.nss and its DoShapeEldritchChain function, but made a new one DoShapeEldritchChain2 that is now called by chain shape.\n\nSo, if you want to use modified nw_i0_invocatns.nss together with this fix, you'll just need to recompile nw_s0_ieldchain.nss.\n\nNOTE:\nDue to issue being fixed with 1.12 patch, this fix is now Obsolete.","Rating":"N/A","Awards":[]},"80":{"Name":"Door Auto Close","Author":"WizardStorm Think Group","Submitted":20070201,"Updated":20070202,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","ShowCode":"/*\nFilename:           door_auto_close\nSystem:             miscellaneous\nAuthor:             WizardStorm Think Group (Development@WizardStorm.com)\nDate Created:       Oct 7th, 2006.\nSummary:\nAutomatically shuts oDoor1 after an set amount of time. If oDoor1 is\nconnected to oDoor2 via a transition, it will close oDoor2 at the same time.\nBy default, doors close after 30 seconds, however you can override this by\nsetting a local float variable on the door called AUTO_SHUT_DELAY.\nIf AUTO_SHUT_DELAY equals -1.0, the door will never auto close.\n-----------------\n*/\nvoid main()\n{\n\tobject \toDoor1 \t\t\t= OBJECT_SELF;\n\tobject \toDoor2 \t\t\t= GetTransitionTarget(oDoor1);\n\tfloat\tfShutDefault\t= 30.0;\n\tfloat  \tfShutDelay \t\t= GetLocalFloat(oDoor1, \"AUTO_SHUT_DELAY\");\n\t\n\tif(fShutDelay == -1.0)\n\t\treturn;\n\telse if(fShutDelay == 0.0)\n\t\tfShutDelay = fShutDefault;\n\t\t\n\tAssignCommand(oDoor1, DelayCommand(fShutDelay, ActionCloseDoor(oDoor1)));\n\tAssignCommand(oDoor2, DelayCommand(fShutDelay, ActionCloseDoor(oDoor2)));\n}Select All Text | View Code in separate window","Patch":"1.00","Description":"Automatically shuts oDoor1 after an set amount of time. If oDoor1 is\nconnected to oDoor2 via a transition, it will close oDoor2 at the same time.\nBy default, doors close after 30 seconds, however you can override this by\nsetting a local float variable on the door called AUTO_SHUT_DELAY.\nIf AUTO_SHUT_DELAY equals -1.0, the door will never auto close.\n\nJust save this script and call it from the door's OnOpen event.","Rating":9.67,"Votes":5,"Awards":[]},"81":{"Name":"Random Encounter Enabler (REE - A Random Spawn System)","Author":"sidefx","Submitted":20070201,"Updated":20070201,"Category":"Spawning","Type":"Type - Combat","Format":"Code Only","Patch":"1.04","Description":"This system allows you to get some randomness in your dungeons without too much effort. It also lets you keep using the basic NWN2 encounter scaling, etc. \n\nNOTE: This was originally built for NWN1, so some of the stuff (like parent-child encounters) aren't as useful given the new features in NWN2. Still, I've left them in since there's no real harm to having them. \n\nBASIC USAGE\n-----------\n* Lay down a group of encounters in the same place with the same trigger shape. You can put as many groups as you want in the dungeon. (may not need same encounter trigger shape, just start point?)\n\n* Place the ree_randomise script either in the onenter event of the area that you want randomised, or on a trigger at the entrance (or some convenient point where PCs will trigger it) to the area.\n\n* For each encounter \"group\" in the area, this script will randomly select one of them and enable it, while disabling the rest. A \"group\" of encounters is defined by the distance between them. It seems the position of a trigger is defined by either the starting point or centroid when you paint it down, so provided the ecounter trigger centroids are within GROUP_DISTANCE units of each other they will be considered a \"group\" and only one of them will be enabled each time.\n\n* If you wish for the system to ignore an encounter in the area, set a variable on it called REE_IGNORE to TRUE. Also, set a variable called REE_DISABLED to FALSE on the area to disable completely - useful if you want to put it in all on enter's for area and then enable or disable by area.\n\n\nADVANCED CONCEPTS\n-----------------\n\nNOTE: none of these are required for the basic system to work.\n\n* chance of no encounter - Just add a float variable to one of the encounters in a \"group\" called REE_BLANK_PROB and set it to the percentage probability of the group spawning nothing at all.\n\n* encounter weighting - If you have a group of encounters (say 3) and want one of them to be more common than the others, use the encounter weigtings. On the encounter that should be more common set an int variable called REE_PROB to a value higher than 1. (say 2) The rest will default to a weighting of 1. Now, in the example above of 3 encounters with one having a REE_PROB weighting of 2 this one will be selected randomly every 2 of 4 times while the others will be selected every 1 of 4 times. Look mum, statistics!\n\n* parent-child encounters - Allows you to define child encounter(s) of one of the encounters in the random encounter group. This is useful where you want to have, for example, a group of warriors and a couple of archers backing them up AND you want both the warriors and archers to scale without doing something stupid like replacing all your warriors with archers because the CRs happen to be values such that the current PCs level makes biowares scaling algorithm select all archers or all warriors. To do it, just put a variable on the encounter that should be the \"child\" named REE_CHILD_OF. This should be a string with the tag of the encounter that should be the parent encounter. Now this encounter will only be enabled when the nearest encounter that has the matching tag is enabled. Hey presto, you've now got archer/mage/cleric support for the parent encounter of meat shields.","Rating":8,"Votes":1,"Awards":[]},"82":{"Name":"Useful Wholeness of Body","Author":"Cirerrek","Submitted":20070203,"Updated":20070204,"Category":"Skill/Feats","Type":"Type - Spell effects","Format":"Module and Code","ShowCode":"//::///////////////////////////////////////////////\n//:: Wholeness of Body\n//:: NW_S2_Wholeness.nss\n//:: Copyright (c) 2001 Bioware Corp.\n//:://////////////////////////////////////////////\n/*\n    The Monk is able to heal his Wis Bonus times\n    his level.\n*/\n//:://////////////////////////////////////////////\n//:: Created By: Preston Watamaniuk\n//:: Created On: Aug 15, 2001\n//:: Updated On: Oct 20, 2003\n//:: Modified By: Eric Kerr using NW_S2_LayOnHands as a template\n//:: Modified On: Jan 18, 2007\n//:://////////////////////////////////////////////\n//:: AFW-OEI 06/13/2006:\n//::\tIf your Wis mod is 0 or less, Wholness of Body does nothing.\n\nvoid main()\n{\n\n    int nLevel = GetLevelByClass(CLASS_TYPE_MONK,OBJECT_SELF);\n\n    int nWis = GetAbilityModifier(ABILITY_WISDOM,OBJECT_SELF);\n    if (nWis <= 0)\n    {\n        //nWis = 0;\n\t\treturn;\t\t// AFW-OEI 06/13/2006: Wholeness of Body does nothing if you don't have a positive Wis mod.\n    }\n\n    //--------------------------------------------------------------------------\n    // Caluclate the amount to heal, min is 1 hp\n    //--------------------------------------------------------------------------\n    int nHeal = nLevel * nWis;\n    if(nHeal <= 0)\n    {\n        nHeal = 1;\n    }\n    effect eHeal = EffectHeal(nHeal);\n    effect eVis = EffectVisualEffect(VFX_IMP_HEALING_M);\n    SignalEvent(OBJECT_SELF, EventSpellCastAt(OBJECT_SELF, SPELLABILITY_WHOLENESS_OF_BODY, FALSE));\n\n    //Apply the VFX impact and effects\n\n    ApplyEffectToObject(DURATION_TYPE_INSTANT, eHeal, OBJECT_SELF);\n    ApplyEffectToObject(DURATION_TYPE_INSTANT, eVis, OBJECT_SELF);\n}Select All Text | View Code in separate window","Patch":"1.03","Description":"A slight modification to the monk feat Wholeness of Body that allows a monk to heal his Wis Bonus times his level.\n\nNote - the description of the feat is not updated to reflect the changes as I don't believe they have a way of distributing a customized dialog.tlk, yet. \n\nTested with English Patch v1.03. \n\nJust drop the .ncs file into your override folder, which will typically be located in My Documents\\Neverwinter Nights 2\\Override","Rating":9.25,"Votes":1,"Awards":[]},"83":{"Name":"Sphax World Map System","Author":"Flavien Clermont alias Sphax","Submitted":20070205,"Updated":20070208,"Category":"Scripting routines","Type":"Type - Location Tracking","Format":"Code Only","Patch":"1.04","Description":"______________\n- What is it ?\n\nSphax Map System is a simple system for manage the new map feature of NWN2. With only 4 differents scripts you'll be able to create a Map for a solo campaign or a persistant world with ease.\n___________________\n- What does it do ?\n\nWhen a player want to go to a specific point of the world map he must know where this point is situated.\nTo know that, he must have a map (an item) or he must have learned this map.\n\nFor example if player is at Glinin town and want to go to Eckm�l city, he must acquire the map \"Map for going to Eckm�l\" by buying it (or by killing a monster or anything else ^^).\n\nAfter this map acquired, he can try to learn it.\nFor learning it, he simply use the map item.\nIf player has more than 14 in intelligence or if player has more thant 5 in survival skill, the map will be learned and player will be able to sell his old deprecated map. ;)\n\nIt's possible too to set the player to know a world map point by script.\n\nTO KNOW HOW TO USE IT, READ THE TXT.\n\nPS: Thanks to DLA team for the World Map tutorial. ;)\n\nUPDATE: I've built my ERF with an external tool so, I've rebuilt it with NWN2 toolset because somebody don't know how to get .nss. :)","Rating":7.5,"Votes":1,"Awards":[]},"84":{"Name":"Note Writer V1.2d","Author":"Depth of Night","Submitted":20070207,"Updated":20071227,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Other","Format":"Module Only","Patch":"1.11","NWN2Game":"All","Description":"Note Writer V1.2d\n\nMakes a readable note that can be distributed through out a PW.","Rating":9.5,"Votes":2,"Awards":[]},"85":{"Name":"Spell Fixes compilation v3.42","Author":"player1","Submitted":20070207,"Updated":20090905,"Category":"Scripting routines","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"This is compilation of various spell fixes for bugs found in Neverwinter Nights 2. Only fixes for actual bugs are included, since balance or PnP tweaks aren't goal of this compilation.\n\nNote that there are 3 main downloads here. One for users with original NWN2, another one for those having Mask of the Betrayer and third for those with Storm or Zehir. There is also Mysteries of Westgate compatibility patch available.\n\n\nHow to install?\n\nJust put files from archive to your Override folder.\n\n\nSpell fixes\n\n-Several fixes to Animal Trance spell\n *will use caster level, instead of total character level, for duration (if not racial ability)\n *won't have oversized radius (feet values in script should be converted to meters)\n-Fixed Dispel Magic and all its variations, so that when targeting area, it won't try to dispel aura effects twice (both as an area of effect object and as an effect on creature). Also, dispel check for area effects is changed to match official 3.5e rules better. Fixed spells/invocations are: Dispel Magic, Lesser Dispel Magic, Greater Dispel Magic, Mordenkainen's Disjunction, Voracious Dispelling and Devour Magic\n-Fixed Divine Power, so casting it twice on same target won't remove increase to base attack bonus\n-Tweaked Enlarge Person (including Duergar version) and Righteous Might, so extra damage added isn't magical, but physical. Otherwise, as magical damage, it would bypass any damage reduction\n-Fixed Entropic Husk, so that creatures immune to mind affecting effects properly turn hostile on their former allies\n-Fixed Flee the Scene invocation, so it functions normally if having Team Rush feat (won't haste only 2 characters)\n-Fixed Grease, Entangle and Vine Mine spells, so that incorporeal creatures are properly unaffected by them\n-Fixed Iron Body, so it makes caster immune to Mass Drown spell (and not just Drown)\n-Several fixes to Mass Fowl:\n *mental stat penalties, added by spell, made extraordinary to prevent their dispelling\n *properly removes invisibility from caster, when used\n-Fixed both Mind Blank spells, so they remove mind effects from Tasha's Hideous Laughter and Solipsism spells\n-Fixed Vampiric Feast, so it properly removes invisibility from caster, when affecting enemies\n-Fixed all restoration magic, so it doesn't remove buffs from Reduce spells. This includes: Lesser Restoration, Restoration, Greater Restoration, Neutralize Poison and heal by NPCs\n\n\nFixes to feats and class abilities\n\n-Fixed Fey and Fiendish Legacy/Presence feats, so that duration depends from total character level, and not from the level in class, which was leveled up, when these feats were taken\n-Several fixes to Song/Hymn of Requiem:\n *hymn will heal properly when used NPC AI\n *won't affect creatures of same faction that are outside current area\n-Several fixes to Eldritch Chain, when used with Hellfire Warlock:\n *Constitution damage will be reported, if any of chain attacks misses\n *will report correct Constitution damage, if more then 1 point is lost\n-Fixed several issues with Hellfire Blast and Hellfire Shield:\n *removed exploit which allowed use of Hellfire even if having immunity to Constitution damage\n *Constitution damage from use of Hellfire won't be dispellable anymore\n *Hindering and Binding Blasts will apply Hellfire Blast damage when active\n *Hellfire Shield won't halve damage with failed saving throw anymore, and do full damage with successful one\n *Hellfire Shield will respect Evasion\n *Hellfire Shield won't show fire impact visuals, if no damage is inflicted\n-Fixed several issues with Warlock essences, which happen when they share same shape:\n *applying new essence won't remove old one of different type, if both are using same shape\n *essences with secondary damage (like Brimstone) will work, if target is already affected by some other essence that shares same shape\n-Fixed Utterdark Blast shape, so it's properly set as Supernatural (and thus, not possible to dispel)\n-Fixed Warlock's Imbue Item ability, so it works with all recipes from MotB\n\n\nOther fixes\n\n-Added workaround for an issue, when taking epic spells with prestige classes could lead to getting wrong ability modifier being applied to their save DC. Also, added missing DC bonus to epic spells normally gained for every 3 caster levels after 20, as well as DC bonus awarded through influence feats from MotB campaign\n-Item properties without subtype will be upgradeable through crafting, if max number of enchantments is already reached (works with all 3 crafting systems)\n-Fixed crafting in SoZ campaign, for REAL, so that Imbue Item can substitute any spell needed\n-Fixed infinite loop in Fatal Sonic Trap script\n-Several fixes to Unity of Will spell-like ability of Silver Sword, used in MotB campaign:\n *depleting temporary hit points won't cancel out other buffs\n *enemies immune to mind effects won't skip saving throw and get penalty anyway (should be immune instead)\n\n\nFixes to spell attributes\n(spells.2da)\n\n-Fixed Castigate, so it can be properly aimed on caster, instead his allies (and effect is centered on caster anyway)\n-Added area targeting marker for Magic Circle against Alignment, since it's area effect (SoZ only)\n-Fixed range for Shadow Conjuration version of Darkness, so it matches other Darkness spells/abilities (should be large, not touch)\n-Added missing verbal component for Utterdark Blast invocation (NWN2 only)\n-Added area targeting marker for Assassin's Darkness, that was missing\n\n\nCrafting fixes\n(des_crft_scroll.2da/des_crft_spells.2da)\n\n-Fixed Barkskin, so it can be scribed on scroll with Ranger (NWN2 only)\n-Fixed Detect Undead, so it doesn't give item with Mass Cure Serious Wounds, when making potions or wands (NWN2 & SoZ only)\n-Fixed Magic Circle against Alignment, so it gives proper scroll when scribed (instead of Protection from Alignment, NWN2 only)\n-Fixed Mass Charm Monster, so it can be scribed on scroll with Wizard (NWN2 & SoZ only)","Rating":9.74,"Votes":79,"Awards":["Hall of Fame"]},"86":{"Name":"Charlie's Item Modifier","Author":"Charlie Vale","Submitted":20070208,"Updated":20110408,"Category":"Scripting routines","Type":"Type - Dynamic Merchants","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":" GUI driven item property modifier, allowing PCs to purchase custom designed items.\n\nDescription\nNormally if you want a special item in game you have to find a store that sells it. Chances are that unless you are after something fairly common you will have to settle for something that is only close to what you want. Module designers must specify every item that goes into a store, so making a mod that is suitable for the many classes (and races) can be daunting.\n\nInstead of doing this, Charlie's Item Modifier gives you a dynamic approach to item design. The player can specify what properties she wants on an item. Much work is taken off the module builder and the player gets a wide choice of equipment, to suit any style of play. Charlie's Item Modifier uses a custom UI, which is much more powerful than other conversation based item modifiers. You can see what properties your proposed item has, the level required to use it, and how much it will cost to make. You can continue to make changes until you are happy with the result, before confirming any changes and committing your hard won gold.\n\nInstallation - Players\n * Delete any previous installation of Charlie's Item Property Modifier.\n * Unzip the archive into your 'My Documents\\Neverwinter Nights 2\\override' folder.\n * (Optional) If you want acess to all properties, delete the folder 'charlie-mdp - zRestrict'.\n * (Optional) If you did the above, but do want to have to pay for your modifications, delete the folder 'charlie-mdp - zFree'.\n * In the Official Campaign, launch the Item Modifier from the player menu (the eye).\n\nInstallation - Module builders:\n\n * Import the file charlie-mdp.erf\n * Place the 'Placeable > valenet|special > Item Crafting Safe Chest' in an in-accessible area of your module.\n * Place the 'Creatures > valenet|NPC > Item Crafter' where you want PCs to have access to him.\n * Place the 'Stores > valenet > Base Item Store' near the crafter, so PCs can purchase base items.\n\n\nFor DMs\nWhen the item modifier is used from within the DM client, you will not be charged any gold. The gold cost of the modification will still be displayed for the purpose of balancing reward items. In an upcoming version of the DMFI it will be possible to launch the item modifier from the context menu.\n\nCompatibility\nThis package includes changes to the player menu. If you are using other systems that modify the player menu you will need a combined player menu. The Player Menu Pack includes combined menus for:\n\n * Charlie's UI (charlisui)\n * Charlies Item Appearance Changer (mda)\n * Charlies Item Modifier (mdp)\n * Alan's Universal Companion Database (ucd)\n\n\nTo install the combined menu, locate the folder containing the player menu that combines the systems you are using. For example to combine Charlie's UI, Charlie's Item Appearance Changer and Charlie's Item Modifier, use the folder \"charliesui-mda-mdp\". Copy this folder to your override directory and rename it z-override - \"My Documents\\Neverwinter Nights 2\\override\\z-override\". This is to ensure it is loaded last and overrides any other version of the player menu.\n\nThis system makes extensive use of the item property .2da files. If you modify them, you will probably change the behaviour of the item modifier. If you follow the same format, this should automatically make your changes available through the item modifier. Some fixes to 2da files are included.\n\nIf you discover any compatibility issues, let me know.\n\nCustomization\nCharlie's Item Modifier can be customized for your module, though some scripting is required. Notes on customization are included with the download\n\nNote that there are over 7000 properties that can be made from the combinations of property types and options. It goes without saying that we have not tested them all on the over 100 possible base items. If you find anything unusual let me know and I will take a look at it.\n\nFAQ\nQ. Can this change appearance?\nA. Try Charlie's Item Appearance Changer.\n\nQ.Why is the right hand panel blank / missing buttons?\nA. Check you don't have the game paused as this won't work while the game is paused. Occasionally there will be a pause as the game caches 2da files, GUI files or does something else. This pause is interpreted by the script engine as a 'to many instructions' error (infinite loop), in the script that populates the buttons so it will be killed. Hence some or all of the buttons may be missing. Close the GUI and restart it (by talking to the item crafter) and it should be fine again.\n\nQ. Why are the properties not in any order?\nA. The properties appear on the buttons in the same order they are in the .2da files. To sort them would take the script a significant amount of time, which for the cast spell properties will crash the script. There is a hard limit as to how long a script may take to execute, and for some of the properties this runs very close to that limit. I may end up hard-coding some of the properties instead of using the 2da's if this is a problem for a lot of people.\n\nQ. Will you make a character levelup mod with this included?\nA. WhatIsSol has done this in JEGs Training Module.\n\nQ. (PW builder) What happens if someone uses this on my PW.\nA. Only scripts that you install on your server will run. The module restrictions that you apply to the module on your server will be the ones that are used.\n\nChange log\n * 1.15 - Updated to use new list box functionality from NwN2 1.13\n * 1.14 - Fixed cancel button glitch that stopped properties being added. Optimised spell properties so they all get listed.\n * 1.13 - Added Enhancement bonus for ranged weapons. Fixed an exploit that allowed players to bypass some property restrictions.\n * 1.12 - Fixed mixed up saving throws.\n * 1.11 - Added visual effects. Enabled magical damage.\n * 1.10 - Added 2da fixes for cast spell and bonus hit points. Added 'zFree' and 'zRestrict' options. \n * 1.09 - No longer duplicates items in the OC.\n * 1.08 - Added the ability to use this as an override in the OC and third party modules.\n * 1.07 - Improved customisability. Added more documentation for customising. Added a message to the UI which shows when a crafter cannot add any modifications to the selected item. Updated the base item store (builders should replace the store in their mods.)\n * 1.06 - No longer requires ingamegui.ini changes (Fix).\n * 1.05 - Can now access all item property feats in iprp_feats.2da.\n * 1.04 - Fixed an exploit that would create items for free. Close button on second page. Name field auto populates. Changing properties confirms a name change.\n * 1.03 - On hit properties only applied to weapons now. DMs get modifications for free (when using the DM client).\n * 1.02 - Added self installer.\n * 1.01 - Added UI files to download.\n * 1.00 - Initial release (missing xml files).\n\nCheers!","Rating":9.89,"Votes":53,"Awards":["Hall of Fame"]},"87":{"Name":"Scarface's Persistent Banking v1.0","Author":"Scarface","Submitted":20070210,"Updated":20070212,"Category":"Database Related","Forum Thread":"Link","Type":"Type - Banking","Format":"Module Only","Patch":"1.04","Description":"This is the long awaited conversion of my NWN1 banking system for use with NWN2.\n\n\nOriginal NWN1 Persistent Banking System\n\nThis is a High performance persistent banking system using the built-in game database, no NWNX needed :)\n\nYou can allow players to save their items persistently without hindering server performance.\n\nThis system will NOT work in single player mode, it was specifically designed for a server vault server.\n\nYou can save ANY items, equipment, weapons, stacked items, and gold with no problems at all very fast and efficiently using the built-in game database. Containers (i.e. bags will not be saved to avoid any possible exploits, fair warning is given to the player).\n\nYou can also save gold persistently via the banker NPC. The Banker NPC uses listening patterns, you basically speak the amount you want to deposit/withdraw by typing it into the char bar.\n\nImplementation: \n\n1. Import the .erf file into your module. \n\n2. Place the \"Persistent Chests\" anywhere you want in your module, and as many as you want (Chests are located in the placeable blueprint palette).\n\n3. Place the \"Banker\" NPC anywhere you want in your module, as many as you want (The Banker is located in the creature blueprint palette, do not confuse the Banker with the Storage NPC, the storage NPC is not to be placed anywhere, it must remain in your blueprint palette).\n\n4. You can adjust some settings in the \"sfpb_config\" script. \n\n5. Use the \"build Module\" option and select to compile all scripts (this is very important). \n\nAll done. \n\nI have not fully tested it as I really don't have much time, so I will leave that up to you guys :)\n\nEnjoy :D \nScarface\n\n\n* Update: 12-Feb-2007 *\n\nAdded the persistent chest placeable to the erf file, which I originally missed out by mistake.","Rating":9.7,"Votes":12,"Awards":[]},"88":{"Name":"Simple Emote Widget","Author":"smellysocks","Submitted":20070210,"Updated":20070225,"Category":"Inventory Item","Type":"Type - General","Format":"Module Only","Patch":"1.00","Description":"Revised to fix a few little things...\n\n\nThis is a simple widget to call the various animation used during role play. Nothing more, nothing less. Enjoy.\n\nIncluded are:\n1 item blueprint\n1 script \n1 conversation\n\nSimply import the erf, place a widget in your inventory and click the widget to activate.\n","Rating":"N/A","Awards":[]},"89":{"Name":"Simple Teleport script","Author":"DemonLord","Submitted":20070212,"Updated":20070401,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Other","Format":"Code Only","ShowCode":"//Simple Teleport script//\n  void main()\n{\n//Edit next line with the tag of your waypoint. 2 edits: waypoint_tag\n    object waypoint_tag = GetObjectByTag(\"waypoint_tag\");\n    object oPlayer = GetPCSpeaker();\n\n\n    {\n//Edit next line with the tag of your waypoint. 1 edit: waypoint_tag\n        DelayCommand(2.0, AssignCommand(oPlayer, JumpToObject(waypoint_tag)));\n    }\n}Select All Text | View Code in separate window","Patch":"1.04","Description":"This is a simple teleport script that can be used on an NPC conversation to port you to a waypoint. Just add the script to the action of the dialogue.\n\nEdit 3 spots in the script with your waypoint tag.","Rating":"N/A","Awards":[]},"90":{"Name":"NWN2 Stock Scripts VOL I","Author":"Gamemaster X","Submitted":20070212,"Updated":20070219,"Category":"Games","Type":"Type - Other","Format":"Module Only","Patch":"1.00","Description":"Hi, Gamemaster X here. I was peeking up the games skirt and looking at all its private parts and it occurred to me it would be nice to have all the stock scripts in an e-book format. What you have here is VOL 1 of a three part series of Neverwinter Nights 2 Stock scripts (the ones that install with the game). VOL 1 concentrates on Main Scripts or those scripts not specific to spells or a specific area. My intention is for the final series to be laid out as follows.\n\nVOL I Main Scripts\nVOL II Spell Scripts\nVOl III Area Scripts\nVIL IV 2da\n\nContact info:\nwww.kalifornica.com\nkalifornica@gmail.com\n","Rating":7.69,"Votes":6,"Awards":[]},"91":{"Name":"Easy Party Companions","Author":"Lochlainn","Submitted":20070215,"Updated":20070215,"Category":"NPCs","Type":"Type - Henchmen","Format":"Code Only","Patch":"1.00","Description":"This is a simple way to add and remove companions.\n\nDocumentation is in the script add_companion.\n\nKnown issue: Removing a companion causes them to despawn, then respawn immediately in the same spot. There is a short clipping effect when this occurs; visually it's a little distracting. If anybody knows of a way around this, please share.","Rating":6.92,"Votes":3,"Awards":[]},"93":{"Name":"DebugTool","Author":"EPOlson","Submitted":20070218,"Updated":20070220,"Category":"Inventory Item","Type":"Type - General","Format":"Code Only","Patch":"1.00","Description":"Debug Tool:\n\n The debug tools helps minimize the time spent in the NWN2 edit/test cycle. \nIt allows the designer to save new changes to a module and then load the \nchanged module from the client. The basic flow is:\n\n 1. Start module in single or multiplayer-mode (nwn2server.exe or GUI)\n\n 2. Edit your module and save the changes\n \n 3. Activate the \"Debug Tool\" item in the game. Now choose the\n \"Reload module\" option. \n\n 4. Wait until the module finishes reloading (about 20 seconds for a small mod).\n Your PC should be in the exact same spot, but in the new version of the module!\n\n Repeat steps 2-4 until you are finished.\n\n There is also a bookmark feature to \"save\" a location and jump back later and the ability to jump to any waypoint tagged \"DEBUG_TOOL\".","Rating":9.25,"Votes":3,"Awards":[]},"94":{"Name":"JCH_Give_Inventory","Author":"Jack Heath","Submitted":20070223,"Updated":20070225,"Category":"Inventory Item","Type":"Type - Item Storage","Format":"Code Only","ShowCode":"// jch_give_inventory\n// Based on ga_give_inventory\n// CGaw 3/10/06\n// ChazM 3/15/06 - minor changes\n// JCH 02/23/07 \n\n/*\n\tThis script has the same functinoality as the ga_give_inventory script plus\n\tallows the collection of gold from an NPC. In addition, it will allow\n\tyou to give any inventory item to any creature and the giver will re-adjust\n\ttheir inventory to an optimal state.\n\t\n\tParameters:\n\t\tstring sGiver = Tag of object giving items.  Default is OWNER.\n\t\tstring sReceiver = Tag of object receiving items.  Default is PC.\n\t\tint iSlot = Which inventory items to donate:\n\t\t\n\t\tORIGINAL FUNCTIONS PLUS GOLD LOOTING\n\t\t96 = All inventory items, equipped items, and gold.\n\t\t97 = All inventory items only. \n\t    98 = All equipped items only. (Giver must be creature)\n\t\t99 = Take all Gold \n\t\t\n\t\tANY STANDARD GLOBAL 0-18 FOR INVENTORY WORKS, NOT JUST LISTED BELOW\n\t\t00 = INVENTORY_SLOT_HEAD\n\t\t01 = INVENTORY_SLOT_CHEST\n\t\t02 = INVENTORY_SLOT_BOOTS\n\t\t06 = INVENTORY_SLOT_CLOAK\n\t\t07 = INVENTORY_SLOT_RING\n\t\t08 = INVENTORY_SLOT_RING\n\t\t09 = INVENTORY_SLOT_NECK\n\t\t10 = INVENTORY_SLOT_BELT\t\t\n*/\n\n#include \"ginc_param_const\"\n#include \"ginc_item\"\n\nvoid main(string sGiver, string sReceiver, int iSlot)\n{\nobject oGiver = GetTarget(sGiver, TARGET_OWNER);\nobject oReceiver = GetTarget(sReceiver, TARGET_PC);\nPrettyDebug (\"sGiver = \" + GetName(oGiver));\nPrettyDebug (\"sReceiver = \" + GetName(oReceiver));\n\nswitch(iSlot)\n\t{\n\t\tcase 96: \n\t\t\tGiveEverything(oGiver, oReceiver);\n\t\t\tbreak;\t\n\t\tcase 97:\n\t\t\tGiveAllInventory(oGiver, oReceiver);\n\t\t\tbreak;\n\t\tcase 98:\n\t\t\tGiveAllEquippedItems(oGiver, oReceiver);\n\t\t\tbreak; \n\t\tcase 99:\n\t\t\tGiveGoldToCreature(oReceiver, GetGold(oGiver));\n\t\t\tTakeGoldFromCreature(GetGold(oGiver), oGiver, TRUE);\n\t\t\tbreak; \t\n\t\tdefault:\n\t\t\tActionGiveItem(GetItemInSlot(iSlot, oGiver), oReceiver);\n\t\t\tAssignCommand(oGiver,ActionEquipMostEffectiveArmor());\t\t \n\t}\n}Select All Text | View Code in separate window","Patch":"1.04","Description":"This is my first script, I wanted to be able to take a particular item on request from a character, like...\"Hey, lend me your axe.\" conversationally and have the character re-equip. I also added something to be able to take gold-only thinking it applicable to conversational poker games, slots, etc. But, if you downloaded this script ealy on grab it again. I found I had to change the way I did actions or the script didn't always force the character to re-equip.","Rating":"N/A","Awards":[]},"95":{"Name":"Bedroll, Campfire, Inn","Author":"SorceressAshura","Submitted":20070223,"Updated":20070224,"Category":"Resting","Forum Thread":"Link","Type":"Type - Resting","Format":"Module Only","Patch":"1.04","Description":"While this system is not unique to NWN, I didn't see it in the script section of the NWN2 files. Its very basic in nature, you can add your own stuff to it to make it your own. Hopefully, this will save a novice builder a few headaches concerning a working rest system. I've included a test module so you can get an idea for the resting system.\n\n**Installing**\n\nSimply place, gui_myrestscript_sa into the module properties event slot named; \"On Player Rest Script\" slot. \n\nAdd the Bedroll item into your stores, or client enter scripts. The item can be found in the category of items, \"Rhydin Plot Items.\" I've set a base price for the bedroll to 50 gold and added 5 pounds to its weight. Those options are customizable. (Price and weight)\n\nLook in your triggers, in the Empty section you'll find \"Rest Trigger\" there. Use that trigger to determine what spots in your area players can rest. Use it around campfires, or even Inn rooms. You�re all done. \n\n\nKnown Issues: \nI know of the Rest canceled tip glitch, where it speaks the line twice. I've no idea why it does it,... it's not suppose too. If anyone can figure it out, I'd love to know. You can comment the line out ( 28 ) or remove it entirely out of the script. If it bothers you, it won�t affect anything. It�s just for show, really.\n\nQ. Will it work in a PW?\nA. I don't see why not, I have yet to test it.\n","Rating":"N/A","Awards":[]},"96":{"Name":"xSoH - eXtended Sleight of Hand System","Author":"Caos81","Submitted":20070304,"Updated":20070306,"Category":"Entire Module/PW systems","Forum Thread":"Link","Type":"Type - Stealing","Format":"Module and Code","Patch":"1.04","Description":"This is a replacement for the standard Sleight of Hand system allowing you to perform the following (but not only) tasks:\n\n- Pickpocket/Insert an item from someone's inventory\n- Choose the item to steal/insert\n- Perform a Search skill check to determine if the thief can see or not some items from the Target's inventory\n- Set up the Search DC check in a very accurate way\n- Set up the DC to steal/insert the item in a very accurate way\n- Perform a Spot check to see if the Target sees the thief\n- Set up the Spot DC check in a very accurate way\n- Set up a really fancy loot system\n- Much more\n\nThis system if fully compatible with DMFI, xUI and Clubok Big Inventory UI. It should work with any other UI system out there.\n\nIt also works whith the standard campaign but it's raccomended to lower all the DCs\n\n\nEdit:\nAdded the missing \"skills.2da\". Please download the package again and paste the missing file into your \"\\Documents and Settings\\Neverwinter Nights 2\\override\" folder.\n\nThx","Rating":10,"Votes":4,"Awards":[]},"97":{"Name":"Improved Potions of Lore","Author":"Ishan","Submitted":20070306,"Updated":20070306,"Category":"Inventory Item","Type":"Type - Spell effects","Format":"Module and Code","ShowCode":"//::///////////////////////////////////////////////\n//:: Potion of Lore\n//:: NW_S0_PLore.nss\n//:: Copyright (c) 2001 Bioware Corp.\n//:://////////////////////////////////////////////\n/*\n\nGives the user a +4 bonus to lore for 5 minutes.\n\nAdditional Bonuses:\n+ 1 for each Non-Bard/Harper Class Level\n+ 2 for 5 or more skill ranks in Appraise\n+ 2 for 5 or more skill ranks in Spellcraft\n+ 2 for 5 or more skill ranks in Use Magic Device\n\n*/\n//:://////////////////////////////////////////////\n//:: Created By: Patrick Mills\n//:: Created On: July 26, 2006\n//:: Modified By: Ishan\n//:: Modified On: March 6, 2007\n//:://////////////////////////////////////////////\n\n\n#include \"x2_inc_spellhook\"\n\nvoid main()\n{\n\n/*\n  Spellcast Hook Code\n  Added 2003-06-23 by GeorgZ\n  If you want to make changes to all spells,\n  check x2_inc_spellhook.nss to find out more\n\n*/\n\n    if (!X2PreSpellCastCode())\n    {\n    // If code within the PreSpellCastHook (i.e. UMD) reports FALSE, do not run this spell\n        return;\n    }\n\n// End of Spell Cast Hook\n\n\n    //Declare major variables\n    object oTarget = GetSpellTargetObject();\n    int nBonus = 4;\n    //Additional bonuses start here\n    int nAppraise = GetSkillRank(SKILL_APPRAISE, oTarget, TRUE);\n    if (nAppraise >= 5)\n    {\n    \tnBonus += 2;\n    }\n    int nSpellcraft = GetSkillRank(SKILL_SPELLCRAFT, oTarget, TRUE);\n    if (nSpellcraft >= 5)\n    {\n    \tnBonus += 2;\n    }\n    int nUMD = GetSkillRank(SKILL_USE_MAGIC_DEVICE, oTarget, TRUE);\n    if (nUMD >= 5)\n    {\n    \tnBonus += 2;\n    }\n    int nLevels = GetTotalLevels(oTarget, FALSE);\n    int nBard = GetLevelByClass(CLASS_TYPE_BARD, oTarget);\n\tint nHarper = GetLevelByClass(CLASS_TYPE_HARPER, oTarget);\n    nBonus += (nLevels - nBard - nHarper);\n    //Additional bonuses end here\n    effect eLore = EffectSkillIncrease( SKILL_LORE, nBonus );\n    effect eDur = EffectVisualEffect( VFX_DUR_SPELL_IDENTIFY );\n    effect eLink = EffectLinkEffects( eLore, eDur );\n\n    if(!GetHasSpellEffect( 983, oTarget ) || !GetHasSpellEffect( SPELL_LEGEND_LORE, oTarget ))\n//  You can drink before casting LEGEND_LORE spell and both stack, so check above is pointless\n    if(!GetHasSpellEffect( 983, oTarget ))\n    {\n         SignalEvent( oTarget, EventSpellCastAt(OBJECT_SELF, 983 , FALSE));\n         ApplyEffectToObject( DURATION_TYPE_TEMPORARY, eLink, oTarget, RoundsToSeconds( 50 ));\n    }\n}Select All Text | View Code in separate window","Patch":"1.00","Description":"Originally, Potions of Lore become quickly ineffective if you aren�t a bard/harper and/or don't increase the Lore skill.\nThis modification of the 'Potion of Lore' spell effect allows identifying magic items additionally by character experience (levels) and certain skill synergy bonuses.\nWhile it still doesn�t guaranty identification for every item (value), every character should now less often need to visit shops for identification as long as Potions of Lore can be bought and/or found throughout a module.\nBasically, Potions of Lore give temporarily now a character a kind of Bardic/Harper Knowledge ability and more.\nThe modification is especially dedicated to \"uneducated\" character classes.\n\nAny standard 'Potion of Lore' in any module should give following bonuses then:\n\n+4 to Lore skill for 5 minutes (as before)\n\nAdditional bonuses to Lore skill:\n\n+1 for each non-bard/harper class level\n+2 for 5 or more skill ranks in Appraise\n+2 for 5 or more skill ranks in Spellcraft\n+2 for 5 or more skill ranks in Use Magic Device\n\nNote: Skill ranks are spent points into specific skills. The potion effect stacks with the 'Legend Lore' spell effect.\n\nHow to install:\nMove all extracted files into the 'My Docs\\Neverwinter Nights 2\\Override' folder.\n\n\nEnjoy!\n\nIshan","Rating":"N/A","Awards":[]},"98":{"Name":"Companion System","Author":"dickloraine","Submitted":20070306,"Updated":20070415,"Category":"Conversation","Type":"Type - Henchmen","Format":"Module and Code","Patch":"1.04","Description":"COMPANION SYSTEM\n-----------------------------------\n\nUPDATE\n----------------\nMulticlassing of companions added.\n\nDESCRIPTION\n----------------\nThis little system helps setting up companions in a module. No scripting is needed. In fact, even in the conversation there is no need to alter any of the conditionals or action taken scripts. Just add your text and remove the unneeded nodes.\nBy default, this system functions like the OC companion system. But you could alter some behaviours through the \"inc_companion_system\" script. See there for additional info.\nNEW: Multiclassing companions.\n\nSetting up a companion step by step\n----------------\nIt's easy: Make your companion in the tool set or use a given blueprint. You can import the companion scripts in the properties, by selecting import and there the companion script set. \nGive your companion an unique max. 10 characters tag. \nDuplicate the base conversation, rename it, type in your text and remove the unneeded nodes. For the behaviour like in the OC, the only node needed is the \"Join first time\" node. All other nodes should be removed. All nodes are duplicated, just to make it easy for you, to choose the structure you like (should the PC ask to join or the companion).\nGive your companion this conversation.\nPlace the companion somewhere in your module.\n\nSetting up a base camp like in the original campaign\n----------------\nMake your area. Now place a waypoint for each of your companions in the area. That are the spots, they will stand on in the base. This waypoints must be tagged like this: \"COMP_tagofcompanion\".\nAttach the \"a_companion_system_oe\" script in the areas OnClientEnter(!) slot and the \"a_companion_system_ex\" script in the areas OnExit slot.\nPut the \"pl_companion_system_oc\" script in the OnClicked slot of the door leading out of your area. For the door to beeing clickable, just give it a transition type.\nPlace a waypoint tagged \"COMP_AREA_EXIT\" where exiting the area should lead to.\n\nMulticlass Companions\n----------------\nThis system now supports multiclassing companions. You have to set the mode you like in the \"inc_companion_system\" script in the Init function. There is also a function called \"LevelUpCompanion\" in which you could enter the code for the level up of the companions. See the script for examples.\nIf you are not familiar with scripting, you will find an erf named \"companion_blueprints\" in this zip. If you import this erf, you will find some premade companions. You could alter this blueprints, as long as you keep the tag and do not change any of the classes, feats and skills. The mode is set to MODE_MULTI_CLASS. This are the sample companions: Bard/Dragon Disciple/Fighter, Rogue/Assassin, Ranger/Wizard/Arcane Archer, Fighter/Weaponmaster, Fighter/Dwarven Defender, Barbar/Blackguard and Rogue/Shadowdancer.\n\nMode Packages\n----------------\nMode packages are sets of flags for a specific behaviour of the companion system. Of course you could set each option seperatly in the Init function in the \"inc_companion_system\" script, but these packages are a more easy method to set a predefined behaviour.\nIf you have set a new mode, you have to recompile all the companion scripts. You could do this through file->compile->all.\nMODE_ORIGINAL_CAMPAIGN: This sets the system to function like in the original campaign.\nMODE_MULTI_CLASS: As in the OC, but multiclassing companions are possible. The companions are leveled up to the level of the PC. Multiclassing thereafter is possible through dialog.\nMODE_MULTI_CLASS_PLAYER_CONTROLLED: Companions are added at level 1 and given the XP of the player. The player can manually advance the companion and multiclass it as above.\nMODE_NO_PLAYER_CONTOLLED_MULTICLASS: Multiclassing companions are used and the player has no control over the level up process. If he levels up, the companions do so automatically or, if they were not in the party at level up, through dialog. This mode is a little more complicated. Look in the script to see, how it is set.\n\nInstallation\n----------------\nJust import the erf throug file->import and follow the above instructions.\n\nAlternative System\n----------------\nBy changing the NO_GUI_SELECTION mode in the \"inc_companion_system\" script, you could use a system like in NWN 1, disabling the GUI-Selection and add and remove companions purely through conversation. See the script for more details.\n\nHave fun,\n\ndickloraine ","Rating":9.92,"Votes":5,"Awards":[]},"99":{"Name":"Spell Fixes and Improvements version 6.06","Author":"Reeron and Trekari","Submitted":20070311,"Updated":20120610,"Category":"Scripting routines","Type":"Type - Classic PnP","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Various spell, bard songs, and invocation fixes for NWN2, MotB and SoZ.\n\n\"Spellsfixed\" contains spells that were just fixed (no balancing done to the scripts or not brought into line with PnP).\n\"SpellsfixedPnP\" contains spells that were just fixed (no balancing done to the scripts but are already in-line with PnP).\n\"Spellsimproved\" contains spells that are tweaked a little, such as the summons spells having longer durations.\n\"SpellsPnP\" contains spells that were either improved to use their PnP stats or were fixed because they were broken, and in the process, I fixed them to use their PnP stats.\n\"3.5 Classes\" contains custom class changes to bring them more in-line with PnP.\n\nDownload and unzip (I used WinRAR) the folders into your \"MyDocuments/Neverwinter Nights 2/override\" folder.\nDownload and unzip the Dialog.tlk file into your \"MyDocuments/Neverwinter Nights 2\" folder.\n\n\"Spellsfixed\":\nFixed giving sneak attacks with eldritch cone and chain since it shouldn't.\nSneak attack for spells- Now takes into account Invisible Blade levels as well as Epic Precision. Added in Sneak Attack feats supplied by items (ex: Random Loot Generator). All sneak eligible spells were recompiled to take into account these changes.\nInvocations- Warlock's Spell Resistance check now uses the Warlock's full caster level. Fixed bug so that different essences can now stack if using same blast shape. Touch attacks now take into account Combat Expertise and Improved Combat Expertise.\n\n\n\n-Avasculate- Ray effect gets shown every time now. Now tells you if the target is immune to death magic.\n-Barbarian Rage- Recompiled so Heal, Mass Heal, Lesser Restoration, Restoration, and Greater Restoration can now remove fatigue effects.\n-Blade Barrier self- Linked effects so dispel magic, cast on caster, removes all effects.\n-Bull's Strength- Now stacks properly with Righteous Might. Can't stack this spell with Mass Bull's Strength. Now checks for Blackguard levels. Now stacks with Enlarge Person or Duergar Enlarge Racial ability.\n-Burst of Glacial Wrath- Fixed problem with allowing immortality flag to be on creature(s) for too long. Creatures encased in ice now get proper Damage Reduction effect (DR 10/-). Won't accidentally affect caster anymore. Nobody gets skipped in the cone's area of effect anymore. Creatures with Cold Vulnerability won't be killed by this spell anymore. Feedback is displayed if creature is frozen solid.\n-Cacophonic Burst- Each target rolls for damage individually now.\n-Devour Magic- Will no longer stack temporary hitpoints.\n-Displacement- Can now be persisted (24 hour duration).\n-Eldritch Blast- Now respects immunity to criticals. Fixed visual so that ray effect gets shown even for missed or resisted targets.\n-Eldritch Chain- Now takes into account epic levels (21-30). Can be modified by PointBlankShot feat.\n-Eldritch Essences- If target is affected by an essence and then saves versus same essence again, first affect is not removed anymore. Only removed if 2nd save is failed since a new effect is going to be added and they can't stack anymore.\n-Energy Drain- Added sneak attack damage. Now uses ranged touch attack. Doesn't have a saving throw anymore since it uses a ranged touch attack. Correctly calculates extra damage on critical hit. Respects immunity to critical hits. This brings it inline with Enervation.\n-Entropic Husk- Duergar won't increase in size again if already affected by their racial Enlarge Person ability. Having Mind Spell Immunity doesn't protect from the insanity effect.\n-Ghast Stench Aura- Added immunity to poison check to prevent effects being applied if immune.\n-Hezrou Stench Aura- Added immunity to poison check to prevent effects being applied if immune.\n-Hypothermia- Fatigue applied by this spell can now be removed by Heal and the Restoration line of spells.\n-Infestation of Maggots- Immunity to Disease now works correctly.\n-Inflict Wounds line of spells- Now takes into account Melee Spell Specialization. Now takes into account Weapon Finesse.\n-Inflict Wounds line of Spells- Added sneak attack damage. Now do critical hits for extra damage. Respects immunity to criticals. No attack roll versus undead, since it's assumed you are trying to heal them and they are immune to criticals.\n-Invocation: Flee the Scene- Expeditious Retreat should have a 50% movement speed increase which would equal a total movement speed of 150%. Should not be a 150% increase in speed. Haste effect should apply to caster and his allies, not just his allies. Delayed the Expeditious Retreat effect being applied. Won't take affect during the first 5 rounds as this would super-stack it with Haste.\n-Invocation: Flee the Scene- Won't stack with itself anymore. Removed +2 AC bonus as it should not be part of the spell (It's not in Expeditious Retreat).\n-Invocation: Hideous Blow- Can be cast in advance without the need to target an enemy.\n-Iron Body- Fixed a bug so that Stormlords (9th level or higher) no longer lose their immunity to electricity. Fixed a bug so that Red Dragon Disciples (10th level) no longer lose their immunity to fire.\n-Isaac's Lesser Missile Storm- Won't strip off Spell Mantles anymore.\n-Isaac's Greater Missile Storm- Won't strip off Spell Mantles anymore.\n-Jagged Tooth- Now actually works.\n-Magic Circle Against Good/Evil- Now works on allies.\n-Mass Aid- Fixed issue with temporary hitpoints inadvertently being removed from the caster. Removed Spell Resistance check. De-linked HP from other effects so entire spell isn't cancelled when losing bonus hitpoints. Can't stack this spell with itself or regular version of Aid anymore.\n-Mass Bear's Endurance- Won't stack with Bear's Endurance or Mass Bear's Endurance anymore.\n-Mass Bull's Strength- Can't stack this spell with Bull's Strength anymore.\n-Mass Charm Monster- Can now be scribed on scrolls.\n-Mass Cure Line of Spells (not including Mass Cure Light Wounds)- Now takes into account Augmented Healing Feat. Uses will save now instead of incorrect fortitude save. Was using wrong variable during metmagic mods. Won't automatically hurt friendly undead anymore, only if they are in the area of effect.\n-Mass Cure Serious Wounds- Corrected heal amount to 3d8 (not 4d8) +1 per caster level.\n-Polar Ray- Now takes into account Ranged Spell Specialization. Now takes into account Point Blank Shot. Added sneak attack damage. Correctly calculates extra damage on critical hit. Respects immunity to critical hits.\n-Reach to the Blaze- Removed damage from on-enter script, as this could be abused for hundreds of hitpoints of damage per round. Damage is calculated for each target seperately now.\n-Searing Light- Now takes into account Ranged Spell Specialization. Now takes into account Point Blank Shot. Added sneak attack damage. Correctly calculates extra damage on critical hit. Respects immunity to critical hits.\n-Shadow Dancer's Shadow Evade- Now the Damage Reduction will actually do something. Also, it's a Dodge Bonus to AC not a regular Armor Bonus to AC. Some cases were left blank. That would mean no effect would occur at that level. Now fixed.\n-Shocking Grasp- Now takes into account Melee Spell Specialization. Now takes into account Weapon Finesse. Added sneak attack damage. Correctly calculates extra damage on critical hit. Respects immunity to critical hits.\n-Slay Living- Now takes into account Melee Spell Specialization. Now takes into account Weapon Finesse. Added sneak attack damage. Correctly calculates extra damage on critical hit. Respects immunity to critical hits.\n-Song of Heroism- No longer removes inspirations when used. Depleting temporary hitpoints doesn't end other effects of this song anymore.\n-Song of Requiem- Now works with non-player factions and limits effects to a single area, not the whole game area (multiplayer friendly). Properly removes invisibilty and stealth mode from the bard if any enemies are affected. Won't remove inspirations anymore.\n-Spell Mantle (Also includes Least, Lesser, and Greater versions)- Now works correctly with AOEs that have a duration (Wall of Fire for example). All AOEs with a duration will have to be redone to accomodate the changes.\n-Stone Body- Fixed a bug so that Stormlords (9th level or higher) no longer lose their immunity to electricity. Fixed a bug so that Red Dragon Disciples (10th level) no longer lose their immunity to fire.\n-Storm Avatar- Now does 3d6 electrical damage. Applies electrical bonus to weapon even if it has other elemental enchantments already. Fixed movement speed increase. According to the description, you travel at 200% normal speed (twice as fast). Fixed metamagic duration for extended spell.\n-Storm of Vengeance- Can't stack spell anymore. Caster Level stored on AOE for proper Dispel Magic callback. Was using wrong duration for stun effect. Should be 1 round, not 2 rounds, as per the in-game description. Lowered electrical damage to 3d6, on a failed save, not the incorrect 6d6 that it was using. Will now cancel the area of effect if the creator of the effect is dead. Applies random damage rolls to each target, not one roll per round applied to every target.\n-Tenacious Plague- Stopped this spell from stacking as per the in-script description. Now auto-hits on a 20 and auto-misses on a 1. Will now correctly be dispelled by Gust of Wind or Dispel Magic. Fixed the duration for metamagic Extend.\n-Tortoise Shell- Now properly capped at +9 AC max.\n-Touch of Fatigue- Recompiled so Heal, Mass Heal, Lesser Restoration, Restoration, and Greater Restoration can now remove fatigue effects.\n-Vampiric Touch- Now takes into account Weapon Finesse and Melee Spell Specialization. Added sneak attack damage. Uses correct calculation for maximized damage. Added critical hit check. Correctly calculates extra damage on critical hit. Heals extra damage on critical. Respects immunity to criticals.\n-Warlock Invocations- PointBlankShot feat check added. If present, ranged touch attack is modified by +1 (if you are 30 feet or closer to your target). Added sneak attack damage. Eldritch Blasts can now do critical hit for extra damage. Can't stack most blasts anymore.\n\n\n\n\"SpellsfixedPnP\":\n-Aid- Reworked script so it REALLY doesn't stack with anything anymore. Won't stack with Mass Aid anymore. Won't stack with itself anymore.\n-Assay Resistance- Gives correct 1 round/level duration. Correctly applies +10 Spell Penetration Bonus to Caster instead of Target. EventSpellCastAt is now using correct spell_Target_StandardHostile.\n-Augmented Healing Feat- Will no longer add bonus to any scrolls, potions, or healing items.\n-Bear's Endurance- Won't stack with Mass Bear's Endurance anymore. Can't be stacked at all anymore. If you try, it will give a message that you can't stack Bear's Endurance and then it will abort the rest of the spell.\n-Body of the Sun- Can now be selected by Wizards and Sorcerers.\n-Confusion- Fixed so metamagic extend actually works now.\n-Cure Spells- Changed maximized healing to work correctly.\n-Enlarge Person- Now stacks properly with Bull's Strength. Can now be cast on Githyanki and Githzerai. Won't stack with Duergar spell-ability Enlarge or other size increasing spells.\n-Enlarge Person (Duergar Racial Ability)- Now stacks properly with Bull's Strength. Won't stack with Enlarge Person or other size increasing spells.\n-FlameStrike- Now only does one save, instead of incorrectly doing two saves. Save type is versus spells, not divine or fire. Immunity to either shouldn't matter for the save. When the damage is applied, immunity will correctly block the appropriate damage.\n-Magic Weapon: Enhancement bonuses are allowed on Ranged Weapons, so this spell works on them too. Monks can take advantage of this spell (if wearing Gauntlets), as well as anyone wearing Gauntlets.\n-Polymorph Self- Updated for Succubus Polymorph ability. Removed feedback from spell. Now heals the recipient of physical damage, when initially polymorphing, as per PnP. Now you don't lose your bonus spell-slots if they are a result of an ability-increasing item.\n-Scorching Ray (both versions)- Now respects immunity to criticals. Single target version now shows ray effect every single time (even if resisted or it misses). Multiple target version now correctly calculates number of hostiles in area on Hardcore difficulty or higher. Both versions can now do sneak attack damage. Both versions can be used with the Ranged Spell Specialization feat.\n-Sleep- Now properly removes caster's invisibility when cast.\n-Vitriolic Sphere- Ignores Spell Resistance. Metamagic variable properly stored for future callbacks. Correctly applies full damage in 1st round no matter what. Made save means no further damage. Takes into account Evasion and Improved Evasion in rounds 2 and 3. Failed save in round 1 means further damage in round 2. Made save in round 2 results in 1/2 damage and no round 3 damage. Failed save in round 2 results in a 3rd round of possible damage (if no Evasion or Improved Evasion).\n\n\n\n\"Spellsimproved\":\n\nAll summoning type spells- You can now control the rate at which the summon's Level and AC scales with you. Level cappped at 30 as the game engine won't allow more than 30 levels. AB increase will stack with other AB increasing spells. AB still scales at 1/2 your level as the summon is way too powerful if allowed to scale at a higher rate. Natural AC bonus changed to Shield AC Bonus (like shield spell) so you can still use natural AC enhancing spells to increase the summon's AC. These spell also work with the \"Summon Creature\" line of spells, Create Undead, Create Greater Undead, \"Planar Binding\" line of spells, Animate Dead, and Epic Gate.\n\n-Animate Dead- Now you can have multiple summons. Skeleton Warrior gets a bonus of 1d8 cold damage if above caster level 14. Skeleton Warrior's attack bonus scales with you at a one to one ratio with your caster level, if above caster level 14. This helps to keep the spell useful at higher levels. Can no longer target a creature when casting this spell (prevents a bug where undead wouldn't scale with caster-level).\n-Archer's belt- Fixed blueprint so Damage Reduction works correctly.\n-Balhoderie's Softer Skin- Fixed blueprint so Damage Reduction works correctly.\n-Belt of Inertial Barrier- Fixed blueprint so Damage Reduction works correctly.\n-Bone Dancer Ring (MoTB)- Fixed blueprint so Damage Reduction works correctly.\n-Brawler's belt- Fixed blueprint so Damage Reduction works correctly.\n-Create Undead- Now you can have multiple summons. Epic Mummy Lord now has regeneration ability of 4 hp/round. Epic Mummy Lord now gets a bonus of 1d8 Negative Energy damage to it's attacks. Summons a Mummy (11th-15th level caster), Lesser Mummy Lord (16th level caster or higher who is not an epic character yet) or an improved MummyLord (Epic level caster). Can no longer target a creature when casting this spell (prevents a bug where undead wouldn't scale with caster-level).\n-Create Greater Undead- Now you can have multiple summons. Vampires do 3 hitpoints of bonus negative energy damage per hit. Epic Level characters now summon a Night Walker if their caster level is greater than 20. Creatures summoned are now Skeleton Warrior, Dread Wraith, Vampire (Fighter 11), Elite Vampire (Fighter 6/ Cleric 9), and Night Walker. Can no longer target a creature when casting this spell (prevents a bug where undead wouldn't scale with caster-level).\n-Creature slam attack (Mummy)- Damage was increased from 1d6+7 to PnP correct 1d6+10.\n-Dark Vision- Item property is corrected in the Random loot generator to now add Darkvision feat instead of non-functional Darkvision property. You can also fix the item property on any items that you have (even if not using my customized Random loot generator) by running the script Darkvisionreplace\". Look in the file, by that name, for instructions on how to use the fix.\n-Drow Piwafi Cloak- Fixed blueprint so Damage Reduction works correctly.\n-Elemental Summoning items- Fixed to allow multiple summons (Bowl of Commanding Water Elementals, Brazier of Commanding Fire Elementals, Censer of Controlling Air Elementals, and Stone of Controlling Earth Elemetals). Summon gets an automatic +5 to AC if user of summoning pool is above level 14. This helps to keep the spell useful at higher levels. Fixed the fact that the summon elemental items always summoned an Air elemental.\n-Epic Feat Gate- Now you can have multiple summons. Since the Balor has Two Weapon Fighting and Improved Two Weapon Fighting feats, I gave it two weapons (+1 Longsword and +2 Kukri; both have the Vorpal property which the Balor +1 Longsword already had). Both are slashing weapons so it won't mess with the kind of damage reduction that the Balor can bypass with it's weapons.\n-Flame Arrow- In-game description updated to properly state that no save is allowed. Range changed from Long to Medium. Added sneak attack damage (on first arrow only). Corrected damage to 4d6 per arrow. Removed spell resistance check since it's a conjuration spell. Now correctly calculates extra damage on critical hit. Respects immunity to criticals.\n-Grainstone Belt- Fixed blueprint so Damage Reduction works correctly.\n-Greater Archer's belt- Fixed blueprint so Damage Reduction works correctly.\n-Greater Brawler's belt- Fixed blueprint so Damage Reduction works correctly.\n-Greater Planar Binding- Now you can have multiple summons. Summon's attack bonus scales with you at 3/4 your caster level, if above caster level 14. Summon gets an automatic +5 to AC if above caster level 14. This helps to keep the spell useful at higher levels.\n-Greater Swordsman's belt- Fixed blueprint so Damage Reduction works correctly.\n-Invocation: The Dead Walk- Now can summon multiple undead when using this invocation multiple times. Summon's attack bonus scales with you at a rate of 1/2 your caster level. Skeleton Warrior's attack bonus scales with you at 3/4 your caster level, if above caster level 14. Skeleton Warrior now gets bonus damage of 1d8 cold damage if above caster level 14. This helps to keep the invocation useful at higher levels. Lowered duration to 1 minute per level to follow PnP. Can only have a total number of undead whose hitdice is equal to, or less than, 4 times the Warlock's level (as per PnP).\n-Iron Skin Ring- Fixed blueprint so Damage Reduction works correctly.\n-Lesser Planar Binding- Now you can have multiple summons.\n-Negative Energy Burst- Spell was enabled. Can use scribe scroll to create copies to give to other spell-casters. Scroll is NW_IT_SPARSCR3111. Uses same effects as NWN HotU (1d8 +1 damage/level and 1 point of strength-damage per 4 levels. Opposite effects to undead). Capped at 20 levels. Added a visual effect for the strength-drain that gets applied to non-undead.\n-Negative Energy Burst- Default level of scrolls upped from level 5 to level 10. Corrected scripting error where Undead would make a save and get healed for only half the amount. Targets now take damage immediately instead of having a small delay before the spell affects them.\n-Palemaster's Summon Greater Undead- Now you can have multiple summons. Vampires now do 3 hitpoints of bonus negative energy damage per hit. Epic Level characters now summon a Night Walker if their caster level is greater than 20. Creatures summoned are Vampire (Fighter 11), Elite Vampire (Fighter 6/ Cleric 9), and Night Walker.\n-Planar Binding- Now you can have multiple summons. Spell resistance of Celestial Bear now scales with caster at value of HD + 5.\n-Resist Energy- Now lasts 24 hours just like the other resistance versus elemental damage spells.\n-Silence- Friendly targets don't require a Spell-resistance check or a saving throw anymore.\n-Silence (on-enter)- Increased duration to take into account epic levels and Practiced Spellcaster.\n-Silence (on-exit)- Now takes into account spell-radial versions.\n-Summon Creature line of spells- There is no longer a limit on how many summons you can have with this spell. However, there is a limit of one per casting. Duration was changed to 2 rounds per level. Summon gets an automatic +5 to AC if caster level is above level 14. This helps to keep the spell useful at higher levels.\n-Summoned Succubus- Creature blueprint updated (Planar Binding spell) to more closely resemble PnP. Now has unlimited Ethereal Jaunt and Poymorph self (will only choose humanoid forms so no Umber Hulk or Sword Spider). Removed the following spell abilities: Darkness, Clairaudience and Doom. Now is correctly classified as a female.\n-Summoned Sylph- Creature blueprint updated in Planar Binding spell. Base level Sylph is a 7th level Sorcerer. The Slyph's Sorcerer level will scale with your caster level.\n-Swordsman's belt- Fixed blueprint so Damage Reduction works correctly.\n\n\n\"SpellsPnP\":\nFixed giving sneak attacks with eldritch doom since it shouldn't.\n-Acid Fog- No spell resistance. Increased duration to last 1 round/level, removed spell save, changed range from Long to Medium, changed radius size from 15' to 20', and lowered initial damage to 2d6 as per PnP. Correctly calculates random damage for each target in the area of effect rather than one roll per round applied to every target. Will now remove Area of Effect if caster is dead. Lowers movement speed to 5 feet per round. Gives affected targets -2 to attacks and damage inflicted. Can't be hit by ranged weapons nor can you hit with ranged weapons while in the fog cloud as per PnP. Gives 20% concealment to affected targets versus melee attacks while in the fog cloud. Changed TargetingUI (3rd column from end) from 8 to 2 to match 20' radius.Caster Level stored on AOE for proper Dispel Magic callback. This is the second AOE that works using my Dispel Magic code for removing AOE's. Can't stack spell in the same area of effect anymore. This is the second AOE that works this way.\n-Acid Fog (On Exit Script): Now properly removes any/all of the negative effects.\n-Acid Splash- Now takes into account Point Blank Shot and Ranged Spell Specialization. Range changed from Medium to Short. Added sneak attack damage. Removed spell resistance check. Added critical hit for extra damage. Respects immunity to critical hits.\n-Aura of Glory- Changed radius size from Colossal to Medium (10' radius) to match PnP. Now is instant duration and removes fear effects (on Paladin's allies) as per PnP. Fear effects include shaken effects. Won't stack any effects anymore. Removed the following part of the script as it isn't PnP: Paladin gets +4 to Charisma. Allies get +5 to saves versus fear.\n-Aura of Vitality- Changed radius size from Colossal to Large (15' radius) to match PnP. Maximum number of allies affected is equal to CasterLevel/3 as per PnP. Range changed from Touch to Short. Won't stack with itself anymore.\n-Balagarn's Iron Horn- Changed school from Enchantment to Transmutation.\n-Bane- Changed TargetType (column 9) from 0x29 to 0x2D. Only way to make it work correctly. Still casts centered on caster no matter where you actually target it on the ground. Changed radius size from 30' to 50' as per PnP. Now casts centered on caster as per PnP. Correctly set duration to 1 turn per level.\n-Banishment- Changed radius size from 30' to 15' as per PnP. Changed TargetingUI to show 15' radius. Now affects targeted area properly, instead of just area around the caster.\n-Barkskin- Now follows PnP stats. Base AC of 2. Increases by +1 for every 3 levels above 3rd level. Max of +5 at 12th level. Sets duration (1.5 min/level) to mid-way between 1 min/level and 1 hour/level since 2 real minutes = 1 game hour. 10 min/level spell should be more than 1 min/level spell but not quite 1 hour/level spell.\n-Battle Tide- Saving throw was being calculated wrong. Dispel Magic won't dispel the effect anymore, while in the area of effect. Range changed from Personal to Short. Changed Area of Effect to a 15' radius. Changed TargetingUI to reflect 15' radius. Linked haste with Area of effect so they are both dispelled properly. Can't be stacked anymore.\n-Bestow Curse- Caster now drops invisibility when casting this spell. Now saves caster level on target so Greater Dispel works correctly. Skill decrease parameter values were backwards. Now corrected (actually gives -4 to skills now). Changed from Transmutation to Necromancy as per PnP. Afflicted creature must save or suffer a -4 penalty on to-hit rolls, saves, and skill checks. This is a supernatural effect. This follows the PnP description.\n-Bigby's line of spells- Checks to see if the target is under the effects of another Bigby's spell. If it is, the new spell will not have an effect.\n-Bigby's Clenched Fist- Range changed from Long to Medium. Metamagic variable properly stored for future callbacks. Now does magical damage, not plain bludgeoning damage.\n-Bigby's Crushing Hand- Freedom of Movement now makes you immune to this spell. Range changed from Long to Medium. Metamagic variable properly stored for future callbacks. Now does magical damage, not plain bludgeoning damage. Can't grapple a creature who is larger than HUGE, but it can still damage it. Modified to better simulate a touch attack on the grapple to-hit roll. Removes armor bonus from chest slot, armor bonus from bracers or gauntlets, natural armor bonus from amulets, shield bonus from an equipped shield, and armor bonus from belts. By doing this it more closely simulates a melee touch attack which doesn't allow you your armor bonus, natural armor bonus, or shield bonus.\n-Bigby's Forceful Hand- Range changed from Long to Medium. Used Immobilize (to simulate being stopped by a Bullrush) attempted once per round rather than one knockdown attempt that lasts the entire duration.\n-Bigby's Grasping Hand- Freedom of Movement now makes you immune to this spell. Range changed from Long to Medium. Metamagic variable properly stored for future callbacks. Makes a grapple check. If succesful target is held immobile for 1 round/level. Can't affect a creature who is larger than HUGE. Modified to better simulate a touch attack on the grapple to-hit roll. Removes armor bonus from chest slot, armor bonus from bracers or gauntlets, natural armor bonus from amulets, shield bonus from an equipped shield, and armor bonus from belts. By doing this it more closely simulates a melee touch attack which doesn't allow you your armor bonus, natural armor bonus, or shield bonus.\n-Bigby's Interposing Hand- Now slows down target as per PnP. Can't slow down creatures weighing more than 2000 pounds (Huge creatures). Obviously, this is an approximation.\n-Blast of Flame- New spell. Can use scribe scroll to create copies to give to other spell-casters. Scroll is NW_IT_SPARSCR4111. No longer damages caster by mistake.\n-Bless- In-game description now matches spell. Changed radius size from 30' to 50' as per PnP. Now casts centered on caster as per PnP (changed from Long to Personal). Corrected duration to 1 minute/level.\n-Blindness/Deafness- Now follows PnP: 50% movement speed decrease, -4 to search checks, and automatically fail spot checks (simulated by giving a -50 penalty to spot skill). Target loses Dexterity bonus (only applies if Dexterity is above 10). Removed somatic component from spell (in Spells.2da) as per PnP. Changed to Supernatural effect and made duration permanent as per PnP.\n-Bombardment- Changed radius size to 15' radius (Large) as per PnP. Increased max damage to 20d8 and removed spell resistance as per PnP. No longer applies knockdown, but rather CutSceneImmobilize. This simulates being buried (if you fail your save). Every round you do a DC20 strength check. If failed, you are still buried (try again in 6 seconds). If you succeed, you are free and can act normally. While buried: You are immune to everything. All effects are applied as \"Supernatural\" so resting and Dispel Magic can't remove them. All effects wear off after one minute max so players on PW's aren't stuck for insanely long times if they have low strength. It's still supposed to be a fun game; one minute is long enough. Changed save type to SPELL so your ranks in Spellcraft are taken into account.\n-Breath weapon of Dragon Companion- Each target now has damage calculated individually. Now uses PnP correct DC calculation for breath weapon. Lightning breath weapon now shows visual effect. Size of breath weapon is based on the age and color of the dragon. Shape of breath weapon is based on dragon color. Red and Green use a cone, while Blue uses a cylinder (line).\n-Burning Hands- In-game description now matches spell.\n-Cause Fear- On successful will save, if creature has less than 6HD, it is still shaken for 1 round as per PnP. Shaken = -2 to Saves, Attack rolls, and Damage rolls.\n-Cause Fear- Fixed \"Shaken\" penalties as follows: Changed Damage decrease to Skill decrease (should never have been a damage penalty but rather a skill penalty). Also, changed saving throw decrease from will saves versus mind spells to all saves versus all types of spells as per PnP.\n-Celestial Bear (Planar Binding spell)- Creature hide updated to more closely resemble PnP. Damage resistances (acid, cold and electricity) increased from 5/- to 10/- . Spell resistance increased to 14 as their SR should be HD +5 (8+5=13 but 13 is not an option so went to next higher value of 14). SR scales with their level (HD + 5) when summoned as summoned creature scales with your caster level.\n-Charm Animal- Reworked script so charm isn't permanent anymore. Now actually increases saving throw of target creature, rather than lowering Save DC. Have to cap at 41 hours max or the Charm effect is permanent (except with Dispel Magic). Now uses correct PnP duration of 1 hour per level. Target gets +5 to save attempt if in combat (as per PnP). If Target fails an opposed Charisma check, it is Dominated instead of Charmed. This simulates the caster being able to convince the Target to do something it wouldn�t ordinarily do. (Retries are not allowed.)\n-Charm Monster- Reworked script so charm isn't permanent anymore. Now actually increases saving throw of target creature, rather than lowering Save DC. Have to cap at 41 hours max or the Charm effect is permanent (except with Dispel Magic). Now uses duration of 1 hour per level (can't use PnP duration of 1 day per level due to game-engine limitations). Target gets +5 to save attempt if in combat (as per PnP). If Target fails an opposed Charisma check, it is Dominated instead of Charmed. This simulates the caster being able to convince the Target to do something it wouldn�t ordinarily do. (Retries are not allowed.)\n-Charm Person- Reworked script so charm isn't permanent anymore. Now actually increases saving throw of target creature, rather than lowering Save DC. Have to cap at 41 hours max or the Charm effect is permanent (except with Dispel Magic). Now uses correct PnP duration of 1 hour per level. Target gets +5 to save attempt if in combat (as per PnP). If Target fails an opposed Charisma check, it is Dominated instead of Charmed. This simulates the caster being able to convince the Target to do something it wouldn�t ordinarily do. (Retries are not allowed.)\n-Circle of Death- Wasn't properly capped at 20d4 as per PnP. Now it is. Changed radius in-script to PnP correct 40'. Changed Targeting UI to show correct PnP radius. Set nMax to 9 as creatures of 9 or more Hitdice can not be affected as per PnP.\n-Cloudkill- Increased duration to 1 round / level. Changed school from Necromancy to Conjuration. Caster Level stored on AOE for proper Dispel Magic callback. Changed radius to correct size of 20' radius as per PnP. Added 20% Concealment to Melee attacks as per PnP. Added 50% Concealment to Ranged attacks (in-coming and out-going) to simulate the miss chance per PnP for targets further than 5 feet away. Assumes you would change to melee weapon if closer than 5.1 feet. This assumption isn't 100% accurate but something had to be done to simulate being further than 5 feet away.\n-Cloudkill- Can't stack spell in the same area of effect anymore. Range changed from Long to Medium. No spell resistance. Moved metamagic and damage roll to inside of loop, otherwise one roll at the beginning of round was being used, rather than a new roll for every target. Immunity to poison by one target doesn't cancel spell for all other targets anymore. CON damage will now stack properly. Can't be dispelled while in the cloud.\n-Cloud of Bewilderment- Saving throw MUST use the area of effect creator, otherwise saves aren't done correctly. On-enter script needed valid area of effect creator check. Will remove area of effect if caster is dead. On-heartbeat script needed spell resistance check AFTER checking to see if the target is already affected by Cloud of Bewilderment for more efficient use of script.\n-Cloud of Bewilderment- Can't stack spell in the same area of effect anymore. Caster Level stored on AOE for proper Dispel Magic callback. Changed Targeting UI to custom setting of 10' spellcone. Decreased size down to 10'. Now takes into account ranks in spellcraft. Immunity to poison now works correctly.\n-Cloud of Bewilderment- Will no longer cast spell so that it catches the caster in the AOE. Size was twice what it should have been (in-script). Now it's correct. Visual effect is now a custom vfx so it shows the correct size now.\n-Color Spray- Matches PnP stats. Creatures 2 HD or less: The creature is unconscious, blinded, and stunned for 2d4 rounds, then blinded and stunned for 1d4 rounds, and then stunned for 1 round. Creatures with 3 or 4 HD: The creature is blinded and stunned for 1d4 rounds, then stunned for 1 round. Creatures with 5 or more HD: The creature is stunned for 1 round.\n-Color Spray- Changed Spells.2da to not allow Maximize or Empower. Changed Targeting UI to 16 and size (in-script) to 15 feet. Removed ability (in-script) to Empower, Maximize, or Extend this spell. Immunity to MindSpells was causing automatic failure of save and Blindness being automatically applied because of this. This was fixed. Immunity to mindspells check was added. Immunity check, for Blindness, now takes into account Protection from Good/Evil. No longer initiates a spell resistance check on the caster.\n-Combust- Initial damage changed to 1d8/level (max level=10). Changed secondary damage to equal PnP damage of 1d6 per round. Secondary save is set to Reflex = 15 as per PnP.\n-Combust- Added in missing Melee Touch Attack roll. Now correctly calculates extra damage on a critical hit. Respects immunity to critical hits. Added sneak attack damage. Now takes into account Weapon Finesse. Now does extra damage if you have the (custom) feat Melee Spell Specialization.\n-Cone of Cold- Changed range to personal as it should originate from the caster's hand as per PnP. Length of spell cone is now 60 feet as per PnP. No longer initiates a spell resistance check on the caster.\n-Contagion- Changed Filth Fever ability damage from Intelligence to Dexterity. Changed Shakes ability damage from Strength to Dexterity. Changed Slimy Doom ability damage from Dexterity to Constitution. This was done by editing Disease.2da.\n-Control Undead- There is no limit on how many undead you can control with this spell. However, there is a limit per casting (twice your caster level in hitdice).\n-Control Undead- Changed duration to match that of PnP. 1 minute per level.\n-Control Undead (not PM version)- Now is 15' radius AOE that only affects undead targets. Will only try to dominate enemy undead. Targeting UI changed to reflect new size. Can now target on the ground, not just on a creature.\n-Creeping Doom- Complete script re-write. This now follows PnP. Auto-hit (no attack roll) for 2d6 damage (plus poison) while in the AOE as per PnP. DC 13 poison check for 1d4 Dexterity damage on both initial damage and secondary damage (1 minute later). Daze DC 13 Fortitude check in heartbeat script (nauseated as per PnP \"distraction\"). DC 20 spell failure check- if failed you can't cast spells. Both distraction and spell failure only last 1 round. Both checks are made every round while in the AOE. Can't stack spell anymore. Caster level stored on AOE for proper dispel magic callback. Incorporeal creatures can't be hurt by swarms as per PnP. Duration doesn't follow PnP as 1 min/level is waaaaay too long (at 20th level would last 10 game hours). Kept as 1 round/level.\n-Creeping Doom- Improved the visual effect of the AoE. Using extended version now works correctly. Will correctly be dispelled now by Gust of Wind or Dispel Magic.\n-Crushing Despair- Changed Range from Medium to Personal as per PnP. Changed size of cone to correct size of 9.144 meters to match PnP value (30 feet). Wasn't giving -2 penalty to skill checks as it should per the description. Linked all effects together, otherwise, Dispel Magic would not correctly remove all of the effects. Immunity to Mind Spells now works correctly. Now doesn't affect caster anymore. Immunity feedback message now takes into account Protection from Good/Evil.\n-Cure Minor Wounds- Now only heals 1 hitpoint as per PnP.\n-Curse of Impending Blades- Now has a spell resistance check. No longer stacks with itself or Mass Curse of Impending Blades. Can't be dispelled anymore (except by Greater Dispel Magic) as it's a curse (supernatural effect). Made it a supernatural effect like it's supposed to be.\n-Darkness- Changed duration to be 10 game minutes/level (20 real seconds per level- 1/6 that of hour/level spells). 1 game hour is 2 real-time minutes. Changed duration to permanent (in on-enter script) as the effect should not wear off unless you leave the AOE or the AOE goes away. Either way will call the Darkness (on-exit) script, which will properly remove the effects. Changed range from Long to Touch as per PnP.\n-Daze- Range set to short. Creatures of 4 HD or less can be affected. Not 5HD or less. Duration is 1 round not 2. These match PnP.\n-Death Armor- Capped at 1d4 +10 as per Spell Compendium page 60. This brings it in-line with PnP.\n-Death Knell- Correctly calculates extra damage on critical hit. Respects immunity to critical hits. Delinked Hitpoints so spell is not cancelled when losing bonus Hitpoints. Duration is 10 minutes per HD of target (10 minutes = 10 Turns). Removes previous effect only if new target fails save.\n-Death Ward- Changed duration to match that of PnP. 1 minute per level.\n-Deep Slumber- Changed Targeting UI and script to PnP correct 10' radius. Set script to 10HD max (not 10HD + 1d10) and duration to 1 min/level. Both are as per PnP. Range changed from Long to Short. Now affects creatures with up to 10HD. Now properly removes caster's invisibility when cast.\n-Delayed Blast Fireball- Duration set to 5 rounds max. Changed Targeting UI to match 20' radius (in-script already as 20' radius). Fireball detonates automatically at the end of 5 rounds even if an enemy hasn't tripped it yet. Range changed from Medium to Long. Now uses my custom Spell Resistance check routine. This fixes the SR and Mantle problems that Obsidian's code has with AOEs that have a duration.\n-Disintegrate- Updated for changes to how Mordenkainen's Sword now works. Now destroys my modified Mordenkainen's Sword. Now takes into account Ranged Spell Specialization. Now takes into account Point Blank Shot. Now kills trolls if they are reduced to 0hp or less. Now destroys Mordenkainen's Sword as per PnP. Range changed from Long to Medium. Added sneak attack damage. Now can be empowered. Uses ranged touch attack like it's supposed to (not melee touch attack). Correctly calculates extra damage on critical hit. Respects immunity to criticals.\n-Dispel line of spells (Lesser Dispel, Dispel Magic, Greater Dispel)- Updated for changes to how Mordenkainen's Sword now works. AoE dispel now actually works with my PnP Dispel Logic or the default logic (Mordenkainen's Disjunction). Now can cast as three different versions. Single-target hostile, single-target friendly, and Area of Effect. Now automatically removes the AOE if you created it (as per PnP). This works on all AOE's (that you created) even if I haven't updated those AOE's yet to store their Caster Level for proper Dispel Magic callback.\n-Dispel Magic (Lesser)- Can now actually use it to make properly working scrolls. Now can remove Mordenkainen's Sword as per PnP. Changed radius size form LARGE to HUGE. This makes it a 20' radius which matches PnP. Also, changed Targeting UI to match the new size. Now uses PnP version of dispel check for AOE spells. Defaults to Obsidian's clunky fudge of a dispel check for any persistent AOE's that aren't updated to take advantage of my new code.\n-Dispel Magic- Can now actually use it to make properly working scrolls. Now can remove Mordenkainen's Sword as per PnP. Changed radius size form LARGE to HUGE. This makes it a 20' radius which matches PnP. Also, changed Targeting UI to match the new size. Now uses PnP version of dispel check for AOE spells. Defaults to Obsidian's clunky fudge of a dispel check for any persistent AOE's that aren't updated to take advantage of my new code.\n-Dispel Magic (Greater)- Can now actually use it to make properly working scrolls. Default level of scrolls upped from level 7 to level 15. Now can remove Mordenkainen's Sword as per PnP. Now doesn't give curse removal message if target isn't cursed. Changed max caster level for dispel check to PnP correct +20. Now has a chance to dispel curses as per PnP. Changed radius size form LARGE to HUGE. This makes it a 20' radius which matches PnP. Also, changed Targeting UI to match the new size. Now uses PnP version of dispel check for AOE spells. Defaults to Obsidian's clunky fudge of a dispel check for any persistent AOE's that aren't updated to take advantage of my new code.\n-Divine Power- Persistent Metamagic now actually works. Casting this a second time, on the same target, will no longer cause the BAB increase to disappear. Can be persisted if you have a Cleric with the Strength Domain. Now takes into account Epic Levels (up to 30th level). Sets BAB to that of a fighter of the same total character level. Extra Attacks per round (You end up with the same number of attacks per round as a Fighter).\n-Divine Wrath- Was calling wrong spell id in signal event. This is a true damage reduction effect and therefore Adamantine should not bypass it. Changed the DamageReduction effect to reflect this.\n-Drown- Changed from Transmutation to Conjuration in Spells.2da as per the Spell Compendium page 74 and also the in-game description.\n-Eldritch Doom- Now heals friendly undead when used with Utterdark Essence. Now only affects enemies, and always originates centered on-caster. Fixed targetting UI to show correct size radius (was too small). Changed range from Medium to Personal, as it's centered on-caster.\n-Enervation- Duration now capped at 15 hours max (matches PnP). Added missing beam effect. This effect gets shown on a miss or a hit. Added sneak attack damage. Correctly calculates extra damage on critical hit. Respects immunity to critical hits.\n-Evards Black Tentacles- Does a grapple check as per PnP. No paralysis. No fortitude save against paralysis. If Grappled: Roots target in place (can't use legs). Applies -4 penalty to attacks. 100% spell failure (can't cast spells while being grappled). Can't grapple a creature larger than Huge as per PnP description. Can't affect incorporeal creatures (shadows and such- must have physical presence to grapple them). No to hit roll since the PnP description states that this spell doesn't use a to hit roll during it's grapple check. ALL creatures in the area of effect have their movement speed reduced by 50%, even if they aren't being grappled, as per PnP description.\n-Evard's Black Tentacles- Should be using EffectMovementSpeedDecrease(50) instead of EffectSlow. Now it is correct.\n-Evard's Black Tentacles- Freedom of Movement now makes you immune to this spell. Changed radius size from 10' to 20' as per PnP. Changed TargetingUI (3rd column from end) from 7 to 2 to match 20' radius.\n-Evard's Black Tentacles- Fixed visuals so tentacles don't disappear right after casting. Changed to PnP correct 1 grapple attempt per round, not 1d4. Caster Level stored on AOE for proper Dispel Magic callback. This is the first one that works this way (as per PnP rules). Can't stack spell in the same area of effect anymore. This is the first one that works this way.\n-Expeditious retreat- Changed movement speed increase to an increase of 50% as this is what is listed for PnP (30 feet increase). Quoted from PnP: \"If you do nothing but move (that is, if you use both of your actions in a round to move your speed), you can move double your speed\". (That would be 60 feet total). So 30 feet would be a 50% increase. Also, changed duration to 1 minute per level as per PnP.\n-Extract Water Elemental- Being immune to Death Magic shouldn't block this spell. Only non-living creatures (Undead and Constructs) are immune.\n-Fear- Range changed from Medium to Touch. On successful will save creature is still shaken (see Cause Fear) for 1 round as per PnP. Also added in -2 penalties when save is failed, as the shaken effect applies whether or not the save is successful as per PnP.\n-Fear- Changed area of effect from a circle to a 30' cone as per PnP. Fixed \"Shaken\" penalties as follows: Changed Damage decrease to Skill decrease (should never have been a damage penalty but rather a skill penalty). Also, changed saving throw decrease from will saves versus mind spells to all saves versus all types of spells as per PnP.\n-Feeblemind- Changed school to Enchantment. Changed Spells.2da to not allow Maximize, Empower, or Extend. Lowers target's stats to 1 just like PnP. Was set to 3 by mistake. Also, made it a supernatural effect so Dispel Magic and/or resting can't remove it. Affected creature unable to cast spells as per PnP. Added -4 penalty to will save for Arcane caster classes as per PnP. Made it permanent like PnP. Lowers target's stats to 3 just like PnP. If permanent you can only remove it with a heal spell.\n-Fire Shield- Correctly capped at 1d6 + 15 max as per WoTC website.\n-Firestorm- Size scales with caster level (up to level 20). AoE size is 200 square feet per caster level. Now affects any creature in the AoE as per PnP.\n-Firestorm- Now properly capped at 20d6 damage. Now only does one save, instead of incorrectly doing two saves. Save type is versus fire. There is no divine damage as per PnP. Range changed from Long to Medium as per PnP.\n-Flesh to Stone- Petrification can't be removed by resting anymore. Dispel Magic can't remove it anyway, so I made it a Supernatural effect. Can't affect Constructs, Undead, or Incorporeal creatures as per PnP rules. Both Undead and Constructs are immune to any effect that requires a fortitude save, unless the effect also works on objects or is harmless. Flesh to Stone fails this requirement because in it's description it states that it affects one creature (not one object). Incorporeal creatures have no flesh. Sorry, no flesh no worky.\n-Freezing Sphere- New spell. Redid scroll so it actually works again. Can use scribe scroll to create copies to give to other spell-casters. Scroll is NW_IT_SPARSCR6111.\n-Frenzy- Dispel Magic won't cancel effects anymore. Only 2 hp/round of damage instead of the 6 hp/round being used by NWN2. Also, added the missing extra attack per round that should be included. De-linked extra attack with the other extraordinary effects, so it shouldn't stack the extra attack with Haste anymore since the extra attack isn't considered extraordinary. It's considered a spell-like effect and therefore the game engine won't stack two of the same spell-like effects.\n-Ghoul Touch- Linked effects (on original target) so Dispel Magic removes all effects properly. Attack penalty was never linked to the other effects. Saving Throw decrease was linked twice, not once. GetAreaofEffectCreator() must be passed into saving throw, otherwise invalid saves can occur. Immunity to poison prevents the stench affecting you as per PnP.\n-Grease- (On Heartbeat) Added check for immunity to knockdown. If immune to knockdown, creature is immobilized using CutSceneImmobilize (on a failed save). This simulates falling, as being immune to knockdown doesn't make you immune to falling down.\n-Grease- Changed size from 20' radius circle to 10' by 10' square as per PnP. Changed TargetingUI to reflect the change in shape and size. Range changed from L to S.\n-Greater Invisibility- Changed the invisibility type to INVISIBILITY_TYPE_IMPROVED. This allows the affected creature to remain invisible even after attacking, just like PnP. Only creatures that can see invisible creatures or succeed at a listen check can target the affected creature.\n-Greater Magic Fang- Now works on 2 of the 3 creature's weapons. This isn't PnP \"perfect\", but it takes care of the problem with creature attacks not always following their correct progression. Now works with Druid's Elemental Shape form (considered Outsider not Elemental) and Dragon Shape form. Added in racial type Elemental as one of the creature types that can be affected by this spell. Range changed from Touch to Short. Duration is now 1 hour/level and enhancement bonus is +1 per 4 caster levels. Will properly add enhancement bonus to natural weapons of target creature. By not adding attack and damage bonus to the creature's natural weapons, but instead adding enhancement bonuses, the effect will be removed properly. This prevents Druids from keeping the bonus (attack and damage bonus) after cancelling Wildshape. Now includes Kaedrin's check for Plant and Magical Beast.\n-Greater Magic Weapon- Enhancement bonuses are allowed on Ranged Weapons, so this spell works on them too. Monks can take advantage of this spell (if wearing Gauntlets), as well as anyone wearing Gauntlets.\n-Greater Restoration- Script updated to remove Insanity, Fatigue, and Exhaustion as per PnP. In-game description updated to properly state what effects the spell removes. Doesn't heal Hitpoints anymore as per PnP. Won't remove \"Reduce\" spell effects. Removes Solipsism effect.\n-Gust of Wind- Changed from 40' diameter AOE to line shaped effect (have to use SpellCone instead). Changed from RADIUS_SIZED_HUGE to 18.288 meters (60 feet) as per PnP. Medium sized creatures (and smaller) can't move towards the caster for 1 round (uses CutsceneImmobilize to simulate this effect). Small or lesser sized creatures are knocked prone (EffectKnockdown) for 1 round. This is as close to PnP as I can get for now. All creatures in the area of effect suffer -4 to ranged attacks and listen checks for 1 round (duration of Gust of Wind) as per PnP.\n-Gust of Wind- Dispels only the following AOE objects: Acid Fog, Choking Powder, Cloud of Bewilderment, Cloudkill, Creeping Doom, GhoulTouch, Incendiary Cloud, Mindfog, Stinking Cloud, StoneHold, and Tenacious Plague.\n-Gust of Wind- Now actually removes Fog Of Bewilderment. Now actually removes Choking Powder. Now working on Creeping Doom and Tenacious Plague.\n-Harm- Added sneak attack damage. Spell now properly targets hostile creatures. Does critical hit for extra damage. Respects immunity to criticals. No attack roll versus undead, since it's assumed you are trying to heal them and they are immune to criticals. Can't lower target's hitpoints to less than 1 as per PnP.\n-Heal- Can't reduce undead's hitpoints to less than one, per PnP. Now removes Insanity, Fatigue, and Exhaustion as per PnP. Heal versus undead now uses a touch attack, like it should. Now removes effects, as per PnP.\n-Heal- Won't remove the effects of Enlarge Person, Duergar Enlarge Racial ability, Iron Body, or Stone Body. Won't remove \"Reduce\" spell effects. Removes Solipsism effect.\n-Horrid Wilting- Changed to Selective Hostile which means it is Enemy-only. According to WoTC it is not a 30' radius spread (which would affect everything), but it targets living creatures that are within 60' of one another. Quoted from WoTC: \"This spell evaporates moisture from the body of each subject living creature\". This implies that you pick the targets as long as they are within 60' of one another. This acts like a 30' radius for the game engine.\n-Horrid Wilting- Changed Target UI to reflect proper 60' area. Changed to a range of Long as per PnP. Water Elementals take d8 damage instead of d6 as per PnP.\n-Icelance- New spell. Redid scroll so it actually works again. Can use scribe scroll to create copies to give to other spell-casters. Scroll is NW_IT_SPARSCR3112.\n-Implosion- Changed to be closer to PnP. Max of 4 targets can be affected. Only one creature per round can be affected. +3 to save DC was removed as this isn't true for PnP. Incorporeal creatures, such as shadows, can't be affected by this spell (and don't count towards cap of 4). Changed to SelectiveHostile- in PnP you pick your targets so you wouldn't kill your allies. Immunity to Death does not protect you- as per PnP this has a Destruction descriptor, not Necromancy descriptor (Death Magic). It causes the creature to collapse in on itself (like a mini-blackhole), killing it. Trolls can be killed by this spell as it does fire damage to them instead (EffectDeath doesn't kill trolls- only fire or acid does). Those who are immune to death suffer Magic Damage equal to their current hitpoints +30 (this assures that DR doesn't lower the damage suffered to a non-lethal level such as having DR 30/Magic).\n-Improved Invisibility (Assassin)- Now takes into account assassin levels for duration. Same as Greater Invisibility. Also lowered duration to 1 round/level to bring it in-line with Greater Invisibility.\n-Incendiary Cloud- Changed school from Evocation to Conjuration. Can't stack spell in the same area of effect anymore. Caster Level stored on AOE for proper Dispel Magic callback. Changed radius to correct size of 20' radius as per PnP. Added 20% Concealment to Melee attacks as per PnP. Added 50% Concealment to Ranged attacks (in-coming and out-going) to simulate the miss chance per PnP for targets further than 5 feet away. Assumes you would change to melee weapon if closer than 5.1 feet. This assumption isn't 100% accurate but something had to be done to simulate being further than 5 feet away. Range changed from Long to Medium. No spell resistance.\n-Inspire Frenzy- Added the missing extra attack per round that should be included. Removed the Greater Frenzy check as the spell only applies +6 strength to your allies (never +10 so why check for it?). Lowered the damage per round to equal Frenzy's 2 hp/round.\n-Invocation: Beshadowed Blast- Now follows PnP: 50% movement speed decrease, -4 to search checks, and automatically fail spot checks (simulated by giving a -50 penalty to spot skill).\n-Invocation: Charm- Reworked script so charm isn't permanent anymore. Now actually increases saving throw of target creature, rather than lowering Save DC. Have to cap duration at 41 hours max or the Charm effect is permanent (except with Dispel Magic).\n-Invocation: Chilling Tentacles- Freedom of Movement now makes you immune to the physical part of this spell. Changed to PnP correct 1 grapple attempt per round, not 1d4. Can't stack spell from same caster anymore. Now does a grapple check as per PnP. No paralysis. No fortitude save against paralysis. Uses Cutscene Immobilize to root the target in place to simulate being grappled. Applies -4 penalty to attacks. 100% spell failure (can't cast spells while being grappled). Can't grapple a creature larger than Huge as per PnP description. Can't affect incorporeal creatures (shadows and such- must have physical presence to grapple them). ALL creatures in the area of effect have their movement speed reduced by 50%, even if they aren't being grappled, as per PnP description.\n-Invocation: Curse of Despair- Afflicted creature must save or suffer a -4 penalty on to-hit rolls, saves, and skill checks. This is a supernatural effect and follows the PnP description. Saves caster level on target so Greater Dispel (can remove curses) works correctly. Even if target makes it's save, it suffers -1 to attack rolls for 60 seconds.\n-Invocation: Devour Magic- Changed the max caster level for dispel check to PnP correct +20. Won't remove it's own temporary hitpoints anymore.\n-Invocation: Frightful Blast- Frightful blast now works on creatures of any HitDice, as per PnP. Now will properly have all effects removed on a dispel. Fixed it so that fear effect is not applied, just the shaken penalties, as per PnP.\n-Invocation: Hellrime Blast- Duration is now PnP correct 10 minutes.\n-Invocation: Retributive Invisibility- Now lasts for 1 round per level as per PnP. Retributive effects do not damage the caster on Hardcore difficulty. Stun effect is corrected to last only one round now instead of three. All effects will be removed on a properly failed Dispel Magic check.\n-Invocation: UtterDark Blast- Now actually level-drains non-undead again. Wasn't working properly in version 3.12. Undead no longer have to make a fortitude save when Utterdark Blast is used against them, as it can't level-drain them anyway. Utterdark Blast now heals Undead like it should. Fixed to allow stacking of negative levels, and to limit the duration to 1 hour (both as per PnP).\n-Invocation: Wall of Perilous Flame- Changed duration to match that of PnP. 1 round/level. Changed damage to match PnP. 2d6 +1/caster level.\n-Lay on Hands- Now works against Undead by creating a second Lay on Hands feat that is linked to the original Lay on Hands feat. Paladins (and Divine Champions) will automatically acquire this feat on their next level-up as long as they are at least 2nd level (1st level for Divine Champion).\n-Lay on Hands (hostile)- Added in check for Hospitaler levels. Added in Weapon Finesse check and Melee Spell Specialization check.\n-Lesser Restoration- Now removes Fatigue as per PnP, and won't remove effects of Reduce spells.\n-Maddening Scream- New Spell. Redid scroll so it actually works again. Can use scribe scroll to create copies to give to other spell-casters. Scroll is NW_IT_SPARSCR8111. The subject cannot keep him or herself from behaving as though completely mad. This spell makes it impossible for the victim to do anything other than race about caterwauling. The effect worsens the Armor Class of the creature by 4, makes Reflex saving throws impossible except on a roll of 20, and makes it impossible to use a shield.\n-Magic Fang- Now includes Kaedrin's check for Plant and Magical Beast.\n-Magic Missle- Changed from burst to accelerating in Spells.2da to speed up path of missles. Lowered Casting time from 2.5 seconds to 1 second so the missles hit their target before next week.\n-Magic Missle- Range set to Medium as per PnP.\n-Mass Cure Light Wounds- Now takes into account Augmented Healing Feat. Uses will save now instead of incorrect fortitude save. Capped max heal bonus to +25 as per PnP. Was using wrong variable during metmagic mods. Won't automatically hurt friendly undead anymore, only if they are in the area of effect.\n-Mass Curse of Impending Blades- Now has a spell resistance check. No longer stacks with itself or Curse of Impending Blades. Can't be dispelled anymore (except by Greater Dispel Magic) as it's a curse (supernatural effect). Made it a supernatural effect like it's supposed to be. Changed to correct size of 20' radius (6.069 meters). Now only affects enemies, as it should (according to the Spell Compendium).\n-Mass Heal- In-game description updated. Max number of hitpoints of damage done to an undead creature is now properly set to 250 per target, however, it can't reduce the undead's hitpoints to less than one as per PnP. Now removes Insanity, Fatigue, and Exhaustion as per PnP. Won't remove \"Reduce\" spell effects. Removes Solipsism effect. Now removes wounding effect. Per PnP description, Mass Heal can heal a maximum of 250 hitpoints. Won't automatically hurt friendly undead anymore, only if they are in the area of effect. Won't remove the effects of Enlarge Person, Duergar Enlarge Racial ability, Iron Body, or Stone Body.\n-Mass Inflict Light Wounds- Range changed from Medium to Short.\n-Melf's Acid Arrow- Now takes into account Ranged Spell Specialization. Now takes into account Point Blank Shot. Added sneak attack damage. No spell resistance. Does 2d4 damage on initial hit and each round. Correctly calculates extra damage on critical hit. Respects immunity to critical hits. Only does critical on initial round.\n-Melf's Acid Arrow- Sneak attack function now takes into account concealment. Sneak attack function now takes into account being pinned (simulated by Cutscene Immobilize). Cutscene Immobilize from the spell \"Grease\" doesn't count towards being pinned. Fixed stacking issues. You can, as it should be able to, stack this spell now as it keeps track of each arrow's duration individually. A miss doesn't cancel all other arrow's effects anymore.\n-Meteor Swarm (Creature)- Does double damage on a critical hit (if not immune to criticals). Added sneak attack damage (respects immunity to critical hits). Added PointBlankShot and Ranged Spell Specialization check. Seriously sped up how long it takes for all of the effects to take affect.\n-Meteor Swarm (Location)- Now only spawns 4 meteor projectiles as per PnP. Everyone in the AoE is subject to 24d6 fire damage.\n-Mind Fog- Now takes into account ranks in spellcraft during save. Immunity to Mind Spells now works correctly. Can't stack spell in the same area of effect anymore. Caster Level stored on AOE for proper Dispel Magic callback. Now applies -10 penalty to wisdom-related skills as per PnP. Changed TargetingUI to show correct 20' radius. Changed School from Illusion to Enchantment. Changed Range from Long to Medium. Immunity feedback message now takes into account Protection from Good/Evil.\n-Mirror Image- Maximized corrected to 8 images, not 4. Dispel Magic now removes all effects properly. Corrected to use AC=(10+dexterity modifier) for the created images like it's supposed to. Also, removed the level 15 cap as this is not per PnP.\n-Mordenkainen's Disjunction- AoE dispel now actually works with my PnP Dispel Logic or the default logic (Mordenkainen's Disjunction). Now can cast as three different versions. Single-target hostile, single-target friendly, and Area of Effect.\n-Mordenkainen's Sword- Rescripted to remove several exploits. Added my modified creature blueprint to SpellsPnP folder. Now has one attack per round as per PnP. Has attack bonus equal to (caster level + caster's ability modifier +3 enhancement) as per PnP. It can be destroyed by Disintegrate. It has complete immunity to physical damage and elemental damage as per PnP. It has an AC of 13 (10 base and +3 Deflection). Saves casterlevel for proper Dispel Magic callback.\n-Mordenkainen's Sword- Changed School from Transmutation to Evocation as per PnP. Fixed script so only the sword can receive the bonuses. Sword now does 4d6 +3 force (magical) damage on a hit. Removed +3 Enhancment bonus from equipped sword, so, had to increase AB by +3. Each caster, in the party, can now have one instance of this spell active at the same time. Used to be only one sword was allowed for the entire party. Sword can't be killed by using Divine Might anymore.\n-Palemaster: Bone Armor Spell Failure Reduction (feats gained at 4th and 8th level)- Can no longer exceed the innate Spell failure of the armor. In other words, if wearing leather armor (10% spell failure), an 8th level PM will only receive a 10% reduction in Arcane Spell failure (not 20%). This will set the armor's spell failure to 0 (not -10% like it used to do).\n-Palemaster: Control Undead feat- Feat Id is 3403. Range changed from short to touch. Uses cutscene dominated for Palemaster so there is no way for an undead creature to resist it.\n-Palemaster: Deathless Master Touch- Added sneak attack damage. Added check for weapon finesse feat to modify attack roll. Added true death touch (10th level Palemaster) and creation of caster controlled Zombie if target is killed. Added Weakening touch (7th level), Degenerative touch (8th level), and Destructive touch (9th level). Increased save DC to that of PnP. Decreased duration to match PnP.\n-Palemaster: Undead Graft- Added sneak attack damage. Added check for weapon finesse feat to modify attack roll. Added true death touch (10th level Palemaster) and creation of caster controlled Zombie if target is killed. Added Weakening touch (7th level), Degenerative touch (8th level), and Destructive touch (9th level). Increased save DC to that of PnP. Decreased duration to match PnP.","Rating":9.88,"Votes":112,"Awards":["Hall of Fame"]},"100":{"Name":"Hideous Blow... With Charges!","Author":"riebimite","Submitted":20070315,"Updated":20070316,"Category":"Spells","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.04","Description":"These files will enable a single casting of Hideous Blow to last for 1 + ( caster level / 5 ) charges. So, you start with 1 charge at level 1 and get 1 more for every 5 levels your character posesses, to a maximum of 5 charges at level 20.\nThis modification also includes the self-targeting ability added by ndsman in his \"Warlock - Eldritch Blast Fix\" modification.\n\nTo install just extract the files into your Override folder.","Rating":7.75,"Votes":2,"Awards":[]},"101":{"Name":"Module Testing Toolkit","Author":"Barry The Hatchet","Submitted":20070317,"Updated":20090901,"Category":"Scripting routines","Type":"Type - General","Format":"Module and Code","Patch":"1.22","NWN2Game":"All","Description":"MTT v2.01 - A GUI driven Module Testing Toolkit for builders and test players. MTT is designed to assist NWN2 developers with their module testing. Test players have controlled access to functions that improve the efficiency of module testing and reduce the time it takes to repetitively test modules, scripts and in-game systems. MTT uses a widget in combination with a UI menu to provide an easy to use package. MTT is simple to incorporate into existing modules, does not overwrite NWN2 files and comes with an installer/uninstaller.\n \nFeatures include \nControlled access to MTT functions � control what functions your module�s test characters and DMs can access.\nModule Reload � for restarting the module quickly. This is a real time saver for repetitive testing.\nTeleport Options � instantly jump to selected areas of your module. Several options are available like preconfigured waypoints, enter the tag of a waypoint or the previous module reload location, plus others.\nFlexible Debug Options � send debug information to a log file, as shouts, PC messages and/or DM channel.\nIncreased Movement Rate � twice normal running speed gets you places quickly.\nImmortal/Invulnerable � make the PC immortal/invulnerable. Sometimes death is just too inconvenient.\nExplore Map � display the unexplored areas of the map.\nCutscene Invisible � good for taking screenshots.\nUnlock & Disable Traps, Doors & Chests � it can also give DC information.\nInsta-Kill Enemies � if you don�t want to fight.\nDespawn Area � removes all NPCs/Monsters from the current area.\nIdentify Items � make sure your treasure tables are giving out the right gear.\nAdvance Game Time � test time dependant functions quickly. eg resting.\nInstant Rest � restores hit points, spells and removes negative effects.\nInstant Heal � restore hit points.\nResurrect � Bring life back to fallen comrades. It even works on your own dead PC.\nAlternative Conversation Driven Menus � Whilst the MTT is primarily UI driven, most functions are available via an alternative conversation driven menu.\nModule Reload Widget.\nCombat animation widget.\n\nFor the module builder who is serious about testing and QA, the Module Testing Toolkit can save hours by reducing the grind of repeat testing, making it easier to navigate quickly to locations within your mod, and providing an easy to distribute tool to your test players.\n\nIf you use the MTT to test or QA your module please take the time to show your appreciation by posting a vote.\n\nA big thanks to Better Than Life for his UI tutorial, Rich Taylor for his Blog, Grinning Fool for his NWN2 UI Reference, Abraxas77 for his updates to the UI Reference and Lance Botelle for his XML & GUI tutorial. \n\nUsage Notice: \n1. Permission is granted for the MTT to be incorporated into any NWN2 module or PW. \n2. Please do not re-package or distribute MTT functions, scripts or XML as part of any compilation for public release.\n\nv201d Update: Modified the MTT installer and the installation instructions. The v201c installer was was a little unpredictable with the update of ingamegui.ini \n\nv201e Update: Modified the code so MTT no longer uses ingamegui.ini This keeps MTT independent of other UI packages that may write to ingamegui.ini \n\nv2.01f Update: Added mouse over function descriptions to the the MTT Mini-Menu.\n\nv2.01g Update: The options include file now has the MTT version number appended to the file name. Added \"one click\" module reload option. See include script \"inc_mtt_options201x\". Thanks to smorpheus for the suggestion.\n\nv2.01h Update: Added area names to the Teleport UI buttons. Thanks to brisid for the suggestion. Added mouse-over tooltip descriptions to some of the Teleport options. Restricted UI functions are now disabled (greyed out)in the GUI. Added a Module reload widget that shortcuts the module reload process and avoids the MTT Main Menu. Added an animation widget that I have been using to test 3D models and animations. ","Rating":9.63,"Votes":26,"Awards":["Hall of Fame"]},"102":{"Name":"Basic_PW_Scripts","Author":"Terry Godman","Submitted":20070318,"Updated":20070318,"Category":"Database Related","Type":"Type - Player State Tracking","Format":"Module and Code","Patch":"1.04","Description":" ================================================================================\n\n Basic PW Scripts\n Terry Godman\n 18/03/2007\n\n Many thanks to Rowell for publishing his PW scripts,\n which inspired me to create these.\n Link\n\n ================================================================================\n\n These scripts perform basic character functions onto an SQLite database.\n i.e. Saving/Loading character records, current location etc...\n\n All current PW scripts (that I have seen) have been written with MySQL\n in mind and SQLite added afterwards. Unfortunately, one side effect of\n this is that the SQLite database is 'locked' and cannot be Read/Written\n by another program, i.e. web server.\n These scripts are an attempt to make web server access to the database possible.\n\n ================================================================================\n","Rating":"N/A","Awards":[]},"103":{"Name":"Markshire Climbing System","Author":"Markshire","Submitted":20070319,"Updated":20110429,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Classic PnP","Format":"Module and Code","Patch":"1.11","NWN2Game":"All","Description":"Now on Facebook!\n\nWelcome to Markshire's new Climbing System for NWN2. The system is built so you can access the climb without conversations or other unnecessary interfaces.\n\nIn addition to a simple interface (point and click, can't get any simpler then that) there are a number of factors that come into play. Markshire is a PnP style Persistent World that came from a true PnP Campaign World and as we do with all of our Systems we wanted to maintain the connection with that PnP heritage. So we utilize many of the climbing rules from PnP.\n\n\n***** TO IMPLEMENT THE SYSTEM *****\n\nDownload and decompress the file.\n\nImport the included ERF into your module.\n\nThe ERF installs the script and two placeables that can be used as the climb points. The first is a Rope Coil (representing rope assisted climbing) and the other is a Rock (representing free climbing). \n\nChoose which style you wish to use and place a copy at the bottom and another at the top of where the PCs will be able to climb.\n\nThen access the variables for each.\n\nCLIMB_BASE_DC = The DC of the climb. The general rule of thumb is that it's harder to climb up then to climb down. So an average rope assisted climb would be DC 15 up and DC 10 down.\n\nCLIMB_HEIGHT = The height of the climb. This represents the height of the climb divided by 10 or the number of dice of damage the fall can cause. Set this even if the fall is over 200-feet which would cause max damage (20d6). See below for more on damage. \n\nCLIMB_DIRECTION = This sets the direction the PC is climbing, UP/DOWN. This is important. DOWN = 0 and UP = 1. This determines how the script interprets failures.\n\nCLIMB_DESTINATION = This is the tag of the destination Waypoint. Place a waypoint with this tag near the opposite placeable.\n\nWith the variables set and the placeables in place you should be good to go. Please take a moment and review the included Module to see how the system works. \n\n\n***** HOW THE SYSTEM WORKS *****\n\n\nThings that prevent you from climbing �\n\nENCUMBRANCE � OVERLOADED: This is the state of encumbrance that we've all encountered where you can barely move.\n\nOFF-HAND WEAPON, ITEM or SHIELD: One hand can be occupied but not both.\n\n\nThings that make it harder to climb �\n\nARMOR: You incur the armor check penalty of the class of armor you are wearing. LIGHT: -2 � MEDIUM: -4 � HEAVY: -7 It doesn't pay to climb in heavy armor. However, since you might be climbing while being attacked it might be worth the effort.\n\nENCUMBRANCE � HEAVY: This is the first state of encumbrance that causes you a movement loss. -3\n\n\nHow do we calculate your chances �?\n\nTAKE 10: Take 10 is from PnP and applies to any ability or skill check that involves a bad result on failure. So you add your Strength Modifier to 10 and this is your \"roll\". This assumes that you are taking your time to make it. If your Take 10 is higher then the DC you automatically climb up/down.\n\nD20 ROLL: If your Take 10 can't succeed OR you are involved in combat you have to roll. You roll d20 and add your Strength Modifier. If you succeed over the DC you climb up/down.\n\n\nWhat happens when you fail �?\n\nDAMAGE: Falling damage is measured 1d6 per 10-feet fallen with a maximum of 20d6.\n\nMINOR FAILURE: If you miss your check by 5 or less you made it part of the way (we assume halfway) and fall HALF of the distance. Example: If the height is 80 feet then the damage will be 40-feets worth which would be 4d6.\n\nCRITICAL FAILURE: If you miss your check by 6 or more you fell the whole distance. Example: So from above you would suffer the 80-feet fall which would be 8d6.\n\nFALLING WHILE CLIMBING UP: If you fail you end up back where you started.\n\nFALLING WHILE CLIMBING DOWN: In this case, if you fail, you still succeed � it just hurts. You end up where you were heading. D-O-W-N!\n\n\n***** SYSTEM UPDATE *****\n\nUpload two includes the following updates�\n\nCLIMBING GEAR: The addition of three pieces of gear to the system.\n\nClimbing Gloves: Gloves that have metal hooks built into the palms for climbing. (Game Benefit: +2 to Climb Checks; GP Value: 300)\n\nRing of Arcane Climbing: This elven made silver ring was first created for the ascent into the Thrym Mountains above the pass. These rings were incredibly handy and made the climbing much easier for the mages. Unfortunately, it only works for those born with the gift of arcane magics. (Game Benefit: +5 to Climb Checks; Restricted Use: Bards, Sorcerers, Warlocks and Wizards; GP Value: 3000)\n\nLenley's Climbing Gear : Many professions have specialized equipment. Among them are those that must inevitably climb a height. One such daredevil managed to come up with a set of gear that assists those who are nimble with their ascents. (Game Benefit: Uses Dex instead of Str; Restricted Use: Bard, Rogue, Ranger; GP Value: 2500)\n\nRACIAL BONUS: Halflings receive a +2 Racial Bonus to climb checks in PnP.\n\nSIZE BONUS: Size large or greater receive a +2 bonus.\n\nSTEALTH CLIMB PENALTY: Climbing while in Stealth Mode incurs a -5 penalty. In addition, if the stealth climber fails their check they not only fall but are removed from Stealth Mode.\n\nCODE CLEANING: Cleaned up the code in several places.\n\n\n***** SYSTEM UPDATE INSTALLATION *****\n\nSimply import the ERF file downloadable below and import it into a module you are already using the climb system in. You WILL need to overwrite the existing \"ms_climb\" script.\n\n\nFor a lot more screenshots from our world please visit: Markshire. \n\nOther NW Vault Submissions:\nGame World\n\nMarkshire :: Kingdom of IceScripts for NWN1 \n\nMagic Carpet TransitionsMarkshire Experience and Teamwork SystemMarkshire's Nerfed Pulse DrownMarkshire's NomenclatureMPCS: Markshire Persistent Chest SystemQuill of PC RecordingScripts for NWN2 \n\nMarkshire Climbing SystemMarkshire Explosive BarrelsMarkshire Quill of PC Recording Fan Fiction \n\nA Missed Adventure Kurm and the Sewer King's Curse A Harrowing Story Loki's Foulest TrickRising ForceThe Mad Red Titan: Part OneThe Mad Red Titan: Part TwoThe Mad Red Titan: Part ThreeScreenshots\n\nA Cold New WorldA Community of FriendsA Dangerous RealmGiant Plots DevelopHidden StrongholdsOur Loyal Fans!Releasing the ThirteenNWN Ideas\n\nDisguise SystemNWN 2 Ideas\n\nJournal Export PluginExpansions on Markshire Submissions\n\nAerisarn's edited Markshire Persistent Portable Chests by AerisarnJournal exporter/importer by Sothis BPC Role-Play Disguise Kit by Velkyn","Rating":9.48,"Votes":13,"Awards":[]},"104":{"Name":"Biblioteca de misiones.","Author":"Gonar.","Submitted":20070324,"Updated":20070402,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Journal related","Format":"Code Only","ShowCode":"// Usar la descarga, esta preparada en un archivo .erf listo para importar y usar.Select All Text | View Code in separate window","Patch":"1.04","Description":"Biblioteca para constructores, que maneja las misiones ya sea en solitario o en conjunto de forma mas sencilla.\nFácil de usar e instalar, solo tendrás que importar al modulo, y usar con #include �ab_in_misiones� en los scripts que modifiquen variables o diario de tus misiones.\nLa biblioteca esta totalmente comentado en castellano.","Rating":9,"Votes":2,"Awards":[]},"105":{"Name":"Damage-Related XP System","Author":"Adamant","Submitted":20070327,"Updated":20070328,"Category":"Creature Related","Type":"Type - Combat","Format":"Module and Code","Patch":"1.04","Description":"Current Version: 1.1\n\nThis small, powerful, and fully customizable system offers a new alternative to the way combat experience is awarded. In short, the system awards XP based on successful attacks made against enemy creatures. The end result is experience that is awarded over time, rather than in one lump sum at the end.\n\nComments, questions, and/or suggestions are always welcome.\nDon't forget to vote!","Rating":7.94,"Votes":4,"Awards":[]},"106":{"Name":"Biblioteca de descanso.","Author":"Gonar","Submitted":20070331,"Updated":20070331,"Category":"Resting","Forum Thread":"Link","Type":"Type - Resting","Format":"Code Only","ShowCode":"// Usar la descarga, esta preparada en un archivo .erf listo para importar y usar.Select All Text | View Code in separate window","Patch":"1.04","Description":"Este es el sistema de descanso que usare en mis módulos.\nAquellos constructores que les guste y quieran usarlo o incluso mejorarlo, aquí tienen los scripts necesarios con un txt adjunto que indica como instalarlo.\nCaracterísticas del sistema.\n1.- Si el personaje lleva dos días sin dormir, efectos de cansancio.\n2.- Si el personaje lleva cuatro días sin dormir, muere de cansancio.\n3.- Solo se puede dormir cada 8 horas.\n4.- No se puede dormir con armaduras medias o pesadas.\n5.- Solo se puede dormir en zonas habilitadas.\n6.- Solo se puede dormir con comida y agua.\n7.- El agua y la comida pueden estar podridas o envenenadas.\nTodos estos puntos se pueden aplicar o no, editando la biblioteca de configuración.\n","Rating":9.83,"Votes":5,"Awards":[]},"107":{"Name":"Qk Calendar UI","Author":"Qkrch","Submitted":20070404,"Updated":20070405,"Category":"Time Devices","Type":"Type - Calendars","Format":"Module Only","Patch":"1.04","Description":"A little window showing a UI calendar. \n(like screenshot). It shows the day you are and the doomsday. I also add scripts for easy persistent time in your mod.\n-----------\n\nUna pequeña ventana que muestra un calendario por UI (como en la captura). Muestra el dia en el que estas y el día maldito. Tambien añado scripts para tener tiempo persistente en tu módulo.","Rating":8,"Votes":1,"Awards":[]},"108":{"Name":"Global Walkwaypoint Fix by Razare","Author":"Razare","Submitted":20070405,"Updated":20070405,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Daily Routine","Format":"Module and Code","ShowCode":"//:://////////////////////////////////////////////////\n//:: X0_I0_WALKWAY\n/*\n  Include library holding the code for WalkWayPoints.\n\n */\n//:://////////////////////////////////////////////////\n//:: Copyright (c) 2002 Floodgate Entertainment\n//:: Created By: Naomi Novik\n//:: Created On: 12/07/2002\n//:://////////////////////////////////////////////////\n//:: Updated On : 2003/09/03 - Georg Zoeller\n//::                           * Added code to allow area transitions if global integer\n//::                             X2_SWITCH_CROSSAREA_WALKWAYPOINTS set to 1 on the module\n//::                           * Fixed Night waypoints not being run correcty\n//::                           * XP2-Only: Fixed Stealth and detect modes spawnconditions\n//::                             not working\n//::                           * Added support for SleepAtNight SpawnCondition: if you put\n//::                             a string on the module called X2_S_SLEEP_AT_NIGHT_SCRIPT,\n//::                             pointing to a script, this script will fire if it is night\n//::                             and your NPC has the spawncondition set\n//::                           * Added the ability to make NPCs turn to the facing of\n//::                             a waypoint when setting int X2_L_WAYPOINT_SETFACING to 1 on\n//::                             the waypoint\n\n// 5/17/05 ChazM  added NW_WALK_FLAG_PAUSED, modified WalkWayPoints()\n// 7/22/05 ChazM  removed speakstring from WalkWayPoints()\n// 1/3/06 ChazM   modified WalkWayPoints() - moved ClearActions so doesn't wipe actions from GetNextWalkWayPoint(),\n//\t\t\t\t\tGetNextWalkWayPoint() - now calls script w/ name of waypoint \n// 1/4/06 ChazM modified WalkWayPoints(), added ForceResumeWWP(), GetNumWaypoints(), SetCurrentWaypoint(), GetCurrentWaypoint(), \n//\t\t\t\t\tGetPreviousWaypoint(), GetWaypointByNum(), DoWalkWayPointStandardActions() \n// 1/7/06 ChazM updated GetPreviousWaypoint(), SetCurrentWaypoint(), and GetCurrentWaypoint() to \n//\t\t\t\tGetCurrentWaypoint(), SetNextWaypoint(), and GetNextWaypoint() by popular demand\n// 1/11/06 ChazM modified system to maintain Next, Current, and Previous states.\n// 1/19/06 ChazM added GetWPTag() so that waypoint routes can be used by those w/o the proper tag.\n// 1/21/06 ChazM Upgraded to Dynamic Scripted Waypoints - waypoint sets can now be swapped dynamically.\n// 2/10/06 DBR   Changed name of WP_PREFIX and WN_PREFIX to WW_WP_PREFIX and WW_WN_PREFIX\n// 7/9/06 ChazM updated SetWWPController() \n// 8/1/06 ChazM updated SetWWPController() - Set Walk State only if there are waypoints in set.\n// 12/23/06 JCM added GetDayNightSwitch(), GetIsPosted()\n// -- modified GetWayPointByNum(), MoveToNextWaypoint(), GetNextWalkWayPoint() to check for\n// -- day/night transitions and return to post as needed\n// 4/4/07 Razare added clunky fix for global transitions...\n//              requires \"wp_trans_##\" local string var to be set on doors and transition triggers\n//              begin with wp_trans_00 and go to wp_trans_01 and so on...\n//              set the value of each local string to that of the waypoint tag that's on the other side\n//              of the transition\n\n#include \"x0_i0_spawncond\"\n#include \"ginc_debug\"\n\n//void main(){}\n\n/**********************************************************************\n * CONSTANTS\n **********************************************************************/\n\nconst string RR_WAYPOINT_CONTROLLER \t= \"nw_waypoint001\"; // Res Ref\n\nconst string WW_WP_PREFIX\t\t\t\t\t= \"WP_\";\nconst string WW_WN_PREFIX\t\t\t\t\t= \"WN_\";\nconst string WAYPOINT_CONTROLLER_PREFIX = \"WC_\";\n// Waypoint variables:\n//        WP_NUM     : number of day waypoints\n//        WN_NUM     : number of night waypoints\n//        WP_#, WN_# : the waypoint objects\nconst string VAR_WC_TAG\t\t\t\t\t= \"WC_TAG\";\n\t\n// vars on the creature\nconst string VAR_WP_TAG\t\t\t\t\t= \"WP_TAG\";\t\t\t\t// string tag to use instead of creature tag for initialization\nconst string VAR_WP_SINGLE_POINT_OVERRIDE = \"WP_SINGLE_POINT_OVERRIDE\"; // boolean, if true then run normally even if only 1 wp\n\nconst string VAR_KICKSTART_REPEAT_COUNT = \"N2_KICKSTART_REPEAT_COUNT\";\t// int counter\nconst string VAR_FORCE_RESUME \t\t\t= \"N2_FORCE_RESUME\";\t// boolean\nconst string VAR_WWP_CONTROLLER \t\t= \"WWP_CONTROLLER\";\t\t// WWP Controller Object\nconst string VAR_WP_PREVIOUS\t\t\t= \"WP_PREV\";\t\t\t// int\nconst string VAR_WP_CURRENT\t\t\t\t= \"WP_CUR\";\t\t\t\t// int\nconst string VAR_WP_NEXT\t\t\t\t= \"WP_NEXT\";\t\t\t// int\nconst string sWalkwayVarname \t\t\t= \"NW_WALK_CONDITION\";\t// bit flags, see below\n\n// If set, the creature's waypoints have been initialized.\nconst int NW_WALK_FLAG_INITIALIZED\t\t= 0x00000001;\n\n// If set, the creature will walk its waypoints constantly,\n// moving on in each OnHeartbeat event. Otherwise,\n// it will walk to the next only when triggered by an\n// OnPerception event.\nconst int NW_WALK_FLAG_CONSTANT         = 0x00000002;\n\n// Set when the creature is walking day waypoints.\nconst int NW_WALK_FLAG_IS_DAY           = 0x00000004;\n\n// Set when the creature is walking back\nconst int NW_WALK_FLAG_BACKWARDS        = 0x00000008;\n\n// Set to Turn off WWP\nconst int NW_WALK_FLAG_PAUSED           = 0x00000010;\n\n/**********************************************************************\n * FUNCTION PROTOTYPES\n **********************************************************************/\n\nint GetDayNightSwitch(object oCreature=OBJECT_SELF);\nint GetIsPosted(object oCreature=OBJECT_SELF);\nvoid ForceResumeWWP(object oCreature=OBJECT_SELF);\nint GetNumWaypoints(object oCreature=OBJECT_SELF);\n//int GetNumWaypointsByPrefix(string sPrefix, object oCreature=OBJECT_SELF);\nint GetNumWaypointsByPrefix(string sPrefix=WW_WP_PREFIX, object oCreature=OBJECT_SELF);\n\nvoid SetNextWaypoint(int iNextWP);\nint GetNextWaypoint();\nint GetCurrentWaypoint();\nint GetPreviousWaypoint();\n//object GetWaypointByNum(int iWayPoint, object oCreature=OBJECT_SELF);\nobject GetWaypointByNum(int iWayPoint, string sPrefix=WW_WP_PREFIX, object oCreature=OBJECT_SELF);\n\nstring GetWPPrefix(object oCreature = OBJECT_SELF);\nint GetWalkCondition(int nCondition, object oCreature=OBJECT_SELF);// Get whether the condition is set\nvoid SetWalkCondition(int nCondition, int bValid=TRUE, object oCreature=OBJECT_SELF);// Set a given condition\n\n\nvoid DoWalkWayPointStandardActions(object oWay, int bKickStart);\n//void LookUpWalkWayPointsSet(string sPrefix, string sPost);\n\n// Get a waypoint number suffix, padded if necessary\nstring GetWaypointSuffix(int i);\n\n\n\n// Get the creature's next waypoint.\n// If it has just become day/night, or if this is\n// the first time we're getting a waypoint, we go\n// to the nearest waypoint in our new set.\nobject GetNextWalkWayPoint(object oCreature=OBJECT_SELF);\n\n// Get the number of the nearest of the creature's current\n// set of waypoints (respecting day/night).\nint GetNearestWalkWayPoint(object oCreature=OBJECT_SELF);\n\n// HEAVILY REVISED!\n// The previous version of this function was too little\n// bang-for-the-buck, as it set up an infinite loop and\n// made creatures walk around even when there was no one\n// in the area.\n//\n// Now, each time this function is called, the caller\n// will move to their next waypoint. The OnHeartbeat and\n// OnPerception scripts have been modified to call this\n// function as appropriate.\n//\n// However, also note that the mobile ambient animations\n// have been heavily revised. For most creatures, those\n// should now be good enough, especially if you put down\n// some \"NW_STOP\" waypoints for them to wander among.\n// Specific waypoints will now be more for creatures that\n// you really want to patrol back and forth along a pre-set\n// path.\n//void WalkWayPoints(int nRun = FALSE, float fPause = 1.0, string sWhoCalled=\"no param\");\n//void WalkWayPoints(int nRun = FALSE, float fPause = 1.0, int bKickStart=TRUE, string sWhoCalled=\"no param\");\nvoid WalkWayPoints(int bKickStart=FALSE, string sWhoCalled=\"unknown\", int bForcResumeOverride=FALSE);\nint IsOkToWalkWayPoints();\nvoid MoveToNextWaypoint(int bKickStart=FALSE, int bForcResumeOverride=FALSE);\n\n// Check to make sure that the walker has at least one valid\n// waypoint they will walk to at some point (day or night).\nint CheckWayPoints(object oWalker = OBJECT_SELF);\n\n// Check to see if the specified object is currently walking\n// waypoints or standing at a post.\nint GetIsPostOrWalking(object oWalker = OBJECT_SELF);\n\n// ----\n\nobject SetWWPController(string sWalkWayPointsTag, object oCreature=OBJECT_SELF);\nobject GetWWPController(object oCreature=OBJECT_SELF);\nobject CreateWWPController(string sWalkWayPointsTag);\nvoid LookUpWalkWayPointsSet(object oWWPController, string sPrefix, string sPost);\n// Look up the caller's waypoints and store them on the creature.\n// Waypoint variables:\n//        WP_NUM     : number of day waypoints\n//        WN_NUM     : number of night waypoints\n//        WP_#, WN_# : the waypoint objects\n// bCrossAreas: if set to TRUE, the creature will travel between areas to reach\n//              its waypoint\nvoid LookUpWalkWayPoints(object oWWPController);\n\nstring GetWPTag(object oCreature=OBJECT_SELF);\nobject InitWWPController(object oCreature=OBJECT_SELF);\n\n\n/**********************************************************************\n * FUNCTION DEFINITIONS\n **********************************************************************/\n\n// Changes the waypoint set this creature will walk\n// returns the waypoint controller object found or created.\n// sWalkWayPointsTag is the tag of the creature the waypoints are designed for, i.e. no prefix or suffix\nobject SetWWPController(string sWalkWayPointsTag, object oCreature=OBJECT_SELF)\n{\n\t//PrettyDebug(\"SetWWPController() - Start\"); \n\n\t// find the Waypoint Controller Object\n\tstring sWWPControllerTag = WAYPOINT_CONTROLLER_PREFIX + sWalkWayPointsTag;\n\tobject oWWPController = GetWaypointByTag(sWWPControllerTag);\n\n\t// if doesn't exist then create it.\n\tif (!GetIsObjectValid(oWWPController))\n\t{\n\t\toWWPController = CreateWWPController(sWalkWayPointsTag);\n\t}\n\t// store the Waypoint Controller object (and associated tag) on the creature\n\tSetLocalObject(oCreature, VAR_WWP_CONTROLLER, oWWPController);\n\tSetLocalString(oCreature, VAR_WP_TAG, sWalkWayPointsTag);\n\n\t// if creature's controller has waypoints, then set walk flag and find nearest in set.\n\tint iNumWaypoints = GetNumWaypoints(oCreature);\n\tif (iNumWaypoints > 0)\n\t{\n\t\t// Make sure walk flag gets set so that hearbeat will fire.\n\t\t// (Won't be set if there is no waypoint set when creature spawns)\n\t\tSetWalkCondition(NW_WALK_FLAG_CONSTANT);\n\t\t\n\t\t// default next to closest wp.\n\t    SetLocalInt(oCreature, VAR_WP_NEXT, GetNearestWalkWayPoint(oCreature));\n\t}\t\n\n\t//PrettyDebug(\"SetWWPController() - Tag = \" + GetTag(oWWPController)); \n\treturn (oWWPController);\n}\n\n/*\nvoid VoidSetWWPController(string sWalkWayPointsTag, object oCreature=OBJECT_SELF)\n{\n\tSetWWPController(sWalkWayPointsTag, oCreature);\n}\n\nvoid ActionSetWWPController(string sWalkWayPointsTag, object oCreature=OBJECT_SELF)\n{\n\tActionDoCommand(VoidSetWWPController(sWalkWayPointsTag, oCreature));\n}\n*/\n\t\n// return creature's current wwp controller\nobject GetWWPController(object oCreature=OBJECT_SELF)\n{\n\tobject oWWPController = GetLocalObject(oCreature, VAR_WWP_CONTROLLER);\n\t//PrettyDebug(\"GetWWPController() - Tag = \" + GetTag(oWWPController)); \n\treturn (oWWPController);\n}\n\n\n// creature will exit from states such as sit and continue to its current waypoint.\n// will walk directly to current waypoint - scripted waypoint script won't be called\nvoid ForceResumeWWP(object oCreature=OBJECT_SELF)\n{\n    SetLocalInt(oCreature, VAR_FORCE_RESUME, TRUE);\n    WalkWayPoints(TRUE, \"Force Resume\");\n}\n\n// returns the number of waypoints for creature's walkwaypoint controller, according to specific prefix (WW_WP_PREFIX or WW_WN_PREFIX)\nint GetNumWaypointsByPrefix(string sPrefix=WW_WP_PREFIX, object oCreature=OBJECT_SELF)\n{\n\tobject oWWPController = GetWWPController(oCreature);\n    return (GetLocalInt(oWWPController, sPrefix + \"NUM\"));\n}\n\n// returns the number of waypoints for creature's walkwaypoint controller, according to the current time of day\nint GetNumWaypoints(object oCreature=OBJECT_SELF)\n{\n\tobject oWWPController = GetWWPController(oCreature);\n\tint iNumWaypoints = GetLocalInt(oWWPController, GetWPPrefix() + \"NUM\");\n    return (iNumWaypoints);\n}\n\n// **** functions for vars on the creature\n\n// set waypoint we intend to travel to.\nvoid SetNextWaypoint(int iNextWP)\n{\n    SetLocalInt(OBJECT_SELF, VAR_WP_NEXT, iNextWP);\n}\n\n// get waypoint we are currently en route to\nint GetNextWaypoint()\n{\n    return (GetLocalInt(OBJECT_SELF, VAR_WP_NEXT));\n}\n\n// get waypoint we're currently at\nint GetCurrentWaypoint()\n{\n    return (GetLocalInt(OBJECT_SELF, VAR_WP_CURRENT));\n}\n\n// get waypoint we were at previously\nint GetPreviousWaypoint()\n{\n    return (GetLocalInt(OBJECT_SELF, VAR_WP_PREVIOUS));\n}\n\n// Retrieves specified WP object for oCreature's WWP Controller\nobject GetWaypointByNum(int iWayPoint, string sPrefix=WW_WP_PREFIX, object oCreature=OBJECT_SELF)\n{\n\tobject oWWPController = GetWWPController(oCreature);\n    object oRet = GetLocalObject(oWWPController, GetWPPrefix() + IntToString(iWayPoint));\n    return (oRet);\n}\n\n// Get Current WP Prefix \nstring GetWPPrefix(object oCreature = OBJECT_SELF)\n{\n    string sPrefix = WW_WP_PREFIX;\n\n    if (GetSpawnInCondition(NW_FLAG_DAY_NIGHT_POSTING) && !GetIsDay()) \n    \tsPrefix = WW_WN_PREFIX;\n\n\treturn(sPrefix);\n}\n\n//--------------------------------------------------------------------------\n\n\n// Get whether the specified WalkWayPoints condition is set\nint GetWalkCondition(int nCondition, object oCreature=OBJECT_SELF)\n{\n    return (GetLocalInt(oCreature, sWalkwayVarname) & nCondition);\n}\n\n// Set a given WalkWayPoints condition\nvoid SetWalkCondition(int nCondition, int bValid=TRUE, object oCreature=OBJECT_SELF)\n{\n    int nCurrentCond = GetLocalInt(oCreature, sWalkwayVarname);\n    if (bValid) {\n        // the bit that is true will be set to true in the result\n        SetLocalInt(oCreature, sWalkwayVarname, nCurrentCond | nCondition);\n    } else {\n        // take complement of conditon and \"and\" it with current conditions which means\n        // everything preserved except the bit passed in which will be set to 0\n        SetLocalInt(oCreature, sWalkwayVarname, nCurrentCond & ~nCondition);\n    }\n}\n\n\n// Get a waypoint number suffix, padded if necessary\nstring GetWaypointSuffix(int i)\n{\n    if (i < 10) {\n        return \"0\" + IntToString(i);\n    }\n    return IntToString(i);\n}\n\n\n// Create a WWP Controller (presumably a requested one did not exist)\n// The following variables will be set up on the WWP Controller:\n// Waypoint variables:\n//      WP_NUM     \t: number of day waypoints\n//      WN_NUM     \t: number of night waypoints\n//      WP_#, WN_# \t: the waypoint objects\n//\t\tWC_TAG\t\t: string - base tag (for use in creating the script name)\nobject CreateWWPController(string sWalkWayPointsTag)\n{\n\t// we need unique tag for locating waypoints controllers: \"WC_<tag>\"\n\tstring sWaypointControllerTag = WAYPOINT_CONTROLLER_PREFIX + sWalkWayPointsTag;\n\tobject oWWPController = CreateObject(OBJECT_TYPE_WAYPOINT, RR_WAYPOINT_CONTROLLER, GetLocation(OBJECT_SELF), FALSE, sWaypointControllerTag);\n\tSetLocalString(oWWPController, VAR_WC_TAG, sWalkWayPointsTag);\n\tLookUpWalkWayPoints(oWWPController);\n\t//PrettyDebug(\"CreateWWPController(\" + sWalkWayPointsTag + \") - WP_NUM = \" + IntToString(GetLocalInt(oWWPController, \"WP_NUM\")));\n\t\n\treturn (oWWPController);\n}\n\n\n// Look up the Waypoint Controllers waypoints and store them (on the Waypoint Controller).\nvoid LookUpWalkWayPoints(object oWWPController)\n{\n\t//SpawnScriptDebugger();\n\n\t// SetLocalInt(OBJECT_SELF, VAR_WP_NEXT, -1);\n\tLookUpWalkWayPointsSet(oWWPController, WW_WP_PREFIX, \"POST_\");\n\n\tif( !GetSpawnInCondition(NW_FLAG_DAY_NIGHT_POSTING)) \n\t{\n\t    // no night-time waypoints\n\t    SetLocalInt(oWWPController, \"WN_NUM\", -1);\n\t} \n\telse \n\t{\n\t\tLookUpWalkWayPointsSet(oWWPController, WW_WN_PREFIX, \"NIGHT_\");\n\t}\n}\n\n// look up all the walk way points for this controller.\n// since we are creating the waypoint controller at the same location as the creture to\n// walk it, we can use either for the location for GetNearest\nvoid LookUpWalkWayPointsSet(object oWWPController, string sPrefix, string sPost)\n{\n    // check if the module enables area transitions for walkwaypoints\n    int bCrossAreas = GetLocalInt(GetModule(),\"X2_SWITCH_CROSSAREA_WALKWAYPOINTS\");\n\t\t\t\t\t\n    string sTag = sPrefix + GetLocalString(oWWPController, VAR_WC_TAG) + \"_\"; // sPrefix will be \"WP_\" or \"WN_\"\n\n    int nNth=1;\n    object oWay;\n\n    if (!bCrossAreas)\n    {\n        oWay = GetNearestObjectByTag(sTag + GetWaypointSuffix(nNth));\n    }\n    else\n    {\n       oWay = GetObjectByTag(sTag + GetWaypointSuffix(nNth));\n    }\n\n\t// if no valid waypoints then look for a post.\n    if (!GetIsObjectValid(oWay)) {\n        if (!bCrossAreas)\n        {\n            oWay = GetNearestObjectByTag(sPost + GetWPTag());\n        }\n        else\n        {\n            oWay = GetObjectByTag(sPost + GetWPTag());\n        }\n        if (GetIsObjectValid(oWay)) {\n            // no waypoints but a post\n            SetLocalInt(oWWPController, sPrefix + \"NUM\", 1);\n            SetLocalObject(oWWPController, sPrefix + \"1\", oWay);\n        } else {\n            // no waypoints or post\n            SetLocalInt(oWWPController, sPrefix +\"NUM\", -1);\n        }\n    } \n\telse \n\t{\n        // look up and store all the waypoints\n        while (GetIsObjectValid(oWay)) \n\t\t{\n            SetLocalObject(oWWPController, sPrefix + IntToString(nNth), oWay);\n            nNth++;\n            if (!bCrossAreas)\n            {\n                oWay = GetNearestObjectByTag(sTag + GetWaypointSuffix(nNth));\n            }\n            else\n            {\n                oWay = GetObjectByTag(sTag + GetWaypointSuffix(nNth));\t\t\t\n            }\n        }\n        nNth--;\n        SetLocalInt(oWWPController, sPrefix + \"NUM\", nNth);\n    }\n}\n\n// Determine and return the creature's next waypoint.\n// If it has just become day/night, or if this is the first time we're getting a waypoint, we go\n// to the nearest waypoint in our new set.\n// vars stored on creatures to track their progression through the waypoints\n//        WP_PREV    : the last waypoint number\n//        WP_CUR     : the current waypoint number\n//        WP_NEXT    : the next waypoint number\nobject GetNextWalkWayPoint(object oCreature=OBJECT_SELF)\n{\n\t//SpawnScriptDebugger();\n    string sPrefix = GetWPPrefix();\n\tint bDayNightSwitch = GetDayNightSwitch();\n\tint nPoints = GetNumWaypointsByPrefix(sPrefix);\n\n    // Get the new current waypoint\n\tint nPrevWay \t= GetLocalInt(oCreature, VAR_WP_CURRENT);\n    int nCurWay \t= GetLocalInt(oCreature, VAR_WP_NEXT);\n    int nNextWay\t= nCurWay; // this will be incremented or decremented below.\n\n\t// save previous waypoint for use in determining other actions.\n   \t//SetLocalInt(oCreature, VAR_WP_CURRENT, nCurWay);\n\n    // Check to see if this is the first time\n    if (nCurWay == -1) {\n        nNextWay = GetNearestWalkWayPoint(oCreature);\n    } else {\n        // we're either walking forwards or backwards -- check\n        int bGoingBackwards = GetWalkCondition(NW_WALK_FLAG_BACKWARDS, oCreature);\n        if (bGoingBackwards) {\n            nNextWay--;\n            if (nNextWay < 1) {\n                nNextWay = 2;\n                SetWalkCondition(NW_WALK_FLAG_BACKWARDS, FALSE, oCreature);\n            }\n        } else {\n            nNextWay++;\n            if (nNextWay > nPoints) {\n                nNextWay = nNextWay - 2;\n                SetWalkCondition(NW_WALK_FLAG_BACKWARDS, TRUE, oCreature);\n            }\n        }\n    }\n\n    // update the points\n    SetLocalInt(oCreature, VAR_WP_NEXT, nNextWay);\n    SetLocalInt(oCreature, VAR_WP_CURRENT, nCurWay);\n    SetLocalInt(oCreature, VAR_WP_PREVIOUS, nPrevWay);\n\n\t// don't execute scripted waypoints when switching from day to night \n\t// as this could cause weirdness.\n\tif (!bDayNightSwitch)\n\t{\n\t\t// script can update WP_NEXT to override next waypoint location\n\t    string sScript = sPrefix + GetLocalString(OBJECT_SELF, VAR_WP_TAG);\n\t    ExecuteScript(sScript, oCreature);\n\t    nNextWay = GetLocalInt(oCreature, VAR_WP_NEXT); // check in case script changed this value\n\t}\n\n\t// not sure what this is protecting against...\n    //if (nNextWay == -1)\n\t//\treturn OBJECT_INVALID;\n\n\tobject oRet = GetWaypointByNum(nNextWay, sPrefix);\n\t//PrettyDebug(GetName(OBJECT_SELF) + \": tag of next wp = \" + GetTag(oRet));\n    return oRet;\n}\n\n\n// Get the number of the nearest of the creature's current\n// set of waypoints (respecting day/night).\nint GetNearestWalkWayPoint(object oCreature=OBJECT_SELF)\n{\n\tobject oWWPController = GetWWPController(oCreature);\n\n    string sPrefix = GetWPPrefix();\n    int nNumPoints = GetLocalInt(oWWPController, sPrefix + \"NUM\");\n\n\tif (nNumPoints < 1) \n\t\treturn -1;\n    int i;\n    int nNearest = -1;\n    float fDist = 1000000.0;\n\n    object oTmp;\n    float fTmpDist;\n    for (i=1; i <= nNumPoints; i++) \n\t{\n        oTmp = GetLocalObject(oWWPController, sPrefix + IntToString(i));\n        fTmpDist = GetDistanceBetween(oTmp, oCreature);\n        if (fTmpDist >= 0.0 && fTmpDist < fDist) \n\t\t{\n            nNearest = i;\n            fDist = fTmpDist;\n        }\n    }\n    return nNearest;\n}\n\n/********** EDIT BY Razare (April 4, 2007) ************/\n// String include functions\n// by Razare 2007\n\nstring _SetDigitsByRaz(int nNumber, int nDigits)\n{\n    string sNumber = IntToString(nNumber);\n    int nLength = GetStringLength(sNumber);\n    int nIndex = 0;\n\n    if(nDigits < nLength)\n    { return \"\"; }\n\n    if(nDigits == nLength)\n    { return sNumber; }\n\n    while(nIndex < (nDigits-nLength))\n    {\n        sNumber = \"0\"+sNumber;\n        nIndex++;\n    }\n\n    return sNumber;\n}\n\nobject _TransSearchByRaz(object oArea, string sTagToFind, int nType = OBJECT_TYPE_DOOR)\n{\n\tint nIndex     = 1;\n\tint nIndex2    = 0;\n\tobject oTrans  = GetNearestObject(nType, OBJECT_SELF, nIndex);\n\tstring sIndex2 = GetLocalString(oTrans, \"wp_trans_\"+_SetDigitsByRaz(0,2));\n\n\t\n\twhile(GetIsObjectValid(oTrans))\n\t{\n\t\twhile(sIndex2 != \"\")\n\t\t{\n\t\t\tif(sIndex2 == sTagToFind)\n\t\t\t{\n\t\t\t\treturn oTrans;\n\t\t\t}\n\t\t\tnIndex2++;\n\t\t\tsIndex2 = GetLocalString(oTrans, \"wp_trans_\"+_SetDigitsByRaz(nIndex2,2));\n\t\t}\n\t\t\n\t\tnIndex2 = 0;\n\t\tnIndex++;\n\t\toTrans = GetNearestObject(nType, OBJECT_SELF, nIndex);\n\t\tsIndex2 = GetLocalString(oTrans, \"wp_trans_\"+_SetDigitsByRaz(0,2));\t\t\n\t}\n\t\n\treturn OBJECT_INVALID;\n}\n/********** END EDIT BY Razare (April 4, 2007) *******/\n\n// Does the basic walking actions for WalkWayPoints\nvoid DoWalkWayPointStandardActions(object oWay, int bKickStart)\n{\n    if (GetIsObjectValid(oWay) == TRUE)\n    {\n        SetWalkCondition(NW_WALK_FLAG_CONSTANT);\n\t\t\n        if((bKickStart == TRUE) || (GetLocalInt(OBJECT_SELF,\"N2_OVERRIDE_MOVE\") == 0))\n        {\n/********** EDIT BY Razare (April 4, 2007) ************/\n\t\t\tif(!GetIsObjectValid(GetWaypointByNum(1, GetWPPrefix())))\n\t\t\t{ return; }\n\t       \t//If waypoint is in a different area\n\t\t\t// and if the first waypoint is valid\n\t\t\tif(GetArea(OBJECT_SELF) != GetArea(oWay))\n\t\t\t{\t\t\t\n\t\t\t\tobject oArea_rz = GetArea(OBJECT_SELF);\n\t\t\t\tobject oTrans_rz = _TransSearchByRaz(oArea_rz, GetTag(oWay), OBJECT_TYPE_DOOR);\n\t\t\t\tstring sKeyNeeded_rz;\n\t\t\t\tif(GetIsObjectValid(oTrans_rz))\n\t\t\t\t{\t\t\n\t\t\t\t\tif(!GetIsOpen(oTrans_rz))\n\t\t\t\t\t{\n\t\t\t\t\t\tif( !GetLocked(oTrans_rz) )\n\t\t\t\t\t\t{ ActionDoCommand(ActionOpenDoor(oTrans_rz)); }\n\t\t\t\t\t\telse if(GetLocked(oTrans_rz))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsKeyNeeded_rz = GetLockKeyTag(oTrans_rz);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif( GetIsObjectValid(GetItemPossessedBy(OBJECT_SELF, sKeyNeeded_rz)) )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tActionDoCommand(ActionUnlockObject(oTrans_rz));\n\t\t\t\t\t\t\t\tActionDoCommand(ActionOpenDoor(oTrans_rz));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if( (!GetLockKeyRequired(oTrans_rz)) && (GetSkillRank(SKILL_OPEN_LOCK) > 0) && (GetLockUnlockDC(oTrans_rz) <= (GetSkillRank(SKILL_OPEN_LOCK) + 10)) )\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tActionUseSkill(SKILL_OPEN_LOCK, oTrans_rz);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{ /* the way is blocked, stand around and do nothing */ return; }\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{ /* not entirely sure you could ever get here, but if you do, god help us all */ return; }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{ oTrans_rz = _TransSearchByRaz(oArea_rz, GetTag(oWay), OBJECT_TYPE_TRIGGER); }\n\t\t\t\t\n\t\t\t\tif(GetIsObjectValid(oTrans_rz))\n\t\t\t\t{\t\t\n\t\t\t\t\tif( (GetDistanceBetween(OBJECT_SELF, oTrans_rz) < 3.0f) && ( (GetObjectType(oTrans_rz) == OBJECT_TYPE_TRIGGER) || GetIsOpen(oTrans_rz) ) )\n\t\t\t\t\t{ ActionDoCommand(ActionJumpToObject(GetTransitionTarget(oTrans_rz))); }\n\t\t\t\t\telse\n\t\t\t\t\t{ ActionDoCommand(ActionMoveToObject(oTrans_rz)); }\n\t\t\t\t\treturn;\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{ PrintString(\"Walkwaypoints Error: Could not find path to \"+GetTag(oWay)); }\t\t\n\t\t\t}\n\t\t\t//If waypoint is in the same area\n\t\t\telse\n\t\t\t{ ActionMoveToObject(oWay); }\n/********** END EDIT BY Razare (April 4, 2007) *******/\n        }\n\n        ActionDoCommand(WalkWayPoints(FALSE, \"Action Queue\"));      \n    }\n    // GZ: 2003-09-03\n    // Since this wasnt implemented and we we don't have time for this either, I\n    // added this code to allow builders to react to NW_FLAG_SLEEPING_AT_NIGHT.\n    if(GetIsNight())\n    {\n        if(GetSpawnInCondition(NW_FLAG_SLEEPING_AT_NIGHT))\n        {\n            string sScript = GetLocalString(GetModule(),\"X2_S_SLEEP_AT_NIGHT_SCRIPT\");\n            if (sScript != \"\")\n            {\n                ExecuteScript(sScript,OBJECT_SELF);\n            }\n        }\n\t}\n}\n\n\n// checks that we aren't fighting, talking, or see enemies.\nint IsOkToWalkWayPoints()\n{\n    // * don't interrupt current circuit\n    object oNearestEnemy = GetNearestCreature(CREATURE_TYPE_REPUTATION, REPUTATION_TYPE_ENEMY);\n    int bIsEnemyValid = GetIsObjectValid(oNearestEnemy);\n\n    // * if I can see an enemy I should not be trying to walk waypoints\n    if (bIsEnemyValid == TRUE)\n    {\n        if( GetObjectSeen(oNearestEnemy) == TRUE)\n        {\n            return FALSE;\n        }\n    }\n\n    if (GetIsFighting(OBJECT_SELF) || IsInConversation(OBJECT_SELF))\n\t{\n\t\t//PrettyDebug(GetName(OBJECT_SELF) + \"--- aborted WalkWayPoints due to convo or fight called by --\");\n\t\tSetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT, 100);\n        return FALSE;\n\t}\n\n\treturn TRUE;\n}\n\n\n// Move to the next waypoint based on whether we are kickstarting\nvoid MoveToNextWaypoint(int bKickStart=FALSE, int bForcResumeOverride=FALSE)\n{\n    // if paused then do nothing.\n    if (GetWalkCondition(NW_WALK_FLAG_PAUSED))\n        return;\n\n\n\t// if NPC busy doing anything, then don't try to walk.\n    int iCurrentAction = GetCurrentAction(OBJECT_SELF);\n\n\t// Force resume will interrupt actions such as sitting.  \n    int bForceResume = GetLocalInt(OBJECT_SELF, VAR_FORCE_RESUME) || bForcResumeOverride;\n\n/******************* EDIT BY Razare (April 4, 2007) **************************/\n\tif(bKickStart == TRUE)\n\t{\n\t\tif( GetLocalObject(OBJECT_SELF, \"wp_last_area\") != GetArea(OBJECT_SELF))\n\t\t{\n\t\t\tbForceResume = TRUE;\n\t\t\tSetLocalObject(OBJECT_SELF, \"wp_last_area\", GetArea(OBJECT_SELF));\n\t\t}\n\t\t\n\t\tif( GetArea(GetWaypointByNum(GetNextWaypoint(), GetWPPrefix())) != GetArea(OBJECT_SELF) )\n\t\t{ bForceResume = TRUE; } \n\t}\n/******************* END EDIT BY Razare (April 4, 2007) **********************/\n\t\n    if (bForceResume == TRUE)\n    {\n\t\tbKickStart = TRUE;\n        SetLocalInt(OBJECT_SELF, VAR_FORCE_RESUME, FALSE);\n        if ((iCurrentAction != ACTION_SIT) && (iCurrentAction != ACTION_INVALID))\n        {\n            // we're busy doing some action other than sitting so no need to resume.\n            return;\n        }\n    }\n    else \n\t{\n\t\tif (iCurrentAction != ACTION_INVALID)\n        \treturn;\n\t\n\t\t// only kickstart if we are known to need it or if it's happened three times in a row\n\t\tif (bKickStart == TRUE)\n\t\t{\n\t\t\tint iKickStartRepeatCount = GetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT) + 1;\n\t\t\tSetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT, iKickStartRepeatCount);\n\t\t\tif (iKickStartRepeatCount < 3)\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\t// we made it, so we no longer need a kickstart\n\tSetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT, 0);\n\n//    PrintString (\"WalkWayPoints: iCurrentAction = \" + IntToString(iCurrentAction));\n//    PrintString (\"WalkWayPoints: Not busy, so doing WWP. invalid = \" + IntToString(ACTION_INVALID) + \"; iCurrentAction = \" + IntToString(iCurrentAction));\n\n    // heartbeat and perceive can add extra calls to walk way points and\n    // these can get through even if we are already doing something since\n    // some thing like ActionPlayAnimation, SetFacing, etc. don't register as an action\n    ClearActions(CLEAR_X0_I0_WALKWAY_WalkWayPoints);\n\t\n    // Initialize if necessary\n//\tobject oWWPController = GetWWPController(); // returns OBJECT_INVALID when first called.\n//\tif (!GetIsObjectValid(oWWPController))\n//\t{\n\n    if (!GetWalkCondition(NW_WALK_FLAG_INITIALIZED)) {\n\t\t// This should only ever be invalid the very first time \n\t\tInitWWPController(OBJECT_SELF);\n\t}\n\n\n    // Move to the next waypoint\n    //object oWay = GetNextWalkWayPoint(OBJECT_SELF);\n    object oWay;\n\t//int iNextWP;\n\n\tif (GetIsPosted())\n\t{\n\t\t// if posted just head there\n\t\toWay = OBJECT_INVALID;\n\t}\t\n\t// Kickstart means we'll head to whatever is currently our next waypoint.\n\t// otherwise we'll determine a new next waypoint and go there.\n    else if (bKickStart)\n    {\n\t\t//iNextWP = GetNextWaypoint();\n        oWay = GetWaypointByNum(GetNextWaypoint(), GetWPPrefix()); // where was I going?\n        //PrettyDebug(\"Doing kickstart to \" + GetTag(oWay));\n    }\n    else\n\t{\n\t\t//iNextWP = DetermineNextWalkWayPoint(OBJECT_SELF);\n        oWay = GetNextWalkWayPoint(OBJECT_SELF);\n\t}\n    //object oWay = GetWaypointByNum(iNextWP);\n\tif (GetIsObjectValid(oWay))\n    \tDoWalkWayPointStandardActions(oWay, bKickStart);\n\n}\n\n// Make the caller walk through their waypoints or go to their post.\n// 5/17/05 - modified to exit if paused and to not interrupt if creature is currently doing\n// any action detectable by GetCurrentAction()\nvoid WalkWayPoints(int bKickStart=FALSE, string sWhoCalled=\"unknown\", int bForcResumeOverride=FALSE)\n{\n\t//PrettyDebug(GetName(OBJECT_SELF) + \"--- starting WalkWayPoints called by \" + sWhoCalled);\n\tif (!IsOkToWalkWayPoints())\n\t\treturn;\n\tMoveToNextWaypoint(bKickStart, bForcResumeOverride);\t\n\t\n/*\n    // if paused then do nothing.\n    if (GetWalkCondition(NW_WALK_FLAG_PAUSED))\n        return;\n\n    // * don't interrupt current circuit\n    object oNearestEnemy = GetNearestCreature(CREATURE_TYPE_REPUTATION, REPUTATION_TYPE_ENEMY);\n    int bIsEnemyValid = GetIsObjectValid(oNearestEnemy);\n\n    // * if I can see an enemy I should not be trying to walk waypoints\n    if (bIsEnemyValid == TRUE)\n    {\n        if( GetObjectSeen(oNearestEnemy) == TRUE)\n        {\n            return;\n        }\n    }\n\n    if (GetIsFighting(OBJECT_SELF) || IsInConversation(OBJECT_SELF))\n\t{\n\t\t//PrettyDebug(GetName(OBJECT_SELF) + \"--- aborted WalkWayPoints due to convo or fight called by \" + sWhoCalled);\n\t\tSetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT, 100);\n        return;\n\t}\n*/\t\n/*\n\t// if NPC busy doing anything, then don't try to walk.\n    int iCurrentAction = GetCurrentAction(OBJECT_SELF);\n\n\t// Force resume will interrupt actions such as sitting.  \n    int bForceResume = GetLocalInt(OBJECT_SELF, VAR_FORCE_RESUME);\n\n    if (bForceResume == TRUE)\n    {\n\t\tbKickStart == TRUE;\n        SetLocalInt(OBJECT_SELF, VAR_FORCE_RESUME, FALSE);\n        if ((iCurrentAction != ACTION_SIT) && (iCurrentAction != ACTION_INVALID))\n        {\n            // we're busy doing some action other than sitting so no need to resume.\n            return;\n        }\n    }\n    else \n\t{\n\t\tif (iCurrentAction != ACTION_INVALID)\n        \treturn;\n\t\n\t\t// only kickstart if we are known to need it or if it's happened three times in a row\n\t\tif (bKickStart == TRUE)\n\t\t{\n\t\t\tint iKickStartRepeatCount = GetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT) + 1;\n\t\t\tSetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT, iKickStartRepeatCount);\n\t\t\tif (iKickStartRepeatCount < 3)\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\t// we made it, so we no longer need a kickstart\n\tSetLocalInt(OBJECT_SELF, VAR_KICKSTART_REPEAT_COUNT, 0);\n\n//    PrintString (\"WalkWayPoints: iCurrentAction = \" + IntToString(iCurrentAction));\n//    PrintString (\"WalkWayPoints: Not busy, so doing WWP. invalid = \" + IntToString(ACTION_INVALID) + \"; iCurrentAction = \" + IntToString(iCurrentAction));\n\n    // heartbeat and perceive can add extra calls to walk way points and\n    // these can get through even if we are already doing something since\n    // some thing like ActionPlayAnimation, SetFacing, etc. don't register as an action\n    ClearActions(CLEAR_X0_I0_WALKWAY_WalkWayPoints);\n\t\n    // Initialize if necessary\n//\tobject oWWPController = GetWWPController(); // returns OBJECT_INVALID when first called.\n//\tif (!GetIsObjectValid(oWWPController))\n//\t{\n\n    if (!GetWalkCondition(NW_WALK_FLAG_INITIALIZED)) {\n\t\t// This should only ever be invalid the very first time \n\t\tInitWWPController(OBJECT_SELF);\n\t}\n\n    // Move to the next waypoint\n    //object oWay = GetNextWalkWayPoint(OBJECT_SELF);\n    object oWay;\n\t//int iNextWP;\n    if (bKickStart)\n    {\n\t\t//iNextWP = GetNextWaypoint();\n        oWay = GetWaypointByNum(GetNextWaypoint(), GetWPPrefix()); // where was I going?\n        //PrettyDebug(\"Doing kickstart to \" + GetTag(oWay));\n    }\n    else\n\t{\n\t\t//iNextWP = DetermineNextWalkWayPoint(OBJECT_SELF);\n        oWay = GetNextWalkWayPoint(OBJECT_SELF);\n\t}\n    //object oWay = GetWaypointByNum(iNextWP);\n\t//if (GetIsObjectValid(oWay))\n    \tDoWalkWayPointStandardActions(oWay, bKickStart);\n*/\t\n    //PrettyDebug(GetName(OBJECT_SELF) + \"---- leaving WalkWayPoints called by \" + sWhoCalled);\n}\n\n// normally we use the tag of the creature, but this can be overridden by using local string \"WP_TAG\"\n// returns tag to use for purpose of initializing waypoints.\nstring GetWPTag(object oCreature=OBJECT_SELF)\n{\n\tstring sWPTag = GetLocalString(oCreature, VAR_WP_TAG);\n\tif (sWPTag == \"\")\n\t\tsWPTag = GetTag(oCreature);\n\n\treturn (sWPTag);\n}\n\n// Initialize WWP Controller.  This will set object to use the WWP controller with tag \"WC_<Creature TAG>\"\nobject InitWWPController(object oCreature=OBJECT_SELF)\n{\t\n    SetWalkCondition(NW_WALK_FLAG_INITIALIZED, TRUE, oCreature);\n\tstring sWPTag = GetWPTag(oCreature);\n\tobject oWWPController = SetWWPController(sWPTag, oCreature);\n\n\t// Use appropriate skills, only once\n\t// * GZ: 2003-09-03 - ActionUseSkill never worked, added the new action mode stuff\n\tif(GetSpawnInCondition(NW_FLAG_STEALTH)) {\n\t    SetActionMode(OBJECT_SELF,ACTION_MODE_STEALTH,TRUE);\n\t}\n\t\n\t// * GZ: 2003-09-03 - ActionUseSkill never worked, added the new action mode stuff\n\tif(GetSpawnInCondition(NW_FLAG_SEARCH)){\n\t    SetActionMode(OBJECT_SELF,ACTION_MODE_DETECT,TRUE);\n\t}\n\treturn (oWWPController);\n}\n\n/*\n// Check to make sure that the walker has at least one valid\n// waypoint to walk to at some point.\nint CheckWayPoints(object oWalker = OBJECT_SELF)\n{\n    if (!GetWalkCondition(NW_WALK_FLAG_INITIALIZED, oWalker)) {\n        AssignCommand(oWalker, LookUpWalkWayPoints());\n    }\n\n    if (GetLocalInt(oWalker, \"WP_NUM\") > 0 || GetLocalInt(oWalker, \"WN_NUM\") > 0)\n        return TRUE;\n    return FALSE;\n}\n\t\n// Check to see if the specified object is currently walking\n// waypoints or standing at a post.\nint GetIsPostOrWalking(object oWalker = OBJECT_SELF)\n{\n    if (!GetWalkCondition(NW_WALK_FLAG_INITIALIZED, oWalker)) {\n        AssignCommand(oWalker, LookUpWalkWayPoints());\n    }\n\n\tstring sPrefix = GetWPPrefix();\n    if (GetLocalInt(oWalker, sPrefix +\"NUM\") > 0)\n    \treturn TRUE;\n\n    return FALSE;\n}\n*/\n\nint GetDayNightSwitch(object oCreature=OBJECT_SELF)\n{\n\tint bTimeToSwitch = FALSE;\n\tif (GetSpawnInCondition(NW_FLAG_DAY_NIGHT_POSTING)) {\n\t\tint bIsWalkingDay = GetWalkCondition(NW_WALK_FLAG_IS_DAY, oCreature);\n\n\t\tif ( (bIsWalkingDay && !GetIsDay()) || (!bIsWalkingDay && GetIsDay()) ) {\n\t\t\t//PrettyDebug(\"Switch to day=\" + IntToString(!bIsWalkingDay));\n\n\t\t\t// time to switch to different set of waypoints\n\t\t\tbTimeToSwitch = TRUE;\n\t\t\tSetWalkCondition(NW_WALK_FLAG_IS_DAY, !bIsWalkingDay, oCreature);\n\n\t\t\t// reset next which will send us off to the nearest wp in other set\n\t\t\tSetLocalInt(oCreature, VAR_WP_NEXT, -1);\n\t\t}\n\t}\n\treturn (bTimeToSwitch);\n}\n\nint GetIsPosted(object oCreature=OBJECT_SELF)\n{\n\tstring sPrefix = GetWPPrefix();\n\tint nPoints = GetNumWaypointsByPrefix(sPrefix);\n\tif ((nPoints == 1) && (GetLocalInt(oCreature, VAR_WP_SINGLE_POINT_OVERRIDE)==FALSE))\n\t{\n\t\t//PrettyDebug(GetName(OBJECT_SELF) + \": only found 1 wp\");\n\t\tobject oWay = GetWaypointByNum(1, sPrefix);\n    \tActionMoveToObject(oWay);\n    \tActionDoCommand(SetFacing(GetFacing(oWay)));\n\t\treturn (TRUE);\n    }\n\treturn (FALSE);\n}Select All Text | View Code in separate window","Patch":"1.04","Description":"This script is a modified version of the include file x0_i0_walkway. In order for it to work, you must recompile most of your creature AI files as local versions on your module. If you export the AI files and x0_i0_walkway from my demo, you'll be all set.\n\nThis script creates a way of allowing global walkwaypoints, however, they do not work as easily as with NWN1. You must indicate what transitions must be traveled through in order to reach the creature's next waypoint.\n\nThis is done by setting local strings on doors and transitions with the name wp_trans_## where ## is simply an incremental number from 00 on up. Set the string value of the variable to the tag of the waypoint that lies on the other side of the transition.\n\nIt really is too complicated to explain all here so check out my tutorial:\n\nLink","Rating":"N/A","Awards":[]},"109":{"Name":"FRW Persistent Companion System ver0-9-0(Beta)","Author":"Forgotten Realms Weave","Submitted":20070405,"Updated":20080115,"Category":"NPCs","Type":"Type - Henchmen","Format":"Module Only","Patch":"1.05","NWN2Game":"All","Description":"Have you ever wished you could take a group of companions with you from one adventure to the next? Now you can!\n\nThe FRW Persistent Companion system was originally developed for use in Forgotten Realms Weave modules so that we could create a group of persistent companions with their own self-contained plots. In reality, it is more. It provides a complete system for easily creating companions and is also fairly easy to install -- just import the erf with the scripts, and then paint down a spawn trigger around the player's start position and you're set. \n\nIncluded Features:\n\n* Take a group of up to seven companions per character with you between adventures (this number may change with testing).\n* Easy to install and configure.\n* Includes scripts and template conversations for quickly designing companions.\n* Includes a system for deleting individual companions from the database via conversation.\n* Includes a system for persistent reputation/influence and timer-based plots (including romances).\n* Allows for multi-classed companions, with easy switching of classes via conversation.\n* Comes with two sample modules. #1 includes eight sample persistent companions, a trainer npc, and a database management npc. #2 Can be used to test persistence.\n\nNote: This is a beta version, so please post any bugs you encounter or suggestions for future improvements on the thread here or head over to the Forgotten Realms Weave discussion for the project at: Link \n\n\nCredits:\n\nLead Scripter & Designer: Lord Niah\nSystem Design & Writing: Xandurpein\nScripting, Design & Testing: Vendalus\n\nSpecial thanks to Knat for providing the community with his awesome tokenizer and NBDE scripts. Also a special thanks to the builders over at the Forgotten Realms Weave for their continued feedback and support.\n","Rating":9.66,"Votes":10,"Awards":[]},"110":{"Name":"event script wrappers","Author":"moraya_69","Submitted":20070409,"Updated":20070410,"Category":"Scripting routines","Type":"Type - Event","Format":"Module and Code","Patch":"1.04","Description":"module complete with all events wrapped up nice and neat ready for you to add all those untidy looking mod wide events. Not sure if it will be useful for advanced scripters but for those new to modding it may be of some help","Rating":5,"Votes":1,"Awards":[]},"111":{"Name":"NWN2 Augment Summoning Fix pre-1.05","Author":"Finamenon","Submitted":20070411,"Updated":20070614,"Category":"Spells","Type":"Type - Spell effects","Format":"Code Only","ShowCode":"//::///////////////////////////////////////////////\n//:: Summon Creature Series\n//:: NW_S0_Summon\n//:: Copyright (c) 2001 Bioware Corp.\n//:://////////////////////////////////////////////\n/*\n    Carries out the summoning of the appropriate\n    creature for the Summon Monster Series of spells\n    1 to 9\n*/\n//:://////////////////////////////////////////////\n//:: Created By: Preston Watamaniuk\n//:: Created On: Jan 8, 2002\n//:://////////////////////////////////////////////\n//:: AFW-OEI 05/30/2006:\n//::\tChanged summon animals.\n//::\tChanged duration from 24 hours to 3 + 1 round/lvl.\n//:://////////////////////////////////////////////\n//:: BDF-OEI 06/27/2006:\n//::\tAdded support for SPELL_SHADES_TARGET_GROUND in GetCreatureAnimalDomain\n//::\tModified to allow \n\neffect SetSummonEffect(int nSpellID);\nstring GetCreature( int nSpellID );\nstring GetCreatureAnimalDomain( int nSpellID );\nint GetEffectID( int nSpellID );\n\n\n#include \"x2_inc_spellhook\" \n\nvoid FIN_AddAdditionalSummonEffects(object oCaster = OBJECT_SELF)\n{\n\tobject oSummon = GetAssociate(ASSOCIATE_TYPE_SUMMONED, oCaster);\n    if(!GetIsObjectValid(oSummon))\n    {\n    \tSendMessageToPC(oCaster, \"Summon thingy is borked\");\n    \treturn;\n    }\n    effect eAug1, eAug2, eAugSum;\n    \n    //Has Augment Summon feat\n    if(GetHasFeat(FEAT_AUGMENT_SUMMONING, oCaster))\n    {\n    \teAug1 = ExtraordinaryEffect(EffectAbilityIncrease(ABILITY_STRENGTH, 4));\n    \teAug2 = ExtraordinaryEffect(EffectAbilityIncrease(ABILITY_CONSTITUTION, 4));\n    \teAugSum = EffectLinkEffects(eAug1, eAug2);\n        \n\t\tApplyEffectToObject(DURATION_TYPE_INSTANT, eAugSum, oSummon);\n\t\t\n    }\n}\n\nvoid main()\n{\n\n/* \n  Spellcast Hook Code \n  Added 2003-06-23 by GeorgZ\n  If you want to make changes to all spells,\n  check x2_inc_spellhook.nss to find out more\n  \n*/\n\n    if (!X2PreSpellCastCode())\n    {\n\t// If code within the PreSpellCastHook (i.e. UMD) reports FALSE, do not run this spell\n        return;\n    }\n\n// End of Spell Cast Hook\n\n\n    //Declare major variables\n    int nSpellID = GetSpellId();\n    int nDuration = GetCasterLevel(OBJECT_SELF) + 3;\n    effect eSummon = SetSummonEffect(nSpellID);\n\n    //Make metamagic check for extend\n    int nMetaMagic = GetMetaMagicFeat();\n    if (nMetaMagic == METAMAGIC_EXTEND)\n    {\n        nDuration = nDuration *2;\t//Duration is +100%\n    }\n    //Apply the VFX impact and summon effect\n    ApplyEffectAtLocation(DURATION_TYPE_TEMPORARY, eSummon, GetSpellTargetLocation(),RoundsToSeconds(nDuration));\n\t\n\tDelayCommand(1.0, FIN_AddAdditionalSummonEffects());\n}\n\n\neffect SetSummonEffect(int nSpellID)\n{\n \tint nFNF_Effect = GetEffectID( nSpellID );\n  \n    string sSummon = \"c_cat\";\n\t/*\n    if(GetHasFeat(FEAT_ANIMAL_DOMAIN_POWER)) //WITH THE ANIMAL DOMAIN\n    {\n\t\tsSummon = GetCreatureAnimalDomain( nSpellID );\n    }\n    else  //WITOUT THE ANIMAL DOMAIN\n    {\n  \t\tsSummon = GetCreatureAnimalDomain( nSpellID );\n    }\n\t*/\n\t\n\tsSummon = GetCreatureAnimalDomain( nSpellID );\n    effect eSummonedMonster = EffectSummonCreature(sSummon, nFNF_Effect);\n    return eSummonedMonster;\n}\n\n\n\nstring GetCreatureAnimalDomain( int nSpellID )\n{\n\tint nRoll = d4();\n\tstring sSummon = \"c_dogwolf\";\n\t\n\tswitch (nSpellID)\n\t{\n\tcase (SPELL_SUMMON_CREATURE_I):\n       {\n           sSummon = \"c_dogwolf\";\n       }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_II):\n       {\n           //sSummon = \"c_badgerdire\"; // HACK, pulled for the March '06 demo; model needs re-exported\n           sSummon = \"c_badgerdire\";\n       }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_III):\n       {\n           sSummon = \"c_dogwolfdire\";\n       }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_IV):\n       {\n\t\t   sSummon = \"c_boardire\";\n       }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_V):\n       {\n           sSummon = \"c_dogshado\";\n       }\n\tbreak;\n    case (SPELL_SUMMON_CREATURE_VI):\n       {\n           sSummon = \"c_beardire\";\n       }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_VII):\n       {\n           switch (nRoll)\n           {\n               case 1:\tsSummon = \"c_elmairhuge\";\t\tbreak;\n               case 2:\tsSummon = \"c_elmfirehuge\";\t\tbreak;\n               case 3:\tsSummon = \"c_elmearthhuge\";\t\tbreak;\n               case 4:\tsSummon = \"c_elmwaterhuge\";\t\tbreak;\n           }\n       }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_VIII):\n  \tcase (SPELL_SHADES_TARGET_GROUND):\n     {\n           switch (nRoll)\n           {\n               case 1:\tsSummon = \"c_elmairgreater\";\t\tbreak;\n               case 2:\tsSummon = \"c_elmfiregreater\";\t\tbreak;\n               case 3:\tsSummon = \"c_elmearthgreater\";\t\tbreak;\n               case 4:\tsSummon = \"c_elmwatergreater\";\t\tbreak;\n           }\n       }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_IX):\n       {\n         switch (nRoll)\n          {\n               case 1:\tsSummon = \"c_elmairelder\";\t\tbreak;\n               case 2:\tsSummon = \"c_elmfireelder\";\t\tbreak;\n               case 3:\tsSummon = \"c_elmearthelder\";\t\tbreak;\n               case 4:\tsSummon = \"c_elmwaterelder\";\t\tbreak;\n           }\n       }\n\tbreak;\n\t}\n\treturn sSummon;\n}\n\n\nstring GetCreature( int nSpellID )\n{\n\tint nRoll = d3();\n\tstring sSummon = \"c_chicken\";\n\n\tswitch ( nSpellID )\n\t{\n\tcase (SPELL_SUMMON_CREATURE_I):\n        {\n            sSummon = \"c_badger\";\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_II):\n\t\t{\n            sSummon = \"c_boar\";\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_III):\n        {\n            sSummon = \"c_dogwolf\";\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_IV):\n        {\n            sSummon = \"c_bear\";\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_V):\n        {\n            sSummon = \"c_doghell\";\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_VI):\n        {\n            sSummon = \"c_bugbear\";\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_VII):\n        {\n            switch (nRoll)\n            {\n               case 1:\tsSummon = \"c_impfire\";\t\tbreak;\n               case 2:\tsSummon = \"c_impice\";\t\tbreak;\n               case 3:\tsSummon = \"c_ratdire\";\t\tbreak;\n            }\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_VIII):\n  \tcase (SPELL_SHADES_TARGET_GROUND):\n        {\n            switch (nRoll)\n            {\n               case 1:\tsSummon = \"c_impfire\";\t\tbreak;\n               case 2:\tsSummon = \"c_impice\";\t\tbreak;\n               case 3:\tsSummon = \"c_ratdire\";\t\tbreak;\n            }\n        }\n\tbreak;\n\tcase (SPELL_SUMMON_CREATURE_IX):\n        {\n            switch (nRoll)\n            {\n               case 1:\tsSummon = \"c_impfire\";\t\tbreak;\n               case 2:\tsSummon = \"c_impice\";\t\tbreak;\n               case 3:\tsSummon = \"c_ratdire\";\t\tbreak;\n            }\n        }\n\tbreak;\n\t}\n\n\treturn sSummon;\n}\n\nint GetEffectID( int nSpellID )\n{\n\treturn VFX_HIT_SPELL_SUMMON_CREATURE;\n/* - BCH 03/10/06, all summon effects now have the same vfx associated with them.\n\tint nFNF_Effect = VFX_FNF_SUMMON_MONSTER_1;\n\n\tif(nSpellID == SPELL_SUMMON_CREATURE_I)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_1;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_II)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_1;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_III)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_1;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_IV)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_2;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_V)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_2;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_VI)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_2;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_VII)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_3;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_VIII)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_3;\n\t}\n\telse if(nSpellID == SPELL_SUMMON_CREATURE_IX)\n\t{\n\t    nFNF_Effect = VFX_FNF_SUMMON_MONSTER_3;\n\t}\n\n\treturn nFNF_Effect;\n*/\n}Select All Text | View Code in separate window","Patch":"1.04","Description":"This scripting fix is designed for patches 1.00 - 1.04, should anyone still use them for whatever reason.\n\nHere is the fix, which you must place in the override directory for players, or builders just put in the module or campaign folder. 2da changes may need to be used in order to be able to select the feat.","Rating":"N/A","Awards":[]},"113":{"Name":"Markshire Explosive Barrels","Author":"Markshire","Submitted":20070414,"Updated":20110429,"Category":"Placeable Item","Forum Thread":"http://www.markshire.com/phpBB2/index.php","Type":"Type - Placeables","Format":"Module and Code","Patch":"1.04","NWN2Game":"All","Description":"Now on Facebook!\n\nWelcome to the Markshire Explosive Barrels System created by Markshire's Monty Three Card with the assistance of Thrym of Markshire.\n\nEver find that tough to destroy door and you are in a hurry?\n\nWell, now no cumbersome door bashing.\n\nJust stand back and launch a fire bolt.\n\nBOOM!!!\n\nThe system included in the file below contains two scripts (Placeable OnDeath and OnDamage) and three preset Exploding Barrels/Flasks. Flask (2d6 Fire/2d6 Piercing), Medium Barrel (4d6 Fire/4d6 Piercing) and Large Barrel (6d6 Fire/6d6 Piercing). Also included is a test module.\n\nThe system uses blast radius to damage nearby objects (creatures, doors, and placeables).\n\nThe OnDamage script allows that the barrels are volatile in nature and ANY Fire damage will cause them to explode.\n\nOf course, destroying them with a hammer or your sword will work just fine.\n\nI would also watch out for Mages and their more explosive spells.\n\nTo install in your module simply import the ERF and you are good to go.\n\nUPDATE: 04/29/07\nAdded to both the ERF and TEST MOD the means for PCs to BUY, PICKUP and PLACE explosives. Items have variables preset on them for Blast Dice and Radius. The system will pass along alternate combinations and create a flask (dice + radius <5), medium barrel (dice + radius between 5 and 11) or large barrel (dice + radius > 11).\nIf no variables are set the system defaults to 1 each.\n\nWhen importing the ERF, if you do not want to overwrite your copy of x2_mod_def_unaqu then add the following line of code to the bottom of your version:\n\nif (GetTag(oItem) == \"it_blast_barrel\") ExecuteScript(\"ms_barrel_placement\", oItem);\n\nAs always we hope you enjoy these script systems.\n\n\nFor a lot more screenshots from our world please visit: Markshire. \n\nOther NW Vault Submissions:\nGame World\n\nMarkshire :: Kingdom of IceScripts for NWN1 \n\nMagic Carpet TransitionsMarkshire Experience and Teamwork SystemMarkshire's Nerfed Pulse DrownMarkshire's NomenclatureMPCS: Markshire Persistent Chest SystemQuill of PC RecordingScripts for NWN2 \n\nMarkshire Climbing SystemMarkshire Explosive BarrelsMarkshire Quill of PC Recording Fan Fiction \n\nA Missed Adventure Kurm and the Sewer King's Curse A Harrowing Story Loki's Foulest TrickRising ForceThe Mad Red Titan: Part OneThe Mad Red Titan: Part TwoThe Mad Red Titan: Part ThreeScreenshots\n\nA Cold New WorldA Community of FriendsA Dangerous RealmGiant Plots DevelopHidden StrongholdsOur Loyal Fans!Releasing the ThirteenNWN Ideas\n\nDisguise SystemNWN 2 Ideas\n\nJournal Export PluginExpansions on Markshire Submissions\n\nAerisarn's edited Markshire Persistent Portable Chests by AerisarnJournal exporter/importer by Sothis BPC Role-Play Disguise Kit by Velkyn","Rating":9.18,"Votes":9,"Awards":[]},"114":{"Name":"Spell Traps","Author":"Vladoshi","Submitted":20070415,"Updated":20070417,"Category":"Spells","Type":"Type - Combat","Format":"Module and Code","Patch":"1.04","Description":"Vladoshi's spell traps - no hak paks!\n\nDescription of the Spell Traps\n------------------------------\n\n* fixed skill checks\n\nSpell Traps enable players to drop scrolls into traps they have set. When the trap fires, it will cast the spell that was on the scroll, at the target. I left the types of spells unchecked so players can experiment to find any quirks. They love that stuff.\n\nWhy I only enabled minor traps?\n- it extends their usefulness in your game since by the time players can use this skill, they usually discard minor traps for the much more powerful traps\n- they are easier to craft so your players are not as put off to make them at higher levels and therefore encourage more Craft Trap skill\n- it encourages more use of the craft trap skill with items that are usually discarded at higher levels\n- it will not displace the harder traps because of the massive damage deadly/strong traps inflict\n- it gives players a new novelty to play with and new builds to experiment with\n- it should make the Rogue, Ranger and Arcane Trickster classes more useful player choices\n\nFor core rules players must pass the 25 + spell level UMD skill check\n\nRequirements for players\n------------------------\n- Set Trap skill - only the trap creator can set the spell on the trap\n- the Craft Wondrous Items feat\n- Scroll setting is limited a skill check of player's UMD skill vs 15 + spell level\n- 1 Ranger or Arcane Trickter level\n- Rangers can use set Druid scrolls or scrolls of spells they can cast and have prepared\n- Arcane Trickster's can use any scroll\n\n- Spells wit the caster level of a scroll, which is usually the minimum\n\nDescription for the Players\n---------------------------\nSpell Traps let you change any minor trap you set to cast a spell on your enemies. Only when you drop a spell scroll inside a trap you set on the ground, and you meet the requirements, the scroll will disappear and it will now cast that spell instead of its normal trap actions.\n\nRequirements to set a spell trap\n- only applies to minor traps you have set\n- the Craft Wonderous Items feat\n- you are limited to spell scrolls with an innate level no greater than half your Use Magic Device skill\n- Rangers can only set scrolls of any spell they can cast and have prepared, or Druid spell scrolls\n- Arcane Trickster's can attempt to set any scroll type\n\nSpells cast similar to scrolls, using the minumum caster and save DC levels\n\nWARNING: you do not the xp for the any kills by the spell.\n\nIn this zip file\n----------------\na copy of test.mod which demonstrates the spell traps and\nspelltraps.eft which has\n- 9 scripts for the minor trap scripts - nw_t1_[etc]- WARNING: they will overwrite any you have previously modified in your script list.\n- 1 include file - vl_inc_spelltrap\n- 1 On Module Unaccquire script - vl_mod_def_unaqu - the you need to copy the 2 lines with //Vladoshi's ... above them to the the same place in your file. For beginners, the #include \"vl_inc_spelltrap\" must be above the void main() and and the line DoSpellTrapSet(oLostBy, oItem) should be at the end of the function. If you do not have one for some reason, then set it call to this one instead. You have one. The rest of this script is as written by Obsidian/Bioware.\n- 1 book item with the description for players\n- 1 invisible placeable - vl_ipoint","Rating":9,"Votes":2,"Awards":[]},"115":{"Name":"Quick Planar Traits","Author":"Vladoshi","Submitted":20070415,"Updated":20070417,"Category":"Area","Type":"Type - Other","Format":"Module Only","Patch":"1.04","Description":"Vladoshi's quick and dirty planar effects\n* updated to include OnHit cast. There sequence in the spellhook is to fiddly to publish as seperates.\n* skills get the proper skill constant now\n\nIs close enough is good enough? This implements most planar effects area by area. It applies effects on entry, inflict damage per round, casts spells at and then remove the effect on exit. Each area depends on if you set it. And you only set what you need.\n\nNo hak paks or lagging, intense scipting. It simple and if you scipt you could modify it easily. It does not do it strictly, hopefully just enough. You might find it useful that instead of making increasingly powerful creatures, you can handicap the players and get more out of your module.\n\nUses: put vl_areaenter, vl_areahb and vl_areaexit on your area and on yor module set the local string variable X2_S_UD_SPELLSCRIPT = vl_spellhook or copy can paste it into your spell hook.\nThis lets you make an area inflict planar traits on players with local integers on the areas. Planes can have 4 traits\n\nAlignment traits\n----------------\nYou can set the alignments that are punished by the plane's natural alignment with -2 to all saves and -2 to all skills\nSet \"VL_PLANAR_LC\" = 1 (neutral), 2(lawful) or 3 (chaotic)\nSet \"VL_PLANAR_GE\"= 1 (neutral), 4 (good) or 5 (evil)\n\nPhysical traits\n---------------\nSlow or hasten players to reflect time, gravity or general impediment\nSet \"VL_PLANAR_MOVEMENT\" = -50 -> 50, negatives slow, positve fastetr, at 50 the effects of slow or hasten are apllied, which also modify AC and attacks per round. 50 is maximum.\n\nEnergy/Elemental traits\n-----------------------\nDamage players per round with an energy damage type, no save. This does not effect associates/henchmen because it could lag with so many damn checks to get the right creature objects.\nset \"VL_PLANAR_DAMAGE\" = the numeric value of a DAMAGE_TYPE_ constant.\nset \"VL_PLANAR_DAMAGE_AMOUNT\" = how much damage\n\nCast a spell on random players with a 10% chance per round to reflect the environment\nset \"VL_PLANAR_SPELL\" = the numberic value of a SPELL_ constant. 0 (Acid Fog) is not allowed.\n\nMagic traits\n------------\nset \"VL_IMPEDE_TYPE\" = the numberic value of a SAVING_THROW_TYPE_ constant. Many spells use this for saving throws. If they do, the spell caster must have Spellcraft vs 15 + spell level.\nset \"VL_LIMIT_SCHOOL\" = the numeric value of a SPELL_SCHOOL_ to ban this spell school from the plane.\nset \"VL_LIMIT_LEVEL\" = 1 -> 9 for the level (and above) spells tha cannot cast\nset \"VL_DEAD_MAGIC\" = for no spells to cast\nset \"VL_WILD_MAGIC\" = 1 for a wild magic. Casters must past spell craft versus 15 + spell level or random effects can occur.\n\nPresets\n-------\nInstead of the above settings you can get elemental presets by setting \"VL_PLANAR_PRESET\" = to:\n(AIR) 1 - 25% speed increase, lightning bolt spell effect\n(EARTH) 2 - 40% slowed, earthquake spell effect, electrical save spells impeded\n(FIRE) 3 - 5 fire damage per round, combust spell, cold save spells impeded\n(WATER) 4 - 25% slowed since you are meant to be running in water, fire save spells impeded, drown spell effect\n(negative) 5 - divine spells impeded, energy drai spell effect\n(positive) 6 - negative spells impeded, cure light wounds spell effect\n\n","Rating":"N/A","Awards":[]},"116":{"Name":"Forging OnHit Cast Spells","Author":"Vladoshi","Submitted":20070416,"Updated":20070416,"Category":"Skill/Feats","Type":"Type - Other","Format":"Code Only","Patch":"1.04","Description":"Vladoshi's onhit cast spell forging\n-----------------------------------\n\nMost if it was already inside my Planar Traits scripts, so I just put it here too. Let's players add onhit cast spells to weapons (except ranged), ammunition, gloves, armour and shields. Players must have one specific feat and 2 skills to forge. The resultant property is given a % chance to cast too. It starts at 5% and subsequent forging with the same spell adds 1% upto a maximum of 20%. This way they can still cast but maybe only once per round. This should make the item property useful but restricted from too much lag on your server. This should also work for player crafted scrolls.\n\nAdding the erf\n--------------\nImport the planareffects.erf. You import 7 scripts and 3 items. For only Onhit cast forgin you are concerned with:\n- OnHit Cast Spell Forging Book\n- its Activate Item script i_vl_onhitbook_ac\n- OnHit Scroll\n- its Activate item script i_vl_onhitscroll_ac\n- vl_inc_planar - the header file \n- vl_spellhook - either use this as your spellhook or copy and paste the #include line and the 5 lines to your spellhook.\n- to set a spell hook on your module set the local string X2_S_UD_SPELLHOOK = the name of the spellhook file\n\nForging Requirements\n--------------------\n- Feat Craft Magical Arms and Armor\n- Craft Weapon or Armor skill\n- Spellcraft skill\n- a spell scroll\n- any melee weapon, ammunition, gloves, armour or shield\n\nForging the OnHit Scroll\n------------------------\n- For phase 1 you cast the your OnHit Cast Book's OnActivate spell at the spell scroll\n- it runs a Spellcraft skill check versus DC 15 + the spell's level\n- On Success the scroll is detroyed and an OnHit Cast Scroll is created in the caster's inventory\n- Read the OnHot Scroll created for the next phase\n\nForging the On Hit Spell on an item\n-----------------------------------\n- Cast the OnHit Scroll at item\n- Requires the Craft Magical Arms and Armor feat\n- It runs a Craft Weapon or Armor Skill check versus the 15 + spell level, depending on the item type\n- On Success the scroll is destroyed and the item gains an OnHit Cast Spell\n- The caster of this phase sets the level the spell cast's at with their Spellcraft skill\n- Inital forging or a different spell start at 5%\n- The maximum % to chance to cast is 20%\n- if no spellcraft, then no spell property\n\nEligible Spells\n---------------\nAcid_Splash\nBalagarnsIronHorn\nBall_Lightning\nBane\nBanishment\nBestow_Curse\nBigbys_Clenched_Fist\nBigbys_Crushing_Hand\nBigbys_Forceful_Hand\nBigbys_Grasping_Hand\nBigbys_Interposing_Hand\nBlindness_and_Deafness\nBombardment\nCall_Lightning\nChain_Lightning\nCloudkill\nCombust\nConfusion\nContagion\nCrumble\nDarkness\nDaze\nDestruction\nDismissal\nDispel_Magic\nDoom\nDrown\nEarthquake\nElectric_Jolt\nEnergy_Drain\nEnervation\nEvil_Blight\nFear\nFeeblemind\nFire_Storm\nFireball\nFirebrand\nFlame_Lash\nFlame_Strike\nFlare\nFlesh_to_stone\nGedlees_Electric_Loop\nGhoul_Touch\nGreat_Thunderclap\nGreater_Dispelling\nGreater_Spell_Breach\nGust_of_Wind\nHammer_of_the_Gods\nHarm\nHold_Animal\nHold_Monster\nHold_Person\nHorizikauls_Boom\nHorrid_Wilting\nIce_Storm\nImplosion\nInferno\nInfestation_of_Maggots\nInflict_Critical_Wounds\nInflict_Light_Wounds\nInflict_Minor_Wounds\nInflict_Moderate_Wounds\nInflict_Serious_Wounds\nIntelligent_Weapon_OnHit\nIsaacs_Greater_Missile_Storm\nIsaacs_Lesser_Missile_Storm\nLesser_Dispel\nLesser_Spell_Breach\nLight\nLightning_Bolt\nMagic_Missile\nMass_Blindness_and_Deafness\nMass_Charm\nMelfs_Acid_Arrow\nMestils_Acid_Breath\nMeteor_Swarm\nNegative_Energy_Burst\nPhantasmal_Killer\nPoison\nPower_Word_Kill\nPower_Word_Stun\nQuillfire\nScare\nScintillating_Sphere\nSearing_Light\nShocking_Grasp\nSilence\nSlay_Living\nSleep\nSlow\nSound_Burst\nStinking_Cloud\nStone_to_flesh\nStonehold\nSunbeam\nSunburst\nTashas_Hideous_Laughter\nUndeath_to_Death\nUndeaths_Eternal_Foe\nVampiric_Touch\nWail_of_the_Banshee\nWall_of_Fire\nWeb\nWeird\nWord_of_Faith","Rating":"N/A","Awards":[]},"117":{"Name":"Quick Golem creation","Author":"Vladoshi","Submitted":20070417,"Updated":20070418,"Category":"Scripting routines","Type":"Type - General","Format":"Module Only","Patch":"1.04","Description":"Vladoshi's Easy Golem Making script\n-----------------------------------\nThis lets you easily implement your golems. It has no golems in the erf file. It is 2 scripts and 2 item that make it easy as possible for you to make as many golems for your players to create as the companion roster system will allow.\n\nAfter you set the variables on a golem book, they just put the required parts in any container (even on themselves will work), cast the book at the container and a a golem figurine appears. They just cast this figurine at a player and the golem is made as a companion.\n\nImporting the golembook erf file\n--------------------------------\nAfter importing you should have 2 new scripts and 2 new items.\n- i_vl_golembook_sc - for the golem book items\n- golem_deathscript - this is assigned to new golems by i_vl_golembook_ac script so they leave the party OnDeath. You do not have to add this to creatures.\n- the Golem Book - you just keep makings copies for each specific golem\n- Iron Golem Creation Book - a demo that has the D&D requirements for creating an Iron Golem.\n\nCreating a book for your golem\n------------------------------\n1. Make a copy of the Golem Book.\n2. Make sure its template resref and resource name are different to any other items in your toolset, including other golem books.\n3. Change its name to something useful, like \"Iron Golem Creation Book\".\n4. Change its description to list what is needed to make your golem.\n\nHere is an example you can copy:\n\nIron Golem\n----------\nLevels(in casting classes): 16\nMagic: Can cast Arcane or Divine spells\nFeats: Craft Wondrous Item, Craft Magical Arms and Armor\nSkill(s): DC 20 Craft Armor\nGP Cost: 150,000 gp\nXP Cost: 5600 xp\nScroll(s): Cloudkill, Dominate Person, Polymorph Self\nComponent(s): Full Plate Mold, 1 Metal Ingot\n\nPut the components and scrolls into any container. Cast this book's OnActivate Item spell at the container. On success the joins your party. On Death, the golem will leave the party and disappear.\n\nArcane classes are Arcane Trickster, Harper, Eldritch Knight, Pale Master, Sorcerer, Warlock and Wizard.\nDivine classes are Cleric, Druid, Harper and Warpriest.\n\n* You can use your character as the container but there is always the risk that this process will delete an item your did not want deleted. If you are isolated and need to use your own inventory, put the items in the first row on the first page of your inventory, and the script will not have to involve any of your other items.\n\nSetting the variables\n---------------------\nAfter you make a copy, I preset all local variables onto the Golem Book so you just change the ones your need to.\nBlank or 0 means the variable is not going to be used . To find out SKILL_ andIP_CONST_CASTSPELL_ numbers open a blank script and use the Script Assist to search in the Constants tab. Remeber, You need the number it equals, not the words!\n\nExplaining the variables\n------------------------\nUsing the Iron Golem example:\n\nFor Item restrictions\n- Alignment: Use the Restrict by Alignment property\n- The Magic Type: Restrict use by the magic classes too. Usually Wizard, Sorc and Warlock for Arcane, Cleric and Druid for divine.\n- For Arcane casting (see magic type below) I count Wiz, Sorc, Warlock, Arcane Trickster, Eldritch Knight Palemaster and Harper levels.\n- For Divine (see magic type below) its all Cleric, Druid and Warpriest and Harper levels.\n\nGOLEM_RESREF = \"c_irongol\"\nGOLEM_GP = 150000 <- this is high because instead of collecting many items which is a headache to check for, I make them get one or two and pay for the rest.\nGOLEM_XP = 5600\nGOLEM_MAGIC_TYPE = 1 (count arcane and divine)\nGOLEM_CASTER_LEVEL = 16\nGOLEM_NO_WONDROUS = 0 (not changed)\nGOLEM_NO_CRAFT_MAGIC_ARMS = 0 (not changed)\nGOLEM_SKILL = 25 (craft armor)\nGOLEM_SKILL_DC = 20 (you set it)\nGOLEM_SCROLL_1 = 48 (IP_CONST cloudkill)\nGOLEM_SCROLL_2 = 89 (IP CONST dominate person)\nGOLEM_SCROLL_3 = 208 (IP CONST polymorph self) Only 3 required\nGOLEM_ITEM_1 = n2_crft_mold_hvfp (Full Plate Mould)\nGOLEM_ITEM_2 = n2_crft_ingiron (iron ingot)\n\nDescription of variables (listed as in the book item)\n------------------------\n0. GOLEM_RESREF = the template resref of the creature\n1. GOLEM_GP = a gold price: this is usually high because instead of collecting many items which is a headache to check for, I make them only get one or two and \"buy\" for the rest.\n2. GOLEM_XP = xp lost by creation. Golems are very powerful tank NPCs so this is more than made up for in play.\n3. GOLEM_MAGIC_TYPE = 0 (none needed), 1 (both), 2 (arcane levels only), 3 (divine levels only)\n4. GOLEM_CASTER_LEVEL = how many levels they need in that magic type. 0 means none.\n5. GOLEM_NO_WONDROUS = 1 if you want to waiver the feat\n6. GOLEM_NO_CRAFT_MAGIC = 1 if you want to waiver the feat. Good for low level golems for lowe level casters\n7. GOLEM_SKILL = the numberic value of a SKILL_* constant used in scripting.\n----- This could be annoying. The books list all kinds of craft skills. The more obscure the golem the more obscure the skill. Alchemy, Spellcraft, Craft Armor or Lore seem to cover all bases.\n8. GOLEM_SKILL_DC = a DC you must set (they are in the D&D books)\n9. GOLEM_SCROLL_1 = the numeric value of the IP_CONST_CASTSPELL_* constant used in scripting. You might need to add #include \"x2_inc_itemprop\" to a blank script to search for these values.\n----- If 0 or none is looked for and this check is considered successful.\n----- Scribed scrolls should be accepted.\n----- You do not need to set any if you want. Just leave the current = 0.\n10. GOLEM_ITEM_1 = the tag of the item required.\n----- You can set as many as you want. (GOLEM_ITEM_2, etc).\n----- Leave the current one blank if there are none, and this check is considered successful.\n----- For armour or weapons, like a +3 Great axe, this means only a standard NWN2 +3 great axe is acceptable. Not crafted items. Make sure this is explained in the description.\n----- Do not put scrolls here. They only check through the GOLEM_SCROLL_* variables.\n----- Any item can only be checked for once so no \"Get 3 Iron Ingots\"!. You charge more gold so the rest are \"bought\".\n","Rating":8.75,"Votes":2,"Awards":[]},"118":{"Name":"DnD Mod v1.62","Author":"Selea","Submitted":20070516,"Updated":20071102,"Category":"Scripting routines","Type":"Type - Classic PnP","Format":"Module and Code","Patch":"1.10","NWN2Game":"All","Description":"DnD changes to spells: created Grapple Routine, new Touch Routine (with sneak attacks), and many spells reworking (see below for full list). This mod if compatible with Reeron and Player1 bug fixes, and in any case, also if you find some compatibility problems there's a way to overcome them (see in the \"Download\" section for details).\n\nWhat's new in this edition:\n------------------------------\n\nv1.62:\n- Resolved some bugs with Grapple checks.\n- Improved Bigby's spells, Evards Black Tentacles and Chilling Tentacles.\n- Many bug fixes to all the spells in the mod\n\n\nImprovements:\n----------------\n\nGeneral:\n\nA) Created a new Grapple script true to DnD 3.5 to use with all spells that use a Grapple as Bigby's, Black Tentacles, etc.\nB) Improved Touch Attack routine to use instead of the buggy one of NWN2:\n- Correct conditions, range bonuses for attacker and defender\n- Added sneak attack and critical to touch spells.\n- Mage Armor and Improved Mage Armor spells protect from Touch Attacks as per DnD\nC) Many improved spells (not bugfixes, other mods are for this):\n\n\nWizard/Sorcerer/Bard spells:\n-----------------------\n\n- Acid Fog: slow work by size now, as it should\n- Bigby's Forceful Hand: It now allows for 1 check each round, and creatures larger than Large should not be possible to \"bull rush\" with this spell. \"Bull Rush\" is now implemented better, with an opposed strength check\n- Bigby's Interposing Hand: it now slows the target and give -4 (not -10) to hit to attacker\n- Bestow Curse now works as DnD: Touched target is inflicted with one of: -6 on one random ability, -4 penalty on attacks, saves and skill checks or 50% spell failure and miss chance. On a succesful saving throw the target receives still a -1 hit penalty for 1 min. The effects of the spell cannot be dispelled, they are permanent. They can only be recovered by restoration spells\n- Dominate Monster: Duration is permanent as per DnD.\n- Disintegrate: now destroys Mordekainen's sword since the new version (included) is stronger.\n- Dispel/Greater Dispel Magic: it now dispel also Mordekainen's sword and all Bigby's spells as per DnD\n- Energy Drain: it is now a touch ranged spell with no save \n- Evard's Black Tentacles: implemented with the Grapple routine and the tentacles have now 8 + Caster Level DC and no more paralysis but immobilization, so cannot be resisted. Creatures that enter the AOE also if not grappled are still slowed (50% movement decrease).\n- Ethereal Jaunt: now it is more similar to PnP, but being Nwn2 a CRPG it had no sense to follow strictly the rules. Target becomes incorporeal (i.e. can pass throug objects) and he is invisible (as for improved invisibility) for the duration of the spell (1 round/lvl). Being incorporeal the target cannot be grappled\n- Greater Invisibility: caster now remain invisible either after attacking or casting a spell. Mirror Images gets removed by it (same for Invisibility).\n- Mirror Image: fail to cast if target is invisible and gets removed by insibility spells.\n- Mordenkainen's Sword (Mage's Sword): changed the sword completely to respect DnD. Since I couldn't implement all rules I changed it. It has 15 dmg reduction, 100% immunity to fire/cold/acid/electricity damages, sword has AC 13 and inflicts 4d6 +3 damage on each hit with an attack bonus of Caster Level + casting modifier. It can be dispelled by Dispel Magic and destroyed by Disintegrate\n- Prismatic Spray: total reworking of the spell. Now it works as DnD. Creature with less than 8HD are blinded for 2d4 rounds, not 1 rnd/lvl. The rays now do: 1. 20 points fire damage (Reflex half), 2. 40 points acid damage (Reflex half), 3. 80 points electricity damage (Reflex half), 4. Kills; Fortitude partial, take 1d6 points of Con damage instead, 5. Turned to stone (Fortitude negates), 6. Insane, as insanity (permanent confusion) spell (Will negates), 6. Sent to another plane (dismissed) (Will negates). The cone range is now 60 feet. On a roll of 8 roll twice more.\n- Shield: the spell now blocks Isaac's Missile storms spells since they are the equivalent of Missile Storm in DnD.\n\n\nCleric/Druid spells:\n--------------------\n- Call Lightning: now works more similar to DnD. It allows a bolt of lightning to strike 1 enemy/caster level (max 10) for 3d6 electricity damage every round in the spell area for a total of rounds equal to the number of bolts available for the caster (1/level, max 10).\n- Word of Faith: total reworking of the spell to be more similar to DnD. Being it a mix of Holy Word and Word of Chaos I implemented them togheter. NONCHAOTICS gets with no saving throw: HD Equal to caster level Deafened; Up to caster level �1 Stunned, deafened; Up to caster level �5 Confused, stunned, deafened; Up to caster level �10 Killed, confused, stunned, deafened. Nonchaotic extraplanar creatures within the area are instantly banished back to their home planes (Will save (at a �4 penalty) to negate). Creatures whose HD exceed your caster level are unaffected. For NONGOOD they get: HD Equal to caster level Deafened; Up to caster level -1 Blinded, deafened; Up to caster level -5 Paralyzed, blinded, deafened; Up to caster level -10 Killed, paralyzed, blinded, deafened. NonGood extraplanar creature get the same fate as nonchaotic ones. The effects get these values: Deafened: The creature is deafened for 1d4 rounds. Stunned: The creature is stunned for 1 round. Confused: The creature is confused, for 1d10 minutes. Blinded: The creature is blinded for 2d4 rounds. Paralyzed: The creature is paralyzed and helpless for \n\nWarlock spells:\n---------------\n\n- Curse of Despair now works as DnD: Touched target is inflicted with one of: -6 on one random ability, -4 penalty on attacks, saves and skill checks or 50% spell failure and miss chance. On a succesful saving throw the target receives still a -1 hit penalty for 1 min. The effects of the spell cannot be dispelled, they are permanent. They can only be recovered by restoration spells\n- Chilling Tentacles: now works as DnD. Tentacles Grapple enemies (not paralize them) and their DC is 8 + Caster level.\n- Noxious Blast: Ray now nauseate target/s for 1 Round (i.e. miss chance and spell failure 100%)\n- Retributive Invisibility: caster now remain invisible as per Greater Invisibility, either after attacking or casting a spell.\n- The Dead Walk: summons are now better. New spell is ready, with Summons by HD, will be here in next version\n- UtterDark Blast: it now heal damage if the target is Undead\n","Rating":9.56,"Votes":4,"Awards":[]},"119":{"Name":"MP OC Exp","Author":"moegun","Submitted":20070522,"Updated":20070522,"Category":"Area","Type":"Type - Combat","Format":"Module Only","Patch":"1.00","Description":"Stores main characters xp and sets players to a minimum of 75% of that, at module enter. Place in override.","Rating":"N/A","Awards":[]},"120":{"Name":"Crossbowman's crafting system","Author":"crossbowman","Submitted":20070523,"Updated":20070524,"Category":"Rulesets","Type":"Type - Trade Skill and Item Creation","Format":"Module Only","Patch":"1.05","Description":" Craftsystem (I have not found a better name yet) is, as it's name says, a system that allow crafting in NWN 2. It is still in developpement, this is only a beta version. I tried to make something different from other systems, more interesting to play. Yet, the main point of interest is that every crafted object is unique. Items properties like quality and MP change the value of items to players\nby allowing, for exemple, two iron longswords to be much different. This makes the market more active, more complex and the person who craft the object has a real influence on it. Because of that, having a high skill is very important.\n \n Here are the main features, all are here to make a better crafting system\n * Tradeskills improves on use. This is a great improvement from NWN 2, where we had to spend skill points for it.\n * No skill limitation. Limits can be boring for poeple who likes to do everything by themselves. \n Some adjustable penalties for having too many skills might be implemented in the future. The main limitation is that skills may be improved a lot, and it is hard to be the master, so it is almost impossible to be the master of everything.\n * Each crafted object is unique.\n Resources have some quality, that influence the quality of objects crafted with it.\n Crafted equipment (weapons, armors, jewels) have some MP (magic potential). The higher it is,the more powerful the object can be enchanted (enchanting is not implemented yet though)\n * Currently, four skills are implemented : mining, smelting, woodcutting and weaponcrafting\n * A test area has been made to try it\n \n The system is not completed, but it is made to be included in persistent worlds (PW). Everyone has the right to use it, I only want to have the credits and I would like to know who use it (on this page or by e-mail). The mod can be modified at will, I added many comments in the scripts for that. Here too, I would like to see the result.\n\n All the documentation is included in a .xls sheet. The most important ones are also included in a .txt\n\nVersion history\n version 0.2 (may 21, 2007) - weaponcrafting\n New features\n added weaponcrafting\n created the test area\n\n version 0.1 (may 10, 2007) - first version\n New features\n added mining\n added smelting\n added woodcutting\n\n Next version (0.3)\n new features\n woodcutting : bird's nests in trees, wood transformation\n weaponcrafting : bonus to weapons from metal, wooden weapons, creation of more than one object\n add bowmaking\n allow to use the skillbook to get info about current skill\n allow to know the probability of success (adjectives like low, medium, high)\n bug correction\n add finding, enchanting (maybe in 0.4)\n","Rating":9.13,"Votes":2,"Awards":[]},"121":{"Name":"Lava la Lava - Fire & Forget Placed Effect Randomizer","Author":"Patcha","Submitted":20070525,"Updated":20070602,"Category":"Area","Type":"Type - Effects","Format":"Module and Code","Patch":"1.05","Description":"ENGLISH\nThat script works by deleting and re-creating these placed effects to re-fire them.\nIn facts, it was borned in an half-day to help a friend that was searching a solution to randomize some custom placed effects.\n\nThe .erf file includes a script addressed to the \"On Enter\" event of the area. But it is initialized for the sample mod included. So you'll need to change and adapt script calls to custom functions into the \"main{}\" section.\nCustom function works on series of placed effects that need to be already placed in the area and, each serie, need an unique tag's root ending with a progressive number.\nEvery type of different placed effect need to have a reference blueprint, too. Each serie can include same type placed effects.\nThe custom function format will be the follow, as you can see in script comments:\nEffectCircle(string sEffect, int nAmount, string sTemplate, float fmaxDelay=2.0f)\nsEffect is the tag root of a serie, final tag for each placed effect will be {eEffect + progressive number};\nnAmount is the amount of placed effect for the call's involved serie\nsTemplate is the original effect blueprint's resource name\nfmaxDelay is a maximum of seconds delay reference between each placed effect (real final effect will be randomic)\nThe script works as you see only with \"Fire & Forget\" effects, as fireball hit and conjure are. I THINK that with loop effects it SHOULD work as a \"little break\" effect... as a fountain that doens't work well. I tested only the sample mod.\n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nITALIANO\nQuesto script funziona cancellando e ricreando questi effetti posizionati per farli riattivare.\nInfatti, è nato in una mezza giornata per aiutare un amico che cercava una soluzione per randomizare alcuni effetti custom scaricati dalla reate e inseriti in un'area (da ora \"effetti posizionati\").\n\nIl file .erf include uno script indirizzato all'evento \"On Enter\" dell'area. Ma è inizializzato per il modulo d'esempio incluso. Quindi dovrete modificare ed adattare le chiamate dello script alla funzione custom nella sezione del \"main{}\".\nLa funzione custom funziona su serie di effetti posizionati che devono essere già inseriti nell'area e, ogni serie, deve avere una radice della tag univoca che finisca con un numero progressivo.\nOgni tipo differente di effetto posizionato deve avere anche un progetto di riferimento in tavolozza. Ogni serie può includere effetti posizionati dello stesso tipo.\nIl formato della funzione custom sarà il seguente, come potrete vedere nei commenti dello script:\nEffectCircle(string sEffect, int nAmount, string sTemplate, float fmaxDelay=2.0f)\nsEffect è la radice della tag di una serie, la tag finale per ogni effetto posizionato sarà {eEffect + numero progressivo};\nnAmount è la quantità di effetti posizionati coinvolti nella serie chiamata\nsTemplate è il nome di risorsa del progetto originale dell'effetto\nfmaxDelay è un ritardo massimo in secondi di riferimento tra ogni effetto posizionato (il vero effetto final sarà randomico)\nLo script lavora come lo vedete solo con gli effetti instantanei, come il colpo e l'evocazione della palla di fuoco. PENSO che su un effetto continuo DOVREBBE funzionare come delle \"piccole interruzioni\"... come una fontana malfuzionante. Io ho testato solo il modulo d'esempio.","Rating":"N/A","Awards":[]},"122":{"Name":"To Rest, Pray and Study with Objects (v1.05)","Author":"Patcha","Submitted":20070526,"Updated":20070920,"Category":"Resting","Type":"Type - Resting","Format":"Module and Code","Patch":"1.06","Description":"ENGLISH\nThis download includes 3 customizable rest systems (rest, pray and study) which work by use/activation event of objects (placeables and even inventory portable items!) and cutscene/animations.\nI tryied to give them (and to users) a big roleplay potential, but with big concrete functionalities. I think there is a big adaptability level! (I hope I don't mistake!)\nSystems are customized by local variables use: there are about a dozen of module variables, an area variable and various PLC/items variables for each system!\n\nThe whole system (all 3 systems) may work with or without NWN2 standard rest system!\nAll necessary informations are stored in 4 long tutorials (1 per each system and 1 even for sample module!).\nYou'll find instructions about placing and creating PLC, and create and using items. I tryied to collect how many informations every type of users may need, too (ex: local variables to be stored into a database for PW administrators).\n\nYou'll need no hak pack by default: everything works well with NWN2 standard supply!\nBut more and more informations are stored into 4 long tutorials and some .txt files!\nJust download it, give a fast look to tutorials and use sample mod to give yourself an idea of systems potential.\nBut pay attention, if you'll decide to use those systems, you'll need to read really very much!\n[There is an optimal sequence to read tutorials: first Rest, then Pray, ending with Study.]\n\nI splitted italian and english files, except than sample module related files which are mixed.\nFor each .rar file you'll find a Readme (or Leggimi) and at last a tutorial.\nThe .erf file it's the same (bilingual) for both language distinct downloads.\n\nPS: Tutorial files are in pdf format. You may need Adobe Acrobat Reader 8.0 to read them: Link\nPS: Sorry for my bad English... I�m trying to do the best I can. :)\n\nHere some main updates features:\nv1.01/b\n- Fixed issue with portable items and possible unusual characters in players' accounts' names. (rest & pray)\n- Now activating an usable PLC, PC's action's queue will be cleared, to allow a correct play animation. (rest, pray & study)\n- Now you can activate a further option that writes PC's name after her spawned PLC's name. (rest & pray)\n- Thanks to ladyelvenstar, 1.01b contains (almost) rewrited English tutorials. ;)\n\nv1.02\n- [NWN2 Patch 1.06] Now feedbacks will be whispered instead of talked.\n\nv.1.05\n- Now you can set an \"only animation\" effect on beds which is valid only for prayers and/or studiouses.\n- Fixed a greater issue with end of game year, and a lesser issue with end of game month.\n- Now a check for ostile creatures in neighborhood is avaible\n- Now you can fade to black screen during rest, pray and study animation.\n- Now resting can heal & cure with no spell list reload for prayers and/or studiouses.\n- Now praying or studying can reload spell list with no heal & cure effect for prayers or studiouses.\n- Now you can create object with no time limit to re-use them, or even set time limits for portable items only.\n- Now you can activate a whole new system which calculate and return partial healing effect according to area type, PC's class and her Survival rank. It's called \"Environmental Discomfort System\".\n- Standard NWN2 rest compatibility: after first standard \"5 seconds animation\", there will be new messages in chat window which report time to whole animation end.\n- In Sample Module: you'll find new objects to test new 1.05 features.\n- In Sample Module: innkeeper dialogue: now you'll find explicit hints to understand what variable he is talking about, and variable's value before and after.\n- In Sample Module: innkeeper dialogue: now you'll be able to hurt your PC physically and/or to inflict negative effects.\n- Files: you'll find a new tutorial dedicated to \"Environmental Discomfort System\".\n\nYou can know much more update features and details downloading the new history file separately!\n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n\nITALIANO\nQuesto download include 3 sistemi personalizzabili di riposo (riposo, preghiera e studio) che funzionano tramite uso/attivazione di oggetti (posizionabili e persino oggetti portatili da inventario!) e custcene/animazioni.\nHo provato a dar loro (ed agli utenti) un grande potenziale GDR, ma con grandi e concrete funzionalità. Penso ci sia un gran livello di adattabilità! (Spero di non sbagliarmi!)\nI sistemi vengono personalizzati tramite variabili locali: ci sono circa una dozzina di variabili di modulo, una variabile d'area ed un \"quantitativo variabile\" di variabili d'oggetto per ogni sistema!\n\nL'intero sistema (tutti e 3 i sistemi) può funzionare con o senza il sistema standard di riposo di NWN2!\nTutte le informazioni necessarie sono conservate in 4 lunghi tutorial (1 per ogni sistema ed 1 persino per il modulo d'esempio!).\nTroverai istruzioni su come posizionare e creare posizionabili, e creare ed usare oggetti da inventario. Ho anche cercato di raccogliere quante più informazioni possibile di cui ogni tipo d'utenti possa aver bisogno (es: le variabili locali da registrare in un database per gli amministratori di PW).\n\nNon avrai bisogno di hak pack di dafault: ogni cosa funziona bene con la roba standard di NWN2!\nTroverai moltissime altre informazioni in 4 lunghi tutorial e qualche file .txt!\nScaricalo, dai un'occhiata veloce ai tutorial ed usa il modulo d'esempio per darti un'idea del potenziale dei sistemi.\nMa fai attenzione, se decidi di usare questi sistemi, avrai bisogno di leggere veramente molto!\n[C'è un sequenza ottimale per leggere i tutorial: prima il Riposo, poi la Preghiera ed in fine lo Studio.]\n\nHo diviso i file in italiano ed in inglese, eccetto quelli relativi al modulo d'esempio che sono mischiati.\nPer ogni file .rar troverete un file Leggimi (o Readme) ed almeno un tutorial.\nIl file .erf è lo stesso (bilingue) per entrambi i download distinti per linguaggio.\n\nPS: I file dei tutorial sono in formato pdf. Potreste aver bisogno di Adobe Acrobat Reader 8.0 per leggerli: Link\n\nEcco le principali caratteristiche degli aggiornamenti:\nv1.01\n- Corretto un problema con gli oggetti portatili ed eventuali caratteri inusuali nei nomi degli account dei giocatori. (riposo & preghiera)\n- Ora attivando un PLC usabile, la coda delle azioni del PG verrà cancellata, per permettere una corretta animazione. (riposo & preghiera)\n- Ora potete attivare un'ulteriore opzione che scrive il nome del PG affianco al nome del suo PLC generato. (riposo & preghiera)\n\nv1.02\n- [Patch 1.06 di NWN2] Ora i feedback verranno sussurrati invece che parlati.\n\nv.1.05\n- Ora potete settare un effetto \"solo animazione\" sui letti che vale soltanto per adoratori e/o studiosi.\n- Corretto un problema maggiore con la fine dell'anno nel gioco, ed un problema minore con la fine del mese nel gioco.\n- Ora è disponibile un controllo per la presenza di creature ostili nelle vicinanze.\n- Ora potete far sfumare a nero lo schermo durante le animazioni di riposo, preghiera e studio.\n- Ora il riposo può curare senza ricaricare la lista degli incantesimi per adoratori e studiosi.\n- Ora la preghiera e lo studio possono ricaricare la lista degli incantesimi senza effetti di cura per adoratori e studiosi.\n- Ora potete creare oggetti senza limiti di tempo per il riuso, o persino settare i limiti di tempo solo per gli oggetti portatili.\n- Ora potete attivare un intero nuovo sistema che calcola ed applica un effetto di cura parziale in base al tipo di area, alla classe del PG ed al suo punteggio in Sopravvivenza. Si chiama \"Sistema di Disagio Ambientale\".\n- Compatibilità col riposo standard di NWN2: dopo la prima \"animazione di 5 secondi\" standard, ci saranno nuovi messaggi nella finestra di chat che riportano il tempo necessario alla fine dell'intera animazione.\n- Nel Modulo d'Esempio: troverete nuovi oggetti per testare le nuove funzioni della 1.05.\n- Nel Modulo d'Esempio: dialogo del locandiere: ora troverete espliciti riferimenti per capire di quale variabile si sta parlando, e il suo valore prima e dopo.\n- Nel Modulo d'Esempio: dialogo del locandiere: ora potrete fisicamente ferire il vostro PG e/o infliggergli effetti negativi.\n- File: troverete un nuovo tutorial dedicato al \"Sistema di Disagio Ambientale\".\n\nPotrete conoscere ulteriori caratteristiche degli aggiornamenti scaricando separatamente il nuovo file dello storico.","Rating":9.75,"Votes":6,"Awards":[]},"123":{"Name":"Command Undead Fix","Author":"XanGregoris","Submitted":20070616,"Updated":20070616,"Category":"Skill/Feats","Type":"Type - Combat","Format":"Code Only","Patch":"1.06","Description":"nw_s2_turndead.NCS - is the only essential file you need.\nnw_s2_turndead.txt - has the code if someone is interested looking at it.\nCommandUndead_ReadMe.txt - Has install instructions and rest what is written below.\n\n------------------------------------------------\n- Command Undead 1.0 - ReadMe - by XanGregoris -\n------------------------------------------------\n\nThis script allows evil clerics and blackguards to command undead with Turn Undead ability.\nNormally they would just destroy the undead like good clerics do or rebuke them.\nThe effect from just rebuking undead works just as before for all clerics though.\n\n------------\n- Contents -\n------------\n1. Features\n2. Install Instructions\n3. Known Issues\n4. Special Thanks\n\n---------------\n- 1. Features -\n---------------\n\n- Instead of destroying undead, evil clerics command undead as if they were dominated. \n\n- Using Turn Undead no longer tries to turn friendly undead or npcs.\n\n- The duration for command undead is 1 realtime minute + 1/2 realtime minute per character's turn level.\n The 3.5 DnD SRD doesn't define the exact duration, but for rebuking it's 1 realtime minute (10 rounds).\n \n I made the decision to extend this (it's quite long for high level clerics) after weighing and \n comparing the ability to command undead to good cleric's ability to outright destroy them.\n The spell durations for summoning undead are pretty long too which affected my decision.\n\n- Evil clerics use some different visuals with Turn Undead.\n\n- Evil clerics with Evil Domain can also command outsiders instead of slaying them outright. \n Good and neutral clerics with Evil Domain still kill them though.\n\n---------------------------\n- 2. Install Instructions -\n---------------------------\n\n1. Place the nw_s2_turndead.NCS file in your NWN2 Override folder.\n (\\Documents and Settings\\Owner\\MyDocuments\\Neverwinter Nights2\\Override\\)\n\n2. Enjoy your Army of Darkness.\n\n\n-------------------\n- 3. Known Issues -\n-------------------\n\nThere are some issues with Turn Undead that this mod doesn't tackle.\nI'm not sure if I'll be fixing these in future though. \nOr I might make different version with the changed 2da files and dialog.tlk file. \n\nSo take these with grain of salt:\n\n- There's no limit how many undead you can command when using several turn attempts.\n A single use of Turn Undead counts the character's turn level and how many undead opponents cleric can turn.\n But it doesn't count how many undead the cleric is already commanding from previous Turn Undead uses. \n This means that with several retries you can command huge army of undead no matter even if you don't take control of all of them at once. \n It begs to ask whether the duration of the commanding undead should be reduced or not.\n Or should I just get a clue how to keep count on all of the undead under the cleric's command?\n Either way I figure there might be some nice moments in the OC where you could take advantage of this. ;) \n Then again, a good cleric can destroy several undead with many retries of Turn Undead as well. \n\n- Evil clerics still have the yellow casting visual effect on their hands when they start casting Turn Undead.\n spells.2da has the casting visual defined and without changing the file, it's impossible to change the visual effect.\n Changing the file might cause overlapping with other mods and I wanted \n to keep this script as modular as possible so other people can use it with their mods/hacks/custom content.\n\n- Descriptions for Turn Undead haven't been updated.\n This would also require work with the dialog.tlk file.\n\n- Neutral clerics use only good aligned cleric's version of turn undead\n instead of using the ability based on their deity.\n You would need to create a new column in deities.2da for deity's own alignment.\n Or try somehow counting the alignment of the deity from the aligments the deity allows its followers to take.\n In my humble opinion it sounds like more work than it's worth.\n\n- Good clerics rebuke undead instead of causing fear.\n It was Obsidian's decision to replace the fear effect with rebuke so that\n the undead don't run all over map and iniate scripts by accident.\n Haven't tested nor put much thought whether the fear effect would really be a problem or not.\n\n\n---------------------\n- 4. Special thanks -\n---------------------\n\nSpecial thanks go to Bio's/Obsdian's Control Undead spell \nand Wes Baran's own Rebuke/Command Undead mod for old NWN.\n\nThose scripts gave me some helpful advice how to avoid the mind immunity of undead. ","Rating":8.5,"Votes":2,"Awards":[]},"124":{"Name":"csf - common scripting framework","Author":"EPOlson","Submitted":20070619,"Updated":20110408,"Category":"Entire Module/PW systems","Type":"Type - Event","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Don't combine event scripts to add new systems to your mod. The CSF does it for you!\n\nCommon Scripting Framework for NNW2\n\nThe Common Scripting Framework (CSF) simplifies the process for adding scripted systems to a module. Many modules will use several systems (e.g. DMFI, HABD, HCR, NESS, etc). Most require the editing/merging of module or area event scripts and demand the designer follow detailed instructions to install and update the systems. CSF allows the module designer to easily install, remove and configure any number of packaged systems.\n\n * CSF allows plug-n-play installation of scripted packages.\n * No scripting is required to install the CSF or CSF enabled components to a module.\n * Component instances act as functional documentation for a system's requirements and configuration. They may double as in-game documentation for PCs or DMs.\n * CSF supports installation and reconfiguration while the module is running\n * Simple to use, but powerful enough to do what you need.\n\nThe CSF replaces all the event scripts for the module. It uses CSF Components to determine what events a system needs to be linked to. These components are placeables or waypoints with variables listing the required events and which script to run. The CSF then manages a list of all the system scripts that need to be called when any event script is fired.\n\nThe CSF is not just for builders who dislike scripting. It is a better way to maintain scripted systems. Using the CSF when making your own systems will simplify your event scripts, and make it easier to share your work with others.\n\nFor the full documentation see readme.html in the download.\n\nFrequently Asked Questions\nQ: What kind of object should I use as an instance for my component? A waypoint? A placeable?\n\nA: The framework does not care. It searches for a \"CSF\" tag on any object. It would be very bad to use anything that could get killed or destroyed.\n\n * Waypoints objects have the smallest data structure, so it uses the minimal resources. It also can't be seen or touched by players.\n\n * Placeables can provide extra functionality through their OnUse event and the Description could be used to provide in-game documentation to the players or DMs. Placeables are not much larger than waypoint (unless they contain inventory). Inventory could be utilized to configure a csf object.\n\n\n[Reading variables from a placeable and reading variables from a waypoint seem to take about the same amount of time, the performance difference happens when the object is repeatedly passed as a parameter to a subroutine.]\n\nQ: Something does not seem to be working right. What is wrong?\n\nA: Did you check your server log? Csf prints errors and warning to that file. Did you make a typo in the variable or script name? Does the debug object help?\n\nQ: You said the [local] event scripts run with priority 7 by default, how do I change that?\n\nA: You could change it in the source code, but you don't really want to do that. The simple thing to do is just assign \"[local]:priority\" for an event the module object. For example setting: @OnSpellhook = \"[local]:first\" on GetModule(), will give the local event script \"first\" priority for the OnSpellhook event queue. (any csf component, it does not matter which one - it can not be controlled per object - think about it)\n\nQ: Why did you overwrite the gui_death_respawn_self script?\n\nA: The module's OnPlayerRespawn event is never called in NWN2. When the \"Respawn\" button is pressed on the respawn GUI, it calls gui_death_respawn_self. Therefore, the CSF Framework needs that code to call the onPlayerRespawn script so that respawn events can get processes. (the gui_death_respawn_self_orig script contains the original resurrect code that was replaced.)\n\nQ: My OnPlayerRespawn still does not work\n\nA: As explained in the previous question, the OnPlayerRespawn event is never actually called, it gets called by \"gui_death_respawn_self\".\n\nSo first turn on debugging and check if the csf OnPlayerRespawn event is getting called. If you are not using the default death script (nw_o0_death) which creates a GUI called \"SCREEN_DEATH_DEFAULT\" (death_default.xml), then the button press might not call \"gui_death_respawn_self\". (also check to see if any other script has overwritten \"gui_death_respawn_self\"\n\nFor example, an OnPlayerDeath script like k_mod_death in the OC (and anything using the \"ginc_death\" functions) opens a different GUI called \"SCREEN_PARTY_DEATH\" (partydeath.xml). When respawn is pressed in that GUI, it called \"gui_death_respawn\" instead. So to use this, you will need to modify \"gui_death_respawn\" so it calls the csf OnPlayerRespawn event like the modified \"gui_death_respawn_self\".\n\nIf your script is getting called, it might not work because it uses GetLastRespawnButtonPresser() to get the spawner. Unfortunately, that function value never gets set, since the true \"OnPlayerRespawn\" event is never called. Since the gui respawn scripts are called with OBJECT_SELF set as the button presser, I wrote store that and wrote a function to access it: csfGetLastRespawnButtonPresser(). (so use that instead)\n\nCredits\n\nCSF Framework 1.2 for NWN2\nBy EPOlson\n\nThe CFS framework is a merging of ideas from members of the NWN community. An initial prototype was written by futurewavecs and the HRC team built a similar system into their new HCR package. The details of framework were based on discussions between Demetrious, Pentane, Sunjammer, EPOlson, and others. The first version was scripted by EPOlson. (with nwnx2 chat scripts by virusman/dumbo and listen scripts by Deva/Demetrious & the dmfi team) rdjparadis added extensions to support all events for all types of objects, as well as add the idea of [local] scripts.\n\nChanges\n1.2\n * Cleaned up onListen events (created a seperate erf for the listen scripts)\n * Updated and cleaned up some documentation\n * Added a few functions to the event api (for getting and setting component variables)\n\n1.1\n * Added OnPCStart event (first time PC start the module)\n * Cleaned up OnPlayerRespawn. (see notes, but instead of passing the respawner as OBJECT_SELF, like the respawn GUI scripts do, I wrote a function:\n csfGetLastRespawnButtonPresser()\n * Cleaned up the demo mod\n * Fixed bugs in the plugin (and updated for 1.04)\n","Rating":10,"Votes":7,"Awards":[]},"125":{"Name":"Charlie's Item Appearance Changer","Author":"charlievale","Submitted":20070619,"Updated":20110402,"Category":"Entire Module/PW systems","Type":"Type - Appearance","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Tired of your gear looking like everyone else's? Change it!\n\nCharlie's Item Appearance Changer\n\nThis UI driven system allows you to select from a range of item appearances for your visible equipment! It can be installed for use in the official campaign, or added to your new module or online world. You can preview different armor, weapons, cloaks, helms, boots, gloves and shields.\n\nFor Players\nTo install Charlie's Item Appearance Changer:\n * Delete any previous versions of charlie_mda from your override or ui\\custom folders.\n * Copy the folders \"charlie-mda - ui\", \"charlie-mda - base-items\" and \"charlie-mda - scripts\" to your override folder: \"My Documents\\Neverwinter Nights 2\\override\\\n * (optional) To make appearance changes free in a local game, replace the folder \"charlie-mda - scripts\" with \"charlie-mda - scripts - free\".\n * In game, look for \"Change Appearance\" on the Player Menu (see screen shot).\n\nTo modify the appearance of your companions, you will need to possess them before starting the appearance changer. You should also close the appearance changer before switching character.\n\nThe new appearances in 1.05 can be previewed with the html pages in NWN2_CIAC_Guide. Double click the file index.html to view.\n\nBe aware that this overrides the Player Menu (playermenu_popup.xml), which may interfere with other mods. Alternatively you can launch the appearance changer from an item. To create the portable appearance changer item:\n * Target your character by right-clicking.\n * Open the debugging console with the back-tic \"`\" key.\n * Enter: debugmode 1\n * Enter: giveitem vn_mda_launch\n * Enter: debugmode 0\n\nFor Developers\nTo make Charlie's Item Appearance Changer a part of your module:\n * Import charlie_mda.erf into your module.\n * Place the Placeable-]valenet-]special-]Check Chest in an inaccessible area.\n * Launch the UI scene from an NPC, placeable, or other custom UI. Sample scripts for doing this are included as:\n * gui_vn_mda_launch - Launch Charlie's Item Appearance Changer, from a GUI.\n * ga_vn_mda_launch - Launch Charlie's Item Appearance Changer, from a conversation.\n * i_vn_mda_launch_ac - Launch Charlie's Item Appearance Changer, from an item.\n * Include the folder \"charlie_mda - UI\" in your campaign folder or hak pack. Alternatively have players install it in their custom UI folder: \"My Documents\\Neverwinter Nights 2\\UI\\custom\\\"\n\nFor DMs\nDMs can see the cost to modify item appearances; however they do not require any gold.\n\nCompatibility\nAccess to Charlie's Item Appearance Changer through the custom Player Menu will not be compatible with any other mod that overrides playermenu_popup.xml. I have made a set of player menus for compatibility between different mods in the Player Menu Pack (below).\n\nFor people who want to use this with Alan's Universal Companions Database they will need to download the file \"playermenu_popup.xml\" as a separate download and replace the one in charlie_mda. This makes the Universal Companions Database buttons available as well as the Change Appearance button. (You will still need to download and install Alan's Universal Companions Database for the buttons to work.)\n\nFAQ - Frequently Asked Questions\nQ. Why did we have to wait so long for someone to do this?\n\nA. I was going to do this first, but hubby said \"No, wait until the new scripting function come out.\" Eventually I got impatient and did it anyway.\n\nQ. Does this really change appearance and tint? I mean really-really?\n\nA. No. Technically it allows you to choose from pre-built items, and copies your currently equipped item's properties onto the new item. That means you are limited to the appearances in the library of items included. The scripting functions in NWN1 that allow armour to be 'dyed' and changed piece at a time do not yet exist in NWN2. When they do I plan to rework this.\n\nQ. How do I change the name? How do I change the item properties?\n\nA. Not with this. Try Charlies Item Modifier instead / as well.\n\nQ. I have made a great looking out-fit for my character. How do I keep the same appearance when I upgrade my gear?\n\nA. Jot down the numbers that come up in the appearance changer UI. You can enter these numbers directly to restore a known appearance. However updates may not keep the same numbering.\n\nQ. Can I use this with custom models?\n\nA. With some changes you can access custom models, but: you need to make blueprints for the appearances you want, using the tool set and replace or add to the existing blueprints (*.uti files). You need to follow the same naming system used with the current *.uti files. If you add to - rather than replacing - you will also need to update the number of blueprints (for each kind of item) in vn_mdp__inc, and recompile.\n\nJake Zahn did this for Lineage Arms and Armor here.\n\nCustomization\n\nThe cost of appearance modifications is set in the script vn_mda__inc. Instructions for changing the cost are included. The default cost is based on the cost of the item modified, similar to NWN1 crafting. Keep in mind that this does not add any intrinsic value to the item modified, so it should not be too expensive! If you have charlie-mda in your override folder you must replace the .nss and .ncs files there as well.\n\nYou can replace any of the uti files with your own blueprints made in the toolset. The naming / numbering of the files is required for the scripts to find them and you must change the limits in vn_mda__inc if you want to add more blueprints than the current version.\n\nUpdates\nFrom version 1.03, Charlie's Item Appearance Changer will try to check for updates, when playing on-line. It does this by comparing its version number against the version number in server scripts. This will give the user a message if the on-line server has a newer version installed.\n\nChange Log\n\n * 1.06 - Fixed an inssue that may prevent the change button working. Added warning for special metals.\n * 1.05 - Added new appearances by Mike.\n * 1.04 - Bracers no longer converted to gloves. Included no gold version.\n * 1.03 - Companion equipment will now cycle. Added update check. Added blueprints by Raymon and SushiSquid.\n * 1.02 - Added splint mail and mithril armor types. Items now keep their names. Focus now switches properly to the appearance UI.\n * 1.01 - Added scripts to override missing in 1.00.\n * 1.00 - Initial Release.\n\nCredits\nThanks to the following people for contributing to Charlie's Appearance Changer:\n * Mike for his appearance guide and for Clothes #1 to #80; Padded #1 to #16; Leather #1 to #20; Chain #1 to #30; Hide #1 to #12; Scale #1 to #17; Plate #1 to #61; Boots #1 to #62; Cloak #1 to #10; Gloves #1 to #29; Helm #1 to #38.\n * Cleitanious for his screenshot and for: Clothes #157, Chain Shirt #59, Chain Mail #59, Scale Mail #30, Leather #39, Scale Mail #40, Studded Leather #39, Breastplate #122, Half Plate #122, Full Plate #122, Banded Mail #122, Scale Mail #32\n * SushiSquid for: Clothes #158, Heavy Shield #25, Light Shield #25, Mithral Chain Shirt #59, Mithral Chain Mail #59, Mithral Breast Plate / Half Plate / Banded Mail / Splint Mail / Full Plate #122, Mithral Scale Mail #30, Scale Mail #33\n","Rating":9.77,"Votes":74,"Awards":["Hall of Fame"]},"126":{"Name":"Drop Gold","Author":"charlievale","Submitted":20070623,"Updated":20070721,"Category":"Inventory Item","Forum Thread":"Link","Type":"Type - Trading","Format":"Module and Code","Patch":"1.06","Description":"This allows PCs to drop gold. \n\nIt includes:\n * A coin purse - which is use-able. Target the ground to drop 10 gp.\n * A pile of dropped gold (placeable), which can be picked up by clicking on it.\n * Two scripts, for the dropping and picking up actions.\n * A sample module.\n\n22JUL07\nThis is a trivial proof of concept I did for something discussed on the forum. I am not actively working on this and I won't be checking this page regularly so if you want to discuss it contact charlievale at gmail dot com.","Rating":"N/A","Awards":[]},"127":{"Name":"terrains features trigger","Author":"SilkD","Submitted":20070625,"Updated":20070626,"Category":"Other","Type":"Type - General","Format":"Module Only","Patch":"1.00","Description":"Simpler variabler Trigger, um Gelände Merkmale zu simulieren \nsimple variable Trigger, about terrains features to simulate\n\nDer Spieler erhält verschiedene Boni/Penalty beim betreten des Bereichs die beim verlassen des selbes entfernt werden. \nThe player gets different Boni/Penalty at the cross the area the at the is left removes the same.\n\nSkill Boni/Penalty: Hide, Listen, MoveSilently, Parry, Search, Spot, Tumble, Survival\nSpeed Increase/Decrease\nConcealment + MissChanceType\nText Message \n\nBeispiel ein Gebiet mit dichten Unterholz \nExample an area with dense undergrowth\n","Rating":3.5,"Votes":1,"Awards":[]},"128":{"Name":"BasicRestingv1.31","Author":"puket","Submitted":20070628,"Updated":20080730,"Category":"Resting","Type":"Type - Resting","Format":"Module and Code","Patch":"1.12","NWN2Game":"All","Description":"Basic Resting Script v1.31 NEW VERSION\n","Rating":10,"Votes":2,"Awards":[]},"129":{"Name":"Dice ingame game","Author":"WarmachineX0","Submitted":20070702,"Updated":20070702,"Category":"Conversation","Type":"Type - Other","Format":"Module Only","Patch":"1.06","Description":"This is a Dice game played through conversation. It is fully scripted. You play for 5gold, if you win you double your money, lose you lost you 5 gold, and if you tie you get your money back. I just filled in the coverstion, put what you like in place of the old sailor. It is set in NWN1 style conversation. Just import it into a mod, attach it to an NPC and its ready to go.","Rating":"N/A","Awards":[]},"130":{"Name":"Talernon3 Scripts - PW Weather System","Author":"Dragonsbane777","Submitted":20070702,"Updated":20091127,"Category":"Entire Module/PW systems","Forum Thread":" Link","Type":"Type - Effects","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"Talernon3 Weather System:\nA simple system you can use to have weather in your module, area by area.\nThis simple set of scripts uses Sorceress Ashura's VFX Pack V3.5 � this hak pack or set of override files are REQUIRED for this system to work, unless you change the VFX references to ones of your own. \n\nInstallation:\n-Import the 3 scripts and 4 placeables into your module.\n-Place the 4 Weather Box placeables in your area, spaced out evenly, they receive the vfx of the weather, and are invisible.\n-Place the desired script into the OnEnter properties of your area.\nEach time a player or DM enters the area, there is a random chance for weather to begin or end, and the time of year determines if it snows or rains (or rains hard or blizzard, depending on the specific script)\nThe next version will have many more varieties of settings, as well as a much more numerous set of vfx, all from Sorceress Ashura's VFX Pack V3.5 � a essential hak pack for any PW or module.\n\nThe hak pack can be found here: Link\n\nWorld of Talernon3 is a NWN2 RP PW, watch for more of our custom content on the web soon.\n\n\nLink\n\n","Rating":10,"Votes":2,"Awards":[]},"131":{"Name":"Give Item OnUsed Script (easy to use)","Author":"Finamenon","Submitted":20070705,"Updated":20070706,"Category":"Inventory Item","Type":"Type - Placeables","Format":"Code Only","ShowCode":"void main()\n{\n\tstring sItem = GetLocalString(OBJECT_SELF, \"resref\");  //this gets the resref value of the item you want the player to receive on picking up item\n\tCreateItemOnObject(sItem, GetLastUsedBy());\n\tDestroyObject(OBJECT_SELF); // this destroys the placeable, leaving the item in the player's inventory\n}Select All Text | View Code in separate window","Patch":"1.06","Description":"The purpose of this script is to emulate the player picking up placeables/items from his or her surroundings. For example, there is a placeable of a scroll, so you could insert this script on that placeable, and when the player uses it, he/she will get an item.\n\nThis script is one script you place on any useable placeable's OnUsed event. It is very simple to use and install. Simply copy the code shown below, or add the files to your module/campaign folder.\n\nHow to Use:\n\n1) Add the script fi_onu_giveitem(or script name if you copied the code) to a useable placeable's OnUsed event.\n\n2) In the placeable's variables, add a string type variable named \"resref\"\n\n3) Make the value of the variable \"resref\" equal to the resref of the item you want the placeable to give to the player.\n\nFor example, if you wanted a player to pick up a scroll of acid fog from a table, the value of resref mentioned in step three should be nw_it_sparscr603. When the player walks up to the useable scroll and uses it, it will 'destroy' the placeable, and the player will get the Acid Fog scroll.","Rating":9.44,"Votes":4,"Awards":[]},"132":{"Name":"TL Factions Framework 1.2","Author":"kunou126","Submitted":20070716,"Updated":20070728,"Category":"Scripting routines","Type":"Type - Reputations","Format":"Module and Code","Patch":"1.06","Description":"This is a framework to allow a module builder to implement up to 9 PC Player Factions. Each of the 9 factions can maintain three states of reputation with the other 8 factions: Friendly, Neutral, and Hostile. The faction states can be static or dynamic. Faction state persistence is also optional.\n\nThe TL Factions Framework is only a framework. It comes with no widgets, event scripts, conversations, or unique items. It is a set of functions designed to accomodate the needs of a module developer attempting to implement player factions. It is powerful in its flexibility, but entirely up to the module developer to decide how to implement this system with regards to their module.\n\nDo you want to use portals in your start area to allow players to pick a faction? Do you want to create a widget that allows a PC designated as faction leader the ability to join a player to his faction? Do you want to hard code the factions so they have static reputations? Do you want to create a diplomacy system that allows your players to form alliances or declare war on other factions in realtime?\n\nYou can do any of these with just a few function calls.\n\nSome setup is required after importing the erf. Follow the directions in the TL_Factions_Readme script to complete the setup of the TL Factions Framework.\n\nThis system is intended for multiplayer modules and Persistant Worlds where player versus player contests are expected and encouraged.\n\nVersion 1.2 contains a fix for player death notification.\n\nVersion 1.1 adds a function to send messages to all members of a faction and helper functions for an optional diplomacy system.","Rating":"N/A","Awards":[]},"133":{"Name":"cdaulepp's random loot generator version 2.0 BETA","Author":"cdaulepp","Submitted":20070722,"Updated":20080514,"Category":"Scripting routines","Type":"Type - Trade Skill and Item Creation","Format":"Module and Code","Patch":"1.12","NWN2Game":"All","Description":"cdaulepp's random loot generator VERSION 2.0 BETA \n\nIncluded: readme, folder for the override directory that will handle random loot generation, and a DEMO module. \n\nAll you do is download the folder 'cdaulepp' and put it in your override directory and random loot will start appearing on monsters immediately.\n\nNew to this version:\n--Works with monsters and placeables (e.g. treasure chests).\n\n--Random name generator so that magical items get unique names every time.\n\n--All Mask of the Betrayer material added.\n\n--More switches added to let you turn on/off haste, darkvision, holy avenger, freedom of movement, true seeing, keen, and improved evasion.\n\n--Separate probability tables for Boss loot, placeable loot, and monster loot. Gives you more control.\n\n--Magical Rods\n\n--Lots of other fixes. See the readme file for more information.\n\n--The DEMO module has had a lot of new things added. Mr. Identify has several new conversation nodes that explains some things. Also, I added examples of some placeables using the random loot generator in the DEMO module. On the placeables in the DEMO module I turned off the respawn timer so that you can open/close the placeables in rapid succession and spawn loot very quickly. Normally there would be a respawn timer preventing that from happening.\n\nKey Features\nA. Easily added to the Official Campaign (OC) for a whole new\n gaming experience. You can add this at the beginning or\n in the middle of a game and start getting random loot immediately\n The random loot generator does not stop the unique boss\n loot drops from happening. You will get the unique drops plus \n there's a chance of getting additional loot.\n\nB. Literally billions of combinations possible. \n\nC. Save time because you don't have to create hundreds or \n even thousands of unique items in the toolset. \n\nD. You can build a larger world. Getting rid of the need for\n thousands of unique items in the toolset means you don't\n have thousands of .uti files anymore. .Uti files take\n up space. \n\nE. End-User Switches and probability tables gives you \n complete control. You can allow/disallow any item property\n you do/don't want and set minimum/maximum values for the \n things you allow.\n\nF. Easy to use. Just import one file and put it in your override\n directory and random loot will start appearing on monsters.\n\nG. CR scaling lets your loot go up in power as the monster's get\n tougher. You have complete control over every single monster\n challenge rating from level 0 to 41. Easily set upper and \n lower limits on the item properties. Choose between constant\n based CR scaling or formula based CR scaling.\n\nH. Easily set gold piece limits for items dropped for each monster\n CR from 0 to 41. A switch turns gold piece limits on/off.\n\nI. Race specific loot drops. Choose what types of loot each race\n of monster can drop. \n\nJ. All material types of weapons (generic, dark steel, duskwood, etc)\n and armors (adamantine, mithril, etc) included in this version. \n \n K. All the missing Damage Shields that Obsidian left out have been \n implemented. \n\nL. Includes everything from Mask of the Betrayer.\n\nM. Updated to work with treasure chests or any placeable with an inventory.\n\nN. All magical loot is given a unique random name in version 2.0. There \n are hundreds of billions of combinations of names possible.\n\nO. Boss specific loot drops. Choose to mark your bosses with a variable \n and the random loot generator will use special tables for boss loot.","Rating":9.7,"Votes":63,"Awards":["Hall of Fame"]},"134":{"Name":"Talernon3 Scripts - Alignment-based Planar Spells","Author":"Dragonsbane777","Submitted":20070724,"Updated":20091127,"Category":"Spells","Forum Thread":" Link","Type":"Type - New Spells","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Get your ass on my PW BAM!\nLink\n\nTalernon3 Alignment-based Planar Spells: Here are 4 planar summons spells (lesser planar binding, planar binding, planar ally, greater planar binding) that are keyed to the caster's alignment, and summon a creature from the correct outer plane. Included are the 4 scripts, with an additional onhearbeat script which adds up to 4 vfx using variables to critters, and 27 critters. A big thanks to the Talernon2 DM team, and to Wild Bill and the Storyteller, a few of their critter appearances were used in this batch, since we use their awesome work in our PW. \n\nNote that some of these critters were altered a bit from PnP versions, so that they were all balanced in regards to one another.\n\nComments are welcome, and post any bugs so when I update they are corrected - should be bug free, they are on our PW.\n\nEnjoy, and come see our RP PW, World of Talernon\n\nLink","Rating":9.33,"Votes":3,"Awards":[]},"135":{"Name":"Pencil n Paper Coins","Author":"Accerak","Submitted":20070728,"Updated":20090913,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"Copper, Silver, Electrum, Gold, and Platinum coins are made available with this system. Features a liberal weight system for carried coinage (that can be disabled), coins are stackable and droppable, uses standard merchants, creatures drop new coins with no extra configuration, and includes several preconfigured chests and treasure piles along with a demo mod and documentation.\n\n7-29-07: Added a second more PW/multiplayer friendly download. It does not use a heartbeat and instead fires weight calculations off of the acquire/unacquire mod events.\n\n8-18-07: Updated to Version 2.0\nChanges Include:\n1. Companion Support\n2. Bug Fixes\n3. Code Cleanup\n\nFrom this version forward, I am only supporting the (what was formerly known as) the PW version. Builders who have implemented the non-PW version can download this update, and there is an erf and docs to add the companion support.\n\nFor those using the PW version, there is also an update erf and docs in the download.\n\nUpdating is VERY simple in both instances.\n\nBugs Fixed were all on the PW side of things. Fixed bug where client would sometimes lockup when player pressed the \"loot all\" button. Fixed bug in companions where they wouldn't calculate weight of coins unless possessed by NPC (in previous non-PW version this is still a bug).\n\nCompanion support includes a conditional script for hiring based on coin amount and type requested by the companion, dynamic weight calculation, merchant use is the same as a PC.\n\nThe download includes an updated demo module with companion and a new item called the \"miniature chest of holding\". It is a workaround for the bag of holding problem I still am working on.\n\nEnjoy!\n\n11-17-07: Added Plugin\n\n11-18-07: Updated to v2.1: Includes a new baseitems.2da for the current NWN2 patch. Also updated system with a configuration to allow builders to set how the pc's get change from merchants. The update allows you to specify whether players must spend their more valuable coins first, meaning they can't walk in with 10000 coppers, then buy a torch and walk out with a bunch of gold and platinum for change (default) or if they will be able to do just that... Essentially turning every merchant into a coin changer as well.\n\nAll updates, the plugin, and documentation are in the PnP_Coins_v2.rar file.\n\nUPDATED 4-22-09: New Features;\n* All New and enhanced toolset plugin that offers features like area wide updates, even the ability to convert an entire module almost at once!\n* Creatures can now be set to carry specific coin amounts and the ability to make those amounts weigh them down like it would a pc!\n* Added conversation scripts to check coin amounts, give coins, and take coins.\n* Fixed bugs where incorrect change could be given.\n\nDownloads for v2.2:\n1. PnP Coins V22 Core.rar = docs, erf, override files.\n2. Plugin.rar = new toolset plugin\n3. PnP V22 Demo Mod.rar = Updated demo mod only.\n4. PnPCoins_Plugin_src = Source Code for the plugin\n\nUPDATED 9-13-09:\nUpdated plugin to work with NWN2 version 1.23.","Rating":9.55,"Votes":23,"Awards":[]},"136":{"Name":"Forgotten Rules 0.9","Author":"kunou126","Submitted":20070729,"Updated":20070730,"Category":"Rulesets","Type":"Type - Spell effects","Format":"Module Only","Patch":"1.06","Description":"This is an attempted implementation of 3 new cleric domains and a few new spells that for whatever reason Obsidian decided not to include. This module contains the following domains and spells:\n==============\nDomain: Law\nSpecial Power: Smite Infidel\n\nDomain Spells: web (2), hold monster (5), mass hold person (7)\n==============\nDomain: Chaos\nSpecial Power: Smite Infidel (same as destruction:close fit to PnP)\n\nDomain Spells: color spray (1), confusion (4), prismatic spray (7)\n==============\nDomain: Luck\nSpecial Power: Extreme Luck - Once per day the cleric may add their charisma bonus to their Attack Bonus, AC, and all saving throws. The effect lasts for 2 rounds + the cleric's charisma modifier.\n\nDomain Spells: true strike (1), mirror image (2), haste (3)\n==============\nSpells:\n==============\nProtection From Law\nProtection From Chaos\nCircle of Protection Against Law\nCircle of Protection Against Chaos","Rating":7.5,"Votes":1,"Awards":[]},"137":{"Name":"Undead Curse","Author":"Simone Biagini","Submitted":20070730,"Updated":20070731,"Category":"Creature Related","Type":"Type - Combat","Format":"Module and Code","Patch":"1.06","Description":"With this script all humanoid (natural) creatures (Creatures, NPCs and PCs !!!) killed by an undead will be raised as an undead.\n\nFight undeads will never be the same. \n\nThese scripts are supposed to use in horror PW and Modules and need a little tweak to adapt to your onDeath scripts (for respawn, treasure and XP rules of your world).\n\nYou'll find in the readme all instructions to customize/adapt it to your module/persistent world.\n\nEnjoy it !!!","Rating":9.5,"Votes":1,"Awards":[]},"138":{"Name":"Searchable Chests","Author":"System_Crush","Submitted":20070805,"Updated":20070825,"Category":"Spawning","Type":"Type - Containers (Subtype - Other)","Format":"Code Only","Patch":"1.00","Description":"Searchable Chests\nBy System_Crush\n\nThis is a set of scripts that generates random loot, like the normal treasure scripts.\nHowever it also hides to loot in the container, players will need to make a search check to find each item, between other clutter and junk in the container.\n\nIt makes the search skill more useful as well as add some realism.\n\nDownload the zip it contains a .erf to import into the toolset and the basic script set to apply to a container.\n\nFurther commentary is in the 1sc_searchable script.","Rating":9,"Votes":3,"Awards":[]},"139":{"Name":"Official Campaign rest script","Author":"dan_upright","Submitted":20070807,"Updated":20070810,"Category":"Resting","Forum Thread":"Link","Type":"Type - Resting","Format":"Code Only","Patch":"1.06","Description":"An attempt to improve resting in the official campaign - when you rest, there is a chance that an encounter will spawn and approach you.\n\nThe chance of an encounter is based on the highest survival skill in your party.\n\nOnce again, consider this a beta version and let me know if you find any problems.","Rating":8.5,"Votes":2,"Awards":[]},"140":{"Name":"Sir Elric's Simple NPC Respawning for NWN2 v1.0","Author":"Sir Elric","Submitted":20070809,"Updated":20071023,"Category":"Spawning","Type":"Type - Spawning","Format":"Module and Code","Patch":"1.10","NWN2Game":"All","Description":"This is a simple method of respawning all or specific npc placed in your module without having to edit core scripts, depending on your needs.\n\nNPC will continually respawn back at their original location, if killed, after a user set delay.\n\nFull details and instructions are in the read me & demo module.\n\nPatched to 1.11 as of 24th Oct","Rating":9.5,"Votes":4,"Awards":[]},"141":{"Name":"Custom EXP/Gold system and various other things for PWs","Author":"Lusitania","Submitted":20070812,"Updated":20070822,"Category":"Entire Module/PW systems","Type":"Type - Leveling","Format":"Module and Code","Patch":"1.07","Description":"This contains several scripts and a couple of items. They're all independent of each other, though obviously the items require their onActivate scripts to work.\n\nAn exp reward script- add it to your ondeath event either on an individual basis (adjusting the ondeath script called for individual spawns) or by modifying the default one, and set the global module exp gain to 0, and it will reward all the players in the party with exp and/or gold, based on the party's average level (As calculated from their exp) and the creature's CR. The big difference is that you can change the penalty for additional party members to something more reasonable, of your choosing. Very customizable just by editing the constants in the separate asgpartyxpsettings script. Various things included like only rewarding EXP if the player is in the area, or within a certain distance of the kill, scaling exp for increased relative difficulty, not giving exp if there's too large a level gap, giving gold along with the exp, etc. All important values are easily customizable, and have fairly detailed descriptions in the script.\n\nA small script for onAcquire, that announces to all the members of the party who and what is picked up, so no one can grab loot without everyone in the party knowing.\n\nAn item that is a basic PC scry. Just gives the names, location, and level of everyone on the server, nothing fancy.\n\nAn item that rolls a d100 for everyone in the group and announces them. Only the party leader can use it, to avoid multiple roll conflicts.\n\nIn total, 5 scripts and 2 items. All scripts have \"asg\" in them, so they're easy to find. Both items can be found under \"items/miscellaneous/other\".\n\nThe .erf is just the scripts and items, the .zip is a zipped .mod. The mod is super basic, just a room with some badgers with various CRs and both the items on the floor, and all the scripts set to work.","Rating":8.08,"Votes":3,"Awards":[]},"142":{"Name":"Helm of alignment change","Author":"DJ1","Submitted":20070808,"Updated":20070810,"Category":"Area","Type":"Type - Combat","Format":"Module Only","Patch":"1.05","Description":"A classic AD&D item I used in one of my old PNP mods. This item converts the alignment values of the character who equips it to their exact opposites on the 0-100 scale i.e. Lawful(85) Evil(1) would become Chaotic(15) Good(99), etc. A script makes it able to affect an individual only once, so there's no going back by re-equipping. \n\nWhile there's minimal effect on neutrals, this obviously has serious game balance effects on extremist-alignment classes. It's best use (for me anyway) has been as a plot item where the Builder/DM can weave the change into the plot. (I used it in a \"brainwashing\" plot Inspired by \"A Clockwork Orange\").\n\nThanks to CID-78 and Sir Elric on the forums. This is my first (successful) game scripting ever and, considering their help, they essentially co-wrote this with me. Thanks.\n\nImport the erf containing the item and the script. Compile the script in your module.","Rating":"N/A","Awards":[]},"143":{"Name":"Subscripting Design Pattern","Author":"Yaballa","Submitted":20070824,"Updated":20070825,"Category":"Scripting routines","Type":"Type - General","Format":"Module and Code","Patch":"1.00","Description":"Subscripting is a NWN1 and NWN2 scripting design pattern that improves performance, streamlines module design and keeps things more organized.\n\nIt works with one main \"Script Base\" file whose \"Nodes\" are referenced by smaller scripts. Try out the demo and see source code for more information. Don't hesitate to contact me for help.","Rating":8,"Votes":1,"Awards":[]},"144":{"Name":"Cutscene Blackjack","Author":"Chimneyfish (original NWN1 scripting by Jim Woodgate)","Submitted":20070824,"Updated":20070825,"Category":"Games","Type":"Type - Other","Format":"Module and Code","Patch":"1.06","Description":"This package allows a single PC to play a game of blackjack against an NPC dealer. The scripting is based on Conversation Blackjack 0.95, created for NWN1 by Jim Woodgate. I adapted the scripting and put it into an NWN2 cutscene style conversation with some eye and ear candy: animations, sounds, and cards and coins that appear and disappear during the game.\n\nCheck out the demo module to see how it works. The package includes: a conversation, scripts, and several waypoint blueprints.\n\nI think the cutscene looks best if you have Rogue Dao�s Lip Flappers package (the dealer�s lips move), but this isn�t required.\n","Rating":9.42,"Votes":3,"Awards":[]},"145":{"Name":"Alleyslink's Doors, Ladders and Levers","Author":"Alleyslink","Submitted":20070825,"Updated":20070825,"Category":"Placeable Item","Type":"Type - Placeables","Format":"Module and Code","Patch":"1.06","Description":"Auto-Close Door, Portal/Ladder, and Door Lever scripts. System works off variables placed on objects in the toolset, 5 scripts is all you need.\n\nVery simple systems. Detailed documentation.","Rating":7,"Votes":1,"Awards":[]},"146":{"Name":"Command a Fighter","Author":"Wiouds","Submitted":20070825,"Updated":20070826,"Category":"Creature Related","Type":"Type - Other","Format":"Module and Code","Patch":"1.00","Description":"Do you want to order a NPC to move to place but don't want to work with scripting for each NPC? This is what you been looking for.\n\nAfter a importing the erf and simple one step setup and you are ready.\n\nThen you place the creature name \"fighter\" and change its tag and it is ready to be commanded.\n\nYou want one more then just another another fighter and change its tag and you have two.\n\nYou want the have one created during game place the have it created with a new tag.\n\nIf two have the same tag then only on will obey.","Rating":5,"Votes":1,"Awards":[]},"147":{"Name":"Talernon3 Scripts - NWN1-style DMFI Encounter Region","Author":"Dragonsbane777","Submitted":20070901,"Updated":20091127,"Category":"Spawning","Forum Thread":" Link","Type":"Type - Spawning","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"Check out Talernon3 Age of Dragons \nLink\n\nRemember the NWN1 DMFI Encounter Region? Those cool circles, you place a critter in them, and a wand could spawn them as you like, in mixed and altered groups?\n\nHere ya go :)\n\nIncluded is the encounter region, wand, conversation, and scripts. Simply import into your module, and your set.\n\nThe area has 3 sections, so you can have 2 different factions to spawn, and a 3rd part for anything else you need.\n\nAlso included is a demo module for you to see the area beforehand, with some critters in one of the cricles, and the wand on the ground, so a single player can try it out locally.\n\nWe run so many events on our PW, we found this a much needed tool - using the circles to create encounters with mixed groups with new names, scaled, different items, different factions, new appearances . . . had to have it.\n\nEnjoy\n\nIf there are bugs, just post um and I will get them fixed, although this is well tested.\n\nWorld of Talernon Age of Dragons\n\nLink","Rating":"N/A","Awards":[]},"148":{"Name":"Brazier of the Nine Flames (Alignment)","Author":"Nemrod - Haven","Submitted":20070902,"Updated":20070909,"Category":"Placeable Item","Type":"Type - Other","Format":"Code Only","Patch":"1.07","Description":"This placeable allows players to switch their alignment.\n\nIt comes in two versions, the first allowing for radical alignment changes (such as lawful good to chaotic evil), the other (_one) only allowing for one switch at a time (Neutral Evil to its three adjacent alignments for example).\n\nEach one comes with its config script (conveniently tagged align_config) where you can set several parameters such as the presence or absence of an experience penalty per switch, the amount of such penalty, and the presence or not of an OOC dialog warning about such penalty (mostly for server using Item Required Level).\n\nBasic config is set to :\n- Penalty : Yes\n- Penalty per switch : 10%\n- OOC dialog : Yes\n\nFull : alignment_brazier.erf\nOne : alignment_brazier_one.erf\n\nDevelopped for the Haven social server.\nLink","Rating":"N/A","Awards":[]},"149":{"Name":"Holy Symbols (Conversion)","Author":"Nemrod - Haven","Submitted":20070902,"Updated":20070905,"Category":"Inventory Item","Type":"Type - Deities","Format":"Code Only","Patch":"1.07","Description":"Included in the erf file are two items allowing clerics and druids to convert willing subjects to the worship of their deity.\n\nBoth items are in a \"symbols\" category, the scripts are tagbased so that you do not have to put any additional script, as long as your module can use tagbased item scripts.\n\nFile comes with a \"_config\" script allowing you to set whether the symbol renames itself to the name of the cleric's / druid's god upon first acquire (originally set to FALSE).\n\nDevelopped for the Haven social server.\nLink","Rating":8.63,"Votes":2,"Awards":[]},"150":{"Name":"Script Execution Library","Author":"jallaix","Submitted":20070907,"Updated":20070907,"Category":"Scripting routines","Type":"Type - General","Format":"Code Only","Patch":"1.06","Description":"This library provides functions to execute scripts in an extended way, as an alternate mean to call functions.\nFirst you can pass parameters to a script that's going to be executed (int, float string, object location, itemproperty).\nThen you can call the script using a fork system (thanks to Yaballa for her subscript pattern).\nFinally get the returned value from the calling script (int, float string, object location, itemproperty).\n\nThis system has many advantages:\n* Makes your code easier to maintain\n* Improves script performance\n* Permits to override functions\n* Increases compatibility between different systems\n* Improves module organization\n\nMaintenability\n--------------\nLet's assume you wrote a function in an include file.\nThis include file is included by many other scripts that use this function.\nIf you modify this function, you have to recompile all the scripts that use it.\nInstead export the code of this function in an external script, and simply call this script from your function.\nThe next time you'll modify this function, in fact you'll just modify the called script and compile it.\n\nPerformance\n-----------\nSo you've exported the function's code to the external script.\nAll scripts that use the include file do not include the function's code when compiling.\nSo it takes less memory when the scripts are loaded.\n\nFunction override\n------------------\nAs the function's code is now in an external script file,\nit's possible for anybody to customize it without recompiling the scripts that use this function.\nYou can compare this functionality with what is provided in object-oriented programming languages like Java.\n\nCompatibility with other systems\n--------------------------------\nWhen distribute your scripts, follow this process :\nDon't include your external script in a hak, instead put it in an erf that will be imported in a module.\nOther systems will be able to rewrite your scripts and make them compatible with yours.\n\nModule organization\n-------------------\nUse the fork script system to group all your external scripts in only one.\nIt's easier to manage one file than many.\n\nLimitation\n----------\nYou can only pass parameters of the following type :\nint\nfloat\nstring\nobject\nlocation\nitemproperty\n\n\n\nExample 1 : \"calling_script.nss\"\n---------\nfloat function CallingFunction(object oObject, int iInteger, itemproperty ipItemProp)\n{\n// Declare the list of parameters\nstruct script_param_list paramList;\n\n// Add parameters to the list\nparamList = JXScriptAddParameterObject(paramList, oObject);\nparamList = JXScriptAddParameterInt(paramList, iInteger);\nparamList = JXScriptAddParameterItemProp(paramList, ipItemProp);\n\n// Call the script with the fork system\nJXScriptCallFork(\"called_script\", 3000, paramList);\n\n// Get the response from the called script\nreturn JXScriptGetResponseFloat();\n}\n\nExample 2 : \"called_script.nss\"\n---------\nvoid main()\n{\nstruct script_param_list paramList = JXScriptGetParameters();\nint iOperation = JXScriptGetForkOperation();\n\nswitch (iOperation)\n{\ncase 3000 :\n// Get the parameters from the list\nobject oObject = JXScriptGetParameterObject(paramList, 1);\nint iInteger = JXScriptGetParameterInt(paramList, 1);\nitemproperty ipItemProp = JXScriptGetParameterItemProp(paramList, 1);\n\n// Do whatever you want here, you can even call JXScriptCallFork() once again !\n\n// Set the response of the script\nJXScriptSetResponseFloat(12.569);\nreturn;\n}\n}","Rating":10,"Votes":1,"Awards":[]},"151":{"Name":"Dusk's PnP Trap Alternative","Author":"duskvermilion","Submitted":20070921,"Updated":20071105,"Category":"Other","Type":"Type - Traps (Subtype - Other)","Format":"Module and Code","Patch":"1.10","NWN2Game":"NWN2:MotB","Description":"New in V9: Doors and Placeables now trappable.\n\nNew in V8: disabled rogue only function but made disable device skill a requirement. Delayed Xp reward.\n\nNew in V7: traps can be disarmed while stealthed, traps reset when they go off.\n\nNew in V6: spell effects as well as direct damage to which evasion and improved evasion apply.\n\nFirst off, Im not a programmer, so thanks to Lilac Soul and Phaylos from the bioware forums for their scripts which helped greatly in the making of these. Also, a big thank you to ddaedalus in the bioware forums who totally rewrote the v3 script I was stuck on. I'd like to thank Gulfwulf from nwc who helped me learn a thing or two about what I was doing. And of course, many thanks to Silicon Scout, I got the idea for the v3 script from his NWN1 treasure system, which used a string variable system similar to this one.\n\nThese traps are intended as an alternative to standard bioware traps. They are not recoverable by rogues unfortunately because they do not use the bioware trap triggers. They use one or more trapboxes (which in this example are bears heads on the walls) which are seperate from the trigger, so you can put them anywhere. The trapboxes are not flagged as usable until the PC detects the trap by stepping on one of the detect triggers placed around the trap. Once the PC detects the trap, the nearest trapbox will glow for a short time with the z key, and (s)he will get a chatbox message! During that time, anyone can click on the revealed placeable. However, only a person with ranks in disable device will be able to disarm it or figure out what it is.\n\nThe trap effects are totally customizable, you can have the trap boxes cast spells when the trap is stepped on or opened, or you can customize the damage and what type of damage (fire, piercing, cold, etc.).\n\nThe trap is only safe once disarmed for the disarmer and her/his party. This is due to local variables though. So, when a player logs out and steps on (or opens) the trap again, it will go off. As I said, I'm not a programmer, so I'm not sure how to fix this right now.\n\nTo see how the traps work, open up the mod in the toolset and look things over while reading the readme! You can even run a rogue PC in there and fool around with it.\n\nNote that with the change in V10, you can put loot in chests, but because the script is in OnUsed, it will fire every time the chest is used! Thus, PC's who think they have escaped harm by surviving opening the chest, may not be so lucky when they grab whats inside, as that counts as using the chest, as does closing it. I was going to work around this, but then I realized it made sense for a trap to go off every time you touch it, so...\n\n**UPDATED 9/22** Fixed an exploit, and put in a reset delay, the traps now reset completely after 450 seconds and players have 90 seconds to notice the trapbox once a rogue finds the trap.\n\n**UPDATED 9/28** Many variations of damaging traps possible now.\n\n***UPDATED 10/1** fixed a typo, made it so more than one trapbox can be used to disarm the trap, so now you can have a hallway trap disarmable from both ends.\n\n***UPDATED 10/2** thanks to sunjammer on the bioware boards, there is now a negative visual effect. I also corrected some confusing instructions in the readme regarding multiple traps.\n\n**UPDATED 10/15** Now spells are an option, and evasion works on direct damage traps.\n\n**UPDATED 10/18** Added in a verbal warning per suggestion below, trap states now reset when the trap affects someone, and traps no longer use conversations, so disarming while stealthed is possible!\n\n**UPDATED 10/22** disabled the rogue only requirement, but it can still be uncommented back in easily. I also added in a delayed xp reward.\n\n**UPDATED 11/1** Added in the ability to trap doors and openable placeables.\n\n**UPDATED 11/5** Changed slot for traps on chests and doors to On Used.","Rating":8.5,"Votes":1,"Awards":[]},"154":{"Name":"Gizmos Spawner 1.7.1","Author":"GM Gizmo","Submitted":20070926,"Updated":20100512,"Category":"Spawning","Type":"Type - Spawning","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Below is a list of features. Though it may seem complex. This system has been out for a while. There are some copies of my system running about. So I thought I would upgrade mine to do more and better things.\n\n*Cleaned up the code for the spawner to make it more functional and easy to\nread.\n*Removed the chest loot system, and made the spawner a loot box in itself.\n*Added a group spawning feature to the spawning system.\n*Added a currency resref so you can customize your money drop, gold is\ndefault.\n*Added a auto new tag system, so you do not have to make a unique tag per\nspawner.\n*Alphabetized the variable list in the properties of the spawner.\n*Added a spawning sequencer to the spawners functionality.\n*Added the ability to turn other spawners on with sequencers.\n*Ability to spawn single, multiple creatures, placeables around the spawner.\n*Ability to add a minimum and maximum gold to a object when spawned.\n*Ability to adjust the range in which to spawn an object around the spawner.\n*Ability to spawn up to ten different objects from the spawner.\n*Ability to add special loot to a object at a frequency you desire.\n*Ability to add items to the spawners inventory, then make it loot on the\nspawned object at a given frequency you desire.\n*Ability to choose the minimum and maximum frequency in 6 second intervals\n(heartbeat) on which the objects will respawn.\n*Ability to decide which direction the objects face when they spawn.\n*Ability to activate/deactivate the spawner through scripting.\n*Ability to choose the amount of spawned objects that can be in the world at any given time.\n\nI have also added a PDF Guide to my spawning system. To help guide you through the basics and the not so basics of the spawning system.\n\n============================\n UPDATES\n============================\n*1.6.1\n--fixed bug with LootChance variable.\n*1.7.1\n--fixed gold not appearing in the pack\n--added a option for your currency\n--cleaned up some of the code","Rating":8.32,"Votes":9,"Awards":[]},"155":{"Name":"Parameterized NPC Conversation Start","Author":"Nemrod - Haven","Submitted":20070926,"Updated":20070926,"Category":"Scripting routines","Type":"Type - Conversations","Format":"Code Only","Patch":"1.07","Description":"This little script replaces the default \"nw_c2_default4.nss\" script wich manages NPC conversation starts.\n\nIt is built upon it to offer a wider set of parameters, all of which are set as local int values on the NPCs.\n\nIf no values are set on the NPC, or a value is left unset, the code will act according to Obsidian's defaults (ie. you wont see a difference).\n\nValues are :\n- npc_whisper : if set to 1 (TRUE) no one else will see the NPC text.\n- npc_distance_ignore : set to 1 so NPC will talk to PC no matter the distance.\n- npc_cutscene_disable : set to 1 to remove cutscene bars.\n- npc_no_greeting : set to 1 so the NPC will not play its greeting sound.\n\nThanks to Barfubaz - Haven for the concept ;-)\n\nDevelopped for the Haven social server\nLink","Rating":"N/A","Awards":[]},"156":{"Name":"Injured NPCs in the OC fix","Author":"weby","Submitted":20070929,"Updated":20070929,"Category":"NPCs","Type":"Type - Other","Format":"Code Only","ShowCode":"// NW_C2_DEFAULT9\n/*\n    Default OnSpawn handler\n \n    To create customized spawn scripts, use the \"Custom OnSpawn\" script template. \n*/\n//:://////////////////////////////////////////////////\n//:: Copyright (c) 2002 Floodgate Entertainment\n//:: Created By: Naomi Novik\n//:: Created On: 12/11/2002\n//:://////////////////////////////////////////////////\n//:: Updated 2003-08-20 Georg Zoeller: Added check for variables to active spawn in conditions without changing the spawnscript\n// ChazM 6/20/05 ambient anims flag set on spawn for encounter cratures.\n// ChazM 1/6/06 modified call to WalkWayPoints()\n// DBR 2/03/06  Added option for a spawn script (AI stuff, but also handy in general)\n// ChazM 8/22/06 Removed reference to \"kinc_globals\".\n// ChazM 3/8/07 Added campaign level creature spawn modifications script.  Moved excess commented code out to template.\n// ChazM 4/5/07 Incorporeal creatures immune to non magic weapons\n\n#include \"x0_i0_anims\"\n#include \"x0_i0_treasure\"\n#include \"x2_inc_switches\"\n\nvoid main()\n{\n    // Run this campaign's standard creature spawn modifications script (set in module load)\n    string sScriptSpawnCreature = GetGlobalString(\"N2_SCRIPT_SPAWN_CREATURE\");\n    if (sScriptSpawnCreature != \"\")\n    {\n\t\tExecuteScript(sScriptSpawnCreature, OBJECT_SELF);\n    }\n\n    // ***** Spawn-In Conditions ***** //\n    // See x2_inc_switches for more information about these\n    \n    // Enable stealth mode by setting a variable on the creature\n    // Great for ambushes\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_STEALTH) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_STEALTH);\n    }\n    \n    // Make creature enter search mode after spawning by setting a variable\n    // Great for guards, etc\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_SEARCH) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_SEARCH);\n    }\n\n    // Enable immobile ambient animations by setting a variable\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_AMBIENT_IMMOBILE) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_IMMOBILE_AMBIENT_ANIMATIONS);\n    }\n\n    // Enable mobile ambient animations by setting a variable\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_AMBIENT) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_AMBIENT_ANIMATIONS);\n    }\n\n    // ***** DEFAULT GENERIC BEHAVIOR ***** //\n    // * Goes through and sets up which shouts the NPC will listen to.\n    SetListeningPatterns();\n\n    // * Walk among a set of waypoints if they exist.\n    // * 1. Find waypoints with the tag \"WP_\" + NPC TAG + \"_##\" and walk\n    // *    among them in order.\n    // * 2. If the tag of the Way Point is \"POST_\" + NPC TAG, stay there\n    // *    and return to it after combat.\n    //\n    // * If \"NW_FLAG_DAY_NIGHT_POSTING\" is set, you can also\n    // * create waypoints with the tags \"WN_\" + NPC Tag + \"_##\"\n    // * and those will be walked at night. (The standard waypoints\n    // * will be walked during the day.)\n    // * The night \"posting\" waypoint tag is simply \"NIGHT_\" + NPC tag.\n    WalkWayPoints(FALSE, \"spawn\");\n    \n    //* Create a small amount of treasure on the creature\n    if ((GetLocalInt(GetModule(), \"X2_L_NOTREASURE\") == FALSE)  &&\n        (GetLocalInt(OBJECT_SELF, \"X2_L_NOTREASURE\") == FALSE)   )\n    {\n        CTG_GenerateNPCTreasure(TREASURE_TYPE_MONSTER, OBJECT_SELF);\n    }\n    \n    // encounter creatures use ambient animations\n    if (GetIsEncounterCreature())\n\t\tSetSpawnInCondition(NW_FLAG_AMBIENT_ANIMATIONS, TRUE);\n\n    // * If Incorporeal, apply changes\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_IS_INCORPOREAL) == TRUE)\n    {\n        effect eConceal = EffectConcealment(50, MISS_CHANCE_TYPE_NORMAL);\n        eConceal = ExtraordinaryEffect(eConceal);\n        effect eGhost = EffectCutsceneGhost();\n        eGhost = ExtraordinaryEffect(eGhost);\n        effect eImmuneToNonMagicWeapons = EffectDamageReduction(1000, DAMAGE_POWER_PLUS_ONE, 0, DR_TYPE_MAGICBONUS);\n        eImmuneToNonMagicWeapons = ExtraordinaryEffect(eImmuneToNonMagicWeapons);\n\t\t\n        ApplyEffectToObject(DURATION_TYPE_PERMANENT, eConceal, OBJECT_SELF);\n        ApplyEffectToObject(DURATION_TYPE_PERMANENT, eGhost, OBJECT_SELF);\n        ApplyEffectToObject(DURATION_TYPE_PERMANENT, eImmuneToNonMagicWeapons, OBJECT_SELF);\n    }\n    \t\n\t//DBR 2/03/06 - added option for a spawn script (ease of AI hookup)\n\tstring sSpawnScript=GetLocalString(OBJECT_SELF,\"SpawnScript\");\n\tif (sSpawnScript!=\"\")\n\t\tExecuteScript(sSpawnScript,OBJECT_SELF);\n\t\t\n\tif(GetCurrentHitPoints(OBJECT_SELF)<GetMaxHitPoints(OBJECT_SELF)){\n\t ApplyEffectToObject(DURATION_TYPE_INSTANT,EffectHeal(10000),OBJECT_SELF);\n\t}\n}Select All Text | View Code in separate window","Patch":"1.00","Description":"Annoyed by the large number of NPCs in the OC that show up as injured?\n\nThis is a very simple \"95%\" fix for it.\n\nIt replaces the standard spawn script with one that heals them to full hitpoints.\n\nJust unzip the provided zip file into your override directory.\n\nThe complied version is done with 1.06 but 1.10/motb do not appear to change things.\n\nknown limitations:\n-Also heals the few NPCs that are supposed to be damaged like the Mossfields in chapter 1.\n-Does not heal few creatures with nonstandard spawn scripts.\n\nNOTE: remove it before playing any custom modules as they may have customised versions of the file that conflict!\n","Rating":"N/A","Awards":[]},"157":{"Name":"Moongate Example","Author":"driller","Submitted":20070929,"Updated":20070929,"Category":"Scripting routines","Type":"Type - Portals","Format":"Module and Code","Patch":"1.10","Description":"This is an example moongate system.\nJust attach your jump script or conversation to the portals.\n\nThis was made to work with JasonNH's moongate models, but it is not required.\n\nLink to models ->\nLink","Rating":9.75,"Votes":1,"Awards":[]},"158":{"Name":"NWN2 Scoreboard","Author":"DemonLord","Submitted":20070929,"Updated":20080420,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Other","Format":"Code Only","Patch":"1.12","NWN2Game":"All","Description":"This is knowj's nwndb scoreboard origional by bushido edited for use with NWN2.\n\n***Readme File included***\n\nThis is a simple scoreboard system which doesnt require the person using it to have any scripting knowledge (basically install and go) it uses the nwn campaigne database so nwn does all the work you just need to install the script. the scoreboard produces your score based on kill to death ratio and produces a list of the top 10 players online at the time. players can log off and on/server can reboot and the scores will still be there.","Rating":9.5,"Votes":1,"Awards":[]},"160":{"Name":"Druid`s fix","Author":"Nard","Submitted":20070930,"Updated":20070930,"Category":"Spells","Forum Thread":"Link","Type":"Type - Spell effects","Format":"Module Only","Patch":"1.10","Description":"This fix lets Nature`s Avater, Greater Magic Fang and Magic Fang to work on dragon shapes, magical beast shapes and dragon companion.\nWhy I think it is a bug and it needs to be fixed ? I have some reasons for it.\n\n1.Dragon copmanion is weaker tnen animal companion with Nature`s Avater, Greater Magic Fang buffs.\n\n2.Dragon shapes isn`t better then elemental shapes. It`s even worse for magical beast shapes.\n\n3.Nature`s Avater, Greater Magic Fang and Magic Fang works on plant shapes. Plantshapes. I dont see any reasons why the spells should works on a plant and shouldn`t works on a dragon or a magical beast.\n\nTo use this fix you need to extract the files into My Documents\\Neverwinter Nights 2\\override directory.","Rating":10,"Votes":1,"Awards":[]},"161":{"Name":"Secret Doors/Trap Doors","Author":"Tzell Winterhaven","Submitted":20071001,"Updated":20071001,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.10","Description":"I'm no scripter. I was disappointed that NWN2 did not included/finish the secret door scripts used in NWN1 and/or did not include \"placealbe\" doors to be used with these scripts.\n\nRewriting the scripts was no problem. It is the door placeables that was the issue.\n\nI created two \"wooden\" door placeables (made from a crate) for both the wall and floor trap doors and two stone secret doors. Again a wall and floor trap door.\n\nThe scripts work exactly as they did in NWN1.\n\nPlace the detect tirgger.\nGive it a unique tag... trig_secdoor1\nSet the DIFF variable to the detect DC you want.\nSet the \"on enter\" to the script you want to use....\n\ntw_sec_tdoorwooden trap door\ntw_sec_wdoorwooden wall door\ntw_sec_stdoorstone trap door\ntw_sec_swdoorstone wall door\n\nCreate two waypoints using loc and dst + the unique tag of your trigger to create the location of your secret door and it's destination\n\n(waypoints using example above)\n\nloc_trig_secdoor1\ndst_trig_secdoor1\n\nAnd you're done! \n\nEverything else works just as it did in NWN1!\n\nA tip for placing the wall door waypoint. Point the arrow towards the wall and move it into the wall until the flag is just showing.\n\nTzell\nLink\ntzell@nwncoa.com","Rating":9.94,"Votes":6,"Awards":[]},"162":{"Name":"Suppress ability without Aligment points","Author":"nepparica","Submitted":20071002,"Updated":20071002,"Category":"Scripting routines","Type":"Type - Magic","Format":"Code Only","Patch":"1.00","Description":"Done quick editing on Mask of the betrayer expansions Suppress ability.\n\nI removed the part of the code, which would normally give you some aligment points ( lawfull, good) when using the Suppress ability and messing up some classes which require pure certain aligment for skills and abilities.\n\nnothing else touched in the script code\n\n- Just download, unpack and put the 2 files in your overrite folder at\nMy documents\\Neverwinter nights 2\\Overrite\n\nand enjoy","Rating":7.25,"Votes":1,"Awards":[]},"163":{"Name":"Spirit Eater cheat","Author":"CBMech","Submitted":20071007,"Updated":20071008,"Category":"Scripting routines","Type":"Type - Manipulation","Format":"Module Only","Patch":"1.10","NWN2Game":"NWN2:MotB","Description":"For those people that absolutely hate the new spirit eater feature, this script is for you.\n\nChanges the Satiate feat to refill your spirit meter without any penalty. Use once a day, at stage 3 hunger.\n\nCopy files in your override folder i.e. Documents\\Neverwinter Nights 2\\override","Rating":9.6,"Votes":7,"Awards":[]},"164":{"Name":"GNIZ - Close doors","Author":"GNIZ-b1o","Submitted":20071012,"Updated":20071013,"Category":"Scripting routines","Type":"Type - Menu","Format":"Code Only","Patch":"1.10","NWN2Game":"NWN2","Description":"<****GNIZ CLOSE DOORS****>\n||||||||||||||||||||||||||\nThis system changes the original ingame ui right click menu to have the option to close doors. Made by GNIZ-b1o\n\nBuidlers backup the file called contextmenu.xml if you want to play singleplayer again.\n\nInstallation:\nImport the erf to your module an put the file called contextmenu.xml in your UI/default folder, and whoops you have the option to close doors wich obsidian forgott to include.","Rating":3,"Votes":1,"Awards":[]},"165":{"Name":"Alignment-Free Spirit Eater Abilities (Obsolete)","Author":"Rolenka","Submitted":20071014,"Updated":20090506,"Category":"Skill/Feats","Type":"Type - Other","Format":"Code Only","Patch":"1.10","NWN2Game":"NWN2:MotB","Description":"This mod is largely obsolete.\n\nOfficial Game Patch 1.11 notes:\n\nThe Spirit Eater abilities Suppress, Gorge and Ravenous Incarnation will no longer alter the PC's alignment.","Rating":8.67,"Votes":3,"Awards":[]},"166":{"Name":"Super-Easy-Mode Spirit Eater Curse","Author":"Rolenka","Submitted":20071014,"Updated":20090524,"Category":"Skill/Feats","Type":"Type - Other","Format":"Code Only","Patch":"1.22","NWN2Game":"NWN2:MotB","Description":"With This Mod:\n\n-Suppress can be used an unlimited number of times per day\n-Suppress will not prevent the use of Devour abilities in the same day\n-Devour abilities will not prevent the use of Suppress in the same day\n-Spirit Eater abilities will not affect your alignment","Rating":9.75,"Votes":7,"Awards":[]},"167":{"Name":"Shapechange Fix","Author":"Forbidden","Submitted":20071021,"Updated":20071023,"Category":"Area","Forum Thread":"Link","Type":"Type - Combat","Format":"Module Only","Patch":"1.10","NWN2Game":"NWN2:MotB","Description":"When shapechanged, you will now retain bonuses from all your items (though AC is still converted to deflection, so it won't all stack), but items like belts that increase strength and everything will still work.\n\nIf you are shapechanging into a form that has a weapon (and I added some weapons to some of them), the weapon they hold will inherit the magic properties of the weapon. So if you have a sword that does +1d6 fire damage, when you polymorph into a troll, you'll be wielding a club that does +1d6 fire damage.\n\nReeron's Polymorph fix ensures that you'll keep your mental stats high while shifting, so no more losing spells.","Rating":8.25,"Votes":2,"Awards":[]},"168":{"Name":"PRR 3 for NWN2","Author":"-vendalus-","Submitted":20071028,"Updated":20090117,"Category":"NPCs","Forum Thread":"Link","Type":"Type - Reputations","Format":"Module and Code","Patch":"1.07","NWN2Game":"NWN2","Description":"The Personal Reputation and Reaction System 3 for NWN2 is a complete set of scripts that offer the following functionality:\n\nNPC Reactions\nAllows NPCs to react dynamically to players actions, factoring in one-on-one interactions, faction standing, differences in alignment, and charisma modifiers.\n\nOwnership and Theft\nAllows NPCs to own doors, chests and other containers, confronting players when they unlock, disarm, open or disturb these doors and placeables. \n\nSecurity and Crime\nAllows for security creatures to be assigned to come and watch over a door or container if an owner calls for help.\n\nPicking Pockets\nAllows similar theft functionality for picking pockets.\n\nSkill Checks\nAllows personal reactions to affect skill checks on a creature, providing a situational penalty or bonus.\n\nDynamic Rumors\nAllows NPCs to provide the players with rumors, where better reactions mean better rumors.\n\nPersistence\nAllows module builders to flush all PRR variables to a standard Campaign Database for use in sequels, campaigns, or a persistent world.\n\nFactions\nA set of simple scripts makes dealing with factions much more pleasant.\n\nPersistent Compansions\nUses the same database methods as the Persistent Companion scripts.\n\nThese scripts require only one overwrite of the standard OE NWN2 scripts, and all components are modular and easy to configure. Import the erf file and set up a few variables and you�ll be in business.\n\nThis is currently a beta release. Feedback is welcome.\n\nBe sure to download the example module, as this provides a quick (and hopefully entertaining) look at how these scripts can be used.\n\nUPDATES: \n\nPRR beta_002\n- Changed the rumors to use a new quality element and use the categories element for the original intent.\n- Added dynamic delays to rumors.\n\nprr_example_v0_2\nAdded the lizard camp and quests to go along with it.\nAdded persistent companions.\n\nNOTE: As of prr_example_v0_2, you will need MotB to play the example module, but you can still use the scripts if you don't have the expansion yet.","Rating":9.93,"Votes":9,"Awards":[]},"169":{"Name":"Word of Changing PnP","Author":"Riden","Submitted":20071101,"Updated":20071102,"Category":"Spells","Type":"Type - Classic PnP","Format":"Code Only","Patch":"1.10","NWN2Game":"All","Description":"This changes the Warlock invocation Word of Changing so that it works like it does in PnP (works as Baleful Polymorph).\nThis invocation now polymorphs your target into a chicken for 24 hours on a failed fort save.\nDuration should technically be permenant but this way allows it to be dispellable, and in the PnP rules the target gets a 2nd save 24 hours later to revert back or become permenant... so a nice compromise.\n\nThis spell is without a doubt the one that has irritated me so much for its poor implimentation, that I had to do something about it. I feel my results have been promising so I've uploaded to share with the rest of the community.\nHope you enjoy.\n\nUPDATE: Just added some new code to the script so that it now also delevels the target to 1.","Rating":"N/A","Awards":[]},"170":{"Name":"No Dangerous Resting","Author":"tesseractx","Submitted":20071103,"Updated":20071104,"Category":"HCR (Hardcore Rules)","Type":"Type - Rest Tracking","Format":"Code Only","Patch":"1.10","NWN2Game":"All","Description":"Function: This script disallows resting while any enemies are on the map. This script was originally created by Even for use with his now long-outdated AI mod, but as he is no longer active here I have usurped it and improved it (my version will not prevent you from resting if enemy corpses are present, and has been tested on the OC and MoTB).\n\nPurpose: Use of this mod will increase the difficulty of the game. Fighting hordes of monsters without being able to rest willy-nilly requires the player to use more careful, tactical gameplay and more conservative spellcasting. It also places a much higher value on consumables like potions, wands, and traps.\n\nFor extra challenge, turn on hardcore mode and use alongside Tony_K's excellent AI mod.\n\nUsage: Place the contents of the zip file inside your Override directory. Subfolders are allowed in the Override directories (and are recommended if you use more than a couple mods).\n\nIf you have any questions or run into any problems, please let me know. Enjoy!","Rating":10,"Votes":2,"Awards":[]},"171":{"Name":"Wolf Out When Wounded","Author":"duskvermilion","Submitted":20071105,"Updated":20071106,"Category":"Creature Related","Type":"Type - Combat","Format":"Code Only","Patch":"1.10","NWN2Game":"NWN2:MotB","Description":"This is a universal script that has the effect of making it seem like a creature which is badly wounded transforms into another creature. I call it wolfing out, because I use it for my werewolves, but it can be done for any kind of creature that you think would fit the situation.\n\nHere's what you do:\n\n1) Make two creatures with the same Localized Name. One will be the creature in its normal form. The other will be the creature which it transforms into when it is is wounded after reaching less than 1/3 hps.\n\n2) Go into the properties of the first form. Insert script kow_djs_scri0035 into On Damaged. Then make a variable on the same creature named WolfOut with the string value of the tag of the critter to transform into.\n\n3) Place the creature into your module in whatever way you like and Voila!\n\nI know its been done before in NWN1 but I didnt see it up here in NWN2 Vault, and I had made it for my own purposes, so I thought I would share.","Rating":8.75,"Votes":1,"Awards":[]},"172":{"Name":"Spirit Energy Tweak","Author":"JOG","Submitted":20071110,"Updated":20071110,"Category":"Skill/Feats","Type":"Type - Other","Format":"Code Only","Patch":"1.00","NWN2Game":"NWN2:MotB","Description":"As an alternative to completely disabling the spirit eater curse, this little tweak slows down the\nhourly loss of spirit energy to a quarter of the original amount.\n\n(Alternatives for 1/2 and 1/3 as well as source and instructions for customizing are included)","Rating":10,"Votes":5,"Awards":[]},"173":{"Name":"motb update fix for ndsmans pnp eldritch doom","Author":"Lorrn","Submitted":20071115,"Updated":20071116,"Category":"Spells","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.10","NWN2Game":"NWN2:MotB","Description":"the spells.2da is to update ndsman's pnp doom fix for warlocks. pretty quick change actually modified the target type field to include everything but trap triggers and that fixed the problem that was occuring in no pvp areas. this also updates the spells.2da for motb compatibility\n\nWhat that means for eldritch doom: \nIn a full pvp area the spell will function like the following.\nIf you target yourself and cast it casts\nIf you target an enemy and cast you will move to that enemy and then cast\nIf you have no target and cast it will bring up the location targeting marker and when you click somewhere it will move you there then cast\n(unfixed so far if you target a placeable and cast it wont move you to the placeable not sure why so when destroying doors and items you have to manually move there first)\n\nIn a No pvp area. \nNormally personal range hostile spells wont cast in no pvp areas the only \"legal\" workaround I found was to change the valid targets to everything except trap triggers.\nBut you still cant target yourself and cast in a no pvp area you have to clear your target then cast it to get the location reticle then click the ground where you want to cast it and it casts. \n\nDownside sometimes it takes a second to pick a target or to clear your target.\n\nUpside now it works everywhere. \n\nIt can take some playing to get used to the way you have to target now but its worth it to have this spell function the way its supposed to :)\n\n\nThis spells.2da will only work if you are using ndsman's pnp eldritch doom fix which can be found here on the vault. \n\nto install just unzip it to you override directory and have fun.\n\n\nafter looking over the code again I found that hindering blast and binding blast weren't useable with ndsman's original work so i modified it for full motb compatibility and now it works for those 2 newer blasts. I'm including 2 rar files 1 is an motb update only which requires you to already have ndsman's fixes in your override and the second is a full repackage of his original work with the modifications to make it motb compatible. let me knwo if anyone finds a problem i'll try and fix it.","Rating":"N/A","Awards":[]},"174":{"Name":"Angry monsters always cross Areas","Author":"ArPharazon","Submitted":20071120,"Updated":20071123,"Category":"Creature AI","Type":"Type - Transitions","Format":"Code Only","ShowCode":"\n\nvoid in_combat( object oPC,object destination)\n{\n object target=GetAttemptedAttackTarget();\n object target_spell=GetAttemptedSpellTarget();\n if (oPC==target || oPC==target_spell)\n {\n  ClearAllActions();\n// five second delay before crossing the area\n  DelayCommand(5.0,ActionJumpToObject(destination));\n }\n}\nvoid main()\n{\n  object oPC = GetEnteringObject();\n  object Monster = GetFirstObjectInShape(SHAPE_SPHERE,10.0,GetLocation(oPC)\n,FALSE,OBJECT_TYPE_CREATURE);\n  object destination=GetTransitionTarget(OBJECT_SELF);\n  if (GetObjectType(OBJECT_SELF)==OBJECT_TYPE_DOOR)\n  {\n  \tAssignCommand(oPC,ActionJumpToObject(destination));\n\t}\n  while (GetIsObjectValid(Monster))\n  {\n   AssignCommand(Monster,in_combat(oPC,destination));\n   Monster=GetNextObjectInShape(SHAPE_SPHERE,10.0,GetLocation(oPC)\n,FALSE,OBJECT_TYPE_CREATURE);\n  }\n\n  \n}Select All Text | View Code in separate window","Patch":"1.10","NWN2Game":"All","Description":"In NWN2, when a PC is in combat the opponent don't chase him between zones.\n\nWith this script, creatures can chase PC across zones.\n\nPlace it in the \"On enter\" of your transition trigger.\n\nI update my script for transition door too.\n\nFor transition door, place the script on the \"onclick\" event.","Rating":8.75,"Votes":6,"Awards":[]},"175":{"Name":"Night and Days areas","Author":"Kaylor, KaG, Deyonara and Ariok","Submitted":20071120,"Updated":20071121,"Category":"NPCs","Forum Thread":"Link","Type":"Type - Transitions","Format":"Module Only","Patch":"1.10","NWN2Game":"All","Description":"It makes a NPC move around in an area during the day, and when night comes, he moves to the other area and wander around until next day\nFirst, you must activate this line in he \"on load\" module properties :\nSetModuleSwitch(MODULE_SWITCH_ENABLE_CROSSAREA_WALKWAYPOINTS, TRUE);\nYou must create 6 waypoints with the following tags (of course, change \"tagofyournpc\" by the real tag of your NPC...)\n-\"Tagofyournpc_DayArea\" is where the NPC is during the day, wandering around\n-\"Tagofyournpc_NightArea1\" is in front of the door, or transition to the night area\n-\"Tagofyournpc_NightArea2\" is where the NPC is supposed to arrived in the night area\n-\"Tagofyournpc_NightArea\" is where the NPC is during the night, wandering around\n-\"Tagofyournpc_DayArea1\" is in front of the door, or transition to the day area\n-\"Tagofyournpc_DayArea2\" is where the NPC is supposed to arrived in the day area\nYou can use it with areas where your PC can't go : for example an area where all NPC go during the night but from different doors, as if they were going home.\nIt is used in the \"On Heartbeat\" slot and hasn't been tested for multiplayer module.\nplease report any bug to me through Link (contact)","Rating":8.75,"Votes":2,"Awards":[]},"176":{"Name":"Random Spawn Locations","Author":"duskvermilion","Submitted":20071121,"Updated":20071216,"Category":"Spawning","Type":"Type - Spawning","Format":"Module and Code","Patch":"1.11","NWN2Game":"NWN2:MotB","Description":"Need a little spice for that spawn system? Here's one I'm using to simulate wandering monsters! With this system, you can determine how many different locations your encounter may possibly end up at, and they are set to respawn as well. I didn't mention this before, but the system will work over multiple areas!\n\nIn a nutshell, you paint a trigger in the right spot or put a script on enter, then paint triggers over each encounter, change the encounter tags slightly, add some variables and presto! Your players will never be more nervous...","Rating":9.38,"Votes":2,"Awards":[]},"177":{"Name":"How to create a summon (creature) spell.. Please help","Author":"peektime","Submitted":20071124,"Updated":20071128,"Category":"Scripting Help","Type":"Type - New Spells","Format":"Module Only","Patch":"1.10","NWN2Game":"All","Description":"If anyone can help me out to resolve the scripting problem on how to insert custom creatures in summoning spells. I'm not know no C++ language, but the NWN2Script appear almost simplified, even for me.\n\nI've to know what files are to be changed and one generic script for example.\n\nP.S.: I'm italian and sorry for my english. Thanks so.","Rating":"N/A","Awards":[]},"178":{"Name":"Battle System","Author":"Nytir","Submitted":20071127,"Updated":20090801,"Category":"Other","Type":"Type - Combat","Format":"Module and Code","Patch":"1.00","NWN2Game":"All","Description":"An package containing ready to use battle related scripts. Features include setting up and organizing armies, spawning soldiers, reinforcement, barrages and catapults, collecting statistics such as Kill count and other special effects. Play the demo to see all the features.\n\nThe package aslo have a lot of multi-purpose and reusable methods that maybe useful for other things. The scripts were originally written for one of my campaigns. I Recently salvaged it and improved it.\n\nSee Also Battle Standard\n\nNytir 2007","Rating":9.88,"Votes":25,"Awards":["Hall of Fame"]},"179":{"Name":"POVES","Author":"Product of void","Submitted":20071205,"Updated":20071207,"Category":"Scripting routines","Type":"Type - Rewards","Format":"Module Only","ShowCode":"// POV crafting for enchanting items... more of Enchanting then crafting..huh. \n\n#include \"x2_inc_itemprop\" //for adding properties \n\n#include \"nw_i0_plot\" //for has item \n\n\n\nvoid Enchantitnow(object oEnchantthis, int iThisway, int iThisstong); \n\n\n\n\n\nvoid main() \n\n{ \n\nobject oEnchantit =GetItemActivatedTarget(); \n\nobject oRecipe = GetItemActivated(); \n\nobject oCrafter =GetItemActivator(); \n\n\n//requires scrolls to have tag of \"pov_enchanting\" or it quits.\nif(GetTag(oRecipe) !=\"pov_enchanting\") return; \n\n\n\n//requires being in an area with the tag of \"pov_gEnchant\" or it does not work.\nif (GetTag(GetArea(oCrafter)) != \"pov_gEnchant\") \n\n{ \n\nSendMessageToPC(oCrafter, \"This area does not have enough magical energy to surport such a thing\"); \nReturn; \n\n} \n\nobject oCraftbench=GetNearestObjectByTag(\"pov_gnCbench\"); \n\n\n//the Reserf of the item is what sets what enchantment is done and what items are required.\n\n//example would be 100gncr\n//which would end up like sFirstitem =cr, sSeconditem = gn and sEnchantmen =100  \nstring sEnchantmen=GetStringLeft(GetResRef(oRecipe), 5); \n\nstring sFirstitem =GetStringRight(GetResRef(oRecipe), 2); \n\nstring sSeconditem= GetStringRight(sEnchantmen, 2); \n\nsEnchantmen=GetStringLeft(sEnchantmen, 3); \n\n//here I would put a second function that would re-assign the strings to actual tags of items IG like gold necklaces.\n//make it run twice to assign both items.\n\n\nint iCaster =GetSkillRank(SKILL_SPELLCRAFT,oCrafter); \n\n\n//requires atleast 10 skill points in spell craft to work.  \nif(iCaster <10) { \n\nSendMessageToPC(oCrafter, \"you are not skilled enough to work this craft.\"); \n\nreturn; \n\n} \n\n\n//checks bench for items and quits if not there.\nif (!HasItem(oCraftbench, sFirstitem) &&!HasItem(oCraftbench, sSeconditem)) \n\n{ \n\nSendMessageToPC(oCrafter, \"you are missing some ingredants\"); \n\nreturn; \n\n} \n\n\n//locks bench so no cheating\nSetLocked(oCraftbench, TRUE); \n\n\n\n\n//run the part that enchants it all. \nEnchantitnow(oEnchantit,StringToInt(sEnchantmen) ,iCaster); \n\n\n//destroys all items in bench\nobject oEmpty =GetFirstItemInInventory(oCraftbench); \n\n\nwhile(GetIsObjectValid(oEmpty)) \n\n{ \n\nDestroyObject(oEmpty); \n\noEmpty=GetNextItemInInventory(oCraftbench); \n\n} \n\n\n\n\n\nDestroyObject(oRecipe); \n\nSetLocked(oCraftbench, FALSE); \n\n}//end of function. \n\n\n//******************************end of main start of enchantment function.\n\n\n//actual enchanting thingie \n\n\nvoid Enchantitnow(object oEnchantthis, int iThisway, int iThisstong) \n\n{ \n\nitemproperty nProp; \n\n//called from skills.2da \n\n\n\n\n\nif (iThisway >100 && iThisway <200) \n\n{ \n\niThisway = iThisway -100; \n\niThisstong = (iThisstong/5)*3; \n\nif (iThisstong >18) iThisstong -18; \n\nnProp =ItemPropertySkillBonus(iThisway, iThisstong); \n\n} \n\n\n\nif (iThisway >200 && iThisway <206) \n\n{ \n\niThisway = iThisway -200; \n\niThisstong = iThisstong/10; \n\nnProp =ItemPropertyAbilityBonus(iThisway,iThisstong); \n\n} \n\n\n\n//adds ac \n\nif (iThisway ==207) \n\n{ \n\niThisstong = iThisstong/10; \n\nnProp =ItemPropertyACBonus(iThisstong); \n\n} \n\n\n\n//adds to attack bonus \n\nif (iThisway ==208) \n\n{ \n\niThisstong = iThisstong/7; \n\nnProp =ItemPropertyAttackBonus(iThisstong); \n\n} \n\n\n\n\n\n//adds feats from feat.2da \n\nif (iThisway >209 && iThisway < 310) \n\n{ \n\niThisway = iThisway -200; \n\nnProp=ItemPropertyBonusFeat(iThisway); \n\n} \n\n\n\n/*do damage reduction soak \n\nif (iThisway >312 && iThisway < 340) \n\n{ \n\n<a target=\"_blank\" href=\"http://nwn1.nwn2lexicon.com/compiled/function.ItemPropertyDamageReduction.html\">Link</a> \n\n\n\nnProp = ItemPropertyDamageReduction(iThisway,iThisstong ); \n\n\n\n} \n\n*/ \n\n\n\n//http://nwn1.nwn2lexicon.com/compiled/function.ItemPropertyDamageBonus.html \n\n\n\n//damage bonus \n\n//damage type iprp_damagetype.2da iprp_dmgtypes.2da \n\n//damage amount iprp_damagecost.2da 1d4 \n\nif (iThisway >341 && iThisway < 360) \n\n{ \n\niThisstong = iThisstong/7; \n\n\n\nif(iThisstong ==1)iThisstong = IP_CONST_DAMAGEBONUS_1d4; \n\nif(iThisstong ==2)iThisstong =IP_CONST_DAMAGEBONUS_1d6; \n\nif(iThisstong ==3)iThisstong =IP_CONST_DAMAGEBONUS_1d8; \n\nif(iThisstong ==4)iThisstong =IP_CONST_DAMAGEBONUS_2d4; \n\nswitch \n\niThisway=IP_CONST_DAMAGETYPE_ACID; \n\n\n\nnProp =ItemPropertyDamageBonus(iThisway,iThisstong); \n\n} \n\n\n\n//http://nwn1.nwn2lexicon.com/compiled/\nfunction.ItemPropertyDamageResistance.html \n\n//damge resistance 12 types. \n\n\n\nif (iThisway >361 && iThisway < 370) \n\n{ \n\n\n\n\n\nnProp =ItemPropertyDamageResistance(iThisway,iThisstong); \n\n} \n\n\n\n//adds spells ability to it. \n\nif (iThisway >700) \n\n{ \n\n//has to figure out what spell though..hmmm. \n\niThisway = iThisway -400; \n\n\n\nnProp =ItemPropertyCastSpell(iThisway,IP_CONST_CASTSPELL_NUMUSES_1_CHARGE_PER_USE); \n\n\n\nSetItemCharges(oEnchantthis, 20); \n\n\n\n} \n\n\n\n//AddItemProperty(DURATION_TYPE_PERMANENT, \n\n\n\nIPSafeAddItemProperty(oEnchantthis,nProp, 0.0,X2_IP_ADDPROP_POLICY_REPLACE_EXISTING); \n\n} \n\n\n//what it does that is intresting is go off the 2da numbers and assigns what enchantment it will add.\n\nSelect All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"I call it POVES. Product of Voids enchantment system.\n\nThe idea is to make dropable items that on use will enchant an existing item. Few changes need to be done and testing but here is idea.\n\nSo instead of crafting you just level up to increase skill Spell craft and aquire by either a drop or buying a scroll use it on an item and it gains a bonus.\n\nany bugs found would be nice to know. Hopefully someone finds it useful.\n\nrevised it a little to have more comments to make more sense. here is what is going on.\n\nrequires an area with a tag \"pov_enchanting\"\nRequires an object with the tag \"pov_gEnchant\"\nyou put the items required in the object (made a note of what should be added to script there).\n(I would add another function that re-assigns the string to an Tag of actual IG loot. Gold necklaces etc).\nthen use the scroll on something to enchant.\nHow strong of an enchantment depends on the level of spell craft skill you have.\ngoes through a hurdle of ifs to see what number is there for enchanting.\nit uses the numbers from the games 2da files to assign what feats, skills, etc are assigned.\nEverything is destroyed in the workbench.\nScroll is destroyed\n","Rating":"N/A","Awards":[]},"180":{"Name":"Make NWN2 harder","Author":"weby","Submitted":20071206,"Updated":20071207,"Category":"Other","Type":"Type - Combat","Format":"Module Only","ShowCode":"// NW_C2_DEFAULT9\n/*\n    Default OnSpawn handler\n \n    To create customized spawn scripts, use the \"Custom OnSpawn\" script template. \n*/\n//:://////////////////////////////////////////////////\n//:: Copyright (c) 2002 Floodgate Entertainment\n//:: Created By: Naomi Novik\n//:: Created On: 12/11/2002\n//:://////////////////////////////////////////////////\n//:: Updated 2003-08-20 Georg Zoeller: Added check for variables to active spawn in conditions without changing the spawnscript\n// ChazM 6/20/05 ambient anims flag set on spawn for encounter cratures.\n// ChazM 1/6/06 modified call to WalkWayPoints()\n// DBR 2/03/06  Added option for a spawn script (AI stuff, but also handy in general)\n// ChazM 8/22/06 Removed reference to \"kinc_globals\".\n// ChazM 3/8/07 Added campaign level creature spawn modifications script.  Moved excess commented code out to template.\n// ChazM 4/5/07 Incorporeal creatures immune to non magic weapons\n\n#include \"x0_i0_anims\"\n#include \"x0_i0_treasure\"\n#include \"x2_inc_switches\"\n\nvoid main()\n{\n    // Run this campaign's standard creature spawn modifications script (set in module load)\n    string sScriptSpawnCreature = GetGlobalString(\"N2_SCRIPT_SPAWN_CREATURE\");\n    if (sScriptSpawnCreature != \"\")\n    {\n\t\tExecuteScript(sScriptSpawnCreature, OBJECT_SELF);\n    }\n\n    // ***** Spawn-In Conditions ***** //\n    // See x2_inc_switches for more information about these\n    \n    // Enable stealth mode by setting a variable on the creature\n    // Great for ambushes\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_STEALTH) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_STEALTH);\n    }\n    \n    // Make creature enter search mode after spawning by setting a variable\n    // Great for guards, etc\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_SEARCH) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_SEARCH);\n    }\n\n    // Enable immobile ambient animations by setting a variable\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_AMBIENT_IMMOBILE) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_IMMOBILE_AMBIENT_ANIMATIONS);\n    }\n\n    // Enable mobile ambient animations by setting a variable\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_USE_SPAWN_AMBIENT) == TRUE)\n    {\n        SetSpawnInCondition(NW_FLAG_AMBIENT_ANIMATIONS);\n    }\n\n    // ***** DEFAULT GENERIC BEHAVIOR ***** //\n    // * Goes through and sets up which shouts the NPC will listen to.\n    SetListeningPatterns();\n\n    // * Walk among a set of waypoints if they exist.\n    // * 1. Find waypoints with the tag \"WP_\" + NPC TAG + \"_##\" and walk\n    // *    among them in order.\n    // * 2. If the tag of the Way Point is \"POST_\" + NPC TAG, stay there\n    // *    and return to it after combat.\n    //\n    // * If \"NW_FLAG_DAY_NIGHT_POSTING\" is set, you can also\n    // * create waypoints with the tags \"WN_\" + NPC Tag + \"_##\"\n    // * and those will be walked at night. (The standard waypoints\n    // * will be walked during the day.)\n    // * The night \"posting\" waypoint tag is simply \"NIGHT_\" + NPC tag.\n    WalkWayPoints(FALSE, \"spawn\");\n    \n    //* Create a small amount of treasure on the creature\n    if ((GetLocalInt(GetModule(), \"X2_L_NOTREASURE\") == FALSE)  &&\n        (GetLocalInt(OBJECT_SELF, \"X2_L_NOTREASURE\") == FALSE)   )\n    {\n        CTG_GenerateNPCTreasure(TREASURE_TYPE_MONSTER, OBJECT_SELF);\n    }\n    \n    // encounter creatures use ambient animations\n    if (GetIsEncounterCreature())\n\t\tSetSpawnInCondition(NW_FLAG_AMBIENT_ANIMATIONS, TRUE);\n\n    // * If Incorporeal, apply changes\n    if (GetCreatureFlag(OBJECT_SELF, CREATURE_VAR_IS_INCORPOREAL) == TRUE)\n    {\n        effect eConceal = EffectConcealment(50, MISS_CHANCE_TYPE_NORMAL);\n        eConceal = ExtraordinaryEffect(eConceal);\n        effect eGhost = EffectCutsceneGhost();\n        eGhost = ExtraordinaryEffect(eGhost);\n        effect eImmuneToNonMagicWeapons = EffectDamageReduction(1000, DAMAGE_POWER_PLUS_ONE, 0, DR_TYPE_MAGICBONUS);\n        eImmuneToNonMagicWeapons = ExtraordinaryEffect(eImmuneToNonMagicWeapons);\n\t\t\n        ApplyEffectToObject(DURATION_TYPE_PERMANENT, eConceal, OBJECT_SELF);\n        ApplyEffectToObject(DURATION_TYPE_PERMANENT, eGhost, OBJECT_SELF);\n        ApplyEffectToObject(DURATION_TYPE_PERMANENT, eImmuneToNonMagicWeapons, OBJECT_SELF);\n    }\n    \t\n\t//DBR 2/03/06 - added option for a spawn script (ease of AI hookup)\n\tstring sSpawnScript=GetLocalString(OBJECT_SELF,\"SpawnScript\");\n\tif (sSpawnScript!=\"\")\n\t\tExecuteScript(sSpawnScript,OBJECT_SELF);\n\t\t\n\tobject oModule=GetModule();\n\tint nStr, nCon, nDex, nSave,nHP;\n\tfloat fHP;\n\tif(!GetLocalInt(oModule,\"WebyReadDiff\")){\n\t //get the diff numbers\n\t fHP=StringToFloat(Get2DAString(\"webydiff\", \"HP\", 0));\n\t nStr=StringToInt(Get2DAString(\"webydiff\", \"STR\", 0));\n\t nDex=StringToInt(Get2DAString(\"webydiff\", \"DEX\", 0));\n\t nCon=StringToInt(Get2DAString(\"webydiff\", \"CON\", 0));\n\t nSave=StringToInt(Get2DAString(\"webydiff\", \"SAVE\", 0));\n\t SetLocalFloat(oModule,\"WebyDiffHP\",fHP);\n\t SetLocalInt(oModule,\"WebyDiffSTR\",nStr);\n\t SetLocalInt(oModule,\"WebyDiffDex\",nDex);\n\t SetLocalInt(oModule,\"WebyDiffcon\",nCon);\n\t SetLocalInt(oModule,\"WebyDiffSave\",nSave);\n\t SetLocalInt(oModule,\"WebyReadDiff\",TRUE);\n\t WriteTimestampedLogEntry(\"Read: following diff mods: hitpoint multiplier:\"\n\t \t\t\t\t\t\t\t+FloatToString(fHP,5,2)\n\t\t\t\t\t\t\t\t+\" STR mod:\"+IntToString(nStr)\n\t\t\t\t\t\t\t\t+\" DEX mod:\"+IntToString(nDex)\n\t\t\t\t\t\t\t\t+\" CON mod:\"+IntToString(nCon)\n\t\t\t\t\t\t\t\t+\" Save mod:\"+IntToString(nSave));\n\t\t\t\t\t\t\t\t\n\t} else {\n\t fHP=GetLocalFloat(oModule,\"WebyDiffHP\");\n\t nStr=GetLocalInt(oModule,\"WebyDiffSTR\");\n\t nDex=GetLocalInt(oModule,\"WebyDiffDex\");\n\t nCon=GetLocalInt(oModule,\"WebyDiffcon\");\n\t nSave=GetLocalInt(oModule,\"WebyDiffSave\");\t \n\t}\n\tif(fHP>1.0){\n\tnHP=FloatToInt(IntToFloat(GetMaxHitPoints(OBJECT_SELF))*(fHP-1.0));\n\tApplyEffectToObject(DURATION_TYPE_PERMANENT,ExtraordinaryEffect(EffectBonusHitpo\nints(nHP)),OBJECT_SELF);\n\t//WriteTimestampedLogEntry(\"hitpoint multiplier:\"+FloatToString(fHP,5,2)+\" maxhp:\"+IntToString(GetMaxHitPoints(OBJECT_SELF))+\" HP mod:\"+IntToString(nHP));\n\t}\n\t\n\tif (nStr>0) {\n\t\tApplyEffectToObject(DURATION_TYPE_PERMANENT,ExtraordinaryEffect(EffectAbilityInc\nrease(ABILITY_STRENGTH,nStr)),OBJECT_SELF);\n\t}\n\tif (nDex>0) {\n\t\tApplyEffectToObject(DURATION_TYPE_PERMANENT,ExtraordinaryEffect(EffectAbilityInc\nrease(ABILITY_DEXTERITY,nDex)),OBJECT_SELF);\n\t}\n\tif (nCon>0) {\n\t\tApplyEffectToObject(DURATION_TYPE_PERMANENT,ExtraordinaryEffect(EffectAbilityInc\nrease(ABILITY_CONSTITUTION,nCon)),OBJECT_SELF);\n\t   ApplyEffectToObject(DURATION_TYPE_INSTANT,EffectHeal(10000),OBJECT_SELF);\n\t}\n\tif (nSave>0) {\n\t\tApplyEffectToObject(DURATION_TYPE_PERMANENT,ExtraordinaryEffect(EffectSavingThro\nwIncrease(SAVING_THROW_ALL,nSave)),OBJECT_SELF);\n\t}\n\tApplyEffectToObject(DURATION_TYPE_INSTANT,EffectHeal(10000),OBJECT_SELF);\n\t\n}Select All Text | View Code in separate window","Patch":"1.10","NWN2Game":"All","Description":"Annoyed by how easily all enemies fall and how whimpy they are?\n\nThis is a very simple \"95%\" fix for it.\n\nIt replaces the standard spawn script with one that gives them more hitpoints and better attributes.\n\nJust unzip the provided zip file into your override directory.\n\nYou can then edit the webydiff.2da in a text editor to change how hard creatures are.\n\nColumn Explanations:\nHP: the hit point multiplier multiply all NPC/enemy hitpoints by this number. Default: 2.0\n\nSTR: add this many points to the creature strength. Default 2, max 12\n\nDex: add this many points to the creature dexterity. Default 2, max 12\n\nCON: add this many points to the creature constitution. Default 2, max 12\n\nSTR: add this many points to the creature strength. Default 2, max 12\n\nSAVE: add this many points to the creature saving throws. Default 2.\n\nThe complied version is done with motb, but works equally without motb.\n\nknown limitations:\n-Also heals the few NPCs that are supposed to be damaged like the Mossfields in chapter 1.\n-Does not affect a few creatures with nonstandard spawn scripts.\n\nNOTE: remove it before playing any much scripted custom modules as they may have customised versions of the file that conflict! ","Rating":"N/A","Awards":[]},"181":{"Name":"NESS 2.2 for NWN2 (Neshke's Extendable Spawning System)","Author":"Xeoph","Submitted":20071209,"Updated":20071214,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.10","NWN2Game":"All","Description":"Included in the archive are the PDF manual for NESS, NESS 2.2 itself, the spawn waypoint generator and spawn waypoint generator help file.\n\nFull credit goes to the creator, Neshke.\n\nOriginal webpage: \nLink\nLink\nLink\n\nTo clear up the confusion - the link here provides the same updated code from chunky PLUS the documentation and the waypoint generator which isn't included in theirs.","Rating":10,"Votes":2,"Awards":[]},"182":{"Name":"Henchman Discovery Script","Author":"Darren Frenrith","Submitted":20071216,"Updated":20071216,"Category":"Creature Related","Type":"Type - Henchmen","Format":"Code Only","ShowCode":"//Action Taken in conv editor\nvoid main()\n{\n\nobject oPC = GetPCSpeaker();\n\nobject oTarget;\noTarget = OBJECT_SELF;\n\n//Name th\tat the hench needs\n\nSetName(oTarget, \"DARREN\");\n\n//PC gets reward for getting a henchman\n\nRewardPartyXP(2000, oPC, FALSE);\n\n}\nSelect All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"This script is for in a conversation with a possible henchman.\nFor putting in the \"Actions Taken\" script slot.\n\nYou start with an unnamed NPC, let's say it's called \"Wizard\".\nNow, when you talk to Wizard, at a certain point in the conversation (IE: when he says his name) it will change his name to whatever is in the SetName line (at the moment it says \"DARREN\"). it will also give the PC an xp reward of 2000 for finding a henchman.\nSo now Wizard's name is \"DARREN\".","Rating":8,"Votes":2,"Awards":[]},"183":{"Name":"NWN2 Sittable chairs/benches etc.","Author":"Snubletraad","Submitted":20071216,"Updated":20071216,"Category":"Other","Type":"Type - Other","Format":"Module Only","Patch":"1.11","NWN2Game":"All","Description":"With the aid of Patcha's extraordinarily lovely scripts I've managed to create sittable chairs and such for use with persistant servers.\nOne of the main issues was adding a slight delay to the sitting emote to compensate for any amount of lag persistent worlds may encounter.\n\nThe rar file contains a small area with every placeable chair/bench and cushion in it for use by the \"large\" races. If a small race tries to sit in one of the chairs, another placeable is spawned in to replace it effectively allowing the short one to sit.\n\nAll chairs are positioned under Placeables|SITABLES. A folder named PLACEHOLDER contains all the smaller chairs.\n\nThank you very much to Patcha for his hard work and for letting me expand it. ","Rating":9.2,"Votes":7,"Awards":[]},"184":{"Name":"MP invisibility fix","Author":"GilGwath (Dedo)","Submitted":20071216,"Updated":20071224,"Category":"Entire Module/PW systems","Type":"Type - General","Format":"Code Only","ShowCode":"Scripts in the erf:\n\ndd_inv_hb\ndd_inv_inc\nnw_s0_grtrinvis\nnw_s0_imprinvis\nnw_s0_invisib\nnw_s0_invsph\nnw_s0_iretinvis\nnw_s0_iwalkunsn\nnw_s2_invisi2\nnw_s2_invisib\n\nJust put dd_inv_hb in the Module On HeartBeat.Select All Text | View Code in separate window","Patch":"1.11","NWN2Game":"All","Description":"One of the biggest complaint for PW and multyplayer game, is the failure of invisibility.\n\nIn default game invisibility makes you a little bit \"transparent\" so for the AI and mechanic related you are invisible, but anyone (any other player) can see you anyway. \n\nSo this is just a workaround untill OEI provide an hardcoded fix, but it works as intended.\n\nInvisible characters will be exactly that, i.e. invisible. No way to see them or select them untill invisibility expires, or if dispelled via usual spells.\n\nThe fix for invisibility regards:\n- invisibility\n- greater invisibility\n- invisibility sphere\n- racial invisibility (svirnefblin and duergar)\n- Retributive Invisibility (not completely tested)\n- I walk Unseen\n- Assassin Invisibility\n\nThe new invisibility works with the existing detection spells:\n- see invisible\n- blind sight\n- true seeing\n- see the unseen\nIf an invisible character goes in the radius of such a spell, the invisibility for that character becomes the dafualt (trasparent) invisibility. If the PC goes out that area or is not visible by the PC with see invisibility, he get back to complet einvisibility.\n\nNew invisibility works also with invisibility purge.\n\n----------------------------------------\n\nListen and Spot:\n\ni used the SRD 3.5 description of how invisibility works (link: Link )\nFLAT DC 30 for SPOT: The observer gains a hunch that �something�s there� but can�t see it or target it accurately with an attack. A creature who is holding still is very hard to notice (DC 30).\nVARIABLE DC for LISTEN vs MOVE SILENTLY (adding +1 every 10 feet)\n\n---------------------------------------------\n\nObviously this is not intended for the SP, only for PW.\n\n\nHow to: Import the scripts provided in your module, and assign dd_inv_hb in the Module OnHeartBeat.\nDone. Time to get paranoid for your players... \n\n-----------------\nedit 12/24/2007: \nadded the possibility for people close to invisibile PC to Spot or Listen him.\n-----------------\nedit 12/18/2007: \nadded support for warlock invocations and assassin ability (thanks player1)","Rating":8.67,"Votes":5,"Awards":[]},"185":{"Name":"Doors closed at night.","Author":"Daelos","Submitted":20071220,"Updated":20071220,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Doors","Format":"Code Only","ShowCode":"void main() \n{ \nif (GetIsDay()) \n{ \n//Para que la puerta no este cerrada por el día. \nSetLocked(OBJECT_SELF,FALSE); \n} \nif (GetIsNight()) \n{ \n// para que la puerta este cerrada por la noche. \nSetLocked(OBJECT_SELF,TRUE); \n} \n} \nSelect All Text | View Code in separate window","Patch":"1.11","NWN2Game":"All","Description":"Doors closed at night for the stores.","Rating":"N/A","Awards":[]},"186":{"Name":"Food and Drink System 1.5","Author":"Terridol","Submitted":20071221,"Updated":20080615,"Category":"Other","Type":"Type - Classic PnP","Format":"Module and Code","Patch":"1.12","NWN2Game":"All","Description":"This is the Food and Drink system devloped by Team Frienzied Toad for use in thir modules.\n\nNote: this system is for Scripters only! \n\n!!UPDATE!!\nv 1.5\nOptimized and updated fuctions to be closer to 3.5 rules.\n\nv1.1\nInital Release\n\nTo use this system import the ERF file into your module, the associated scripts contain the information to impliment this system into your module.\n\nMake sure to place the item Food1 that is located in this erf somewhere in your module.","Rating":"N/A","Awards":[]},"187":{"Name":"MotB Pre-order Items","Author":"Kaedrin","Submitted":20071222,"Updated":20080303,"Category":"Inventory Item","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.11","NWN2Game":"NWN2:MotB","Description":"This contains the three pre-orders for Mask of the Betrayer. \n\nChoose the one you want to use and unzip it to your override folder. The blessing will be added to the starting area of MoTB in a pile of scrolls.\n\nI've kept the blessings seperate where you have to choose which to get when you start the game (like Obsidian intended). You could always unzip all three, copy the UTI files, and use the console to spawn those items.\n\n***\n\nChauntea's Blessing\n\n+2 Fortitude bonus while in inventory.\n\nYou may use this blessing to permanently bestow the following property upon any single weapon (thereby consuming the blessing): Immunity: Necromancy and +1d6 Positive Energy damage\n\n***\n\nMystra's Blessing\n\n+2 Will bonus while in inventory.\n\nYou may use this blessing to permanently bestow the following properties upon any single weapon (thereby consuming the blessing): Immunity: Illusion, True Seeing, and +1d6 Magical damage\n\n***\n\nMielikki's Blessing\n\n+2 Reflex bonus while in inventory.\n\nYou may use this blessing to permanently bestow the following property upon any single weapon (thereby consuming the blessing): Haste and +1d4 Electricity damage","Rating":9.33,"Votes":5,"Awards":[]},"188":{"Name":"Tag Based Transitions","Author":"Xeoph","Submitted":20071223,"Updated":20071227,"Category":"Scripting routines","Type":"Type - Transitions","Format":"Code Only","ShowCode":"void main()\n{\nobject oPC = GetLastOpenedBy();\nif (!GetIsPC(oPC)) return;\nobject oTarget;\nlocation lTarget;\nstring sEnteringTrigger = GetTag(OBJECT_SELF);\nSendMessageToPC(oPC, sEnteringTrigger);\nstring sMinusExtension = GetSubString(sEnteringTrigger,0,GetStringLength(sEnteringTrigger)-4);\nSendMessageToPC(oPC, sMinusExtension);\nint nLen = GetStringLength(sMinusExtension);\nstring sModifyingCharacter = \"exit\";\nSendMessageToPC(oPC, sModifyingCharacter);\nif (GetLocalInt(OBJECT_SELF, \"Exit\")>= 1)\n   {\nstring sModifyingCharacter = \"entr\";\nstring sTeleportTo = InsertString( sMinusExtension, sModifyingCharacter, nLen);\noTarget = GetObjectByTag(sTeleportTo);\nlTarget = GetLocation(oTarget);\nAssignCommand(oPC, ClearAllActions());\nAssignCommand(oPC, ActionJumpToLocation(lTarget));\n   }\n   else\n   {\nstring sTeleportTo = InsertString( sMinusExtension, sModifyingCharacter, nLen);\noTarget = GetObjectByTag(sTeleportTo);\nlTarget = GetLocation(oTarget);\nAssignCommand(oPC, ClearAllActions());\nAssignCommand(oPC, ActionJumpToLocation(lTarget));\n}\n}Select All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"Requirements:\nCreate a standard set of doors (2) and clickable triggers (2) each with an Enter=1 integer or Exit=1 integer and end the tag in _exit or _entr\n\nBenifit - use these same triggers and doors over and over, only changing the tag to make the transition. Example: testdoor_entr will automatically try to teleport the player to testdoor_exit and vice versa.\n\nFeatures:\n1. With a slight modification the script will work on click or on open.\n2. Allows you to just place objects and rename the tags allowing for quick transition creation and better organization.\n\n**if you use doors you will probably want to assign a command to the door to automatically close itself as well.**","Rating":"N/A","Awards":[]},"189":{"Name":"RDM Item Management Widget","Author":"RSOG","Submitted":20071227,"Updated":20071229,"Category":"Inventory Item","Type":"Type - Combat","Format":"Code Only","Patch":"1.10","NWN2Game":"All","Description":"The Item Management Widget provides a (shoddy) interface for dynamicly altering the properties of items without going to the toolset.\n\nIt is done in a Widget/Conversation form, but the scripts are fairly modular, for those with experience in UI modification.","Rating":"N/A","Awards":[]},"190":{"Name":"(Obsolete) Companion AI Fix v1.6","Author":"player1","Submitted":20080101,"Updated":20090716,"Category":"Creature AI","Type":"Type - Combat","Format":"Code Only","Patch":"1.21","NWN2Game":"All","Description":"This small add-on fixes several issues with AI of your companions. Note that this mod is more of a showcase for the issues with original game AI, with ways to correct them, then full AI modification (like one made by TonyK).\n\n\nHow to install:\n\nJust put files from archive to your Override folder.\n\n\nIssues fixed:\n\n1) Bard and Warlock companions won't cast any spells, if wearing Chain Shirt or heavier armor.\n\nThis happens due to AI not taking into consideration that spell failure chance from light armor is ignored for Bards and Warlocks. So, if AI sees failure chance higher then 15%, he would not cast any spells at all.\n\nTo fix this, I tweaked GetShouldNotCastSpellsBecauseofArmor function that handles this type of behavior. It will now, for Bards and Warlocks, tolerate spell failure chance up to 25%, if wearing light armor, or up to 35% if having Battle Caster feat and wearing medium armor.\n\n2) Badger animal companions won't use their rage ability.\n\nThis is one case where fix is really necessary, since you can't manually control animal companions. And solution is simple: AI just needs to check beasts for having barbarian rage and not just barbarians.\n\n3) Bard companion would Inspire Courage, even if Song of Requiem is active, thus canceling it.\n\nThe reason why this happens is because when no inspiration is active, Bard will Inspire Courage. But, this check doesn't cover Song of Requiem, which is also disrupted by inspirations (since it is continuing effect). So, to fix this, Song of Requiem needs to be added to GetHasInspireBardSongSpellEffect check.\n\n4) Bard companion won't attempt any songs if they have active inspiration.\n\nUsually, at opening of combat, Bard sings one song and then activates one inspiration. But code for singing song requires that no inspiration is currently active. This is leftover from times when all songs where disrupting inspirations. Since this is not case anymore, that check is removed.\n\n5) Companions with Open Lock behavior setting won't pick locks.\n\nThe bug was introduced when adding functionality for familiars to pick locks (needed for Kaji in MotB campaign). Check wasn't done right, so every time when MASTERFAILEDLOCKPICK command was initiated, it run familiar lock picking code and skipped one for regular companions. So companion without familiar would never try to pick a lock.\n\nFor fixing this, it is necessary to check for both MASTERFAILEDLOCKPICK command and associate existence in single check, and only if both pass to bypass companion lock picking code and use one for familiars.\n\n6) Companions with spellcasting turned off would still use Dispels or Restorative magic on player controlled character if disabled. And would never use it for other disabled party members, regardless of spellcasting settings.\n\nFirst issue happens due to CheckForDisabledPartyMembers call never checking caster to see if he has spellcasting enabled or not. As for second issue, the problem was that same CheckForDisabledPartyMembers used obsolete GetHenchman function to iterate between party members, thus only returning currently controlled character. GetNextFactionMember should be used instead.\n\n7) Druid or Ranger companions with Heal Animal Companion spell would waste it on invalid targets.\n\nThis happens since there is no special casing to prevent TalentHealingSelf and TalentHeal functions to use this spell on creatures that are not animal companions. There needs to be fallback to weaker healing talent if target is not an animal companion\n\n8) AI controlled Weapon Master would use his Ki Damage, even if Ability usage is turned off\n\nThis one was easy to fix. Just added check to see if ability usage is not turned off before trying Ki Damage.\n\nEver getting annoyed when using Magic Circle vs Evil? With all those sounds playing every single time someone gets near you? If yes is the answer, then this \"fix\" is for you. It will prevent sp_abjuration_conjure.sef effect (that includes the annoying sound) to show every time someone gets close to you, if you are under effect of Magic Circle vs Evil or Magic Circle vs Good. For installation, just unzip downloaded visualeffects.2da file to your Override folder.\n\n\nNOTE: Patch 1.23 replaced original AI, with port of TonyK AI, for all NWN2 versions, making these fixes obsolete.","Rating":"N/A","Awards":[]},"191":{"Name":"Natural Armor Bug Workaround","Author":"loudent","Submitted":20080108,"Updated":20080114,"Category":"Creature Related","Type":"Type - Spawning","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"These scripts are a work-around for the natural Armor bug that showed up in patch 1.11.\n\nPlease keep in mind this is only a work-around for the time being and will not work perfectly for every creature.\n\nThese replace default on spawn (mw_c2_default9 and heartbeat (nw_c2_default1) scripts\n\nExtract the files to your override directory.\n\n*Make sure you clear out your override directory before patching NWN2*","Rating":9.33,"Votes":3,"Awards":[]},"192":{"Name":"Imbue Item Indexing Bug Fix","Author":"Lord Grave","Submitted":20080109,"Updated":20080127,"Category":"Skill/Feats","Type":"Type - Trade Skill and Item Creation","Format":"Code Only","ShowCode":"    if (sCategory == \"1081\") // the imbue spell works as a \"key\" for any spell based recipe.\n    {\n        int bLastSpellIndexColFound = FALSE; \n        int iCat;\n\tSpeakString(\"Using the override GetRowIndexes function.\");\n        while (bLastSpellIndexColFound == FALSE)    \n        {\n\t\t    iv.x = 0;\n            iIndexRow++; // row 0 always has START_ROW == 0, so we start with Row 1 where START_ROW > 0. \n            iCat = StringToInt(Get2DAString(CRAFTING_INDEX_2DA, COL_CRAFTING_CATEGORY, iIndexRow));\n            if (iCat==0 && iIndexRow!=40)\n            { // the previous one was the last spell index.\n                bLastSpellIndexColFound = TRUE;\n\t\t        iv.y = StringToInt(Get2DAString(CRAFTING_INDEX_2DA, COL_CRAFTING_START_ROW, iIndexRow))-1;\n            }\n        }\n    }Select All Text | View Code in separate window","Patch":"1.11","NWN2Game":"NWN2:MotB","Description":"Basic Descritpion:\nThis is most commonly known as \"Power Essence Bug\" when using Warlock's Imbue Item feat to add basic enchantments to weapons and armor with Power Essences in MotB crafting system. Although you put correct item and correct essences in the satchel, when you use Imbue Item on it you get a message saying that it is not a valid recipe. Recipes other than basic arms and armor enchantments might be affected, I didn't check. Just extract the zip file into your override folder and all recipes should work with Imbue Item next time you start the game.\n\nAdvanced Description:\nThis is for developers. NWN2 has a recipe index used to make searching for valid recipes faster and it is located in crafting_index.2da file. Function GetRowIndexes() is used to fetch a short list of valid recipes for the spell the player cast on the crafting container. MotB developers used this function to fool the containers into thinking that Imbue Item feat is the correct spell. Basically, their piece of code for Imbue Item feat fetches all recipes that require spells by checking if category column contains a numerical string with StringToInt() function, which will return 0 if you try to convert a non-numerical string into an integer. However, they forgot that this function will also return 0 for a '0' string, and there is a group of recipes, starting at ID 40, that requires the spell ID 0 (Acid Fog). The function will simply return a list of recipes starting form the beginning and ending just before the recipes that require Acid Fog spell, leaving slightly more than half of the list unusable for a Warlock. Instead of rewriting their code, I just altered it slightly so that it skips row 40 from the index file when checking whether StringToInt of the category row returns 0. Row 40 is the entry for spells that require Acid Fog and caused the function to malfunction. This GetRowIndexes() function is used only by a chain of functions that and with DoMagicCrafting(). Recompiled versions of all scripts that use this function are included in the zip. If your mods use this function you should recompile your scripts as well.","Rating":9.63,"Votes":4,"Awards":[]},"193":{"Name":"Knockdown Fix","Author":"Thunderblade_33","Submitted":20080109,"Updated":20080112,"Category":"Rulesets","Type":"Type - Combat","Format":"Code Only","Patch":"1.11","NWN2Game":"All","Description":"This is an attempt to bring Knockdown more in line with the spirit of what it was meant to be. At worst, it's a good framework for you to script your own implementation with.\n\nKnockdown replacement widget, tweaked in the following ways:\n - Due to being activated by an item, counts as a full-round action.\n - Made less retarded by requiring a Melee Touch attack.\n - Knockdown time is reduced to 3 seconds (1 second to fall, 1 down, 1 to get up).\n *Brought back to 6 seconds due to animation display issues.\n - A critical hit adds a 1 round (6 seconds) stun effect if the knockdown succeeds, exposing the defender to sneak attacks.\n - Opposed roll: ((Attacker size *4) + STR mod) vs ((Defender Size *4) + DEX or STR mod, whichever is higher).\n - Opposed roll is 3d6 instead of 1d20, allowing a bell-curve probability range \n (makes flat modifiers matter more, decrease dramatic roll differences, 3-18(15) instead of 1-20(19), \n while keeping a bit of randomness and occasional spectacular rolls).\n - Wearing a Shield gives a +1 to +3 bonus to the attacker's roll, depending on shield type.\n - Wearing a Shield gives a +1 to +3 bonus to the defender's roll, depending on shield type.\n - Monk and Sacred Fist levels give +1 per 10 combined levels to the defender's roll \n (from +1 at level 1 to +3 at level 30).\n - Monk bonus not applied if wearing armor or a shield.\n \n - Knockdown Touch Attacks are made with a -4 penalty.\n - If the opposed roll gives 5 or more points in favor of the defender, \n knockdown is countered; the attacker suffers the knockdown (except the critical effects).\n\n - Improved KD negates the -4 penalty to the touch attack roll, making it easier to initiate.\n - Improved KD increases the counter treshold to 10, making it safer to the attacker.\n \n*Optional Rule*\nPlayers without the Knockdown feat can still attempt to push an opponent down:\n - Attack is made at -8 to hit.\n - The opponent can knock them back on a won opposed roll.\n - Comment lines 87-88 and uncomment lines 95-96 to enable\n \n*Other optional rule*\nPure Monks with the Zen Archery feat may use their Wisdom bonus instead of Strength and/or Dexterity.\nUncomment lines 129-134 and 176-181 to enable.\n\nThese changes make Knockdown become more of an 'interrupt' action, rather than a\n'spam the victim to the floor while bashing on it' exploit. \nYet they still encourage team-work by enabling flankers to get free attacks on the victim.\n\nThis script requires no character feat changes: the old feats are still selectable and required, only they must be 'deactivated'.\nThe workaround to disable them is simple: add a very high timer (like 9999 seconds) on both knockdown feats in feats.2da, making the feat impractical and encouraging the players to use the widget instead.\n\n\nTo install:\n1 - Add the included feats.2da to your override/haks, OR use the modified lines at the end of this document to add to your own feats.2da file.\n\n2 - Import the .erf to your module\n\n3 - ...\n\n4 - ENJOY!\n\nBy Thunderblade_33\n\n\nfeat.2da changes:\n\n17 ImpKnock 212 230 ife_impknockdown 7 **** **** 13 **** **** **** **** **** 23 **** 0 0 1 **** **** **** **** 1 -1 **** **** **** **** **** **** **** **** **** **** **** **** **** FEAT_IMPROVED_KNOCKDOWN 2 1 **** **** **** **** 0 GENERAL_FT_CAT 1 0 **** 9999 1 0 Knockdown\n\n23 KnockDown 409 410 ife_knockdown **** **** **** **** **** **** **** **** **** **** **** 0 0 1 **** 1 **** 17 1 -1 **** **** **** **** **** **** **** **** **** **** **** **** **** FEAT_KNOCKDOWN 2 1 **** **** **** **** 0 GENERAL_FT_CAT 1 0 **** 9999 1 0 Knockdown\n","Rating":"N/A","Awards":[]},"194":{"Name":"Emote Device","Author":"Razare","Submitted":20080118,"Updated":20080408,"Category":"Scripting routines","Type":"Type - Event","Format":"Module Only","Patch":"1.12","NWN2Game":"All","Description":"This emote device uses an inventory item which when activated displays the list of available emotes. There is an item for Players to use classified under \"_ModuleItems\" and another that allows DMs to have NPCs perform emotes which is classified under \"_DM Tools\".\n\n-Available Emotes- \n\nBow\nCurtsey\nLaydown\nOpen Lock\nPray\nSalute\nSit Ground\nWave\n\n-Included-\n\n1 Conversation\n - emit_cv_emotedevice\n\n4 Scripts\n - i_emit_emotedevice_ac\n - i_emit_emotedevice_dm_ac\n - gc_is_dm\n - ga_emit_emotedevice_dm\n\n2 Items\n - emit_emotedevice\n - emit_emotedevice_dm","Rating":9.25,"Votes":2,"Awards":[]},"195":{"Name":"Hideous Blow with Charges (MOTB)","Author":"judgebeo","Submitted":20080120,"Updated":20080120,"Category":"Scripting routines","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.11","NWN2Game":"NWN2:MotB","Description":"Original: Link\n\nI just modified riebimite script cause I found some problems with motb.","Rating":8.75,"Votes":2,"Awards":[]},"196":{"Name":"Peaceful Docks Sweep","Author":"Tygaran","Submitted":20080131,"Updated":20080131,"Category":"Area","Type":"Type - Conversations","Format":"Code Only","ShowCode":"// 10a_cw_extra\n/*\n\tnResolve: -1 = Peaceful. +1 = Violent.\n\t\n\tGlobal. Can go from -7 to +7.\n*/\n// JYL 4/26/05\n\nvoid main(int nResolution)\n{\n\tint nTemp = GetGlobalInt(\"10_cw_sweep_extras\");\n\t// Since Peaceful is sent as -1 nad violent as 1, should always\n\t// add the sent value to the global\n\tnTemp = nTemp + nResolution;\n\tSetGlobalInt(\"10_cw_sweep_extras\", nTemp);\n\t\n/*\tif (nResolution < 0)\n\t\t{\n\t\t\tnTemp = nTemp - nResolution;\n\t\t\t\n\t\t\tSetGlobalInt(\"10_cw_sweep_extras\", nTemp);\n\t\t}\n\telse\n\t\t{\n\t\t\tnTemp = nTemp + nResolution;\n\t\t\t\n\t\t\tSetGlobalInt(\"10_cw_sweep_extras\", nTemp);\n\t\t}\n*/\n\n}Select All Text | View Code in separate window","Patch":"1.00","NWN2Game":"NWN2","Description":"Ever notice that Brelain and Axle seem to get mad at your actions more often then they should? This seems to stem from a coding bug. Peaceful interactions are flaggewd as -1 and violent ones as +1. But the existing code decides to subtract the negative value from a global int; and basic math says subtracting a negative is like adding a positive. So ANY interaction ends up as a violent one, even if resolved peacefully.\n\nSo, here is a script for your override that should fix this issue.","Rating":9.33,"Votes":3,"Awards":[]},"197":{"Name":"Sexy OC Reloaded","Author":"Tygaran","Submitted":20080206,"Updated":20100122,"Category":"Other","Type":"Type - Appearance","Format":"Code Only","Patch":"1.21","NWN2Game":"All","Description":"Installation:Extract the files into your override folder. \n\nNOTE: YOU MUST START A NEW GAME FOR THE COMPANION FACELIFTS TO WORK\n\nThis project, called the Sexy OC Reloaded, was inspired by the original\nSexyOC made by ShadowAvatar87\n\nThis project is broken down into three phases of implementation. Each phase require you to have aspects of a variety of clothing packs already installed into your NWN2 Override folder. The BaseEssentials download contains just the files required for the SOCR to function properly.\n\nPhase 1\n--------\nSexy Armor for PCs and Companions. The armor will auto-adapt to be standard OC for males and 'sexy attire' for females. A Sexy Sewing Kit is also included to manually switch armor between OC and 'sexy' modes. To obtain this item in-game, enter the following:\n\n~\nDebugMode 1\ngiveitem soc_kit\nDebugMode 0\n~\n\nPhase 2\n--------\nSexy Citizens of Neverwinter. Phase 2 updates virtually all female denizens of Neverwinter and the surrounding area to new styles of clothing. Included in the Phase is also a configuration file which can be used to implement 'facelifts' to various Companions and other NPCs.\n\nPhase 3\n--------\nSexy Citizens of Rashemen. Phase 3 is designed to enhance the Mask of the Betrayer expansion in the same way Phase 2 enhanced the original Official Campaign. Work is still in progress.\n\nRomance Add-On\n--------------\nThis mod allows female PCs to romance Elanee. Just select the \"I hope there are a lot of pretty girls\" option during the openning scene.\n\nCredits and link to full mods used to create the SOCR\n======================================================\n- All those who designed the clothing/armor packs used to craft 'sexy' attire.\n- mr_bumpkin, who's Crafting Hammer Modification for Sexy OC gave insight on how to code armor switching\n- The various artists who created the heads and hairs used for 'facelifts' within Phase 2.\n\nAttire Packs:\n-------------\nAleanne's Clothing Packs: CL1, CL2, CL3, CL4\n\nJester's assorted works: Chainmail Bikini+ (CH_Body53* only), Gear v1.0, NWC v1.2, \n\nChimneyfish's assorted works: Male Version of Aleanne's CL3, Always Summer (non-replacing verion), Armor 1-3, Dresses and Lingerie, Modified Jester's Armor\n\nCyric_th_dark's Elven Darkleaf Armour = Link\n\nNytir's Aribeth and Valsharesss' Armor 2.1 = Link\n\nNecrolord's Full Nudes = Link\n\nCleitanious' Tintable Clothing Compilation pack = Link\n\nWiseavatar's Updated model for Aleanne's CL2 = Link\n\nOblivion to NWN2 = Link\n\nHead Packs:\n-----------\nBadmagic's Human Female Heads � Pack #01 = Link\nBriesence's Female Elf Head 53 = Link\nKaycei's Hair = Link\nCamb's Wild Hair for More Races (override version) = Link\nBarrel of Monkeys's Hair Extensions = Link\nKyrie's Tintable Moire Head = Link\nD15C0RD's Evil Eyes V2 = Link\nEressil's Plastic surgery head pack (stand alone version) = Link\nMaeBe's Female Hair = Link\nChimneyfish's Tintable Kana and Brelaina Heads = Link\n\n","Rating":9.71,"Votes":70,"Awards":["Hall of Fame"]},"199":{"Name":"Warlock Improved Eldritch Master","Author":"khoover","Submitted":20080225,"Updated":20080321,"Category":"Skill/Feats","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.12","NWN2Game":"NWN2:MotB","Description":"This is my first ever posted mod. Needless to say I am quite proud of it. It makes Eldritch Master fire two blasts per casting of an eldritch blast with any essence or shape. Each ray effect lasts 0.4 seconds with 0.2 between effects. This takes the time of the 1 second casting animation so that the second blast doen't come from the warlock's hand after he puts it down. While doing it this way was not my original intention I think it looks really cool. In my opinion it makes the warlock appear more powerful firing two quick blasts instead of one long sustained blast. It also doubles the range of eldritch chain and doom shapes. Basically it is Eldritch Sculpter as near as NWN can possibly get it. Enjoy.\n\nAlso fixes Eldritch Chain. Chain can critical on each target. Patch 1.12 included this but I had already added it. Chain can go up to 6 additional targets at level 30. Even in Patch 1.12 Obsidian still limits you to 4 at level 20 and beyond.\n\nCompatible with Dubby's Combined Works. Just make sure my folder is higher alphabetically that his. Shouldn't be a problem unless you change the folder names.","Rating":"N/A","Awards":[]},"200":{"Name":"Run Waypoints","Author":"Corey Holcomb-Hockin","Submitted":20080306,"Updated":20080307,"Category":"Creature AI","Type":"Type - Daily Routine","Format":"Code Only","Patch":"1.12","NWN2Game":"All","Description":"This a small edit to x0_i0_walkway to allow creatures to run from waypoint to waypoint instead of walk. You should be able to use scriptable waypoints to have them only run to some waypoints.\n\nTo use\n\nimport chh_runwaypoints.erf into your module\nimport chh_runwaypoints_set.xml into a creature\nset the integer variable WP_RUN = 1 on the creature\n\n\nIf you want creatures that run waypoints and are used in combat you will need to create edited versions of all the AI scripts that call the DetermineCombatRound function. This only includes edited scripts for OnSpawn and HeartBeat.","Rating":"N/A","Awards":[]},"201":{"Name":"Super Wildshape Fix","Author":"CuteUnit","Submitted":20080309,"Updated":20080310,"Category":"Spells","Type":"Type - Magic","Format":"Module Only","ShowCode":"//::///////////////////////////////////////////////\n//:: Wild Shape\n//:: NW_S2_WildShape\n//:: Copyright (c) 2001 Bioware Corp.\n//:://////////////////////////////////////////////\n/*\n    Allows the Druid to change into animal forms.\n\n    Updated: Sept 30 2003, Georg Z.\n      * Made Armor merge with druid to make forms\n        more useful.\n\tUpdate: March 10 2008, Cuteunit\n\t  * Subverted official AC copying method with\n\t    my own, to copy all AC not just Deflection\n\t\tAlso included Reeron's int/wis/cha fix\n\n*/\n//:://////////////////////////////////////////////\n//:: Created By: Preston Watamaniuk\n//:: Created On: Jan 22, 2002\n//:://////////////////////////////////////////////\n//:: AFW-OEI 06/08/2006:\n//::\tRemove panther\n//:: AFW-OEI 07/29/2006:\n//:: \tDefault to brown bear\n\n#include \"x2_i0_spells\"\n#include \"x2_inc_itemprop\"\n\nobject oCaster = OBJECT_SELF;\n\n///////////////////////////////////////////////////////////////////////\n// Modified by Cuteunit..3/10/08 6:01 am\n// Define custom functions for getting AC off gear before shapechange.\n// Define custom item property copying function to prevent dumping\n// all the AC to the creature hide as Deflection as normal NWN2 does.\n///////////////////////////////////////////////////////////////////////\nvoid RunAbilityBonus( object oTarget, int nSpell, float fDuration, effect eInt, effect eWis, effect eCha )\n\n{\n    //FloatingTextStringOnCreature(\"*RunAbilityBonus!*\", oTarget);\n    //FloatingTextStringOnCreature(\"nSpell = \"+IntToString(nSpell),oTarget);\n    if (!GetHasEffect( EFFECT_TYPE_POLYMORPH, oTarget))\n        {\n        DelayCommand(1.0f, RemoveEffect(oTarget, eInt));\n        DelayCommand(1.0f, RemoveEffect(oTarget, eWis));\n        DelayCommand(1.0f, RemoveEffect(oTarget, eCha));\n        //FloatingTextStringOnCreature(\"*AbilityBonusEnded!*\", oTarget);\n        return;\n        }\n    DelayCommand(6.0f,RunAbilityBonus(oTarget, nSpell, fDuration, eInt, eWis, eCha));\n}\nint GetHighestDeflectionValue(int iRing1AC,int iRing2AC,int iCloakAC,int iBeltAC,int iHelmetAC,int iGlovesAC)\n{\n    int nhigh = iRing1AC;\n\tif  (iRing2AC > nhigh) nhigh = iRing2AC;\n\tif  (iCloakAC > nhigh) nhigh = iCloakAC;\n\tif  (iBeltAC > nhigh) nhigh = iBeltAC;\n\tif  (iHelmetAC > nhigh) nhigh = iHelmetAC;\n\tif  (iGlovesAC > nhigh) nhigh = iGlovesAC;\n   \n    return nhigh;\n}\n\t\nvoid IPExcludeACCopyItemProperties(object oOld, object oNew, int bWeapon = FALSE)\n{\n\n    if (GetIsObjectValid(oOld) && GetIsObjectValid(oNew))\n    {\n\t\titemproperty ip = GetFirstItemProperty(oOld);\n        while (GetIsItemPropertyValid(ip))\n        {\n        \tif (GetItemPropertyType(ip) != ITEM_PROPERTY_AC_BONUS && GetItemPropertyType(ip) != ITEM_PROPERTY_SAVING_THROW_BONUS)\n\t\t\t{\n\t\t\t\tAddItemProperty(DURATION_TYPE_PERMANENT,ip,oNew);\n\t\t\t}\n\t\t\tip = GetNextItemProperty(oOld);\n        }\n    }\n}\nint IPGetArmorBonus(object oArmor, int nEnhancementBonusType = ITEM_PROPERTY_AC_BONUS)\n{\n    itemproperty ip = GetFirstItemProperty(oArmor);\n    int nFound = 0;\n    while (nFound == 0 && GetIsItemPropertyValid(ip))\n    {\n        if (GetItemPropertyType(ip) == nEnhancementBonusType)\n        {\n            nFound = GetItemPropertyCostTableValue(ip);\n        }\n        ip = GetNextItemProperty(oArmor);\n    }\n    return nFound;\n}\n\n\nvoid main()\n{\n    //Declare major variables\n\t//Cuteunit: Reeron's calculations to get mental ability modifiers here (prevents bonus spell loss).\n    int nSpell = GetSpellId();\n    object oTarget = GetSpellTargetObject();\n\tint nInt = GetAbilityScore(oTarget,3);\n    int nInt2 = GetAbilityScore(oTarget,3,TRUE);\n    int nInt3 = nInt-nInt2;\n    int nWis = GetAbilityScore(oTarget,4);\n    int nWis2 = GetAbilityScore(oTarget,4,TRUE);\n    int nWis3 = nWis-nWis2;\n    int nCha = GetAbilityScore(oTarget,5);\n    int nCha2 = GetAbilityScore(oTarget,5,TRUE);\n    int nCha3 = nCha-nCha2;\n    effect eInt = EffectAbilityIncrease(3,(nInt3));\n    effect eWis = EffectAbilityIncrease(4,(nWis3));\n    effect eCha = EffectAbilityIncrease(5,(nCha3));\n    eInt = ExtraordinaryEffect(eInt);// Don't want it removed by a Dispel Magic until my delay loop removes it.\n    eWis = ExtraordinaryEffect(eWis);// Don't want it removed by a Dispel Magic until my delay loop removes it.\n    eCha = ExtraordinaryEffect(eCha);// Don't want it removed by a Dispel Magic until my delay loop removes it.\n    effect eVis = EffectVisualEffect(VFX_DUR_POLYMORPH);\n\teVis = SupernaturalEffect(eVis);\t// AFW-OEI 12/07/2006: Make it so you can't dispel the visual effect, which was dispelling wildshape.\n    effect ePoly;\n    int nPoly = POLYMORPH_TYPE_COW;\t// AFW-OEI 06/08/2006: Default -- something's gone wrong if you actually become a cow.\n    int nMetaMagic = GetMetaMagicFeat();\n    int nDuration = GetLevelByClass(CLASS_TYPE_DRUID);\n    //Enter Metamagic conditions\n    if (nMetaMagic == METAMAGIC_EXTEND)\n    {\n        nDuration = nDuration *2; //Duration is +100%\n    }\n\n    if (nSpell == 403)\n    {\n        nPoly = POLYMORPH_TYPE_WOLF;\n\n        if (nDuration >= 12)\n        {\n            nPoly = POLYMORPH_TYPE_DIRE_WOLF;\n        }\n    }\n    else if (nSpell == 404)\n    {\n        nPoly = POLYMORPH_TYPE_BOAR;\n        if (nDuration >= 12)\n        {\n            nPoly = POLYMORPH_TYPE_DIRE_BOAR;\n        }\n    }\n    else if (nSpell == 405)\n    {\n        nPoly = POLYMORPH_TYPE_BADGER;\n        if (nDuration >= 12)\n        {\n            nPoly = POLYMORPH_TYPE_DIRE_BADGER;\n        }\n    }\n    else\n    {\n        nPoly = POLYMORPH_TYPE_BROWN_BEAR;\n        if (nDuration >= 12)\n        {\n            nPoly = POLYMORPH_TYPE_DIRE_BROWN_BEAR;\n        }\n    }\n\n    ePoly = EffectPolymorph(nPoly, FALSE, TRUE);\t// AFW-OEI 11/27/2006: Use 3rd boolean to say this is a wildshape polymorph.\n    ePoly = SupernaturalEffect(ePoly);\n\tePoly = EffectLinkEffects( ePoly, eVis );\n\t\t\n    //Fire cast spell at event for the specified target\n    SignalEvent(oTarget, EventSpellCastAt(OBJECT_SELF, SPELLABILITY_WILD_SHAPE, FALSE));\n\n    int bWeapon = StringToInt(Get2DAString(\"polymorph\",\"MergeW\",nPoly)) == 1;\n    int bArmor  = StringToInt(Get2DAString(\"polymorph\",\"MergeA\",nPoly)) == 1;\n    int bItems  = StringToInt(Get2DAString(\"polymorph\",\"MergeI\",nPoly)) == 1;\n\n    object oWeaponOld = GetItemInSlot(INVENTORY_SLOT_RIGHTHAND,OBJECT_SELF);\n    object oArmorOld = GetItemInSlot(INVENTORY_SLOT_CHEST,OBJECT_SELF);\n    object oRing1Old = GetItemInSlot(INVENTORY_SLOT_LEFTRING,OBJECT_SELF);\n    object oRing2Old = GetItemInSlot(INVENTORY_SLOT_RIGHTRING,OBJECT_SELF);\n    object oAmuletOld = GetItemInSlot(INVENTORY_SLOT_NECK,OBJECT_SELF);\n    object oCloakOld  = GetItemInSlot(INVENTORY_SLOT_CLOAK,OBJECT_SELF);\n    object oBootsOld  = GetItemInSlot(INVENTORY_SLOT_BOOTS,OBJECT_SELF);\n    object oBeltOld = GetItemInSlot(INVENTORY_SLOT_BELT,OBJECT_SELF);\n    object oHelmetOld = GetItemInSlot(INVENTORY_SLOT_HEAD,OBJECT_SELF);\n    object oShield    = GetItemInSlot(INVENTORY_SLOT_LEFTHAND,OBJECT_SELF);\n\tobject oGlovesOld  = GetItemInSlot(INVENTORY_SLOT_ARMS,OBJECT_SELF);\n    if (GetIsObjectValid(oShield))\n    {\n        if (GetBaseItemType(oShield) !=BASE_ITEM_LARGESHIELD &&\n            GetBaseItemType(oShield) !=BASE_ITEM_SMALLSHIELD &&\n            GetBaseItemType(oShield) !=BASE_ITEM_TOWERSHIELD)\n        {\n            oShield = OBJECT_INVALID;\n        }\n    }\n\n\n\t////////////////////////////////////////////////////////////////////////////////\n//////////////////\n\t// Modified by Cuteunit 3/10/08\n\t// Ascertain total magical item AC bonuses then apply them as effects after wildshape is applied\n\t////////////////////////////////////////////////////////////////////////////////\n//////////////////\n\t// Total up deflection AC from oRing1, oRing2, oCloak, oBelt, oHead.\n\t// Add Armor AC from oArmor\n\t// Add Shield AC from oShield.\n\t// Add Natural AC from oAmulet.\n\t// Add Dodge AC from oBoots\n\t\n\t\tint iACDeflect= GetHighestDeflectionValue(IPGetArmorBonus(oRing1Old), IPGetArmorBonus(oRing2Old), IPGetArmorBonus(oCloakOld), IPGetArmorBonus(oBeltOld), IPGetArmorBonus(oHelmetOld), IPGetArmorBonus(oGlovesOld));\n\tint iACArmor= IPGetArmorBonus(oArmorOld);\n\tint iACShield= IPGetArmorBonus(oShield);\n\tint iACNatural= IPGetArmorBonus(oAmuletOld);\n\tint iACDodge= IPGetArmorBonus(oBootsOld);\n\t\n\t//  get cumulative saving throw modifications\n\tint iSavesBonus= IPGetArmorBonus(oRing1Old,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oRing2Old,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oCloakOld,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oBeltOld,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oHelmetOld,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oArmorOld,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oShield,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oAmuletOld,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oBootsOld,ITEM_PROPERTY_SAVING_THROW_BONUS) + IPGetArmorBonus(oGlovesOld,ITEM_PROPERTY_SAVING_THROW_BONUS);\n\teffect eSavesBonus = EffectSavingThrowIncrease(SAVING_THROW_ALL, iSavesBonus, SAVING_THROW_TYPE_ALL);\n\t//Define final bonuses as effects \n\teffect eACDeflect = EffectACIncrease(iACDeflect, AC_DEFLECTION_BONUS);\n\teffect eACArmor = EffectACIncrease(iACArmor, AC_ARMOUR_ENCHANTMENT_BONUS);\n\teffect eACShield = EffectACIncrease(iACShield, AC_SHIELD_ENCHANTMENT_BONUS);\n\teffect eACNatural = EffectACIncrease(iACNatural, AC_NATURAL_BONUS);\n\teffect eACDodge = EffectACIncrease(iACDodge, AC_DODGE_BONUS);\n\n\teffect eACCombined = EffectLinkEffects (eACDeflect, eACArmor);\n\teACCombined = EffectLinkEffects (eACShield, eACCombined);\n\teACCombined = EffectLinkEffects (eACNatural, eACCombined);\n\teACCombined = EffectLinkEffects (eACDodge, eACCombined);\n\tePoly = EffectLinkEffects(eACCombined, ePoly);\n\tePoly = EffectLinkEffects(eSavesBonus, ePoly);\n\tePoly = SupernaturalEffect(ePoly);\t// Make the stats and poly undispellable..\n\n\t///////////////////////////////////////////////////////////////////////////\n\t//End Cuteunit Pre-Polymorph block\n\t///////////////////////////////////////////////////////////////////////////\n\t\t\n    //Apply the VFX impact and effects\n    ClearAllActions(); // prevents an exploit\n\t////////////////////////////////////////////////////////////////////////////\n\t// Modified by Cuteunit 3/10/08..5:58 am\n\t// Apply bonuses and polymorph together as combined function.. works great!\n\t////////////////////////////////////////////////////////////////////////////\n\tApplyEffectToObject(DURATION_TYPE_TEMPORARY, eInt, oTarget, HoursToSeconds(nDuration));// Added by Reeron\n    ApplyEffectToObject(DURATION_TYPE_TEMPORARY, eWis, oTarget, HoursToSeconds(nDuration));// Added by Reeron\n    ApplyEffectToObject(DURATION_TYPE_TEMPORARY, eCha, oTarget, HoursToSeconds(nDuration));// Added by Reeron\n\tApplyEffectToObject(DURATION_TYPE_TEMPORARY, ePoly, OBJECT_SELF, HoursToSeconds(nDuration));\n\n\n    RunAbilityBonus(oTarget, nSpell,HoursToSeconds(nDuration), eInt, eWis, eCha); \n\n\t\t//Copy weapon properties to the creature weapon and/or polymorphed weapon(doom knight)\n\t//Creature weapons copied to all 3 creature slots(both claws and bite if they exist)\n\t//Vorpal bite attack!\n\t//Comment out everything but CreatureR if you feel this is overpowered on your server\n\t//But you shouldnt so the druids can keep up with those frenzied berserkers and Clerics!\n\t//Lets get some more elder earth elementals walking around! Seen any lately? Ever?\n\t//Ever see any mages memorize and use Shapechange?\n    object oWeaponNewR = GetItemInSlot(INVENTORY_SLOT_CWEAPON_R,OBJECT_SELF);//creature mainhand\n\tobject oWeaponNewL = GetItemInSlot(INVENTORY_SLOT_CWEAPON_L,OBJECT_SELF);//creature offhand\n\tobject oWeaponNewB = GetItemInSlot(INVENTORY_SLOT_CWEAPON_B,OBJECT_SELF);//creature bite\n\tobject oWeaponNewS = GetItemInSlot(INVENTORY_SLOT_RIGHTHAND,OBJECT_SELF);//polymorph weapon\n    object oArmorNew = GetItemInSlot(INVENTORY_SLOT_CARMOUR,OBJECT_SELF);\n\n    if (bWeapon)\n    {\n\t\tIPExcludeACCopyItemProperties(oWeaponOld,oWeaponNewR, TRUE);\n\t\tIPExcludeACCopyItemProperties(oWeaponOld,oWeaponNewL, TRUE);\n\t\tIPExcludeACCopyItemProperties(oWeaponOld,oWeaponNewB, TRUE);\n\t\tIPExcludeACCopyItemProperties(oWeaponOld,oWeaponNewS, TRUE);\n    }\n    if (bArmor)\n    {\n        IPExcludeACCopyItemProperties(oShield,oArmorNew);\n        IPExcludeACCopyItemProperties(oHelmetOld,oArmorNew);\n        IPExcludeACCopyItemProperties(oArmorOld,oArmorNew);\n    }\n\n    if (bItems)\n    {\n        IPExcludeACCopyItemProperties(oRing1Old,oArmorNew);\n        IPExcludeACCopyItemProperties(oRing2Old,oArmorNew);\n        IPExcludeACCopyItemProperties(oAmuletOld,oArmorNew);\n        IPExcludeACCopyItemProperties(oCloakOld,oArmorNew);\n        IPExcludeACCopyItemProperties(oBootsOld,oArmorNew);\n        IPExcludeACCopyItemProperties(oBeltOld,oArmorNew);\n    }\n\n\t\n}Select All Text | View Code in separate window","Patch":"1.11","NWN2Game":"NWN2:MotB","Description":"Just like my CuteCleaves mod, I wondered why nobody had taken a shot at improving the primary problems with Polymorphs in NWN2. While getting kicked out of it for conversation in the OC can't be stopped, what COULD be stopped was the whole \"lose all your item bonuses and just get a little bit of deflection AC to keep your horribly unenhanced poly'd attacks company while you lose your bonus spells from wis/int too\" thing.\n\nBasically wildshape and shapeshift sucked and nobody used them but to abuse plant shape with nature's avatar!\n\nI've gone ahead and gotten around that by rewriting the scripts to tally ALL ac and saving throw bonuses from gear pre-poly then apply them as supernatural effects post-poly, as well as copying all the item properties. If this seems similar to the ShapeChange Fix by Forbidden, it is! I've built on he and Reeron's work to create something superior. \n\nThis definitely works with Reeron's spell fixes/kaedryn's/ladydesire's packages.\n\nI'd be thrilled if people used this in their modules or PWs! Maybe there would actually be druids running around!\n\nCode is heavily commented if you want to make any modifications, such as if you're somehow opposed to dire bears with Vorpal bites. ( assuming the druid had a vorpal scimitar on beforehand).\n\nWhat you MUST be aware of: I couldnt get it to keep your bonus spells if you Rested while in wildshape ( thus cancelling the polymorph that way). Before you rest, you MUST right click yourself and hit \"return to original form\" or your bonus spellslots will blank themselves on rest. Sorry. Everything else works.\n\n\nEdit 3/11 : works for poly self/word of changing now that I've had some sleep.\n\nedit 3/11: Found a bug that was causing spells to be forgotten on poly exit. Fixing for later today.\n\nedit 3/11: There, works now. Nothing more annoying than when the game works in such an irrational/obfuscated fashion that you have to use inane workarounds to accomplish simple tasks. Had to unbundle the stat mods from the polymorph and use reeron's timer to remove them separately.\n\nIf you downloaded this already, you should download again. \n","Rating":9.71,"Votes":8,"Awards":[]},"202":{"Name":"Arc of the Worlds Crafting System (ACS) Is Now Available to the Public!","Author":"Chass","Submitted":20080315,"Updated":20080315,"Category":"Other","Forum Thread":"Link","Type":"Type - Combat","Format":"Module and Code","Patch":"1.00","NWN2Game":"NWN2","Description":"We've decided to release this Crafting System to the public due to a wide band of players who play on the server that wants to use it for their Worlds.\n\nIt's a Dynamic Crafting System. Meaning the Recipes are created on the fly. Altered on the Fly. No Database for Recipes (All recipes are generated on Parchments) and much more. fully configurable.\n\nYou are able to craft ANY item available in your realm using a dynamic recipe system that base your requirements on the Name of the Item. A Copper Longsword would indeed require a Sword Mold + Copper Ingots. \n\nThe only drawback is you cannot sell these in shops. as NWN2 deletes local variables on items to shops. \n\nNow. I have yet to clean up the code as it is originally intended to be purely private. i'll do so in the 2.0 Release. but overall. many who were familiar to the CNR systems of NWN1. might enjoy this a bit.\n\nFor more information + Screenshots. check out:\nLink\n\nYou need to register to the forums before you can download it however. \n\nDocumentation is currently being written on the forums and will be updated constantly. Bookmark the forums. check often. and most importantly Enjoy this Great Release. \n\nHow it basically Works:\n\nArc of the World Crafting System\nAt a Glance\n\nThe Arc of the Worlds crafting system heavily relies on communication within the community in the very beginning. to be able to craft new and unique items, weapons, armors and many more. you'll have to find someone who has researched the item in question to craft.\n\nBeginning:\n\nThere are various 'Isandor' Classes ingame. ranging from builder to farmer. the most important class to focus on is the 'Researcher' Class as this class basically enables crafting for almost all settlements.\n\nHow it works:\n\nThe Crafting System heavily focuses on research. Item recipes are determined dynamically. numerous conditions determine how much a item needs a specific resource. the time it takes to craft. the quality. etc.\nSome of these conditions are:\n\n\nINT,WIS Ability Score\nAppraise Checks\n\n\nThese can dramatically make crafting recipes easier or next to impossible. so finding a great 'researcher' can make your settlement easier.\n\nSecond:\n\nA researcher must come across the item in question to make a recipe from. a researcher cannot make recipes out of the blue. (In CNR. you possibly could, as all recipes are stored in a database. however this system is more dynamic than CNR)\n\nExample:\n\nA researcher has finally setup his stations in his home. now. all he needs is some ink. (which can be found raw or crafted. after he gets his ink. a customer finds an item. a copper dagger in specific. the customer is also a blacksmith. the customer wants the researcher to make recipes for this dagger. so the blacksmith can craft the dagger using the researcher's recipe sheet.\n\n\nHow it's done:\n\nThe Researcher takes the copper dagger. the researcher promises (sometimes) that he'll give the copper dagger back when the research is completed. The researcher takes the dagger and places it on the Research Table. After reviewing some lines of dialog. the Researcher then examines the Copper Dagger. during this time. the Quality Conditions and AB/Skill checks are then rolled. The better the rolls. the lower the time/resources needed to craft the Copper Dagger.\n\nThe base DC to pass when Researching is dependant on the size of the item and the DC modifiers that a GM may decide to apply to either an already existant item or a base recipe sheet.\n\nAlways Check our Website for update information:\n\nLink","Rating":9.33,"Votes":5,"Awards":[]},"203":{"Name":"Galantir's persistent banking and vault system","Author":"Galantir Galadross","Submitted":20080325,"Updated":20080408,"Category":"Scripting routines","Type":"Type - Banking","Format":"Module and Code","Patch":"1.12","NWN2Game":"All","Description":"Persistent banking and vault system.\n\nVault has multiple levels of storage which can be upgraded through the banker conversation.\n\nInstalation:\nImport the main erf.\nImport the nwnxsql erf if this is not already in your module.\nAttach conversation to an NPC.\nAdd a vault chest near the npc.\nAdjust settings in gal_baking_inc.\nAdd Gal_banker_mod_Onload to the module onload event.\n\nSupports nwnx4 and biodb\n\nUpdate1:\n*Fixes problem with stored items turning up unidentified.(Thanks goes to over_my_head for discovering this bug)\n*Deleted debug messages still left in the system.\n\n03/30/08\nversion 1.01:\n* Added nwnx4 mysql support.\n* Added nwnx_sql in sepperate erf(if you use virusman update do not import this. Thanks to kres for pointing this out)\n* Better item storage\n* Added price settings for vault updates.\n* Fixed an issue where items were returned unidentified while not having an account.\n* When not having a vault account items are now returned to inventory immediatly.\n\n04/01/08\n*Added missing objects erf for version 1.01\n\nEnjoy.","Rating":9.42,"Votes":5,"Awards":[]},"204":{"Name":"Death and Respawning","Author":"Zheldon","Submitted":20080326,"Updated":20090828,"Category":"Death","Type":"Type - Event","Format":"Code Only","Patch":"1.13","NWN2Game":"All","Description":"This ERF provides a basic blank starting point for customising your ondeath and onplayerrespawn events. Currently the onrespawn event does not fire which may confuse some people. I decided to create a basic blank starting point for people to use.\n\nThe ERF contains three files.\nmod_onplayerdeath - Module level event that fires on death.\nmod_onplayerrespawn - Module level event that does not fire by default on respawn. I still put mine in the module level events though just in case.\ngui_death_respawn_self - Only slightly modified from the default one. Of course you will not over write the one that came with NWN2, it creates a copy in your module level scripts. This is the script that gets called when the player selects Respawn from the death menu.\n\n**UPDATE 8/28/2009**\nIt was brought to my attention that in version 3, at line 35 I have it as int nHPHealed = GetHPHealed(oRespawner, FALSE); This will have the player respawn with hit points equal to their hit die, to have them respawn at full hit points change that to TRUE. I am sorry for any confusion.","Rating":9.2,"Votes":7,"Awards":[]},"205":{"Name":"Universal Ammo Creator","Author":"Marconus Thurlantyre","Submitted":20080327,"Updated":20080328,"Category":"Scripting routines","Type":"Type - Trade Skill and Item Creation","Format":"Code Only","Patch":"1.12","NWN2Game":"NWN2","Description":"This was a little something I had made one night about 3 weeks back. Basically the title says what it is, but here's how it works:\n\nBy default any ammo creator item is blank when you first get it. When you activate it a conversation is started which explains the whole process as well. Your able to go from there and choose to right-click target a missile or throwing weapon ammunition that is -IN- your inventory and store the stack size, name/ResRef/value/ect of it persistently as local variables on that ammunition creator. Once you select the desired ammo then it stores the information, destroys the original stack you had targetted, and reimburses you with an identicle stack that's cursed (basically so you can't go and swap stacks with everyone, was a big issue with ammo creators back on nwn1 in my experience). After that the next time you activate the ammo creator it will start up the conversation again with whatever ammo you chose displayed in stack size (and by default 1x stack) and show the options to make the ammo or go for configuration options (which will also allow you the option of choosing a new ammunition wiping all the preview settings clean and starting from the beginning).\n\nBy default the ammo creators are all cursed so you can't just go and trade them off to someone else too. And like the initial ammunition selection, any ammo created will similarly be cursed and unable to be dropped/transferred (outside of something that the more devious bug exploiters can probably think of which I won't mention here, if you catch them just nuke their vaults I say...). Also for the convenience of this compared to making shop runs the gold value is 2.5x the base item cost, so if someone wanted to change that they'd need to base conversation, UAC item description, and the uac_makeammo script (under the listed variables as \"int nTotalAmmoCost\") to whatever they wanted.\n\n\n---|Bugs|---\nHaven't really noticed any bugs per say, and about the only one I can think of is if someone were to have several of these ammo creators on their person and the data retrieval via GetItemPossessedBy() function was to select the info from whatever creator they nabbed first maybe.\n\n---|Installation|---\nJust import the erf into your module, it contains the conversation, item, and associated scripts for the Universal Ammo Creator (UAC). These can either be added directly into a shop (plot set so will sell for 1 gold), or more appropriately can be added as a conversation given item and/or first-time entry into the module item.","Rating":"N/A","Awards":[]},"206":{"Name":"Galantir's Discover and Travel System","Author":"Galantir Galadross","Submitted":20080329,"Updated":20080330,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.12","NWN2Game":"All","Description":"Galantir's Discover and Travel System.\n\nThis travel system allows you to place travel masters.\nPlayer can talk to these npc's and get a list of possible places to travel to.\nBefore they can travel they have to talk to the travel master at the target location.\nIn other words they need to have been there before by foot and need to have spoken with the travel master.\n\nTo install the travel system import the erf file.\ncreate an npc with unique tag and attach the conversation.\nNext add the connections to the npc's variable list like this:\n\nCONNECTION_1 = tagoftargetnpc as a string\nCONNECTION_PRICE_1 = 100 as integer\n\n\nYou can add up to 5 connections on each npc.\nNext choose database system to use in the db_congif script\nNext select table name in the travel_config script\n\nYou can place as many npc's as you want as long as they have unique tags in the entire mod.\nThe areanames will be automatically displayed in the conversations.\n\nEnjoy\n\n03/30/08\nupdate to version 0.02\n*Added several more settings.\n*Added module onload script to automatically create databases if nwnx is used.\n*Added nwnx_sql to sepperate erf(if you use the virusman update to this file do not import this one)\n*Updated database support.\n\nGalantir Galadross\n\nPS:This is still very much in development so any suggestions would be welcome.\n","Rating":8.25,"Votes":1,"Awards":[]},"207":{"Name":"Loot based on gold value","Author":"DM_pnj","Submitted":20080329,"Updated":20080330,"Category":"Scripting routines","Type":"Type - NPC Players","Format":"Code Only","ShowCode":"void MayDropItem(object oInvItem)\n{\n\t\n\tif (oInvItem == OBJECT_INVALID) return;\n\tif( (GetPlotFlag( oInvItem )== FALSE)  \n\t\t&& (GetBaseItemType(oInvItem)!=BASE_ITEM_CPIERCWEAPON)\n\t\t&& (GetBaseItemType(oInvItem)!=BASE_ITEM_CREATUREITEM)\n\t\t&& (GetBaseItemType(oInvItem)!=BASE_ITEM_CSLASHWEAPON)\n\t\t&& (GetBaseItemType(oInvItem)!=BASE_ITEM_CSLSHPRCWEAP))\n\t{\n\t//Drop based on Golde Value of the Item\n\t\tint iGoldValue,iDropChance,iIdent;\n\t\tif (GetIdentified(oInvItem)==FALSE)\n\t\t\t{\n\t\t\tSetIdentified(oInvItem,TRUE);\n\t\t\tiIdent=1;\n\t\t\t}\n\t\tiGoldValue=GetGoldPieceValue(oInvItem);\n\t\tif (iIdent==1) SetIdentified(oInvItem,FALSE);\n\t\t//Settings up tymora :\n\t\t//An axe with +7 alteration will coste 80 000 GP\n\t\t//so 80 000/200 = 400.\n\t\t//Players will have 1 chance on 400 to loot this powerfull axe\n\n\t\tiDropChance=iGoldValue/200;\n\t\t\n\t\t//If the item cost nothing, we use the standard drop chance\t\t\n\t\tif (iDropChance==0)\n\t\t\t{\n\t\t\tif (d10(1)==1) SetDroppableFlag(oInvItem,TRUE);\n\t\t\t}\n\t\t//Then we setup the drop chance\n\t\telse if ((Random(iDropChance)+1)==iDropChance)\n\t\t\t{\n\t\t\tSetDroppableFlag(oInvItem,TRUE);\n\t\t\t}\n\t\telse\n\t\t\t{\n\t\t\treturn;\n\t\t\t}\n\t\t\n\n\t}\n}Select All Text | View Code in separate window","Patch":"1.12","NWN2Game":"NWN2","Description":"A handy PW function to setup how rare is the items loot of the killed creature.\n\nMore expensive is the item, harder it will be to get it looted by the players.\n\nCall it for each items of the dying creature (ondeath script)","Rating":"N/A","Awards":[]},"208":{"Name":"Greater Mirror Image","Author":"Mike Kiscaden","Submitted":20080329,"Updated":20080330,"Category":"Spells","Type":"Type - Combat","Format":"Code Only","ShowCode":"#include \"nwn2_inc_spells\"\n#include \"ginc_debug\"\n#include \"nw_i0_spells\"\n\n\n#include \"x2_inc_spellhook\" \n\n\n/*Mike Kiscaden March 2008*/\nvoid CreateMirrorImage(object oCaster, effect eAbsorb, float trimmedDur)\n{\n    \n\tint nImages = 0;\t\n\t//Count the number of current Mirror Images.\n\t\teffect eEffect = GetFirstEffect( OBJECT_SELF );\n\t\twhile ( GetIsEffectValid(eEffect) )\n\t\t{\n\t\t\tif ( GetEffectSpellId(eEffect) == GetEffectSpellId(eAbsorb))\n\t\t\t{\n\t\t\t\tnImages++;\n\t\t\t}\n\t\t\teEffect = GetNextEffect( OBJECT_SELF );\n\t\t}\n\t/*\n\t* Since we actually have 3 effects for each image\n\t* 8 images will have a total of 24 (8 * 3) effects.\n\t* So check for 24 effects with this spell ID.\n\t*/\n    if (nImages < 24 && nImages > 0)\n    {\n\t\tfloat fSpin = ( 6.0f / nImages );\n\t\tDelayCommand( fSpin, \n\t\t\tApplyEffectToObject(DURATION_TYPE_TEMPORARY, eAbsorb, oCaster, trimmedDur));\n        //Apply the VFX impact and effects\n    }\n}\n\nvoid main()\n{\n\n    if (!X2PreSpellCastCode())\n    {\n\t// If code within the PreSpellCastHook (i.e. UMD) reports FALSE, do not run this spell\n        return;\n    }\n\n// End of Spell Cast Hook\n\n\t// Prevent stacking\n\tint nID = GetSpellId();\n\tif ( GetHasSpellEffect(nID) )\n\t{\n\t\teffect eEffect = GetFirstEffect( OBJECT_SELF );\n\t\twhile ( GetIsEffectValid(eEffect) )\n\t\t{\n\t\t\tif ( GetEffectSpellId(eEffect) == nID )\n\t\t\t{\n\t\t\t\tRemoveEffect( OBJECT_SELF, eEffect );\n\t\t\t}\n\t\t\t\n\t\t\teEffect = GetNextEffect( OBJECT_SELF );\n\t\t}\n\t}\n\n    //Declare major variables\n    object oTarget = GetSpellTargetObject();\n    int nCasterLvl = GetCasterLevel(OBJECT_SELF);\n\tfloat fDuration = TurnsToSeconds(nCasterLvl);\t\n\n\n\t//Determine how many images will be created\n    int nImages = d4( 1 ) + ( nCasterLvl / 3 );\n\t\n    int nACBonus = 10 + GetAbilityModifier(ABILITY_DEXTERITY);\n\n\t\n    //Enter Metamagic conditions\n    nImages = ApplyMetamagicVariableMods(nImages, 4);\n \n\t//Max out Images at 8\n\tif( nImages > 8 )  \n\t{ \n\t\tnImages = 8; \n\t}\n\t//Metamagic duration & duration type\n    fDuration = ApplyMetamagicDurationMods(fDuration);\n    int nDurType = ApplyMetamagicDurationTypeMods(DURATION_TYPE_TEMPORARY);\n\n    //Fire cast spell at event for the specified target\n    SignalEvent(oTarget, EventSpellCastAt(OBJECT_SELF, GetSpellId(), FALSE));\n\t\n\t//This determines how long to wait between spawning the images. \n\tfloat fSpin = ( 1.5 / nImages );\n\tfloat fDelay = ( 0.0 );\n\tstring sImg = (\"sp_mirror_image_1.sef\");\n\n    int i;\n\n    for ( i = 0; i < nImages; i++ )\n    {\n        effect eAbsorb = EffectAbsorbDamage(nACBonus);\n        effect eDur = EffectVisualEffect(876);\n\t\teffect eImg = EffectNWN2SpecialEffectFile( sImg, OBJECT_SELF );\n        effect eLink = EffectLinkEffects(eAbsorb, eDur);\n\t\teLink = EffectLinkEffects(eLink, eImg);\n\n        //Apply the VFX impact and effects\n        DelayCommand( fDelay, ApplyEffectToObject(nDurType, eLink, oTarget, fDuration) );\n\t\tfDelay += fSpin;\t\t\n    }\n\t\n\t//For each round that this spell lasts, add another Mirror Image.\n\t//By creating all the effects inside the spell script, the spell ID remains valid.\n\tint round = 1;\n\tfloat trimmedDur = fDuration;\n\twhile(trimmedDur > 0.0f)\n\t{\n\t\teffect eAbsorb = EffectAbsorbDamage(nACBonus);\n        effect eDur = EffectVisualEffect(876);\n\t\teffect eImg = EffectNWN2SpecialEffectFile( sImg, OBJECT_SELF );\n        effect eLink = EffectLinkEffects(eAbsorb, eDur);\n\t\teLink = EffectLinkEffects(eLink, eImg);\n\t\ttrimmedDur = fDuration - RoundsToSeconds(round);\n\t\tDelayCommand(RoundsToSeconds(round),\n\t\t\tCreateMirrorImage(OBJECT_SELF, eLink, trimmedDur));\n\t\tround++;\n\t}\t\n}Select All Text | View Code in separate window","Patch":"1.00","NWN2Game":"NWN2","Description":"I thought someone out there might make use of this \"Greater Mirror Image\" script.\n\nThe Spells.2da entry should be exactly like Mirror Image, except change the Spell Level from 2 to 4, and update the Dialog.tlk references as apropriate.\n\nUpdate the Dialog.tlk with the spell description (Below)\n\nCaster Level(s): Sorcerer/Wizard 4\nInnate Level: 4\nSchool: Illusion \nDescriptor(s): Figment\nComponent(s): Verbal, Somatic\nRange: Personal\nArea of Effect / Target: You\nDuration: 1 Turn / Level\n\nThis spell functions like Mirror Image, except than an additional image is created in each round after the first, up to a maximum of eight concurrent images. If all images are destroyed, the spell ends. \n","Rating":8,"Votes":1,"Awards":[]},"209":{"Name":"Oversized Two Weapon Fighting","Author":"Tentei","Submitted":20080414,"Updated":20090413,"Category":"Skill/Feats","Type":"Type - Combat","Format":"Code Only","Patch":"1.12","NWN2Game":"NWN2","Description":"Tired of having a limited selection of weapons for your off-hand? Look no further! Now introducing Oversized Two Weapon Fighting, straight from Complete Adventurer!\n\n-----------------------------------\nIMPORTANT NOTICE\nI have not been able to purchase/play any expansions, and have been made aware by comments that this will not work with SoZ. If someone would like to make a compatible version, please let me know. I apologize for the inconvenience.\n-----------------------------------\n\nThis feat allows you to treat a medium (one-handed) weapon as a small (light) weapon for the purposes of determining your attack roll. It's only prerequisite is having the Two Weapon Fighting feat. It is added as a supernatural effect when active, and the removal code will search through the active effects and only remove this effect when called.\n\nThis code overrides the default onequip and onunequip scripts as well as feat.2da and spells.2da. A small tutorial on how to merge my 2da's is included in the readme if you already have a feat.2da or spells.2da in your override folder.\n","Rating":8.33,"Votes":3,"Awards":[]},"210":{"Name":"[NBDE] Natural Bioware Database Extension (Converted for NWN2)","Author":"Knat (Converted for NWN2 by yuriy206)","Submitted":20080415,"Updated":20080415,"Category":"Database Related","Type":"Type - Other","Format":"Code Only","Patch":"1.12","NWN2Game":"All","Description":"This is Knat's Natural Bioware Database Extension, as seen in NWN1, now mode to work with NWN2.\n\nI take no credit for the system, only for making it work with NWN2\n\nTo quote Knat\n\"\nNBDE is a wrapper for the bioware database system, eliminating most of its restrictions.\nIt significantly boosts both reading and writing speed.\nIt will make your db scripts more secure and always keeps your database files in the best possible shape, as slim as possible.\n\nAnd this all gets achieved with the use of one simple script.\nI recommend any scripter to check this out if he plans to use biowares onboard database functionality.\nFull documentation included, easy to use...\n\n * Write speed improvements up to factor 500\n * Read speed improvements up to factor 8 (Nearly the same speed as GetLocal functions now)\n * Database size improvement up to factor 3-4\n * sVarName parameter for all SetCampaign functions is no longer limited to 32 chars\n * sVarname must NOT be unique.\n * No need to pack the database ever\n * Stored locations are now 100% reliable. \n\"\n\nIf you expereance any errors please post bellow and I will attempt to address them.","Rating":9,"Votes":1,"Awards":[]},"211":{"Name":"NPCs Spawn in Bright and Healthy","Author":"Frank Perez (a.k.a. Elysius)","Submitted":20080417,"Updated":20080418,"Category":"Spawning","Type":"Type - Spawning","Format":"Module Only","Patch":"1.12","NWN2Game":"All","Description":"Tired of seeing NPCs walking around injured? Here's a quick fix for that. This is a modified version of the default OnSpawnIn script that makes NPCs spawn in fully rested. Look, Ma, no more wounds.\n\n(Of course, once spawned in, NPCs can still get wounded or killed by normal means, but you probably already knew that.)\n\nThis script only affects run-of-the-mill NPCs, which actually covers most creatures, including chickens and balors. This will not affect companions or any other NPC that does not use the default OnSpawnIn script.\n\nTo use this script, unzip the file Uninjured.zip to \"My Documents\\Neverwinter Nights 2\\override\".\n\nA side effect of this script is that NPCs that are supposed to spawn in already wounded will actually be healed instead. I recall that there were NPCs like this in Icewind Dale 2 and Neverwinter Nights 1, but to the best of my knowledge, none of the NPCs in Neverwinter Nights 2 or Mask of the Betrayer are supposed to be injured upon spawning in.","Rating":10,"Votes":5,"Awards":[]},"212":{"Name":"Creature Summoning Widget v0.24","Author":"pelhikano","Submitted":20080426,"Updated":20080831,"Category":"Scripting routines","Type":"Type - Unique Items","Format":"Module and Code","Patch":"1.13","NWN2Game":"NWN2:MotB","Description":"The Creature Summoning Widget is meant for player use on PWs. I wanted a way to summon interesting looking creatures for roleplaying purposes, but which can not be used for grinding XP. The creatures have their AI disabled and will never fight back when attacked, instead they despawn instantly should they be attacked or damaged. They can not be killed though, since they are set immortal, so there can be no problems from gaining XP by killing them.\n\nThis item creates up to 3 creatures. Creatures can be anything from farm animals to large monsters and undead. First select the summon slot (1-3), and you are then given a menu what to do with that particular summon: destroy it, rename it, resize it, summon another creature in its stead, apply visual effects (more than 1 is possible), and set its follow distance. The creatures do not become members of the summoner's party. It is also possible to let the creatures speak, the summoner will be prompted with an input box.\n\nIf anyone wants to reuse this on their own world or modify it for other purposes, be my guest, I'd appreciate a notice what you did with it.\n\nNew in 0.24:\n- fixed a bug where creatures would not speak any more once a follow command was given\n\nNew in 0.23:\n- Resize and Rename options added\n- Speak now works immediately, no more delay\n","Rating":7.67,"Votes":3,"Awards":[]},"213":{"Name":"Risen Hero Demo Material","Author":"Shaughn","Submitted":20080429,"Updated":20080429,"Category":"Area","Type":"Type - Other","Format":"Module and Code","Patch":"1.12","NWN2Game":"NWN2:MotB","Description":"Risen Hero Demo\n\nThis is a sample of some of the scripting systems and custom content that has been created for the Risen hero Campaign. I am posting it on the vault so that other builders can use modify or improve. I only ask that give credit and if improvements are made let me know so I can take advantage of them.\nThe scripting has been done for a single player campaign and will need to be updated for multiplayer. I created these items to work in Risen Hero and initially had no intent to release them independent, there may be issues with reserved lines in 2das. Also there may be some spoilers I tried to remove as much as possible but be warned.\n\nI would like to thank the many people from the bioware forum who helped with my many questions. Credit is given in scripts. \nIncluded:\n-Risen Hero party relationship system with feats.\n-The Mask of the Betrayer Influence system and rest system\n-Half-Fiend as a NPC and playable character\n-Tintable ice mephit given quasit stats\n\n","Rating":"N/A","Awards":[]},"214":{"Name":"UOACraft v2_01c6 Test Module","Author":"UOAbigail","Submitted":20080430,"Updated":20080430,"Category":"Other","Type":"Type - Other","Format":"Module Only","Patch":"1.00","NWN2Game":"NWN2","Description":"Hail and well met! ;)\n\nThis is simply the development module for UOACraft v2 as promised on the NWN2 scripting forums. There are no .erf files included as this is not yet ready for full release.\n\nDebugging feedback is still enabled for some parts of the system and will be disabled when the system is released.\n\n","Rating":"N/A","Awards":[]},"215":{"Name":"Sunjammer's Conversational Item Scripts","Author":"Sunjammer","Submitted":20080513,"Updated":20100518,"Category":"Scripting routines","Type":"Type - Conversations","Format":"Code Only","Patch":"1.12","NWN2Game":"All","Description":"Sunjammer's Conversational Item Scripts \n13 May 2008\nv1.00 \n\nSunjammer's Conversational Item Scripts address a number issues with the standard item-related conversation conditional and action scripts. These new scripts (where appropriate) are stack-aware, allow the builder to specify the category of targets (PC, PC party members or all party members) and allow the builder to specify the location of items (equipped, inventory or both). \n\nThe set of scripts currently includes:\nsj_ca_create_items (replaces ga_give_item)\nsj_ca_destroy_items (replaces ga_destroy_item)\nsj_ca_take_items (replaces ga_take_item)\nsj_cc_check_items (replaces gc_item_count)\nsj_cc_has_item (replaces gc_check_item)\nsj_cc_has_items\nGetting Started \n\nDownload and unzip the ERF file. With the module you wish to use them in open in the toolset, select the Import option from the File menu and then navigate to the ERF file. Double click on the ERF file (or single click and click Open). If successful a message will appear confirming the number of scripts imported and the scripts will appear in the Scripts panel. \n\nKnown Issues \n\nThere is currently a bug nwscript which means that not all \"acquired item\" and \"lost item\" messages are suppressed when dealing with stackable items. This bug has been reported however until it is fixed players will see some individual messages in addition to the summary message created by these scripts.\n\nI've noticed that the ginc_var_ops library does not support <= or >= comparisons. While this can be overcome by reversing the logic or modifying the quantity, it would be more natural for the builder if these operators were supported.\n\nFurther Information \n\nIf you have any questions, suggestions or constructive comments please let me know here, on the NWN2 Forums, or via my website.\n","Rating":10,"Votes":8,"Awards":[]},"216":{"Name":"onAreaExit Cleanup","Author":"Bar Fubaz","Submitted":20080516,"Updated":20100507,"Category":"Area","Type":"Type - Other","Format":"Code Only","ShowCode":"//:: bar_onareaexit\n//:: On Area Exit script: \n//::  - Cleans up loot bags, encounter creatures, dead creatures \n//::     and hostile creatures when last char leaves the area.\n//::  - Does not kill friendly merchants and NPCs, suitable for\n//::     all areas in most mods.\n//::  - New version introduces delay, players can reenter to \n//::     prevent clean up with in two minutes. \n//::     Requires one placable in area to latch on to.\n//:: Trash object additions:\n//:: From code by: Scott Thorne\n//:: <a target=\"_blank\" href=\"http://nwvault.ign.com/View.php?view=Scripts.Detail&id=1971\">Link</a> \n//:: Modified by: Paul Baines (Bainsy) -2003/04/27\n//:: Modified by: Chris Morris - 2003/04/28\n//:: Modified by: Bar Fubaz - 2008/05/16\n//:: Modified by: Bar Fubaz - 2008/05/20 - Rewrote for DelayedAction\n/*************************************************\n* Modified from simple loot bag elimination to \n*  critter clean up, converted to NWN2 and bugfixes.\n* Added GetIsPC check to TrashObject just in case.\n* Added locking to prevent more than one cleanup \n*  happening at once.\n* Added GetIsPC Check to avoid firing on critter \n*  death.\n* Added delayed action, attached to placable in area\n*  with two minute delay.\n* - Bar\n**************************************************/\nvoid TrashObject(object oItem)\n{\n\tif ( ! GetIsPC(oItem) ) {\n\t    if(GetHasInventory(oItem) == FALSE){\n\t        DestroyObject(oItem);\n\t    }else{\n\t        object oItem2 = GetFirstItemInInventory(oItem);\n\t\n\t        while(GetIsObjectValid(oItem2)){\n\t            TrashObject(oItem2); // Note: Recursion.\n\t            oItem2 = GetNextItemInInventory(oItem);\n\t        }//end while\n\t        DestroyObject(oItem);\n\t    }//end if/else\n\t}\n}//end TrashObject(object oItem)\n\nvoid ActionCleanCheck()\n{\n\t// Log character transition.\n\tPrintString( \"bar_onareaexit: ActionCleanCheck\" ); \n\n\t\t//:: Trash object additions:\n\tint iLock = GetGlobalInt(\"CleanUpLock\");\n\tif ( iLock == 0 ) {\n\t\tSetGlobalInt(\"CleanUpLock\", 1); // Only allows one clean up at a time.\n\t\tPrintString( \"bar_onareaexit: ActionCleanCheck: Inside lock\" ); \n\t\t\n\t\t//declarations\n\t\tobject oArea = GetArea(OBJECT_SELF);\n\t\tint nPCinArea = FALSE;\n\t\tobject oPCIterator = GetFirstPC();\n\t\t\n\t\twhile (GetIsObjectValid(oPCIterator) == TRUE){\n\t        if (GetArea(oPCIterator) == oArea){\n\t              nPCinArea = TRUE;\n\t\t\t\t  break; // We don't actually care how many, just if there is one.\n\t        }\n\t        oPCIterator = GetNextPC();\n\t    }//end while checking for PCinArea\n\t\t\n\t    if (nPCinArea == FALSE){\n\t        object oItem = GetFirstObjectInArea();\n\t\t\tPrintString( \"bar_onareaexit: ActionCleanCheck: Cleaning\" ); \n\t        while(GetIsObjectValid(oItem)){\n\t\t\t\tint iType= GetObjectType(oItem);\n\t\t\t\t// Debug: Explore info on objects and types.\n\t \t\t\t// PrintString( \"bar_onareaexit: \" + GetName(oItem) + \"((\" + GetTag(oItem) + \")): \" + IntToString(iType) ); \n\t          \tif( (iType == OBJECT_TYPE_PLACEABLE && GetTag(oItem) == \"BodyBag\") \n\t\t\t\t\t|| (iType == OBJECT_TYPE_CREATURE && GetIsEncounterCreature(oItem))\n\t\t\t\t\t|| (iType == OBJECT_TYPE_CREATURE && GetIsDead(oItem))\n\t\t\t\t\t|| (iType == OBJECT_TYPE_CREATURE && GetStandardFactionReputation(STANDARD_FACTION_COMMONER, oItem) == 0) ){\n\t\t\t\t\t// Debug: Log trashing\n\t\t\t\t\tPrintString( \"bar_onareaexit: Trashing Object \" + GetName(oItem) + \"((\" + GetTag(oItem) + \")): \" + IntToString(iType) ); \n\t               \tTrashObject(oItem);\n\t            }//end inner if\n\t            oItem = GetNextObjectInArea();\n\t        }//end while\n\t    }//end if PCinArea check\n\t\t\n\t\tSetGlobalInt(\"CleanUpLock\", 0);\n\t}\n}\n\nvoid ActionDelayedCleanCheck(){\n\tPrintString( \"bar_onareaexit: ActionDelayedCleanCheck: Assigning delayed command.\" ); \n\tDelayCommand(120.0, ActionCleanCheck() );\n}\n\n\nvoid main()\n{\n\tobject oPC = GetExitingObject();\n\tobject oArea = GetArea(oPC);\n\t\n\tif ( GetIsPC(oPC) ) { // Make sure is a PC.\n\t\t// Log character transition.\n\t\tPrintString( GetName(oPC) + \"((\" + GetPCPlayerName(oPC) + \")) exiting area \" + GetName(OBJECT_SELF) ); \n\t\t\n\t\t// Hackery: Grab an object to hang the action on... \n\t\t// - Area would have been best but seems not to work.\n\t\t// - PC may not be around if he's quitting the mod.\n\t\tobject oItem = GetFirstObjectInArea();\n\t    while(GetIsObjectValid(oItem)){\n\t\t\tint iType= GetObjectType(oItem);\n\t\t\tif ( iType == OBJECT_TYPE_PLACEABLE && GetTag(oItem) != \"BodyBag\" )\n\t\t\t\tbreak;\n\t        oItem = GetNextObjectInArea();\n\t    }//end while\n\t\tif ( GetIsObjectValid(oItem) ) {\n\t\t\tAssignCommand(oItem, ClearAllActions()); // clear any queued clean up actions.\n\t\t\tAssignCommand(oItem, ActionDelayedCleanCheck());\n\t\t} else {\n\t\t\tPrintString( \"bar_onareaexit: WARNING: No placable objects to assign a command to.\" ); \t\n\t\t}\n\t}\n}\nSelect All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"bar_onareaexit\nOn Area Exit script: \n- Cleans up loot bags, encounter creatures, dead creatures and hostile creatures when last char leaves the area.\n- Does not kill friendly merchants and NPCs, suitable for all areas in most mods.\n- New revision introduces delay, players can reenter to prevent clean up with in two minutes. Requires one placable in area to latch on to.\n- Old revision seemed to fire a bit too often. In practice did in fact clean up when players where in the area.","Rating":9.06,"Votes":6,"Awards":[]},"217":{"Name":"Grave Spawns Zombie","Author":"shannonjoeker","Submitted":20080519,"Updated":20080520,"Category":"Spawning","Type":"Type - Spawning","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"Placeable grave with simple script to spawn zombie when grave is opened. Made with Lilac Soul's script Genereator.","Rating":"N/A","Awards":[]},"218":{"Name":"Random Placeable Scrolls","Author":"shannonjoeker","Submitted":20080519,"Updated":20080520,"Category":"Area","Type":"Type - Placeables","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"Placeable scrolls with random loot generation. 15 placeable scrolls that randomly generate a different scroll each time. They disappear when you pick them up. \nMade with lilac Soul's Script Generator, and using schatten9's destroyself script. (I know how to make that script myself, but I like schatten9's descriptive title for it, so I just keep using that one.)","Rating":9,"Votes":1,"Awards":[]},"219":{"Name":"Lootable Skeletons","Author":"shannonjoeker","Submitted":20080519,"Updated":20080520,"Category":"Placeable Item","Type":"Type - Placeables","Format":"Module Only","Patch":"1.00","NWN2Game":"NWN2:MotB","Description":"Lootable Skeletons with random treasure. Simple placeables made with scripts and placeable skeletons already existing in the toolset. (One of them made with my own random scroll script.) random scroll script made with Lilac Soul's script generator.","Rating":"N/A","Awards":[]},"220":{"Name":"OC Silver Sword for new classes","Author":"Gess422","Submitted":20080521,"Updated":20080522,"Category":"Scripting routines","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.12","NWN2Game":"All","Description":"Want to play the OC as a Favored Soul or Spirit Shaman? If you do or have you'll find yourself stuck with the Barbarians version of the Silver Sword of Gith(extra rage and all)when you finaly forge it. Kind of a let down IMO.\n\nWARNING SPOILERS AHEAD:\n\nThis script changes the the swords stats to the same as a cleric when you play a FS or SS.\n\nWis +3, Con +2\nImmunity: Death Magic\n+4 Enhancement Bonus\nSlay Undead on Hit DC 18\n\nNice stats for either class. However, I did this by changing the barbarians sword stats because thats what the sword defaults to when it dosn't detect one of the original classes. \n\nSo, put it in your overide folder if playing a FS or SS in the OC, and take it out when playing barbarian's. It won't matter either way with other classes nor will it affect MotB at all. MotB has its own script for the sword.","Rating":8.17,"Votes":3,"Awards":[]},"221":{"Name":"Sunjammer's Conversational Visual Effect Scripts","Author":"Sunjammer","Submitted":20080527,"Updated":20080528,"Category":"Scripting routines","Type":"Type - Conversations","Format":"Code Only","Patch":"1.12","NWN2Game":"All","Description":"Sunjammer's Conversational Visual Effect Scripts \n28 May 2008\nv1.01 \n\nSunjammer's Conversational Visual Effect Scripts are a pair of conversation action scripts which greatly simplify applying or removing almost any Area of Effect (AOE), Special Effect (SEF) and Visual Effect (VFX) to or from any object. Almost all aspects of the process are automatically handled for the user allowing them to focus on what object to affect, what effect to apply and for how long.\n\nThis set of script currently includes:\nsj_ca_apply_visual_effect\nsj_ca_remove_visual_effect \nGetting Started \n\nDownload and unzip the ERF file. With the module you wish to use them in open in the toolset, select the Import option from the File menu and then navigate to the ERF file. Double click on the ERF file (or single click and click Open). If successful a message will appear confirming the number of scripts imported and the scripts will appear in the Scripts panel. \n\nEach script has detailed header comments providing details on each of the parameters and notes on usage or any known issues.\n\nKnown Issues\n\nUnfortunately appear to be issues rendering the SEF and VFX projectile effects so don't expect much from these.\n\nFurther Information \n\nIf you have any questions, suggestions or constructive comments please let me know here, on the NWN2 Forums, or via my website.\n","Rating":10,"Votes":2,"Awards":[]},"222":{"Name":"Recharge Item","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20080628,"Updated":20110107,"Category":"Scripting routines","Type":"Type - Magic","Format":"Code Only","ShowCode":"// i_rechargeItem_ci\n// by Brendan Bellina\n// June 2008\n\n// OnCastSpellAt handler for rechargeItem\n// This script is executed automatically when a spell is cast at the item\n// To trigger properly the name of the script MUST be \"i_\" + itemtag + \"_ci\"\n\n// Regulates item recharging (based in part on OC script i_nw_wmgst003_ci)\n\n// Local variable Maximum_Charges can be used to limit the number of charges. If set\n// to 0 or not set then the default maximum is 20. If set to -1 then there is no\n// maximum. If set greater than 0 then that is the maximum.\n\nvoid main()\n{\n\n\tobject oItem = GetSpellTargetObject();\n\tint nCurrentCharges = GetItemCharges(oItem);\n\tint nDefaultMaxCharges = 20; // default max charges if local int Maximum_Charges not > 0\n\tint nMaximumCharges = GetLocalInt(oItem, \"Maximum_Charges\");\n\tif (nMaximumCharges == 0)\n\t\tnMaximumCharges = nDefaultMaxCharges;\n\n\tif (nMaximumCharges == -1 || nCurrentCharges < nMaximumCharges)\n\t{\n\t\tint nSpell2DARowNum = GetSpellId();\n\t\tint nSpellLevel = StringToInt(Get2DAString(\"spells\", \"Wiz_Sorc\", nSpell2DARowNum));\n\t\n\t\tif (nSpellLevel == 0)\n\t\t{\n\t\t\tnSpellLevel = StringToInt(Get2DAString(\"spells\", \"Innate\", nSpell2DARowNum));\n\t\t}\n\t\tif (nMaximumCharges != -1 && nCurrentCharges + nSpellLevel > nMaximumCharges)\n\t\t\tSetItemCharges(oItem, nMaximumCharges);\n\t\telse\t\n\t\t\tSetItemCharges(oItem, nCurrentCharges + nSpellLevel);\t\t\t\n\t}\t\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"Script to allow any item with charges to be recharged by casting spells upon the item. Default setting is a maximum of 20 charges, and a local variable on the item can be used to set a different maximum or have no maximum.\n\nTo use with the OC just copy the NCS file into the \\My Documents\\Neverwinter Nights 2\\Override folder (or equivalent) and rename the center of the file name to be the item tag you want be rechargeable.\n\nFor example, to make Wands of Fire rechargeable, copy the i_rechargeItem_ci.NCS into the Override folder and rename it i_NW_WMGWN002_ci.NCS","Rating":"N/A","Awards":[]},"223":{"Name":"Require Minimum Level","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20080628,"Updated":20091120,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","ShowCode":"// by Brendan Bellina\n// May, 2008\n\n// This is a template script to be used when an item has a minimum level requirement in\n// order to be equipped.  For each item copy this script, name it accordingly, and modify the constants.\n\n// To trigger properly the name of the script MUST be \"i_\" + itemtag + \"_eq\"\n\n#include \"ginc_debug\"\n#include \"ginc_item_script\"\n\n// Constants - modify these as appropriate to the item\nconst int cMINREQLVL = 1;  // Set to minimum level requirement to equip item\nconst int cUSENAME = 1; // Set to 1 to use the name in the message, 0 to not\n\nvoid main()\n{\n\tobject oItem = GetPCItemLastEquipped();\n//\tPrettyDebug(\"i_\" + GetTag(oItem) + \"_eq\");\n\tobject oEquippedBy = GetPCItemLastEquippedBy();\n\tstring sItemName = GetName(oItem);\n\t\n\tstring sSpeakText = \"I lack the experience to use \";\n\tif (sItemName == \"\" || !cUSENAME) // if no item name or not supposed to use the name\n\t{\n\t\tsSpeakText += \"this item.\";\n\t}\n\telse\n\t{\n\t\tsSpeakText += \"the \" + sItemName + \".\";\n\t}\n\n\tint nXP = GetXP(oEquippedBy);\n\tint nMinXP = ((cMINREQLVL * (cMINREQLVL - 1)) / 2) * 1000;\n\tif (nXP < nMinXP)\n\t{\n\t\tAssignCommand(oEquippedBy, ActionUnequipItem(oItem));\n\t\tAssignCommand(oEquippedBy, ActionSpeakString(\"I lack the experience to use this item.\"));\n\t}\n}Select All Text | View Code in separate window","Patch":"1.12","NWN2Game":"All","Description":"This is a template tag-based On Equip script that checks for a minimum experience level in order to successfully equip the item. To use the script, name it i_tag_eq where tag is replaced with the tag of the item and set the constant cMINREQLVL to the minimum level required and cUSENAME to 1 to have the name of the item displayed in the message. Then compile.\n\nBecause the script does not rely upon item local variables it can be used with any items in the game that do not already have an On Equip script.","Rating":"N/A","Awards":[]},"225":{"Name":"Wyrin's Foraging system","Author":"Wyrin","Submitted":20080805,"Updated":20090218,"Category":"Other","Forum Thread":"Link","Type":"Type - Other","Format":"Module and Code","ShowCode":"void main()\n{\nobject oPC = GetLastUsedBy();\nAssignCommand(oPC, ActionPlayAnimation(ANIMATION_LOOPING_GET_LOW, 1.0f, 1.0f));\nint iSurvival = GetLocalInt(OBJECT_SELF, \"iSurvival\");\nif (iSurvival == 0)\n\tiSurvival = 15;\nint iAlchemy = GetLocalInt(OBJECT_SELF, \"iAlchemy\");\nif (iAlchemy == 0)\n\tiAlchemy = 15;\nint iStack = 1;\nstring sForage = GetLocalString(OBJECT_SELF, \"sForage\");\nstring sProduce = GetLocalString(OBJECT_SELF, \"sProduce\");\nif (sProduce == \"produce_reeds\")\n\t{\n\tiStack = 10;\n\t}\n\t\nif (GetIsSkillSuccessful(oPC, SKILL_SURVIVAL, iSurvival) && GetIsSkillSuccessful(oPC, SKILL_CRAFT_ALCHEMY, iAlchemy))\n\t\t{\n\t\tCreateItemOnObject(sProduce, oPC, iStack);\n\t\tSendMessageToPC(oPC, \"You successfully forage the \" + sForage);\n\t\tFloatingTextStringOnCreature(\"These \" + sForage + \" should come in useful!\", oPC);\n\t\tGiveXPToCreature(oPC, 30);\n\t\tPlaySound(\"as_na_leafmove3\");\n\t\t}\nelse\n\t{\n\tSendMessageToPC(oPC, \"You fail to gather the \" + sForage + \" correctly and the plant is wasted\");\n\tFloatingTextStringOnCreature(\"Curses! I'll have to find another source!\", oPC);\n\t}\n\t\nDestroyObject(OBJECT_SELF, 0.5);\t\n}Select All Text | View Code in separate window","Patch":"1.10","NWN2Game":"NWN2:MotB","Description":"29 plants that can be foraged to produce useful items. This system uses both Craft(Alchemy) and Survival checks in differing ratios, depending on the plant and the product.\ne.g. Kelp (seaweed) can be gathered into an impromptu tanglefoot bag with sufficient survival skill, and little knowledge of alchemy. Distilling Brown molds to produce an oil that can be smeared on your weapon requires more alcehmical skill\n\nNote: Molds/slimes are trapped to replicate their effects, and simuate the use of disable device in finding ways to avoid being caught out.\n\nFiles include placeables for use in your areas, and the items and scripts required for the system\n\n\nThe system is easily adaptable using the variables attached to objects and the base foraging script, and more can easily be added.\n\nSee text file for list of plants and their products. Note - some are from FR/D&D lore, but many activities are from European folklore","Rating":9.83,"Votes":8,"Awards":["Best Other Custom Content Nominee 2008"]},"227":{"Name":"Icequeen's Random Jump System","Author":"Icequeen6769","Submitted":20080815,"Updated":20081027,"Category":"Other","Type":"Type - Portals","Format":"Code Only","Patch":"1.13","NWN2Game":"All","Description":"Random Jump System (RJS) randomly generates destinations to \"Jump\" PCs to. RJS is designed to handle a quasi-infinite (restricted only by string-length cap) number of \"portals\" & waypoints. \"Portals\" can be any placeable object the builder chooses to use.\nInstructions are in the script file.\n\nThis system is used in the \"Alpha and Omega\" module featured on the \"Abeir-Toril_inthebeginning\" Server (more info @ Link )","Rating":8.5,"Votes":1,"Awards":[]},"228":{"Name":"Easy Weather System/ Sistema de Tiempo Atmosferico Facil v.01","Author":"luckybastardo","Submitted":20080815,"Updated":20080816,"Category":"Scripting routines","Type":"Type - Effects","Format":"Code Only","ShowCode":"//PB2_clima\n////////////////////////////////////////////////////////\n//\n// Determina el clima de area por variables\n// Set Weather trought variables\n// Creado por:luckybastardo\n////////////////////////////////////////////////////////\n\n// Variable - Tipo_Tiempo - int\n// 1-4 = Despejado/Clear\n// 5-7 = Llueve/Rain\n// 8 = Rayo/Lighting\n// 9-10 = Nieve/Snow\n//\n// Variable - Tipo_Fuerza - int\n// 0 = Sin fuerza/No power\n// 1 = Debil/Weak\n// 2 = Leve/Light\n// 3 = Medio/Medium\n// 4 = Fuerte/Heavy\n// 5 = Tormentoso/Stormy\n//\n\nvoid main()\n{\nint iHora = GetTimeHour();\nint iMes = GetCalendarMonth ();\nobject oPC = GetEnteringObject();\nobject oArea = GetArea(oPC);\nint iHoraAnterior = GetLocalInt (oArea,\"Tiempo_de_area\");\n\nif (iHora>iHoraAnterior)\n{\nSetLocalInt(oArea,\"Tiempo_de_area\", iHora);\nint iTiempo = d10 (1);\nint iFuerza = d6 (1);\n\nif (iMes==12 || iMes==1 || iMes==2) //inverno/winter\n{\niTiempo = iTiempo + 2;\nif (iTiempo>10)\n{\niTiempo = 10;\n}\n}\nif (iMes==3 || iMes==4 || iMes==5) //primavera/spring\n{\niTiempo = iTiempo - 1;\nif (iTiempo<1)\n{\niTiempo = 1;\n}\n}\nif (iMes==6 || iMes==7 || iMes==8) //verano/summer\n{\niTiempo = iTiempo - 2;\nif (iTiempo<1)\n{\niTiempo = 1;\n}\n}\nif (iMes==9 || iMes==10 || iMes==11) //otono/autom\n{\niTiempo = iTiempo + 1;\nif (iTiempo>10)\n{\niTiempo = 10;\n}\n}\n\n\nswitch ( iTiempo )\n{\ncase [url]1://[/url] Despejado/Clear\n\nbreak;\ncase [url]2://[/url] Despejado/Clear\n\nbreak;\ncase [url]3://[/url] Despejado/Clear\n\nbreak;\ncase [url]4://[/url] Despejado/Clear\n\nbreak;\ncase 5: // LLuvia/Rain\niTiempo = WEATHER_TYPE_RAIN;\nbreak;\ncase 6: // LLuvia/Rain\niTiempo = WEATHER_TYPE_RAIN;\nbreak;\ncase 7: // LLuvia /Rain\niTiempo = WEATHER_TYPE_RAIN;\nbreak;\ncase 8: // Rayo/Lighting\niTiempo = WEATHER_TYPE_LIGHTNING;\nbreak;\ncase 9: // Nieve/Snow\niTiempo = WEATHER_TYPE_SNOW;\nbreak;\ncase 10: // Nieve/Snow\niTiempo = WEATHER_TYPE_SNOW;\nbreak;\n}\n\nswitch ( iFuerza )\n{\ncase 1:\niFuerza = WEATHER_POWER_OFF;\nbreak;\ncase 2:\niFuerza = WEATHER_POWER_WEAK;\nbreak;\ncase 3:\niFuerza = WEATHER_POWER_LIGHT;\nbreak;\ncase 4:\niFuerza = WEATHER_POWER_MEDIUM;\nbreak;\ncase 5:\niFuerza = WEATHER_POWER_HEAVY;\nbreak;\ncase 6:\niFuerza = WEATHER_POWER_STORMY;\nbreak;\n}\n\nSetWeather(OBJECT_SELF, iTiempo, iFuerza);\n}\n}Select All Text | View Code in separate window","Patch":"1.13","NWN2Game":"NWN2:MotB","Description":"An easy method to change an area´s weather.\n\nThis script is OnEnter event, gives a chance to change area´s weather every hour.\n\nCheck month of the year and add penality or bonus (from clear to snow).\n\nI recommend to put one for a few areas examples: \n\n-In a city only on the enter access to city, other areas would be referr to main access city area.\n\n- Traveling trought a few areas y recomended to put this event on a middle situated area.\n\nI sugesst to check time and strong varibles for resting, elemental damage and so on.\n\n// When admins give the approval i translate notes to english.","Rating":9.33,"Votes":3,"Awards":[]},"229":{"Name":"Merchant's Friend Feat For OC","Author":"wormwood811","Submitted":20080821,"Updated":20080823,"Category":"Skill/Feats","Type":"Type - Other","Format":"Code Only","Patch":"1.13","NWN2Game":"NWN2","Description":"This override gives the Merchant's Friend feat to characters starting the OC. I believe this feat was a pre-order bonus so you may not need this if you pre-ordered.\n\nTo install, unzip to My Documents\\Neverwinter Nights 2\\override","Rating":9.75,"Votes":1,"Awards":[]},"230":{"Name":"Charlie's Appearance Changer Expansion Patch","Author":"Jake Zahn","Submitted":20080822,"Updated":20101201,"Category":"Scripting routines","Type":"Type - Appearance","Format":"Module Only","Patch":"1.13","NWN2Game":"NWN2:MotB","Description":"This is a Patch to add additional template options to Charlie's Appearance Changer. \n\nThe first version just adds Antenni's Lineage Arms and Armor Mod as additional options.\n\nYou will need both original Mods in your override folder for it to work correctly.\n\nIt adds the following number of additional templates:\n\n8 Bastard Swords\n1 Battleaxe\n8 Boots\n6 Cloaks\n2 Clothes\n4 Fullplates\n1 Greataxe\n6 Greatswords\n1 Halfplate\n2 Heavy Shields\n3 Helms\n4 Katanas\n2 Longbows\n2 Mithral Fullplates\n6 Quarterstaves\n4 Rapiers\n1 Scalemail\n3 Scythes\n3 Shortswords\n1 Spear\n2 Warhammers\n\nThe second version integrates several other Weapons and Armor Mods in addition to Antenni's; Adonnay's Elven Weaponry, Aleanne's Female Armor (P1, P2, P3A, P3B, P4), Aribeth and Valsharess' Armor, Doom Bringer & Storm Bringer, Elemental Weapons, Hatsplosion, Lineage Shields, Purple Crystal Sword, Sword of Aeons & Avo's Tear, and Weapons of Legacy.\n\nYou don't need every one of those Mods in your override folder for this to work, but it will likely cause texture/model not found errors to pop up whenever you scroll to an option that references a Mod you're missing.\n\nHaving all the above Mods installed adds the following number of additional templates:\n\n18 Bastard Swords\n1 Battleaxe\n8 Boots\n2 Breastplates\n6 Chainmails\n2 Chainshirts\n6 Cloaks\n34 Clothes\n1 Club\n6 Daggers\n8 Falchions\n4 Fullplates\n3 Greataxes\n27 Greatswords\n2 Halberds\n1 Halfplate\n2 Heavy Shields\n10 Helms\n1 Hide\n15 Katanas\n4 Leather\n2 Light Shields\n10 Longbows\n5 Longswords\n1 Mithral Breastplate\n3 Mithral Fullplates\n1 Padded\n6 Quarterstaves\n4 Rapiers\n1 Scalemail\n8 Scimitars\n4 Scythes\n16 Shortswords\n1 Spear\n1 Studded Leather\n3 Tower Shields\n3 Warhammers\n\nAll new options appear at the end of the list (AKA: the highest numbers). It may take them a few seconds to appear.\n\nI also expanded the GetArmorType code to include Obsidian's default Masterwork ArmorRulesStats lines, as well as the Rebalanced TCC lines, while I was in there.","Rating":9.66,"Votes":25,"Awards":["Hall of Fame"]},"231":{"Name":"Persistant Player Owned Shop System v2.5","Author":"Rami_Ahmed","Submitted":20080827,"Updated":20081025,"Category":"Inventory Item","Forum Thread":"Link","Type":"Type - Merchant","Format":"Module and Code","Patch":"1.13","NWN2Game":"All","Description":"Buy a shop from the goverment, sell your own items to other players and sell the shop again!\n\n* Fully persistent.\n* Very easy to set up.\n* Very player friendly, easy to use.\n* With salesmen, need them to sell your stuff.\n* With easy storage system.\n* Comes with small Demo Module.\n\nNWN1 version: link. \n\nInitial Release: 27/08/08 (v2.1)\n- Converted from NWN1 version.\n\nMajor update: 07/09/08 (v2.5)\n- No longer uses the EDS (Enhanced Delay System), you can therefore delete the three eds_ files, if updating from earlier version.\n- Fixed different issues with salesmen not appearing or not being deleted when fired.\n- Changed the way salesman wage works.\n- Centralized all script texting in one great script, making it very much easier to translate to other languages.\n\nMinor Update: 25/10/08 (v2.5b)\n- Fixed shop vault \"unlimit gold\" bug.\n- Added so that DMs can make the shop return to the government.\n\nThis system is aimed for roleplaying modules, to add some fun to the players.\nThe players can buy a shop (which you'll have to make yourself, visually). The owner of the shop can place items in a chest (which is spawned from the sign only when needed), the owner will need to hire a salesman to sell his/her items. The salesman will sell the players items from the chest (The buyer can choose which store to view, now the player can have 2 stores from same shop), the salesman will also demand salary. The player will earn gold when other players buy his/her items from the shop, and the shop can buy items if the player has put gold into the shop vault. The shop can be sold to other players as well.\nThere can be unlimited shops througout the module - as long as they each have their own area.\n\nAll settings are set in the ModuleLoad script: shop_mod_load.\n\nAlways remember to \"Compile\" your module after importing anything.\n\n: Critical Note :\nMight not work on Linux machines, because of a bug in a function used by this system to clean up!\n\n.: Important note :.\nYou can only have 1 shop per area. And the area must have a module wide unique tag.\n\nIf you are experiencing problems, please post them here or send me an email on: Rami_Ahmed00@hotmail.com.\n\nI wish anyone using this package - Good luck.","Rating":9.81,"Votes":4,"Awards":[]},"232":{"Name":"NPC Conversation Triggers v1.01","Author":"MikeLM9215","Submitted":20080830,"Updated":20080907,"Category":"Area","Type":"Type - Henchmen","Format":"Module Only","Patch":"1.13","NWN2Game":"All","Description":"While trying to create a short module for NWN2, I realized I needed to have henchmen with conversation opportunities to fill in the empty areas of the module. Taking an NPC directly from NWN1, I found that most of the scripts were missing, and those that remained didn't work. The five triggers in NWN2 didn't work either. So I made a system for getting the same conversation types from the NPC. What I couldn't get was NPCs talking to eah other without the PC being part of the conversation.\n\nThe scripts are in an erf file and the six different types can be tried out in the demo module of one area. In the module the bones and carcass represent the center of the triggers. The carcass is for the party conversation between the three of you.\n\nThere are 6 trigger blueprints for party (NPC to NPC), one-liner random, one-liner set, conversation random, conversation set and advice random. Since the KEY TAG no longer exists on triggers to let the trigger keep track of what number the non-random line is, I have put a variable on the two non-random triggers. This variable must be changed to the line number you want spoken. I'm not exactly sure how advice and conversations would be different, but they had scripts in NWN1, so I made them.\n\nThere are 6 trigger scripts. Four of them are random. These scripts have 5 or 6 nodes to point to. Change the number to fit your module.\n\nThere are four scripts to return conversation variables to 0 so the line won't come up again during normal conversation. Conversations should be non-interruptible as the variable for the conversation will remain if the conversation ends prematurely.\n\nThere are 5 random conversation, 10 advice, 12 interjection, 12 one-liner, 10 party and 5 random one-liner scripts to use in conversations. If you duplicate them to get more nodes, remember to change the variables to match the script number.\n\nv1.01 - One script had the wrong information. Corrected now.","Rating":"N/A","Awards":[]},"233":{"Name":"Icequeen's Blue-Light Body Bag Fixer","Author":"Icequeen6769","Submitted":20080904,"Updated":20081027,"Category":"Death","Type":"Type - Other","Format":"Code Only","ShowCode":"To use this with your own custom creature spawn-in script, click \"no\" when it asks to overwrite nw_c2_default9.\n--------------------\nTo add a custom spawn-in script without changing the default handlers (strongly recommended, as the default9 script sets many variables that effect NPC behavior), do not overwrite nw_c2_default9, and add this code to your Module On-Load handler (replacing \"My_Spawn_In_Script\" with the name of your custom spawn-in script):\n\nSetGlobalString(\"N2_SCRIPT_SPAWN_CREATURE\",\"My_Spawn_in_Script\");\n\nThen, if you do not have another DeathScript already defined in your On-Spawn script, add this code to your On-Spawn script:\n\nSetLocalString(OBJECT_SELF,\"DeathScript\",\"iq_bb_death\");\n\n-------------------\nTo add this to an existing customized DeathScript, have your custom DeathScript \"call\" iq_bb_death with this code:\n\nExecuteScript(\"iq_bb_death\",OBJECT_SELF);\nSelect All Text | View Code in separate window","Patch":"1.13","NWN2Game":"All","Description":"Hate that leftover VFX blue \"glow\" left behind by unlooted body bags? Don't want to depend on an area being devoid of PCs in order to run an effective area-sweeper? Want them unlooted body bags to go away faster than an hour? This scriptset may be for you!\nWhat this scriptset does:\n 1) sets up a timed destruction (set to ten minutes as a default, but can be changed by builder) of body bags.\n 2) kills the \"blue light special\" VFX left behind by unopened bodybags.\n 3) destroys body bags independantly (each body bag gets ten minutes).\nWhat this scriptset does NOT do:\n 1) Area sweep - this will not \"cleanse\" an area; it is designed specifically to deal with body bags.\n","Rating":8.92,"Votes":3,"Awards":[]},"234":{"Name":"Real time spells for Reeron's spell fixes","Author":"Lofgren","Submitted":20080907,"Updated":20081221,"Category":"Spells","Type":"Type - Magic","Format":"Code Only","Patch":"1.12","NWN2Game":"NWN2:MotB","Description":"This is now out of date. There are no plans to update it.\n\nFollowing a conversation at the official forums, I decided to make this override as an experiment. This takes Reeron's spell fixes one step closer to PnP by making all hour/level durations spells last 1 hour per level real time, regardless of the timescale of the module you are playing. It probably isn't of interest to anybody who doesn't put strict rest restrictions on themselves.\n\nIt is designed using the folder structure of Reeron's PnP spell fixes 5.03, which means that you should be able to drag the contents into your reeron folder and overwrite only those few spells of his that need to be overwritten.\n\nAlthough this was written with Reeron's fixes, there should be no harm in using it without his other fixes. However, bare in mind that some spells, such as Barkskin, will function as they do in PnP rather than as the in-game description states, and some spells that were changed by Reeron from hour durations to minute durations will not be affected.\n\n24 hour spells also last 24 real time hours.\n\nOther than The Dead Walk, no warlock invocations have been changed, as warlocks have infinite casts and therefore are less sensitive to prematurely fading buffs.\n\nI'm sure I must have missed a few spells along the line. Let me know in the comments and I will include them in a future version.","Rating":"N/A","Awards":[]},"235":{"Name":"KEMO Custom Chairs","Author":"KEMO","Submitted":20080921,"Updated":20090816,"Category":"Scripting routines","Type":"Type - Sitting","Format":"Module and Code","Patch":"1.22","NWN2Game":"All","Description":"KEMO Chairs is a selection of placeables with attached scripts and animations that allow all major races to sit naturally in a variety of positions, with little to no adjustment by PW developers. KEMO Chairs is intended to be used in persistent worlds. Features include:\n\n* 9 chairs plus variants, 5 benches, 1 booth and 1 sofa\n* 1,578 new animations/poses across all major races\n* at least 6 sitting positions for each chair, for humans, drow, elves, halflings and half-elves\n* 1 sitting position for each chair, for gnomes, half-orcs and dwarves\n* at least 9 positions for each bench, for humans, drow, elves, halflings and half-elves (9 for males, 10 for females)\n* poses selected via a conversation triggered when a PC clicks on a chair\n* PCs can turn chairs in place before sitting\n* PCs can resize themselves to perfectly fit a chair if the PC is not \"normal\" height, then size back to their natural height after standing\n* works around the PW \"feature\" where PCs entering an area cannot see the poses of other PCs who are already sitting down; players no longer have to re-sit every time someone new walks into the tavern\n* PCs use armrests when available\n* most PC races can lie down on benches\n* most PC races can sit in three different places on every bench, allowing up to 3 PCs on a bench at one time without the need to add invisible placeables (Collision must be turned OFF for this to work)\n* other chairs, crates, etc. can be adapted to work with KEMO Chairs by sizing the placeable to match one of the existing chairs and re-tagging the placeable to match that chair\n\nKEMO Chairs does not require different races to use different chairs: halflings can sit on high chairs with their legs dangling down, half-orcs can sit on low chairs with their knees raised up. KEMO Chairs does not alter the size or shape of any chairs on the fly, so they are not left looking too large or too small once the PC has moved away.\n\nTo implement:\n\n* Attach the kemo_chairanims.hak HAK file to your module.\n* Import the conversation, scripts and placeables from the ERF file.\n* Add (or replace) one or more chairs from the new KEMO Chairs placeable category.\n* Bake and serve.\n\nUPDATE 9/28/08 (version 1.01):\n* added Viconius's solution to DM-controlled NPCs not interacting with chairs; uploaded a new ERF file\n* the demo module is not updated; import the new ERF into the demo module to test the updated kemo_chair script\n\nUPDATE 9/29/08 (version 1.10):\n* incorporated GrinningFool's suggestion for foolproofing and improving the efficiency of the loop script; now the loop script is attached to a temporary invisible object as a 12-second heartbeat\n* the \"refresh\" is now faster (12 seconds instead of 48)\n* resized PCs automatically revert to their natural height after they leave the chair (at the next heartbeat)\n\nUPDATE 10/01/08 (version 1.11):\n* squashed a bug where normal-height characters would go to 0.0 height after leaving a chair, accidentally introduced in the previous update\n* made placeable names (not tags) generic: \"chair\", \"bench\", etc.\n\nUPDATE 10/06/08 (version 1.12):\n* removed the kemo_repeat script, which wasn't compiling because it doesn't actually belong in the ERF!\n\nUPDATE 10/19/08 (version 1.20):\n* SetCollision permits an exploit where PCs can walk through locked interior doors (bad Obsidian! no biscuit)\n* SetCollision is now explicitly switched on/off by KEMO Chairs so that it does not have to be a manual button\n\nUPDATE 10/19/08-b (version 1.21):\n* fixed a server crashing bug when SetCollision tries to operate on a PC who has logged out since the last heartbeat\n\nUPDATE 11/14/08 (version 1.3):\n* Added a Portable Stool item: activate the Portable Stool and it creates a stool (chair 4A) in the PC's location (and removes the item from inventory). The portable stool's conversation has an additional option: pick up the stool, which destroys the stool and puts the Portable Stool item in inventory. New ERF and Demo.\n\nUPDATE 12/19/08 (version 1.40):\n* now compatible with SoZ races\n* does not require SoZ\n* no new animations yet, which means that the gray orcs (shorter than half-orcs) will sit a bit low in the chairs until I have time to build a new set of animations for them\n\nUPDATE 12/20/08:\n* added a supplemental ERF containing new sittable objects, based on existing animations, as examples of what can be done\n\nUPDATE 1/1/09 (version 1.42):\n* for some reason the SetCollision() check got lost in the last update; it's been restored, so that logged out PCs won't crash servers.\n* improved resizing code so that all 3 dimensions are resized (though the scripts only check against height)\n\nUPDATE 3/11/09 (version 1.50):\n* converted the conversation to a GUI panel\n* fixed a bug where the invisible heartbeat object was not being deleted when a player logged out while still seated\nUPDATE 3/12/09 (version 1.51):\n* the script gui_kemo_resizepc should be named gui_kemo_resize; fixed in the ERF; builders can simply rename and recompile the script and don't have to download the ERF again\n* 1.22-ready\n\nUPDATE 4/4/09 (version 1.52):\n* fixed a reintroduced error with the resizing code; normal-sized PCs should not go flat if the player hits the resize button","Rating":9.99,"Votes":50,"Awards":["Hall of Fame","Best Other Custom Content Nominee 2008"]},"236":{"Name":"Torch needs oil","Author":"PRJ","Submitted":20080926,"Updated":20080927,"Category":"Inventory Item","Type":"Type - Lights (Subtype - Other)","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"This erf contains two scripts and one item (oil).\nWhen you equip a torch it will only work if you have oil and only for a limited amount of time.\n\nInstructions:\nImport the erf to your module.\nPut equip_item in the \"player equip item script\" slot (in module proporties).\nMake sure that oil is available in game.\nYou can adjust how long one flask of oil lasts in the script equip_item (default is 15 real minutes).","Rating":8.75,"Votes":1,"Awards":[]},"237":{"Name":"KEMO Jukebox","Author":"KEMO","Submitted":20081003,"Updated":20090404,"Category":"Scripting routines","Type":"Type - Sounds","Format":"Module and Code","Patch":"1.22","NWN2Game":"NWN2","Description":"KEMO Jukebox is a simple background music changer. It takes the form of a placeable (\"magic music box\") with an attached conversation.\n\nUp to 6 tracks can be queued at one time, and the jukebox will step through them on a 3 minute heartbeat. Players can add to the queue (if it is not full) and check the list of currently queued tracks. If there is only one track in the queue, it will play continuously without interruption.\n\nThe pieces are standard, tavern-friendly NWN/NWN2 background music.\n\nThe current version of the Jukebox is very simple. Additional features (like charging gold for adding to the queue, including a custom animation for \"activating\" the jukebox, etc., options for changing the heartbeat [i.e., song length]) may be added in future versions.\n\nThe demo module is a small area containing just the jukebox, with the starting music set to Tavern 1.\n\n*1.22-ready","Rating":9.92,"Votes":8,"Awards":[]},"238":{"Name":"Sequencer Robes","Author":"Pelador","Submitted":20081004,"Updated":20081004,"Category":"Inventory Item","Type":"Type - Other","Format":"Code Only","Patch":"1.13","NWN2Game":"NWN2:MotB","Description":"This development was done for Dragoncoat: Shores of Haldun.\n\nThe Robe can be used to ready up to 3 defensive spells on it such then when struck it will automatically fire the prepared spells as a defence. If you wish to reset the robe you need to cast either greater dispelling or Mordenkainen's Disjunction on it though it automatically resets when it's use is applied. It has no properties other than restriction to wizards and sorcerers.\n\nIt maintains a status on it to reduce impact due to on-hit trigger invents which should hopefully be minimal for mage classes in comparison with others.\n\nFile is .erf of item and related scripts.","Rating":"N/A","Awards":[]},"239":{"Name":"vidalete's Time Stop Spell Script PW","Author":"vidalete","Submitted":20081020,"Updated":20081020,"Category":"Spells","Type":"Type - New Spells","Format":"Code Only","ShowCode":"#include \"x2_inc_spellhook\" \nvoid FreezesAllCreatures(object oArea, float fDuration);\nvoid main(){\nif (!X2PreSpellCastCode()){\n\t// If code within the PreSpellCastHook (i.e. UMD) reports FALSE, do not run this spell\n        return;\n}\n//Round Duration\nfloat fDuration = RoundsToSeconds(d4(1)+1);\nlocation lSpell = GetSpellTargetLocation();\n//Aplicable in all areas or only the area where the caster casts the spell?\nint iAllAreas = TRUE;\nobject oArea = GetFirstArea();\nif (iAllAreas == FALSE) oArea = GetArea(OBJECT_SELF);\neffect eTimeStop = EffectVisualEffect(VFX_FNF_TIME_STOP, FALSE);\nApplyEffectToObject(DURATION_TYPE_INSTANT, eTimeStop,  OBJECT_SELF);\nif(iAllAreas==TRUE){\n\twhile(oArea!=OBJECT_INVALID){\n\t\tFreezesAllCreatures(oArea, fDuration);\n\t\toArea = GetNextArea();\n\t}\n}\nelse{\n\tFreezesAllCreatures(oArea, fDuration);\n}\n}\nvoid FreezesAllCreatures(object oArea, float fDuration){\nobject oTarget = GetFirstObjectInArea(oArea);\nwhile(oTarget !=OBJECT_INVALID){\n\tif(oTarget != OBJECT_SELF && GetObjectType(oTarget) == OBJECT_TYPE_CREATURE){\n\t\tDelayCommand(0.2,ApplyEffectToObject(DURATION_TYPE_TEMPORARY,EffectVisualEffect(\nVFX_DUR_FREEZE_ANIMATION),oTarget,fDuration));\n\t\tSignalEvent(oTarget, EventSpellCastAt(OBJECT_SELF, SPELL_TIME_STOP));\t\t\n\t\tApplyEffectToObject(DURATION_TYPE_TEMPORARY,EffectCutsceneParalyze()\n,oTarget,fDuration);\n\t}\n\toTarget = GetNextObjectInArea(oArea);\n}Select All Text | View Code in separate window","Patch":"1.13","NWN2Game":"All","Description":"Just the time stop spell script. It freezes all creatures in your PW during 1d4 + 1 rounds.\n\nIf you put the integer iAllAreas value to FALSE, it will only affect to all creatures in the area where the caster casts the spell. \n\nScript name: nw_s0_timestop\n\nChange on spells.2da file, on line 185 change the last column (removed) from '1' to '0' \n\nOn next update, I will make an .erf .hak /override files.\n\nPost please if you have any trouble with that spell.\n\nHave fun.\n----------------------------------------\nEn español:\n\nEs el conjuro parar el tiempo, afecta a todo el pw, si cambiais la variable de iAllAreas a FALSE, solo paralizará a todas las criaturas del área donde se encuentra el lanzador durante 1d4 + 1 asaltos.\n\n","Rating":8,"Votes":1,"Awards":[]},"240":{"Name":"Icequeen's Persistent Banking Systems","Author":"Icequeen6769","Submitted":20081025,"Updated":20081028,"Category":"Database Related","Type":"Type - Player Property Tracking","Format":"Module and Code","Patch":"1.13","NWN2Game":"All","Description":"Persistent Player Systems for PWs\n\nPersistent Banking - Player Gold banking\nPersistent Housing - Player Housing\nPersistent Stores - Player-owned Stores\n\nHousing & Store systems are set to handle a maximum of 1,000 units each.\n\nThese Systems are used in the \"Alpha and Omega\" module featured on the \"Abeir-Toril_inthebeginning\" Server (more info @ Link )\n\n10/28/08 (081028 edition) Notes-\nCorrected flaws in the retirement system functions.\nLimited houses & stores to 1,000 units.\nCorrected Instruction sheets (tagname instructions).\nAdded Instruction sheet - How to use retirement functions.\n\nWant all 3 systems (all files)? Just download: IQPBS_081028_Complete.rar","Rating":9.25,"Votes":2,"Awards":[]},"241":{"Name":"DM Affliction Wand","Author":"HarryMcScary/socmajor","Submitted":20081026,"Updated":20081029,"Category":"Inventory Item","Type":"Type - Combat","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"A remake of the DMFI affliction wand. It hasn't been fully tested, so if you find a bug, please let me know. I put off finishing it for so long that I just wrote like a madman last night in order to get it posted.\n\nCredit for the idea goes to the DMFI team. Credit for any bugs goes to yours truly.\n\nIt's easiest to reach me at Link . ","Rating":9.5,"Votes":3,"Awards":[]},"242":{"Name":"Dynamic Faction Wand","Author":"HarryMcScary/socmajor","Submitted":20081026,"Updated":20081029,"Category":"Other","Type":"Type - General","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"HarryMcScary/socmajor's Dynamic Faction Changer\n26 October 08\n\nThis is really just a timesaving script- nothing fancy. It allows you to drop your faction reps in a safe place in your module, tag them appropriately, and set a single variable. Then use the wand in-game and it dynamically generates a list of custom factions. You can change factions on a single target, a group of targets in a range, or an entire area.\n\nPlease report any bugs or make any suggestions to harrymcscary [at] gmail [dot] com","Rating":"N/A","Awards":[]},"243":{"Name":"Icequeen's Reputation/Faction Adjuster","Author":"Icequeen6769","Submitted":20081030,"Updated":20081031,"Category":"Rulesets","Type":"Type - Other","Format":"Module and Code","Patch":"1.13","NWN2Game":"NWN2:MotB","Description":"IQ_Factions_081030: Adjusts PC Alignment (based on Victim's Faction) & PC Reputation (based on Victim's Reputation) with all factions, when a PC kills an NPC.","Rating":10,"Votes":1,"Awards":[]},"244":{"Name":"MOTB Silver Sword of Gith scripts","Author":"The Wild Turkey","Submitted":20081109,"Updated":20081110,"Category":"Inventory Item","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.13","NWN2Game":"NWN2:MotB","Description":"Inspired by Patcha's uploading of the OC's Silver Sword of Giths scripts, here are the scripts for the MOTB version of the sword so that it will work in custom modules.\n\nIn order to use it, you'll need to import the erf file into the module. Simply go to 'File' and 'Import', and remember to save the updated module. \n\nThis is the scripts only, so you'll need to import the actual sword itself first (easily done through the console). I've done some playtesting and it seems to be working alright, but if you encounter a problem, please let me know.","Rating":"N/A","Awards":[]},"245":{"Name":"Shadow Evade to Shadow Jump","Author":"Lofgren","Submitted":20081115,"Updated":20081207,"Category":"Spells","Type":"Type - New Spells","Format":"Code Only","Patch":"1.13","NWN2Game":"NWN2:MotB","Description":"This will replace the shadowdancer's level 4 ability \"Shadow Evade\" with a simulation of the level 4 PnP Shadowdancer ability \"Shadow Jump.\"\n\nShadowdancers can become ethereal 3 times per day at level 4. The duration of the etherealness increases every other level, from 5 rounds to 20 rounds at level 10.\n\nShadow Illusion will change the shadow daze ability to create a shadow illusion. You create an illusory copy of an enemy. The copy does no damage and cannot be destroyed, but its presence confuses enemies who see it, causing them to fall upon their allies unless they succeed in a will save to disbelieve. The DC of the save is 10 plus your CHA plus your shadow dancer level, making this ability more powerful than a spell-like ability but less powerful than a supernatural ability. The illusion lasts for one round per shadowdancer level.\n\nOops! There was a problem with the last version (only up for a day, 12/6/08) of the shadow illusion that made the final area of Storm of Zehir much tougher. I think it's fixed now, but if you get shadowdancers creating multiple immortal copies of you that don't disappear even after that shadowdancers are dead, let me know.\n\nUpdate 2: OK, now it's taken care of for sure. If you're one of the four people who downloaded this in the first 48 hours, download it again.","Rating":10,"Votes":1,"Awards":[]},"246":{"Name":"Dynamic Ambient Population System","Author":"AmstradHero","Submitted":20081123,"Updated":20090628,"Category":"Scripting routines","Type":"Type - Daily Routine","Format":"Code Only","Patch":"1.13","NWN2Game":"All","Description":"Creating a realistic population to bring your areas to life with activity has never been easier!\n\nThis package allows players to create a dynamic population that will roam around an area. I developed this system for use in Fate of a City, and it offers a realistic way to have a population enter and exit an area and also allows for a significant degree of customisation.\n\nCapabilities:\n+ Dynamic creation and destruction of an ambient population.\n+ Ability to adjust population number during night and day.\n+ Ability to increase base population size and have multiple variations of outfits on the same base population character model.\n+ Ability to have specific waypointed \"day walkers\" with their own unique waypoint set.\n\nIncluded in this package:\n+ 1 Trigger blueprint\n+ 3 scripts - 1 for the trigger and 2 for the ambient population\n+ 23 creature blueprints\n+ 115 outfit blueprints - 5 additional sets of clothing for each creature.\n\n-----\nQuick Usage Overview\n\nI'll assume that you've created an area in the toolset, and that you've imported the .erf file that holds the DAPS scripts. The first step is to set up the area entrances/exits for the walkers.\n\nTo do this, use the DAPS trigger blueprint and draw a trigger an area where you want your population to enter and exit the area. In order to save yourself some time, only paint down a single trigger for now. Now select the trigger and look at its properties, and open up the variables window in the scripts section. The system is run according to the values of these variables.\n\nDynamic walkers are great if you want to have a background population, moving around, whereas waypointed walkers are good if you want to have named characters that leave an area at night. Waypointed walkers require use of the inbuilt WP_<tag> and WN_<tag> waypoint walking system, so if you're not familiar with that, I'd suggest reading up on that first.\n\nGoing back to the trigger variables, to set up dynamic walkers, make sure you set bUseDynamic to 1. Now you need to decide on a \"base\" tag for the dynamic walkers, which you will use as the value for \"cDynTag\". Each object has a tag name, and this is used to identify the creatures that are dynamic walkers, so that DAPS knows how to create and destroy the dynamic walkers as they \"enter\" and \"exit\" the area. Let's choose something relevant to the area, say \"c_castleDyn\" or \"c_slumsDyn\".\n\nThe next items is to choose a tag for the \"points of interest\" within the area, which will be the value for \"wpDynDestBase\". Dynamic walkers will randomly choose a \"point of interest\" (a waypoint you will place later on) within the area and walk to it. Once they reach it, they will pause briefly, then either decide to walk to another point of interest or leave the area. Again, let's pick something relevant to the area - \"WP_castleDyn\" or \"WP_slumsDyn\". We then have to define the number of points of interest in the area. So work out the number of points of interest in the area and enter that number as the value for \"nDynDestNum\".\n\nThe next value (sDynBpBase) is based on the blueprint names of the population that DAPS will use. I've included blueprints for use within the system, so they are possibly the easiest to use for your first time. I believe the string is \"c_commoner\", but double check the blueprint ResRef to make sure.\n\nnDynBpNum is the number of blueprints available with the specified blueprint name. Each blueprint must have a unique name, so this number is used in conjunction with sDynBpBase to create creatures - i.e. \"c_commoner1\", \"c_commoner2\" and so on. I've included 23 blueprints within the DAPS package, covering commoners, nobles and peasants. This number should be equal to the number of creature blueprints you have, as the DAPS will pick a random number between 1 and nDynBpNum whenever it goes to create a new dynamic walker. So to use all the blueprints included with DAPS, enter 23 here.\n\nnDynBpOffset can be used for more complex set ups with multiple areas. It's mainly there to allow you to use blueprints more efficiently. It simply adds this as an offset to the chosen blueprint number. What does this mean? Say you have 50 creature blueprints. The 1-10 are peasants, 11-20 and commoners, 21-30 are nobles, 31-40 are traders and 41-50 are guards. This would allow you to exclude peasants and commoners by using a value of 20 for nDynBpOffset and a value of 30 for nDynBpNum. For a first time, it's possibly best just to leave it at 0.\n\nwpExitTagBase is going to be the tag of waypoints that the walkers will go to in order to leave the area. These waypoints must cause the walker to cross over a DAPS trigger - so normally you'll want to place them inside a trigger. This is a string that will be the base tag of the exits. Again, let's pick something like \"WP_castleDynEx\" or \"WP_slumDynEx\". The value of nExitTagNum is the number of exit waypoints, which will correspond to the exits and entrances that dynamic walkers will leave and enter the area by.\n\nLastly, nDynDayNum and nDynNightNum is the maximum number of walkers that should exist in the area during day and night, respectively. Thus you can have an area heavily populated during the day and empty during the night, or vice versa.\n\nHaving set all those variables, you can now select that trigger, and copy and paste it to the other entrances and exits of your area. This is why it's good to just paint a single trigger in an area, as this way you only have to enter those variables once. Use right-mouse button, repaint trigger, to redraw the trigger for other entrances/exits.\n\nWith the triggers placed, now you need to create the waypoints for the walkers. For this, you need to make sure you paint down the same number of waypoints that you specified in nDynDestNum with the tag wpDynDestBase. You can then select them are use the right-mouse button menu to create a waypoint set to automatically number them for you. If you picked \"wp_castleDyn\" and \"5\", you will need to have waypoints with tags, \"wp_castleDyn1\", \"wp_castleDyn2\", etc.\n\nYou also need to do the same for the exit waypoints, placing them inside the exit/entrance triggers, and naming them and numbering the according to the values of wpExitTagBase and nExitTagNum.\n\nWith that in place, you should have a working dynamic walker system!","Rating":8.25,"Votes":4,"Awards":[]},"247":{"Name":"SOZ Overland Buff/Effect Preservation Mod","Author":"Netriak","Submitted":20081127,"Updated":20090228,"Category":"Rulesets","Forum Thread":"Link","Type":"Type - Player State Tracking","Format":"Code Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"This mod implements the method of buff/effect preservation for the Storm of Zehir overland map I suggested on the forums.\nOn entering the overland map it copies all effects to dummy creatures, and restores them on exit.\nHowever, due to lack of a GetEffectRemainingDuration function or some equivalent, I had to edit all spell scripts to store the duration, using a mass find and replace program.\nThis makes this modification incompatible with any spell modifying mods, although changing the scripts in such a mod to use my changed ApplyEffectToObject function is not such an amount of work.\n\nThis is a beta/test release. There may be some bugs, unforeseen problems or spells/effects that are not preserved.\nUse at your own risk.\nTo Install, extract the directory to one of your override directories.\n\nVersion 1.3 changes:\nEffects are now also preserved during module changes, such as entering/exiting crossroad keep and certain dungeons, or by using the teleporter gate.\nAlso some minor fixes.\n","Rating":9.69,"Votes":33,"Awards":["Hall of Fame"]},"248":{"Name":"(Obsolete) Alarm Stone Fix","Author":"player1","Submitted":20081130,"Updated":20090225,"Category":"Inventory Item","Type":"Type - Rest Tracking","Format":"Module Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"This mod fixes Stone of Alarm item, from Storm of Zehir campaign, so it actually works.\n\nUpon use, if no enemies are nearby, player party will be able to rest as intended.\n\n\nInstallation:\n\nTo use this fix, just extract files from archive to your Override folder.\n\n\nWhat was bugged anyway?\n\nDoForceRest() function was supposed to circle through party members and force rest on every of them. To circle through party, item owner needs to be known, so that player faction can be identified.\n\nUnfortunately, OBJECT_SELF was used for that purpose, instead of proper owner. In in this context, OBJECT_SELF is actually a module, which pretty much is not member of player faction. ;)\n\nSwitching OBJECT_SELF with GetItemActivator() did the trick.\n\nNOTE:\nDue to issue being fixed with 1.22 patch, this fix is now Obsolete.","Rating":"N/A","Awards":[]},"249":{"Name":"Correct  v1.21 ActionStartConversation on new area bug","Author":"John McA","Submitted":20081201,"Updated":20081201,"Category":"Scripting Help","Type":"Type - Other","Format":"Code Only","ShowCode":"//JM this script just creates a delay for the gtr_speak_node to fire when triggered by jumping\n//into the trigger from another area\n\n//obviously only for once only triggering\n\n//in the first line of the conversation have a ga_local_int \"fired\" on OBJECT_SELF set to 1\n\n#include \"ginc_trigger\"\n\nvoid Fire(object self,object target,object oPC)\n{\nif (GetLocalInt(target,\"fired\")==0 && !IsInConversation(oPC))\n\t{\n\tDoSpeakTrigger(oPC);\n\tDelayCommand(1.0,Fire(self,target,oPC)); //will iterate until fired set to 1 in conversation, or in conversation\n\t}\n}\n\nvoid main()\n{\nobject self=OBJECT_SELF;\nobject oPC=GetEnteringObject();\n//don't fire if not the PC that the player is actually controlling\nif (!GetIsObjectValid(GetControlledCharacter(oPC))) return;\nstring sNPCTag = GetLocalString(self, \"NPC_Tag\");\nobject target=GetNearestObjectByTag(sNPCTag,oPC);\nif (GetLocalInt(target,\"fired\")==1) return; //stops cohorts from also triggering\nBlackScreen(oPC);\nDelayCommand(1.0,FadeFromBlack(oPC,2.0));\nDelayCommand(1.1,Fire(self,target,oPC));\n}Select All Text | View Code in separate window","Patch":"1.21","NWN2Game":"All","Description":"As you may know, almost all custom modules will be broken with v1.21 because of a bug with ActionStartConversation not firing when PCs enter a new area.\n\nI don't normally upload scripts but thought it selfish really not to share a simple workaround.\n\nWhen jumping into a speaktrigger in a new area, replace the OnEnter gtr_speak_node with this \"delay_speak_node\" script below. Then go to the first line of the affiliated conversation and attach an action script ga_local_int, with parameters: variable=fired, set to=1 and target is OBJECT_SELF (leave blank as this is default).\n\nBuilders can work through their modules area by area, identifying all the speak triggers in the left hand pane and swapping the scripts on those triggers that fire by the PC jumping in from another area. Leave the others unchanged.\n\nIf you have an ActionStartConversation directly on the OnEnter handle of the Area, you can instead switch the script to the OnClientEnter handle.\n\nNote that this trigger is designed to fire only once - it doesn't work for repeating conversation triggers, but they are not usually the ones that you have jumping into a new area.\n\nThe new script should work for multiple PCs for one player, as per SOZ.\n\nI would not expect you to vote or to leave nasty comments, like you often do for my modules! ","Rating":"N/A","Awards":[]},"250":{"Name":"SoZ Overland Encounter Reducer (v1.0)","Author":"E.C.Patterson","Submitted":20081202,"Updated":20090901,"Category":"Other","Type":"Type - Combat","Format":"Module Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"I started to play Storm of Zehir recently and was quickly overwhelmed by the staggering quantity of hostile random encounters spawning on the overland map. I found the number of them both ridiculous and annoying.\n\nSo I edited the script that controls the probability/frequency of hostile encounters to reduce the rate at which they pop up and am now finding the game much more enjoyable, and believable.\n\nHere then is this simple tweak.\n\n--------\n\nINSTRUCTIONS\n\n* There are three versions of the SoZ overland encounter reducer here: one that reduces spawn probability to 50% of original values, one that reduces them to 33%, and one to 0%, effectively disabling encounters. 33% is my current personal sweet spot.\n\n* Download and extract the folder of your choosing to your My Documents/Neverwinter Nights 2/Override directory.\n\n* Play the game.\n\n* You can switch between versions in the middle of a saved game if you want. You should however exit the game before swapping the folders.\n\n* Those familiar with script editing can make a script with a different percentage modifier simply by editing the special constant added to the included NSS file. (You can even *increase* the probability of encounters by setting a value over 100.0, if that is what you want.)\n\n* This only affects the spawning frequency of hostile encounters on SoZ's overland map. It does not affect neutral and plot encounters.\n\n* Your feedback will be appreciated. Thanks.\n\n--------\n\nVERSION NOTES\n\n* v1.0: taken out of beta with no changes\n* Beta: initial release\n","Rating":9.77,"Votes":30,"Awards":["Hall of Fame"]},"251":{"Name":"Extra Spell Swapping for SoZ and/or Warlock BAB mod","Author":"Zonzai","Submitted":20081203,"Updated":20081204,"Category":"Spells","Type":"Type - General","Format":"Code Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"There are three folders provided in this very small download.\n\n1.) Starting at level 3 the Bard, Sorcerer, Spirit Shaman, and Favored Soul classes gain the ability to swap one spell of any level at each level up.\n\n2.) To make up for the Obsidian warlock's many shortcomings, this mod simply grants them a HIGH BAB instead of a medium one.\n\n(This includes the hellfire warlock. Also, note that the class description was not altered so it still displays a medium attack bonus.)\n\n3.) This folder contains both of the mods in one classes.2da.\n\nPlace one of these folders in your override directory. Note that this is a classes.2da mod so anything that alters your classes 2da will not work with it.","Rating":"N/A","Awards":[]},"252":{"Name":"No ECL for SoZ + MotB","Author":"Zonzai","Submitted":20081203,"Updated":20081204,"Category":"Other","Type":"Type - Other","Format":"Code Only","Patch":"1.21","NWN2Game":"All","Description":"This is a modified subraces.2da that removes the ECL. ","Rating":"N/A","Awards":[]},"253":{"Name":"(Obsolete) Keep Storage and Imbue Item fixes","Author":"player1","Submitted":20081209,"Updated":20090225,"Category":"Other","Type":"Type - Trading","Format":"Code Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"This mod fixes two issues in Storm of Zehir campaign.\n\nFirst, it makes possible to retrieve rare resources you sent to the Crossroad Keep.\n\nSecond, it will make Imbue Item function as described. If having Warlock with this ability, it will replace all spells needed for crafting.\n\nThe reason, why these two fixes are bundled together, is because they modify similar files related to Storm of Zehir trade system.\n\nFor installation, just unzip the archive to your Override folder.\n\n\n\nWhat was bugged anyway?\n\nIn case of keep storage bug, the GUI for storage transactions wasn't set up properly (nx2_storage.xml). The tab for resources was copied from GUI used for shipping resources (nx2_shipping.xml), without any modification. No wonder why it doesn't work.\n\nFor fixing the GUI, several things were done. First, UIText with name RARE_RES_SHIPPING was changed to RARE_RES_STORAGE. This made it possible to see proper amount of rare resources on screen.\n\nStill, in order to actually be able to add or remove resources, scripts used for buttons need to be replaced, since old ones were for shipping GUI and are not appropriate here.\n\nUnfortunately, proper scripts do not exist, but can be easily made from those used for trade goods (which work). I called them gui_store_res.nss and gui_withdraw_res.nss. They are almost same as those used for goods, with difference in single parameter that on several places has FALSE instead TRUE value (to mark using resources instead of goods).\n\n\nAs for Imbue Item fix, it was pretty trivial. CheckCraftingSpellUses() function from kinc_trade_crafting.nss was modified to pass success if anyone in party has Imbue Item feat. It is used by x2_mod_def_act.nss script when activating any of recipe items.\n\nNOTE:\nDue to Keep Storage bug being fixed with 1.22 patch, this fix is now Obsolete.\n\nNOTE2:\nPatch 1.22 hasn't fixed Imbue Item issue. Still, combined version included here should not be used with patch 1.22.","Rating":"N/A","Awards":[]},"254":{"Name":"Doomguide Cohort Septimund Game Crash Correction","Author":"eMRaistlin","Submitted":20081215,"Updated":20081215,"Category":"Other","Type":"Type - Other","Format":"Code Only","Patch":"1.00","NWN2Game":"NWN2:SoZ","Description":"Hello.\n\nSome of you, like me, have encountered a game crash while having Septimund in the party, and trying to leave the Cemetarry or to have Spetimund leaving the party.\n\nAfter some search on the net, could only find the following answer : you have to get Spetimund to wait for you at the fort.\n\nThis is an option of conversation only available with enough Diplomacy. So the script basically gives you a temporary bonus of +20 diplomacy, which buy you enough time to speak to spetimund, have him leave the party and wait for you at the fort, and then gets your score back to normal, as this is not a script to cheat.\n\nHow to use : Simply put the .ncs into the Override folder, launch your game, and cast the light spell on anyone. Then, have the Caster speak to Septimund, to have him leave the party.\n\nYou can then remove the .ncs file of your folder, for you should no longer have use for it.\n\n\n----------------\n\n\nBonjour,\n\nCertains d'entre vous ont peut-être eu le même problème que moi, à savoir que le jeu crash quand on essaie de quitter le cimetierre avec Septimund dans l'equipe, ou qu'on veut le faire quitter l'équipe dans le Cimetierre. \nIl s'avère qu'il existe une option de conversation qui ne provoque pas de crash : celle où l'on demande à Spetimund d'attendre au Fort. Mais elle necessite un score de diplomacy élevé, que mes personnages n'avaient pas encore atteints.\n\nDu coup, je vous propose un petit script, vite fait, qui se place dans le dossier Override, et qui permet de gagner, durant 60 secondes, un bonus de +20 en diplomacy, le temps de dégager Septimund de l'équipe.\n\nIl suffit donc simplement de mettre le fichier .ncs dans le dossier Override, de lancer le jeu, de lancer le sort de Lumière sur n'importe qui, et le lanceur va se voir octroyer un bonus de +20 diplomacy pour une durée de 60s, amplement suffisante pour sortir Spetimunbd de l'équipe. Il ne reste alors plus qu'à supprimer le script du dossier override pour un retour à la normale.\n\nEnjoy ;)","Rating":"N/A","Awards":[]},"255":{"Name":"Stone of Many Alarms","Author":"Sybren Stüvel","Submitted":20081219,"Updated":20081219,"Category":"Inventory Item","Forum Thread":"Link","Type":"Type - Rest Tracking","Format":"Module and Code","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"The new Neverwinter Nights 2 expansion Storm of Zehir disallows resting in many areas. This is much more restrictive than what we're familiar with in other NWN2 campaigns - or any other D&D-based game, for that matter. Even after you clean out an entire dungeon, you're still not allowed to rest there.\n\nThe solution they give is the Stone of Alarm. It sounds an alarm when enemies get near, allowing you to shut your eyes and get some well deserved rest. Unfortunately, the stone works only once, and costs around 1000 gold pieces. I thought this to be rather lame - to have to pay 1000 gold for each rest is expensive, especially since we're used to always being able to rest.\n\nMy solution: unzip my altered Stone of Many Alarms ZIP file in your NWN2/Override directory, and buy a new Stone of Alarm or give it to yourself:\n\n 1. press ~\n 2. type \"DebugMode 1\", enter\n 3.type \"giveitem nx2_t_alarmstone 1\", enter\n 4. type \"DebugMode 0\", enter\n 5. press ~\n\nEnjoy resting like we're used to!\n\nPS: the alarm stone fix by \"player1\" is also part of this new Stone of Many Alarms. Thanks player1!","Rating":"N/A","Awards":[]},"256":{"Name":"Changed summoning script","Author":"evertebrate","Submitted":20081219,"Updated":20101212,"Category":"Spells","Type":"Type - Magic","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a changed summoning script so that you don't always summon animals but creatures that match your class, alignment and cleric domains.\nFor example, a druid would still summon animals as would a cleric with the animal domain. But an evil wizard would summon fiendish animals and demons while a cleric with an elemental domain would summon elementals that correspond to her domain.\n\nThis is an override version only. To install this script you need to put the folder inside the archive into your override folder that is located in your \"My Documents\\Neverwinter Nights 2\" folder.\n\nPS: You may use my modifications to the script and the blueprints of the creatures in any way you want without having to ask me.\n\nUPDATE: Updated all scripts and blueprints, added tons more different summons. Updated to SoZ 1.23. Added support for multiple summons for undead creation and druid summon spells. Added support for summon baatezu, negative plane avatar and planar ally.","Rating":"N/A","Awards":[]},"257":{"Name":"KEMO Custom Animations v2","Author":"KEMO","Submitted":20081220,"Updated":20091031,"Category":"Scripting routines","Type":"Type - Other","Format":"Module and Code","Patch":"1.22","NWN2Game":"All","Description":"KEMO Custom Animations Version 2.0 is a selection of 86 custom \"emote\" animations and animation loops. KEMO Chairs is intended to be used in persistent worlds. Minimal adjustment is required for PW developers.\n\nKEMO Animations hooks into Heed's PC Tools to open a custom selection GUI panel, shown in the screenshots. (The ERF includes a gui_hss_pc_tool_kemovariant script that can be imported without fear of obliterating an existing script. Builders will need to move custom button 1 over to their existing gui_hss_pc_tool script, then delete the kemovariant script.)\n\nKEMO Animations uses the same kemo_includes script that KEMO Chairs uses. Builders already using KEMO Chairs may import kemo_includes without fear of losing anything.\n\nAll animations are currently available for human-like females (human, planetouched, elf, halfling, yuan-ti); a subset of these are available for human-like males. No non-human-like animations are included, but they are on the drawing board.\n\nKEMO Animations was originally designed for the Kingdom of Haven PW, which is an adult social server. Because of this, many of the new animations (version 1 had fewer than half the current number) may not be suitable for all persistent worlds. Removal of these unsuitable animations can be accomplished by editing the kemo_anim.xml file and taking out the unwanted animations and/or animation tabs. (No significant knowledge of XML or NWN2 GUI creation is required to make these changes. Each animation and animation tab is found in its own identifiable block of XML. Removal of these blocks will remove the animation or tab from the GUI without altering the GUI in any other way.)\n\nKEMO Animations works around a PlayCustomAnimation() bug that makes non-looping animated PCs lose their eyeballs and jaws. This means that, unlike with other emote systems, the transition from standing to the emote animation does not deform the PC's face.\n\nTails and wings are fully supported. Cloaks are supported in some cases; in most cases cloaks are folded up against the back. (If you are using one of the extra-long cloaks, this will look silly. It is best to remove any cloak before selecting a pose.)\n\nKEMO Animations used to be selected from a conversation, which permitted key combinations to activate poses. However, the significant increase in the number of animations available means that using a point-and-click interface is now faster than using key combinations.\n\nThe list of animations in version 2 is as follows:\n\nSITTING\n* Sitting back, legs open\n* Sitting raised up, legs open\n* Both knees up, loose\n--females only:\n* Cross-legged forward\n* Both knees up\n* On right side, left knee up\n* On right side, left leg out\n* Leaning forward along legs\n* Right knee up, left leg out\n* Right knee up, left leg under\n\nSTANDING\n* Doubled over\n* Legs spread, hands behind neck\n* Crossed arms, strong stance\n* Hands on hips, strong stance\n--females only:\n* Legs spread, hands down behind back\n* Legs spread, hands up behind back\n* Legs spread, arms up\n\nCROUCHING (female only)\n* Back up\n* Body forward\n* Right leg up, facing left\n* Back up, hands outside\n\nKNEELING\n* Hands on legs\n* Hands behind neck\n* Hands behind back\n* Kneeling up, hands behind neck\n* Hands outside\n--female only:\n* Kneeling, doubled over\n\nSUPINE (ON BACK)\n* Knees up, arms over head\n* Knees down, arms over head\n* Legs up, arms over head\n* Legs up, hands on legs\n* Knees up close, hands on ankles\n--female only:\n* Legs up, knees bent\n\nPRONE (ON BELLY)\n* Arms and legs in\n* Arms in, legs spread\n* Arms and legs attached\n\nALL FOURS\n* All fours\n* On elbows\n* Arms stretched out\n* Head up\n\nSUSPENSION (female only)\n* Arms over head\n* Reversed arms over head\n* Horizontal, arms back, knees in\n* Horizontal, arms back, legs down\n* Spread-eagled\n* Reversed spread-eagled\n\nBOWS AND SALUTES\n* Deep nod\n* Bow, palms together\n* Bow, hand in fist\n--female only:\n* Hand to forehead salute\n* Fist to chest salute\n\nOTHER\n* Hovering\n--female only:\n* Modesty\n* Legs spread, hands to wall\n* One leg up, hands to wall\n* Legs spread, elbows to wall\n* 5 additional female-only animations\n\nANIMATION TOOLS\n* Nudge PC (for fine control of position), with or without re-animating\n* Repeat last animation loop\n* Repeat last animation\n\nNote that these last two options can be used in conjunction with KEMO Chairs to provide ad hoc lap-sitting: sit on a tall chair or bench, move to the seated person's lap, then use Repeat last animation loop.\n\nFinal note: Please understand that this is a \"beta\" release. I intend over time to complete the missing male and non-human-like animations, as well as add additional animations.\n\nUPDATE 1/1/09 (version 1.02):\n* restored the check against logged out PCs that was causing a SetCollision crash (accidentally removed in the original upload)\n* improved the resizing code in KEMO Chairs, which uses the same heartbeat as Animations, so the heartbeat is updated in both places\n\nUPDATE 2/8/09 (version 2.0):\n* overhaul of the package; old information replaced in the body of this description\n\nUPDATE 2/10/09 (version 2.01):\n* trimmed some obsolete scripting and comments\n* added a small hook (to the include file) for KEMO Dancing, in development\n* no currently functional changes, so if you already have version 2.0, you don't need to update\n\nUPDATE 2/18/09 (version 2.02):\n* fixed bug spotted by MCMunroe (oPC declaration in the wrong place)\n\nUPDATE 2/22/09:\n* added an optional XML GUI file, which removes the \"adult\" animations and tabs; this may be used in place of the regular XML file (replace the original within the HAK).\n* the PG/PG-13 GUI is slightly inelegant (four tabs on sheet 1, one tab on sheet 2, rather than consolidating all onto one sheet), but the scripts do not need to be altered\n* removed the obsolete version of KEMO Anims, given that the PG/PG-13 XML gives access to essentially the same set of poses\n\nUPDATE 3/11/09 (version 2.03):\n* fixed a bug where the invisible heartbeat object was not being deleted when a player logged out while still in a pose\n* removed the first two sitting poses from the \"PG\" version of the GUI XML, as they are not particularly \"PG\"\n* 1.22-ready\n\nUPDATE 10/31/09 (version 2.10):\n* added new animations\n* added lap-sitting animation gui (Misc tab): once selected, player selects one of 20 lap-sitting heights","Rating":10,"Votes":37,"Awards":["Hall of Fame"]},"259":{"Name":"BOG Fully Flexible Teleport system 1.0","Author":"Kanbyen","Submitted":20081225,"Updated":20090103,"Category":"Area","Type":"Type - Combat","Format":"Module Only","ShowCode":"/////////////////////////////////////////////////\n//  BOG Fully Flexible Teleport system 1.0\n/////////////////////////////////////////////////\n//  Altered by Kanbyen\n//  Note:  It now works with conversations in nwn2, taking arguments if not using tags\n//  Date:  Dec 24, 2008\n// So we are passing arguments from the conversation, this will allow us to have one\n// Conversation file and NPC/object speaker that based on choices sends you to different spots.\t\n// Variables you can set up on calling object if not called from conversation with script\n//    TeleType=0\n//    TeleDest=WP_DEST_1\n//    TeleParty=1\n//    TeleHench=1\n//    TeleSay=\"Goodbye\"\n//    TeleMessage=\"Wheeeee\"\n//    TeleVisual=2\n/////////////////////////////////////////////////\n//  Author: Baron of Gateford\n//  Date: 06-12-2004\n//  This is based on a script by Amurayi\n//  The original Amurayi script allowed for a lot of flexibility but meant you needed multiple versions of it.\n//\n//  You now only need this ONE script to handle teleports.\n//  All paramters are set via local variables set on the object that is going to teleport the PC.\n//\n//  Via local variables you can choose whether to;\n//  teleport player out of conversation, trigger or placeable\n//  teleport player with or without companions (if teleporting within same area)\n//  teleport player alone or the whole party (players)\n//  Make the player say a one liner when being teleported.\n//  Send a message to the Player to let them know what happened.\n//  Choose from 5 visual effects to play when the player is teleported.\n//\n//  Installation Instructions\n//  -------------------------\n//  Cut and paste this script in to your script editor and save the script to something sensible.\n//  e.g. Teleport_script, or BOG_teleport, or whatever takes your fancy.\n//\n//  Place this script on the one of the following script slots (depending on who/what teleports the PC)\n//  Onused - for placeables that when used teleport the PC\n//  OnEnter - for triggers that teleport the PC when the PC enters them.\n//  Action Taken(of conversation) - when the PC is teleported via a conversation node (called from either NPC or Placeable).\n//\n//  Now set the variables on the object performing the teleport (NPC/Trigger/placeable)\n//\n//  Variable instructions.\n//  ----------------------\n//  The following lists the variables that need to be set-up in order for this teleport system to work.\n//  They need to be set on either the placeable,trigger, or NPC that will teleport the PC.\n//\n//      To set variables on an object;\n//      Open up the toolset, right mouse click the object.\n//      select 'variables' from the pop up menu.\n//\n//  TeleType (int)\n//     0 = objects (onused)\n//     1 = trigger (onenter)\n//     2 = coversation\n//  This variable is MANDATORY, and lets the script know what kind of object is being used.\n//  e.g. if this teleport script is placed on the actions taken slot of a conversation, then set this variable to 2.\n//       if this teleport script is placed on the OnEnter slot of a trigger, then set this variable to 1.\n//  It will default to onused if it is not set.\n//\n//  TeleDest (string)\n//     Tag of waypoint to be teleported to.\n//  This is MANDATORY. The value of this string must be the TAG of the waypoint to be teleported to.\n//\n//  TeleParty (int)\n//     0 = self\n//     1 = whole party\n//  Set this variable to 1 to teleport the PC and the entire party.\n//  It will default to just the PC if it is not set.\n//\n//  TeleHench (int)\n//     0 = self\n//     1 = pc and henchman/asociates\n//  Set this variable to 1 if you are teleporting within the same area and want all henchmen/associates to be teleported too.\n//  It will default to just the PC if it is not set.\n//\n//  TeleSay (string)\n//     Speech pc says when leaving (to let other players know what is happening)\n//  Enter the text in this string variable to the text you want the PC to say when he gets teleported.\n//  e.g. \"I'm going to the Wizards lab\", or \"I am going down this hole\" etc.\n//  The PC will not say anything if not set.\n//\n//  TeleMessage (string)\n//     Message sent to pc to describe what happened\n//  Enter the text in this string variable to the message you want to send to the PC to describe what happened\n//  e.g. \"You arrive at the wizards lab\", or \"You climb down the hole\" etc.\n//\n//  TeleVisual (int)\n//     0 = No visual effect\n//     1 = Summon monster 1 - Large white explosion that turns to smoke.\n//     2 = Summon monster 2 - Purple glyph with white lines moving around purple spots.\n//     3 = Summon monster 3 - Blue glyph with orange light on floor and white rising light.\n//     4 = Implosion        - Yellow/black \"black hole\" type look.\n//     5 = Summon undead    - Small white cloud.\n//  Set this variable to the values listed above for the corresponding visual effect to be used when the PC is teleported.\n//  If the variable is set to a value greater than 5 then the VFX used is Summon Monster 1.\n//  The VFX will only be used on actual player characters (not henchmen/familiars etc.)\n//\n///////////////////////////////////////////////\n\nvoid JumpAssociate(object i_oPC, int i_type, object i_oWP)\n{\n    object oAssociate = GetAssociate(i_type, i_oPC);\n    if(GetIsObjectValid(oAssociate))\n        AssignCommand(oAssociate, JumpToObject(i_oWP));\n}\n\nvoid main(int iTT, string sTD, int iTWP, int iTAT, string sGB, string sTM, int iTV)\n{\n\t// Setting variables and objects.\n    object oPC;\n\t// Destination WP object\n\tobject oDWP;\n\tobject oFM;\n\tint iTeletype;\n\tstring sTeleDest;\n\tint iTeleportWholeParty; \n\tint iTeleportAssociateToo;\n\tstring sGoodbye;\n\tstring sTeleportmessage;\n\t// The visual effect to be played when teleport happens\n    effect eVis;\n\tint iTeleVisual;\n\n\t\n    //Get the type of object used for the teleport function, this reads out of the variable\n\t// you placed on the object. \n\tif(GetLocalString(OBJECT_SELF,\"TeleDest\") != \"\")\n\t{\n\t\t// Basically if the object_self has no localstring called TeleDest then we hope \n\t\t// the script was called from a conversation and use the passed arguments\n\t\tiTeletype = GetLocalInt(OBJECT_SELF,\"TeleType\");\n\t\t\n\t\t// Destination TAG\n\t\tsTeleDest = GetLocalString(OBJECT_SELF,\"TeleDest\"); \n\t\n\t\t// set TeleParty to 1 if you want to teleport the whole party of the player, wherever every member is:\n\t\tiTeleportWholeParty = GetLocalInt(OBJECT_SELF,\"TeleParty\");\n\t\t\n\t\t// set TeleHench to 1 if you want the Associates of the player to be teleported as well, otherwise to 0:\n\t\tiTeleportAssociateToo = GetLocalInt(OBJECT_SELF,\"TeleHench\");\n\t\t\n\t\t// Make the player say something on his departure (so others will now that he teleported, not crashed):\n\t\tsGoodbye = GetLocalString(OBJECT_SELF,\"TeleSay\");\n\t\n\t\t// Enter the message being sent to the player when teleport starts:\n\t\tsTeleportmessage = GetLocalString(OBJECT_SELF,\"TeleMessage\");\n\t\t\n\t\t// The visual effect to be played when teleport happens\n\t\tiTeleVisual = GetLocalInt(OBJECT_SELF,\"TeleVisual\");\n\t\n\t}\n\telse\n\t{\n\t\t// So we are passing arguments from the conversation, this will allow us to have one\n\t\t// Conversation file and NPC/object speaker that based on choices sends you to different spots.\n\t\t// Should be default if its a conversation\n\t\tiTeletype=2; \n\t\t\n\t\t// Basically if the object_self has no localstring called TeleDest then we hope \n\t\t// the script was called from a conversation and use the passed arguments\n\t\t// iTeletype=iTT;\n\t\t\n\t\t// Destination TAG\n\t\tsTeleDest=sTD;\n\t\t\n\t\t// set TeleParty to 1 if you want to teleport the whole party of the player, wherever every member is:\n\t\tiTeleportWholeParty=iTWP;\n\t\t\n\t\t// set TeleHench to 1 if you want the Associates of the player to be teleported as well, otherwise to 0:\n\t\tiTeleportAssociateToo=iTAT;\n\t\t\n\t\t// Make the player say something on his departure (so others will now that he teleported, not crashed):\n\t\tsGoodbye=sGB;\n\t\t\n\t\t// Enter the message being sent to the player when teleport starts:\n\t\tsTeleportmessage=sTM;\n\t\t\n\t\t// The visual effect to be played when teleport happens\n\t\tiTeleVisual=iTV;\n\t}\n\t\n\t// Now hopefully we have a teletype that works, and we can proceed.\n\tif (iTeletype == 2)\n\t{\n\t\t// Ok, its a conversation lets grab the information about who is talking.\n\t\toPC = (GetPCSpeaker()==OBJECT_INVALID?OBJECT_SELF:GetPCSpeaker());     // for conversations\n\t}\n\telse if (iTeletype == 1)\n\t{\n\t\toPC = GetEnteringObject();  // for triggers\n\t}\n\telse\n\t{\n\t\toPC = GetLastUsedBy();    // for items/objects (default if Teletype int not set)\n\t}\n\t\n\t// Dont start Teleport at all if activator isnt a player or DM\n\t// Checks to see if its really a PC we are going to teleport.  If not exit script.\n\tif(!GetIsPC(oPC)) return;\n    \n\t\n\t// Get Destination waypoint location from TAG\n    oDWP = GetWaypointByTag(sTeleDest);\n\t\n    \n\t\n    // Setting up which visual to use.\n    if (iTeleVisual == 1)\n        {\n         eVis = EffectVisualEffect(VFX_FNF_SUMMON_MONSTER_1);\n        }\n    if (iTeleVisual == 2)\n        {\n         eVis = EffectVisualEffect(VFX_FNF_SUMMON_MONSTER_2);\n        }\n    if (iTeleVisual == 3)\n        {\n         eVis = EffectVisualEffect(VFX_FNF_SUMMON_MONSTER_3);\n        }\n    if (iTeleVisual == 4)\n        {\n         eVis = EffectVisualEffect(VFX_FNF_IMPLOSION);\n        }\n    if (iTeleVisual == 5)\n        {\n         eVis = EffectVisualEffect(VFX_FNF_SUMMON_UNDEAD);\n        }\n    if (iTeleVisual > 5)\n        {\n         eVis = EffectVisualEffect(VFX_FNF_SUMMON_MONSTER_1);\n        }\n\t\t\n    // Take Party or not \n    if (iTeleportWholeParty == 1)\n        {\n        oFM = GetFirstFactionMember(oPC);\n\t\t\n        // Step through the party members.\n        while(GetIsObjectValid(oFM))\n            {\n            //only use the visual effect if the local variable has been set\n            if (iTeleVisual > 0)\n                {\n                 ApplyEffectToObject(DURATION_TYPE_INSTANT, eVis, oFM);\n                }\n\t\t\t\t\n            //only let the PC say something if the local variable has been set\n\t\t\t\n            if (sGoodbye != \"\")\n                {\n                 AssignCommand(oFM, ActionSpeakString(sGoodbye));\n                }\n\t\t\t\t\n            //only send a message to the PC if the local variable has been set\n\t\t\t\n            if (sTeleportmessage != \"\")\n                {\n                 SendMessageToPC(oFM, sTeleportmessage);\n                }\n            AssignCommand(oFM,  DelayCommand(1.0, JumpToObject(oDWP)));\n            if (iTeleportAssociateToo == 1)\n                {\n                // now send the players companions over as well:\n                DelayCommand(1.0, JumpAssociate(oFM, ASSOCIATE_TYPE_ANIMALCOMPANION, oDWP));\n                DelayCommand(1.0, JumpAssociate(oFM, ASSOCIATE_TYPE_DOMINATED, oDWP));\n                DelayCommand(1.0, JumpAssociate(oFM, ASSOCIATE_TYPE_FAMILIAR, oDWP));\n                DelayCommand(1.0, JumpAssociate(oFM, ASSOCIATE_TYPE_HENCHMAN, oDWP));\n                DelayCommand(1.0, JumpAssociate(oFM, ASSOCIATE_TYPE_SUMMONED, oDWP));\n                }\n\t\t\t\t\n            // Select the next member of the faction and loop.\n\t\t\t\n            oFM = GetNextFactionMember(oFM);\n            }\n        }\n    else\n       {\n\t\t   \n        //only use the visual effect if the local variable has been set\n\t\t\n        if (iTeleVisual == 1)\n           {\n            effect eVis = EffectVisualEffect(VFX_FNF_SUMMON_MONSTER_3);\n            ApplyEffectToObject(DURATION_TYPE_INSTANT, eVis, oPC);\n           }\n\t\t   \n        //only let the PC say something if the local variable has been set\n        if (sGoodbye != \"\")\n           {\n           AssignCommand(oPC, ActionSpeakString(sGoodbye));\n           }\n\t\t   \n        //only send a message to the PC if the local variable has been set\n\t\tif (sTeleportmessage != \"\")\n           {\n           SendMessageToPC(oPC, sTeleportmessage);\n           }\n        AssignCommand(oPC, DelayCommand(2.0, JumpToObject(oDWP)));\n\t\t\n        if (iTeleportAssociateToo == 1)\n            {\n            // now send the players companions over as well:\n            DelayCommand(2.0, JumpAssociate(oPC, ASSOCIATE_TYPE_ANIMALCOMPANION, oDWP));\n            DelayCommand(2.0, JumpAssociate(oPC, ASSOCIATE_TYPE_DOMINATED, oDWP));\n            DelayCommand(2.0, JumpAssociate(oPC, ASSOCIATE_TYPE_FAMILIAR, oDWP));\n            DelayCommand(2.0, JumpAssociate(oPC, ASSOCIATE_TYPE_HENCHMAN, oDWP));\n            DelayCommand(2.0, JumpAssociate(oPC, ASSOCIATE_TYPE_SUMMONED, oDWP));\n            }\n        }\n}\n\n\nSelect All Text | View Code in separate window","Patch":"1.01","NWN2Game":"All","Description":"I'm not taking credit for this, just wanted to share the update I made to it from nwn1 to nwn2. It now works with conversations and passing arguments to it. \n\nI've tested this a lot, and if you use this script with onUsed of an item, to teleport it works, but will crash if the person clicks multiple times before the port kicks off. I have no idea how to fix this, I tried setting variable and just exiting script, but with no luck. If someone can figure it out please post. It still works fine for conversations and trigger areas as far as I can tell. ","Rating":"N/A","Awards":[]},"260":{"Name":"Kanbyen's Base Persistant World Module","Author":"Kanbyen","Submitted":20081226,"Updated":20090104,"Category":"Entire Module/PW systems","Type":"Type - Other","Format":"Module and Code","Patch":"1.04","NWN2Game":"NWN2:SoZ","Description":"Kanbyen's Base Persistent World Module. \n\nThis module is the basic starting point for a NWNX4/mysql based persistent world. I've installed several key systems that I thought should be in place before building a single area of my own. This setup appears stable, I've had it running for a few days and it seems to work ok under lite load. I did not build these systems and take no credit for any of them. They were all very high quality, which is why I picked them. \n\nList of things included, with credits:\n\nDMFI � 1.10b � Included everything from the demo module. You will need the hak packs, so you will have to download them from nwvault. \nCSF � 1.2b_1549 � This is needed to help merge all the various scripts that want to have the same attribute on the module and area. It also hopefully will allow upgrades of those systems in the future with a minimum amount of pain/changes. \nMPWC � beta6 � Spawn � this is your spawn and area cleanup functions, works with doors/chests also. \nMPWC � Beta6 � NPC � This is your Boss mob spawning system among other things.\nMPWC � beta6 � polyinflate � This is your creature/chest item manipulator. Lots of nice features.\nMPWC � beta6 � XP module � its there, but not turned on. \nMPWC � beta6 � GDR � Grin Duck and Cover, nice things for traps and other DC checks here. \nARP � 1.0 - Angry Monsters transition � neat little script to keep things interesting\nROW � 1.0.5- Rowell's Persistent World Toolkit this has lots of functions, doors, vaults, deeds, and Fair play chests. Xildjian Version/update is used in the module. \nTWG � 1.0 � Auto Close door, an alternate if you dont want to use the ROW version.\nMS - 1.11 - Markshire Climbing System with DC checks.\nWFS � 1.10 - Wyrin's Foraging system � Magical plants\nSJVE - 1.12 - Sunjammer's Conversational Visual Effect Script \nSJIS - 1.12 � Sunjammer's Conversational Item Scripts\n\nArea - Portal room was used for the module test area. It can be found in the prefabs in nwvault also. \n\nThe above list is everything included in module at this point. These are all well documented systems and are what I'd consider as base needs for any Persistent world. If you do not want to use nwnx/mysql the only system heavily using it is the ROW tool kit which could be altered as needed to remove this functionality. I have not tested this though. \n\nCSF is key to the whole module, since it fires off most of the module and area things. It does nothing itself other then manage the other scripts and run Q's. Do not mess with any csf scripts unless you have a backup and want to see what it breaks. Also there is a DM storage area with some key Waypoints that have stored information in them. This area is also a do not delete item, its part of the CSF and DMFI processes. \n\nTo make this all easier, I included in this module every working module example I could find, this will allow you to experiment and test things. Talk to the NPC's in the testing portal room. \n\nI had to alter the MPWC scripts to have a meaningful prefix on the scripts, this took several days of testing and tweaking. The documentation for those scripts you need to append mpwc_ as you read it, and it will make sense. \n\nYou will have to install NWNX4 base, then insert the ROW sql file from Rowells download. This is not terribly hard, lots of mysql setup tutorials out there. I use phpMyAdmin to manage mysql, you should look into that, its a very handy tool. \n\n-------------------------------------\nTODO:\nFix ROW's Vault system. It will not take stacked items and is limited storage ATM. If your mysql connection isn't working every time you open and close the test vault, it will export your toon. \n\nHCR2 � I really wanted to include this, but it just doesn't like me or something. I'll keep plugging away with it perhaps I'll get it to work. There are lots of overlaps so care is needed if you add them. CSF is needed also to fire off the module and area scripts. \n\nLights, chairs, and other items. - If the erf looked simple to install and wasn't needed to make the demo work I left it alone. \n\nCreate documentation on: quests, houses for sale, built in crafting, and script documentation. \n\n-------------------------------------\nI really tried to restrict the number of built in scripts that were overridden along with 2da's/hak packs. I'm not good enough yet to make that all work as a distributed module example. If you find bugs post them here. I really want to get this base install as stable and usable as possible. It wasn't easy to get the parts all working, and I expect it would be very time consuming for someone new to scripting/building. I hope it helps others at least as an example of how some of the things here can fit together. All of the above systems can be found on nwvault, and they all should be downloaded and the documentation READ(RTM). You need to understand the basic functionality of spawn/respawn of things before building areas. \n\nYou probably do not need SOZ, but since I have it installed I listed it as working with this module. \n\nUpdate: Appy the 1.3 and 1.4 updates in order. I have 1.5 in the works. I've imported all of the kish-maltese module, and I'm now sorting out all the scripts. 1.5 will also include the battle system and several other things. I should have 40+ areas at that point. --- Jan 3, 2009\n\n\nI updated my profile if anyone needs to email me for anything. Or is interested in helping integrate areas, or wants to help build. I will do my best to help. I intend to release all content work donated back to the community. \n\nGood Luck and Fortune to you.\n","Rating":9.75,"Votes":2,"Awards":[]},"261":{"Name":"(Obsolete) Trade Bars Inflation fix","Author":"player1","Submitted":20081230,"Updated":20090225,"Category":"Other","Type":"Type - Other","Format":"Code Only","Patch":"1.21","NWN2Game":"All","Description":"Trade Bars Inflation fix\n\nThis mod fixes the issue with massive inflation of trade bar income in Storm of Zehir campaign, which happens when not collecting trade bars often.\n\nWhy this happens?\n\nThere is an error in ProcessCompanyIncome() income function, used when sufficient amount of time passes. It adds some base income based on the number of trade posts owned, which is fine. But after that, it multiplies whole trade bar reserve you haven't collected with bonus which depends from the number of keep upgrades you have (around 90%, if having all upgrades).\n\nAs you see, the longer you wait before collecting your trade bars, the more times whole \"pot\" gets multiplied, leading to huge inflation in trade bars earnings. If you wait too much, it can even lead to getting negative trade bars income (due to \"income overflow\").\n\nThis fix will move upgrade bonus calculation from ProcessCompanyIncome() to AwardCompanyIncome() function, which is run just once, when it's time to collect your trade bars.\n\n\nHow to install?\n\nMove files from archive to your Override folder. To get effects of this fix fully, it's better to start new campaign, or introduce fix before doing first upgrade to the keep.\n\nIf for some reason you want to use this fix later in campaign, I advise first collecting your trade bars, saving the game, and then applying this fix. That way, all income awarded later will not suffer from inflation.\n\nNOTE:\nDue to issue being fixed with 1.22 patch, this fix is now Obsolete.","Rating":"N/A","Awards":[]},"262":{"Name":"SoZ Script Fixes","Author":"Kianne","Submitted":20090102,"Updated":20090103,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"This is a collection of script fixes for the Storm of Zehir campaign. It contains bug fixes for the following items:\n\n- Bottle (weapon)\n- Thayan learning scroll\n\nThis package also contains a fix for upgrading enchantments, thus enabling you to upgrade an existing enchantment on an item even if all of the item's enchantment slots are full.\n\nSource code is provided and is free for everyone's use. More detailed documentation is also in the archive.","Rating":9.94,"Votes":6,"Awards":[]},"263":{"Name":"Random Trap Script","Author":"khazar_khum","Submitted":20090103,"Updated":20090103,"Category":"Scripting routines","Type":"Type - Traps (Subtype - Other)","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"To support modules that scale according to a rogue's level, this script creates traps based on the party's level. \n\nThe demo module shows how to use the script to create random traps when a trigger is tripped. The script uses custom waypoints to specify the location of the traps and a rough level of damage. \n\nThe script can be easily adapted to generate most traps. ","Rating":"N/A","Awards":[]},"264":{"Name":"EZ Mob Spawner","Author":"driller","Submitted":20090104,"Updated":20090117,"Category":"Scripting routines","Type":"Type - Spawning","Format":"Module and Code","Patch":"1.21","NWN2Game":"All","Description":"A very easy to use mob spawner.\n\nEZ Mob spawner update vers. 1.1\n\nAdded better instructions/explanations and a small demo area.\n\nAdded more options for bosses/unique spawns.\n\nAdded option for spawning based on a percent chance.\n\nAdded ability to set turn delays locally on individual spawners.\n\nOptimized PC detection.","Rating":"N/A","Awards":[]},"265":{"Name":"SOCR Addons/Alterations","Author":"Tygaran","Submitted":20090107,"Updated":20101117,"Category":"NPCs","Type":"Type - Appearance","Format":"Code Only","Patch":"1.21","NWN2Game":"All","Description":"This 'mod' is really just a collection of modifications and alterations to my Sexy OC Reloaded mod. Here you can find pre-configured setups for original npc appearances, facelifts, and modified companions.\n\nFor some downloads here, see the mod requirements for the original SexyOC \nFeel free to post any requests for alterations you desire. =]","Rating":10,"Votes":5,"Awards":[]},"266":{"Name":"Realms of Ultima: Overland Map Land and Sea Travel System","Author":"JasonNH","Submitted":20090112,"Updated":20090118,"Category":"Travel","Forum Thread":"Link","Type":"Type - Other","Format":"Module and Code","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"This package provides a flexible environment for exploration and travel between land and sea terrains on an overland map. It has been developed with the Realms of Ultima project specifically in mind but may be of wider use. The system is intended to work on an overland map where land and sea are separated by a non-walkable border. In order to go from one side to the other, the player will make use of \"skiffs\" to board their ships from land or return back to shore.\n\nFeature Highlights\n\n+ Complete set of scripts, blueprints, and conversations for implementing land and sea transitions on the overland map.\n\n+ Ability to require ownership deeds on a ship by ship basis.\n\n+ Detects occupied landing locations and re-directs to the next nearest location on shore if available.\n\n+ Automatic placement of map pins on the area map to inform the player of anchored ship locations.\n\n+ Single header file configuration parameters for determining sea travel music track and maximum distance from shore for boarding/unboarding.\n\n+ Easily extendable to be used with docks and other placeable objects.\n\nPlease feel free to report bugs, quirks, and comments to me. I have some ideas in the works for a future version that may permit traveling by skiff along the shore and into rivers, but we'll see about that.\n\nContents:\n\nERF file: This contains all the scripts, blueprints, and conversations needed to implement the system.\n\nHAK file: Contains MDB and SEF files used for ships.\n\nDemo Module: This modules contains a single overland map area with two ships anchored near the shore. The larger ship requires a deed to board it, so you will need to speak with Brother Perrin to obtain one. A smaller ship to the north may be used without a deed. To board a ship, just click on one of the skiffs and you will be prompted from there. When you are on a ship, you will find a \"skiff\" item equipped in one of the ships inventory slots. If you want to return to land, just unequip the skiff.\n\nThere is no combat or any real game play with this module, it is just for testing out the land and sea transition system. You will need the HAK file to play it.\n\nMovie file: Zipped AVI movie demonstrating the land and sea transitions.\n\nToolset User's Manual: Manual describing in detail the internal system mechanics.\n\nUsage:\nFeel free to use as is or just grab whatever pieces are helpful to you, but please give credit and offer your vote. It helps to keep us all motivated.\n\nAcknowledgments:\nI would like to thank loudent2 for sharing his work in rotating several ship models 180 degrees so that they can be used as model game effects. Check out his own exciting work Sea of Stars\n","Rating":9.72,"Votes":11,"Awards":[]},"267":{"Name":"Nalencer's Companion Influence System","Author":"Nalencer","Submitted":20090131,"Updated":20091119,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Reputations","Format":"Code Only","ShowCode":"//::///////////////////////////////////////////////\n//:: Nalencer's Companion Influence System\n//:: ginc_influence\n//:: Copyright (c) 2009 Ethan Meanor\n//:://////////////////////////////////////////////\n/*\n    The main include file to handle companion\n\tinfluence.\n*/\n//:://////////////////////////////////////////////\n//:: Created By: Ethan Meanor\n//:: Created On: February 1, 2009\n//:://////////////////////////////////////////////\n\n#include \"ginc_var_ops\"\n\n\n//-------------------------------------------------\n// Prototypes\n//-------------------------------------------------\nvoid ModifyInfluence(string sCompanion, string sChange);\nvoid ReportInfluenceChange(string sCompanion, string sChange);\nvoid UpdateInfluenceBand(string sCompanion);\nvoid ApplyInfluenceEffects(string sCompanion);\nvoid SetIsPossessable(object oCompanion, int bPossessable);\nvoid SetPlayerInventoryAccess(object oCompanion, int bCanAccessInventory);\n\nint GetCompanionInfluence(string sCompanion);\nint GetCompanionInfluenceBand(string sCompanion);\n\nstring GetInfluenceVariable(string sCompanion);\nstring GetInfluenceBandVariable(string sCompanion);\n\n\n//-------------------------------------------------\n// Constants\n//-------------------------------------------------\n// *** USER PREFERENCES -- THIS SECTION CAN BE EDITED ***\n// Maximum influence level\nconst int MAXIMUM_INFLUENCE = 100;\n// Minimum influence level\nconst int MINIMUM_INFLUENCE = -100;\n// If TRUE, bWillLeaveParty will be set to TRUE when the companion reaches minimum influence\n// This is just for convenience, and can be used in whatever way you wish\nconst int COMPANIONS_LEAVE_PARTY = TRUE; \n\n// Influence range definitions\n// These can be set to whatever values you wish\nconst int INFLUENCE_RANGE_REBELLIOUS \t= -76;\nconst int INFLUENCE_RANGE_DISILLUSIONED = -51;\nconst int INFLUENCE_RANGE_WAVERING \t\t= -26;\nconst int INFLUENCE_RANGE_NEUTRAL \t\t= 25;\nconst int INFLUENCE_RANGE_TRUSTING \t\t= 50;\nconst int INFLUENCE_RANGE_LOYAL \t\t= 75;\nconst int INFLUENCE_RANGE_DEVOTED \t\t= 99;\nconst int INFLUENCE_RANGE_LOVE\t \t\t= 100;\n\n\n// *** SYSTEM CONSTANTS -- DO NOT EDIT THIS SECTION ***\nconst int INFLUENCE_BAND_REBELLIOUS \t= -3;\nconst int INFLUENCE_BAND_DISILLUSIONED \t= -2;\nconst int INFLUENCE_BAND_WAVERING \t\t= -1;\nconst int INFLUENCE_BAND_NEUTRAL \t\t= 0;\nconst int INFLUENCE_BAND_TRUSTING \t\t= 1;\nconst int INFLUENCE_BAND_LOYAL \t\t\t= 2;\nconst int INFLUENCE_BAND_DEVOTED \t\t= 3;\n\nconst string PREFIX_INFLUENCE = \"i_\";\nconst string PREFIX_INFLUENCE_BAND = \"ib_\";\nconst string PREFIX_LEAVE_PARTY = \"bWillLeaveParty_\";\n\nconst string SOUND_INFLUENCE_GAIN = \"gui_infuencegain01\";\nconst string SOUND_INFLUENCE_LOSS = \"gui_infuenceloss01\";\n\n\n//-------------------------------------------------\n// Global Variables\n//-------------------------------------------------\nobject oPC = GetFirstPC();\n\n\n//-------------------------------------------------\n// Definitions\n//-------------------------------------------------\n\n// Modify companion influence\nvoid ModifyInfluence(string sCompanion, string sChange)\n{\n\tstring sName = GetName(GetObjectByTag(sCompanion)); \t// companion name\n\tstring sInfluence = GetInfluenceVariable(sCompanion); \t// influence variable\n\tint nOldValue = GetGlobalInt(sInfluence); \t\t\t\t// original influence\n\tint nNewValue = 0; \t\t\t\t\t\t\t\t\t\t// new influence value\n\n\tnNewValue = CalcNewIntValue(nOldValue, sChange, TRUE);  // calculate new value\n\t\n\t// make sure that the new value is between the minimum and maximum values\n\tif (nNewValue < MINIMUM_INFLUENCE)\n\t\tnNewValue = MINIMUM_INFLUENCE; \n\telse if (nNewValue > MAXIMUM_INFLUENCE)\n\t\tnNewValue = MAXIMUM_INFLUENCE;\n\t\n\t// if COMPANIONS_LEAVE_PARTY = TRUE and influence is at minimum, flag the companion as ready\n\t// to leave the party\t\n\tif (COMPANIONS_LEAVE_PARTY == TRUE && nNewValue == MINIMUM_INFLUENCE)\n\t{\n\t\tSetGlobalInt(PREFIX_LEAVE_PARTY + sName, 1); // companion will leave party\n\t}\n\telse\n\t{\t\n\t\tSetGlobalInt(PREFIX_LEAVE_PARTY + sName, 0); // companion will not leave party\n\t\t\n\t\tSetGlobalInt(sInfluence, nNewValue); // set new influence value\n\t\n\t\tReportInfluenceChange(sCompanion, sChange); // report change to player\n\t\n\t\tUpdateInfluenceBand(sCompanion);\t// update influence band\n\t\tApplyInfluenceEffects(sCompanion);  // apply influence effects\n\t}\n}\n\n\n// Report influence change to the player\nvoid ReportInfluenceChange(string sCompanion, string sChange)\n{ \n\tstring sName = GetName(GetObjectByTag(sCompanion)); \t\t\t   // companion name\n\tint nInfluence = GetGlobalInt(GetInfluenceVariable(sCompanion));   // influence variable\n\t\n\tif (StringToInt(sChange) < 0) // influence loss\n\t{\n   \t\tSendMessageToPC(oPC, \"Lost influence with \" + sName + \": \" + sChange + \" (Total: \" + IntToString(nInfluence) + \")\");\n   \t\tSetNoticeText(oPC, \"Lost influence with \" + sName + \": \" + sChange + \" (Total: \" + IntToString(nInfluence) + \")\");\n\t\tPlaySound(SOUND_INFLUENCE_GAIN);\n\t}\t\n\telse // influence gain\n\t{\n\t\tSendMessageToPC(oPC, \"Gained influence with \" + sName + \": +\" + sChange + \" (Total: \" + IntToString(nInfluence) + \")\");\n   \t\tSetNoticeText(oPC, \"Gained influence with \" + sName + \": +\" + sChange + \" (Total: \" + IntToString(nInfluence) + \")\");\n\t\tPlaySound(SOUND_INFLUENCE_LOSS);\n\t}\n}\n\t\n\n// Update the variable which keeps track of the companion's influence band.\t\nvoid UpdateInfluenceBand(string sCompanion)\n{\n\tint nInfluence = GetGlobalInt(GetInfluenceVariable(sCompanion));   // influence variable\n\tstring sInfluenceBand = PREFIX_INFLUENCE_BAND + sCompanion; \t   // influence band variable\n\t\n\t// check influence level and set the appropriate influence band\n\tif (nInfluence <= INFLUENCE_RANGE_REBELLIOUS)\n\t\tSetGlobalInt(sInfluenceBand, INFLUENCE_BAND_REBELLIOUS);\n\telse if (nInfluence <= INFLUENCE_RANGE_DISILLUSIONED)\n\t\tSetGlobalInt(sInfluenceBand, INFLUENCE_BAND_DISILLUSIONED);\n\telse if (nInfluence <= INFLUENCE_RANGE_WAVERING)\n\t\tSetGlobalInt(sInfluenceBand, INFLUENCE_BAND_WAVERING);\n\telse if (nInfluence <= INFLUENCE_RANGE_NEUTRAL)\n\t\tSetGlobalInt(sInfluenceBand, INFLUENCE_BAND_NEUTRAL);\n\telse if (nInfluence <= INFLUENCE_RANGE_TRUSTING)\n\t\tSetGlobalInt(sInfluenceBand, INFLUENCE_BAND_TRUSTING);\n\telse if (nInfluence <= INFLUENCE_RANGE_LOYAL)\n\t\tSetGlobalInt(sInfluenceBand, INFLUENCE_BAND_LOYAL);\n\telse if (nInfluence <= INFLUENCE_RANGE_DEVOTED)\n\t\tSetGlobalInt(sInfluenceBand, INFLUENCE_BAND_DEVOTED);\n}\n\n\n// Apply influence effects\nvoid ApplyInfluenceEffects(string sCompanion)\n{\n\tobject oCompanion = GetObjectByTag(sCompanion);\t\t\t\t\t\n\tint nInfluenceBand = GetGlobalInt(PREFIX_INFLUENCE_BAND + sCompanion); // influence band variable\n\t\n\t// restore defaults\n\tint bPossessable = TRUE;\t\t // possessable\n\tint bCanAccessInventory = TRUE;  // inventory accessible\n\t\n\t// check influence band and apply the appropriate effects\n\tswitch (nInfluenceBand)\n\t{\n\t\tcase INFLUENCE_BAND_REBELLIOUS:\n\t\t\tbPossessable = FALSE;\t\t // unpossessable\n\t\t\tbCanAccessInventory = FALSE; // inventory not accessed\n\t\t\tbreak;\n\t\t\n\t\tcase INFLUENCE_BAND_DISILLUSIONED:\n\t\t\tbPossessable = TRUE;\t\t // possessable\n\t\t\tbCanAccessInventory = FALSE; // inventory not accessible\n\t\t\tbreak;\n\t\t\t\n\t\tcase INFLUENCE_BAND_WAVERING:\n\t\t\t// add effects here\n\t\t\tbreak;\n\t\t\t\n\t\tcase INFLUENCE_BAND_NEUTRAL:\n\t\t\t// add effects here\n\t\t\tbreak;\n\n\t\tcase INFLUENCE_BAND_TRUSTING:\n\t\t\t// add effects here\n\t\t\tbreak;\n\t\t\t\n\t\tcase INFLUENCE_BAND_LOYAL:\n\t\t\t// add effects here\t\n\t\t\tbreak;\n\t\t\t\n\t\tcase INFLUENCE_BAND_DEVOTED:\n\t\t\t// add effects here\n\t\t\tbreak;\n\t}\n\t\n\tSetIsPossessable(oCompanion, bPossessable); \t\t\t\t// set possessability\n\tSetPlayerInventoryAccess(oCompanion, bCanAccessInventory);  // set inventory access\n}\n\n\n// Set whether player can possess companion\nvoid SetIsPossessable(object oCompanion, int bPossessable)\n{\n\tint bBlocked = !bPossessable;\n\tSetIsCompanionPossessionBlocked(oCompanion, bBlocked);\n}\n\n\n// Set whether player can access companion inventory\nvoid SetPlayerInventoryAccess(object oCompanion, int bCanAccessInventory)\n{\n\tint bDisableEquip = !bCanAccessInventory;\n\t// TRUE = equipment disabled\n\tSetLocalInt(oCompanion, \"X2_JUST_A_DISABLEEQUIP\", bDisableEquip);\n}\n\n\n// return current companion influence level\nint GetCompanionInfluence(string sCompanion)\n{\n\tstring sInfluence = GetInfluenceVariable(sCompanion);\n\tint nInfluence = GetGlobalInt(sInfluence);\n\t\n\treturn nInfluence;\t\n}\n\n\n// return current companion influence band\nint GetCompanionInfluenceBand(string sCompanion)\n{\n\tstring sInfluenceBand = GetInfluenceBandVariable(sCompanion);\n\tint nInfluenceBand = GetGlobalInt(sInfluenceBand);\n\t\n\treturn nInfluenceBand;\t\n}\n\n\n// return name of the companion's influence variable\nstring GetInfluenceVariable(string sCompanion)\n{\n\tstring sInfluence = PREFIX_INFLUENCE + sCompanion;\n\treturn sInfluence;\t\n}\n\n\n// return name of the companion's influence band variable\nstring GetInfluenceBandVariable(string sCompanion)\n{\n\tstring sInfluenceBand = PREFIX_INFLUENCE_BAND + sCompanion;\n\treturn sInfluenceBand;\t\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"Owing to the lack of any easily accessible companion influence system, either in the game resources or on the Vault, I decided to create this simple, flexible script. It allows for management of the influence of any number of companions, with no scripting knowledge required. With a bit of scripting knowledge, however, a builder can modify the script extensively, adding custom actions to be taken depending on the companion and influence level, etc. This system is a great package for beginners, and a great starting point for experts.\n\n\nINSTALLATION\nInstallation is very simple: just click on the File menu in the toolset, select �Import� and choose the �influence.erf.� file. This should install the scripts 'ginc_influence', 'ga_influence' and 'gc_influence' in your module.\n\n\nSPECIFICS\nThe system works on a 200-point scale, from -100 to +100. As the player gains and loses influence with his companions, they will move through different influence bands, ranging from �rebellious� to �devoted�. All of these values can be easily changed through the user preferences at the top of the �ginc_influence� script.\n\n- At 'disillusioned' the player will no longer be able to access the companion's inventory.\n- At 'rebellious' the player will not be able to access the companion's inventory or take control of the companion.\n\nAside from these, there are no hard-coded effects based on influence band. These effects can also be easily removed within the script if the builder so desires. \n\nUse the 'ga_influence' script to set influence in conversation; use the 'gc_influence' script to retrieve influence level in conversation.\n\nExperienced scripters should find the code relatively straightforward, and should have no trouble modifying it to suit their needs.\n\n\nCONTACT\nIf you have feedback, questions, problems, etc., I can be contacted at meanorex02@gmail.com. ","Rating":9.63,"Votes":2,"Awards":[]},"268":{"Name":"Overland Travel a la Indiana Jones","Author":"Wyrin","Submitted":20090208,"Updated":20090208,"Category":"Area","Forum Thread":"Link","Type":"Type - Other","Format":"Module and Code","ShowCode":"// Overland Area heartbeat\n// can be fired from nx2_ol_hb by adding \"wy_overland_hb\" as a local string\n// sHeartbeatScript on the area\n\nvoid MapMarker(object oPC)\n{\n\tlocation lPrevious = GetLocalLocation(OBJECT_SELF, \"player_loc\");\n\tlocation lCurrent = GetLocation(oPC);\n\t\n\tif (GetDistanceBetweenLocations(lPrevious, lCurrent) > 1.0)\n\t\t{\n\t\t//SendMessageToPC(oPC, \"Travelling...\");\n\t\tCreateObject(OBJECT_TYPE_PLACEABLE, \"wy_indy\", lCurrent, TRUE);\n\t\t}\n\tSetLocalLocation(OBJECT_SELF, \"player_loc\", lCurrent);\n}\n\nvoid main()\n\n{\n\tobject oPC = GetFirstPC();\n\tif (IsInConversation(oPC) || GetIsInCombat(oPC)) return;\n\t\n\tMapMarker(oPC);\n\tDelayCommand(2.0, MapMarker(oPC));\t\n\tDelayCommand(4.0, MapMarker(oPC));\n}\n\n//Area on Exit script\n// need to append to ka_olmap_exit if using Obsisian's core system\n\nvoid main()\n{\nint i;\nobject oIndy = GetObjectByTag(\"wy_indy\", i);\nwhile (GetIsObjectValid(oIndy))\n\t{\n\tDestroyObject(oIndy);\n\ti++;\n\toIndy = GetObjectByTag(\"wy_indy\", i);\n\t}\n}Select All Text | View Code in separate window","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"This is a simple script I made for a laugh - to place a trail of red dashes behind the player just as in the Indian Jone's movies when he's travelling between locations.\nIt consists of an area heartbeat and an area on exit script\n\nIncluded is a sample module, and an erf containing scripts and red dash placeable\n\nThis is also to accompany a tutorial on my blog at Link","Rating":10,"Votes":1,"Awards":[]},"269":{"Name":"Training Dummy v1.0","Author":"Puket","Submitted":20090210,"Updated":20090210,"Category":"Placeable Item","Type":"Type - Combat","Format":"Module and Code","Patch":"1.00","NWN2Game":"NWN2","Description":"Intelligent dummies for single or persistent modules.Bash the puppet with your feasts or a mellee weapon.\nHit the archery target with a ranged weapon.Individual settings via variables.\n\nAdapted and implemented for NW 2 by Puket\nOrigin by Don Anderson (Olander)\n\nOverview:\n\n- Dummy for melle weapons\n- Dummy for ranged weapons\n- Can give XP or not\n- Can use normal or enhanced weapons or both\n- Damage counter each session\n- Each damage will be shown\n- Random colorized text\n- Automatic respawn for the dummies after total damage\n- Simply to use per variables inside the script\n- Description how to do inside the script\n\nPLEASE DO NOT VOTE HERE ! FOLLOW THIS Link FOR THE ORIGIN BUNDLE WHERE THIS PART WAS TAKEN OUT!\nANY COMMENTS ARE WELCOME !","Rating":10,"Votes":1,"Awards":[]},"270":{"Name":"KEMO Auction/Consignment System","Author":"KEMO","Submitted":20090212,"Updated":20091011,"Category":"Scripting routines","Type":"Type - Merchant","Format":"Module and Code","Patch":"1.22","NWN2Game":"All","Description":"The KEMO Auction/Consignment System (hereafter KEMO Auctions) is a GUI-based consignment merchant that allows players to sell goods to other players in a PW.\n\nKEMO Auctions is divided into four major sections: arms, armor, miscellaneous and crafting. Players may have up to ten items listed for sale in each section (for a total of 40 concurrent sales per character).\n\nTo sell an item, click on the Sell button and select from the list of items in your inventory. Enter a sale price and click the Sell icon. KEMO Auctions charges a 5% non-refundable commission on every sale posting.\n\nTo buy an item, click on one of the section buttons, then select an item and click the Buy icon. If you wish to view the item first (to check its properties, for example), click on the View icon and an Examine window will pop up for that item.\n\nSales expire 7 days after they have been initiated. Expired items will be returned to their original owners. If one of your items sells, you can retrieve the gold by clicking on the Retrieve button (which you should do any time you have sales running, to check whether any of the items have sold).\n\nKEMO Auctions is persistent across server reboots.\n\nFOR BUILDERS:\n* KEMO Auctions requires NWNX4 and the nwnx_clock plugin in order for the sale expiration function to work. (As a result, the demo module works fully except for the expiration function, unless it is loaded as a MP server through NWNX4.)\n* If you wish to prevent players from selling certain items, edit the CheckTag function in kemo_auction_includes to add the tags of the items you don't want to allow. (Currently it is set to prevent items with \"key\" in the tag and all cursed items.)\n* To implement, import the ERF and place the auctioneer NPC and the Auction Table together in an area. (The Auction Table is used only to mask temporary items that must be created in order for the View option to work: it is selectable, so that items created \"underneath\" it cannot be picked up before they are destroyed. It serves no other function.)\n* The 5% commission may be changed in the gui_kemo_auction_sellselect script, by changing the line \"iCommission = iCommission / 20;\" to suit your needs.\n* The HAK file contains only the single XML file needed for the GUI to function. This file may be moved to another HAK if desired.\n\nUPDATE 2/14/09 (version 1.01):\n* fixed a server crash issue when attempting to sell an already sold item\n\nUPDATE 2/15/09 (version 1.02):\n* fixed a pair of scripting errors, one in gui_kemo_auction_retrieve and one in kemo_auction_includes\n* removed the demo module from the package until I can rework it to fake having nwnx_clock\n\nUPDATE 2/16/09 (version 1.10):\n* added a Search function: type in text to search for and click the Search button and the current auction panel will filter for that text\n* added the demo module back in, now with a \"dummy\" nwnx_clock script\n* (late 2/16): uploaded with fixed demo module (now has the HAK correctly attached)\n\nUPDATE 2/18/09 (version 1.2):\n* modified the scripts to make customization easier and added some customization options via constants in the include file, as follows:\n\n1) Set the commission percentage\n2) Set minimum/maximum commissions\n3) Figure the commission based on selected sale price, value of item, greater of the two, or a set value\n4) Set minimum/maximum sale prices relative to item value\n5) Set the sale length (expiration)\n6) Set max sales per character per category\n7) Activate exploit checks (prevent sales to identical CD key, player name and/or player IP)\n\nUPDATE 2/20/09 (version 1.21):\n* adjusted the commission pricing calculation to fix an int/float conversion problem\n\nUPDATE 3/3/09 (version 1.22):\n* fixed an error in the commission value message, which was showing the wrong prices if commmission type 0 or 1 were being used (they were reversed)\n* fixed an error in the commission value message that listed 0% for any commission under 1%, now will indicate \"less than 1%\" instead of 0%\n\nUPDATE 3/5/09 (version 1.23):\n* fixed a terribly embarrassing bug where the expiration functions were utterly fubared\n* heartfelt thanks to lerathel for spotting and reporting the problems that led to this and the previous two updates; all content creators should be so lucky to have such a patient and helpful content user\n* 1.22-ready\n\nUPDATE 6/7/09 (version 1.30):\n* in larger PW's, the auction list gets very large very quickly and can cause listing problems - this has been fixed using additional scripting/xml by Tamons: now each buying pane is \"paged\", with a page length defaulting to 6 items (changeable via constant) and buttons to go up/down a page\n* can no longer sell if the PC is > 3m away from the auctioneer\n\nUPDATE 6/27/09 (version 1.31):\n* previous version didn't actually include the distance check\n* still having problems with large auction lists; this update gets a little closer to a solution (the lists can be larger than previously), but it's still not 100%. I'm working on it!\n\nUPDATE 9/1/09 (version 1.40):\n* fixed the dwarven waraxe misfiling\n* converted all script text strings to constants for easier localization (this does not include the conversation or the XML file contents)\n* added a switch (COMMISSION_EXTRACT_POINT) to let the commission be taken out of sold items only, when gold is retrieved\n\nUPDATE 9/22/09 (version 1.45):\n* added more Tamons optimizations: the system can now handle PC inventories with up to 800 items, and sale lists of up to 125 items per category, before choking on Too Many Instructions\n\nUPDATE 10/11/09 (version 1.46):\n* fixed a bug where too many expired items resulted in blank retrievals; now a retrieval is performed each time a player goes to the Sell panel","Rating":9.99,"Votes":32,"Awards":["Hall of Fame"]},"271":{"Name":"Preview Pre-Alpha Secondary Skill System","Author":"Depth of Night","Submitted":20090219,"Updated":20090221,"Category":"Rulesets","Forum Thread":"Link","Type":"Type - Skill Checks","Format":"Module Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"Hey, I started this skill system - it is up to its 3rd revision, and is loosely based around the skill system from eve online - I'm looking for people who are interested in taking a look, you'll need NWNx4.\nIt's still far from finished at its current state, the actuall skill editing GUI page is nearly 100% unfunctional (save for the close button), but the categories section is semi-useable.\n\nIf at all possible - I'd like to hear some suggestions for which ways to go with this system, I'm hoping to have it fully integrated to CNR as an example of use, but it could be applied to anything even custom magic and combat rules.\n\nThe basic idea of the skill system for people who are not familiar with eve online goes along this idea...\n\n(please excuse copy and paste from my forum page)\n\n# A base amount of experience will be tweakable with a variable in an include file, allowing for direct manipulation of the amount needed to advance, the default value will be 100.\n# Every skill will have a rank, the amount of experience needed to advance will further be multiplied by this value, hence a rank 6 skill will require 600 experience with the default values (6x100).\n# Another tweakable variable will determine how exponentially the skill will increase, the default value is 4, and if it take 600 experience to get to lvl 1, it will take 2400 to get to lvl 2, a total of 3000 points from lvl 0 to lvl 2. To get to lvl 5 (lvl 5 being the last tier of the skill) of a rank 6 skill will require 600 + 2400 + 9600 + 38400 +153600 = 204600 experience.\n# Each skill may require up to 3 other skills before it can be trained, so that, for example, Advanced Copper Mining, might require lvl 2 in Copper Mining, and lvl 5 in Mining before the player can train it to lvl 0.\n# Skills are catagorized, such as Advanced Copper Mining, Copper Mining, and Mining would all be under the Mining category.\n# Skills require initial training to get to lvl 0, so that the player must pay to learn a new skill, prices are variable, even though a base price is stored with the skill, this may fluctuate in game, new skills will be awarded through the use of a special command found in an include script.\n# It will also be possible to award/revoke experience in similar fashion, as well as levels.\n\nAnyhow - I'll be keeping a close eye on this while I work on it - I hope to be making regular updates every two or three days.\n\n(PS: I am using a cave prefab I got from the vault as the staging ground, you will find an additional obelisk inside the cave, to activate the mod, just click the obelisk, provided you started the mod with NWNx4, and are logged in as a DM, all should be good)\n\nCHANGE LOG:\nV0.01.01 - Added Optional Password for Admin Security.\n\nCURRENT ACTIVITY:\nWhile fixing up the categories and skill edit pages, I'm moving this mod to directly interface with databases rather than just use standard nwnx4 scripted tables.\n\nDISCLAIMER: I take no responsibility what you do to your DB with this - please don't use it on the same install of NWNx4 that you have your PW on.","Rating":"N/A","Awards":[]},"272":{"Name":"Dice!","Author":"Depth Of Night","Submitted":20090219,"Updated":20090219,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","ShowCode":"int RollDie(string sDieRoll)\n{\n\tint iPos=FindSubString(sDieRoll,\"d\");\n\tint iTimes=StringToInt(GetStringLeft(sDieRoll,iPos));\n\tint iMax=StringToInt(GetStringRight(sDieRoll,GetStringLength(sDieRoll)-(iPos+1)));\n\tint iRetVal=0;\n\twhile (iTimes>0)\n\t{\n\t\tiRetVal+=Random(iMax)+1;\n\t\tiTimes--;\n\t}\n\treturn iRetVal;\n}\n\nint GetSignLocation(string sDieList)\n{\n\tint i=0;\n\twhile (i<GetStringLength(sDieList)-1)\n\t{\n\t\tif (GetSubString(sDieList,i,1)==\"+\" ||\n\t\t\tGetSubString(sDieList,i,1)==\"-\" ||\n\t\t\tGetSubString(sDieList,i,1)==\"*\" ||\n\t\t\tGetSubString(sDieList,i,1)==\"/\")\n\t\t{\n\t\t\treturn i;\n\t\t}\n\t\ti++;\n\t}\n\treturn -1;\n}\n\nint IsMathFunction(string sShortStr)\n{\n\tif (FindSubString(sShortStr,\"d\")==-1) return TRUE;\n\treturn FALSE;\n}\n\nint ProcessDieString(string sDieList)\n{\n\tif (GetSignLocation(sDieList)==-1) return RollDie(sDieList);\n\tint iRetVal=0;\n\tstring sLastFunc=\"+\";\n\twhile (GetSignLocation(sDieList)!=-1)\n\t{\n\t\tint iTerm=GetSignLocation(sDieList);\n\t\tstring sCurrentSection=GetStringLeft(sDieList,iTerm);\n\t\tstring sSign=GetSubString(sDieList,iTerm,1);\n\t\tsDieList=GetStringRight(sDieList,GetStringLength(sDieList)-(iTerm+1));\n\t\tif (sLastFunc==\"+\" && IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal+=StringToInt(sCurrentSection);\n\t\t}\n\t\tif (sLastFunc==\"+\" && !IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal+=RollDie(sCurrentSection);\n\t\t}\n\t\tif (sLastFunc==\"-\" && IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal-=StringToInt(sCurrentSection);\n\t\t}\n\t\tif (sLastFunc==\"-\" && !IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal-=RollDie(sCurrentSection);\n\t\t}\n\t\tif (sLastFunc==\"*\" && IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal=iRetVal*StringToInt(sCurrentSection);\n\t\t}\n\t\tif (sLastFunc==\"*\" && !IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal=iRetVal*RollDie(sCurrentSection);\n\t\t}\n\t\tif (sLastFunc==\"/\" && IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal=iRetVal/StringToInt(sCurrentSection);\n\t\t}\n\t\tif (sLastFunc==\"/\" && !IsMathFunction(sCurrentSection))\n\t\t{\n\t\t\tiRetVal+=iRetVal/RollDie(sCurrentSection);\n\t\t}\n\t\tsLastFunc=sSign;\n\t}\n\tstring sCurrentSection=sDieList;\n\tif (sLastFunc==\"+\" && IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal+=StringToInt(sCurrentSection);\n\t}\n\tif (sLastFunc==\"+\" && !IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal+=RollDie(sCurrentSection);\n\t}\n\tif (sLastFunc==\"-\" && IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal-=StringToInt(sCurrentSection);\n\t}\n\tif (sLastFunc==\"-\" && !IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal-=RollDie(sCurrentSection);\n\t}\n\tif (sLastFunc==\"*\" && IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal=iRetVal*StringToInt(sCurrentSection);\n\t}\n\tif (sLastFunc==\"*\" && !IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal=iRetVal*RollDie(sCurrentSection);\n\t}\n\tif (sLastFunc==\"/\" && IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal=iRetVal/StringToInt(sCurrentSection);\n\t}\n\tif (sLastFunc==\"/\" && !IsMathFunction(sCurrentSection))\n\t{\n\t\tiRetVal+=iRetVal/RollDie(sCurrentSection);\n\t}\n\treturn iRetVal;\n}Select All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"this function accepts a text input for a dice roll, and gives its value\n\neg 1d8+2 = a number from 3-10\n\nyou can use +,-,*,/\n\nyour input can be quite long.\n\nUSEAGE:\n\nint iRollValue=int ProcessDieString(\"1d8+5d6+1d100/1d7*1d2-1d500*6+1-13/4\");\n\nwill return the INTEGER value of the sum!\n\n","Rating":"N/A","Awards":[]},"273":{"Name":"ALFA Books Beta","Author":"bartleby12804","Submitted":20090220,"Updated":20090224,"Category":"Inventory Item","Type":"Type - Other","Format":"Module and Code","Patch":"1.00","NWN2Game":"All","Description":"This is a beta release of the book system Im working on for A Land Far Away. It should be in complete working order with only a few minor problems in how it handles new line text.\n\nThe books allow PCs to read and write books in game in 27 different languages using 14 different alphabets each using there own individual font.\n\nThe Languages that are Currently supported include:\n\nAbyssal, Alzhedo, Aquan, Auran, Celestial, Chondathan, Common, Damaran, Draconic, Drow, Dwarven, Elven, Entish, Giant, Gnoll, Goblin, Halfling, Ignan, Illuskan, Infernal, Midani, Orc, Rashemi, Shaaran, Sylvan, Terran and Undercommon.\n\nThe books also allow the reader to translate the writting to a readable form. If using the DMFI supported version the PC may only translate languages he or she knows via the DMFI Language System.\n\nThe books also include dynamic picture support. Players can display any .tga file located in their My documents\\UI folder as a page simply by typing the name of the picture and which page to put it on. This can be very handy for in game manuals and easy customization.\n\nInstalation:\n\nThere are two means of installing the files needed described in the read me. The first is a simple script that will install the files automaticly and has an accompanying uninstall script, the second a manual instalation. \n\nUnfortunatly I have found no way to include a modified version of the fontfamly.xml file in the hak so in order for the books to work a modified version of the file must be placed in the atari/neverwinter nights 2/UI/Defaults folder. Please make a back up of this file before installing. The automated script should make a back up of your original file and return everything exactly as it was before but better safe than sorry. The modified version of fontfamily.xml should be the exact same as the official nwn2 version but with extra information to tell it that new fonts exist.\n\nIn order to open the book simply use it on your character. To get to the options menu right click on it and to close it double left click on it hope people enjoy it and let me know if you see any bugs!","Rating":10,"Votes":4,"Awards":[]},"274":{"Name":"Natural Light System","Author":"Boozehound Blue","Submitted":20090311,"Updated":20090605,"Category":"Area","Type":"Type - Lighting","Format":"Module and Code","Patch":"1.22","NWN2Game":"NWN2:SoZ","Description":"The Natural Light System brings the spectrum of day/night cycle color indoors in transitioning, point-light fashion, creating a distinct a varied ambiance to your interior areas, whether house, estate or castle.\n\nHIGHLIGHTS\n�84 light blueprints to provide a balanced, 12 step transition between each day/night cycle stage.\n�Standard and custom content* prefabs available to ease the building process.\n�Checks for inclement weather and adjusts lighting accordingly.\n�Easily works in conjunction with SLS2.\n�Customize your own transition steps smoothly with the light interpolator worksheet.\n�Control vfxs and sounds as well.\n\nIncluded in the rar file is the standard erf file, the c.c. hak and erf, a demo module, supporting documentation, light interpolator worksheet and readme installation instructions. (sls2.erf might be in the package by mistake, fyi.)\n\nThis is the first incarnation of NLS, so please test it out and report any oddities. \n*Thanks to Ar_Pharazon for the stain glass and Slayster for SLS's inspiration.\n\n","Rating":9.7,"Votes":7,"Awards":[]},"275":{"Name":"Common Script Library","Author":"Pain","Submitted":20090316,"Updated":20090316,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - General","Format":"Code Only","ShowCode":"These constants work as options\n// if true is prints out various debug info\n// You can use numbers above 1\nint DEBUGGING = FALSE;\nconst int SC_OVERALL_OPTIONS = 3;\nconst int SC_MAXAOES = 2;\nconst int SC_DISPELRULES = 3; // 0 = Vanilla, 3 = const int SC_WARLOCK_FLEESCENEVERSION = 1;\nconst int SC_MAXACBONUS = 5;\nconst int SC_MAXABBONUS = 5;\nconst int SC_MAXSAVEBONUS = 5;\nconst int SC_PREVENT_ENERGYIMMUNITYSTACKING = TRUE;\nconst int SC_PREVENT_SPELLCRITIMMEFFECTS = FALSE;\nconst int SC_HELLFIRE_FORCEDAMAGEIFIMMUNE = TRUE;\nconst int SC_HELLFIRE_LIMITTOONEPERUSE = TRUE;\nconst int SC_FREEDOMDEATHWARD_BUFF_EXCLUDE = TRUE;\nconst int SC_SILENCE_USERESISTSPELL = TRUE;\nconst int SC_IMPROVED_ETHERAL = TRUE;\nconst int SC_ETHERAL_CASTERONLY = TRUE;\nconst int SC_ETHERAL_BLOCKHEALING = TRUE;\nconst int SC_INVISPURGE_AFFECTSETHERAL = TRUE;\nconst int SC_SNEAKATTACKSPELLS = TRUE;\nconst int SC_RAYSPELL_SPECSPELLLEVELDAMAGE = TRUE;\nconst int SC_RAYSPELL_SNEAKDAMAGE = TRUE;\nconst int SC_DISPEL_IGNORESCLOUDS = TRUE;\nconst int SC_GUST_LIMITEDTOCLOUDS = TRUE;\nconst int SC_DROWSRFADESINDAYLIGHT = TRUE;\n\nSelect All Text | View Code in separate window","Patch":"1.22","NWN2Game":"NWN2:SoZ","Description":"This is an alpha release of my common scripting library-mainly for discussion and hopefully collaboration. I am at the point where i would never release it if it was finished, and this really could be a useful base using it as is.\n\nThis was developed for DungeonEternal.com for our PW originally to bypass bugs in the scripting via complete bypassing of OEI code as much as possible.\n\nIn the process i integrated many features and ideas from the PRC, the spell casting framework, ladydesire, the work by kaedrin, and syrus greycloaks spell grimoire to make something that is really a synthesis of quite a few sources.\n\nNow it is has been additionally developed to the point where it supports module development, and allows using simple vars in a module to override how spells work.\n\nCaster levels not what you want, you want to have spells ALL be fire based by that fire mage, or that shadow demon you want to do negative damage with it's fire balls. You want to truly block spells, this blocks the special effects too. Or you want spells in an area to work different to support the various rules for planar travel, that is what this is being developed for.\n\nIt also has quite a few options for setting AC caps above +5, or other common things wanted on PW's.\n\nAdditional spells, yes they are in here, with many developed by Kaedrin, and Syrus Greycloak, as well as original spells by me are integrated to varying levels of completion. I've included Lady Ashura's VFX, as well as the light additions. I have done reciprocal gyre, arcane lock, chain missle. I have reaving dispel under development.\n\nThis is a collaborative release, i am not really the author of it all, and quite a bit was done by the developers of Dungeon Eternal( Seed ), by the PRC consortium, by lady desire, by kaedrin, by numerous entries from the vault for both nwn1 and nwn2.\n\nThis release is mainly for scripters, it's got known issues and it's been designed specifically to prevent exploits and make fair PVP possible, but i invite any and all who are interested to download it and take a look.\n\nWhat it does is quite involved.\nCommon libraries ( string, math )\nDescriptors support\nEnergy substitution\nNew SEFs for cones, shields, Auras, and walls of fire.\nSpecial effect lookup functions by damage type and descriptor with support for quite a few shapes of SEF's ( cone from mouth, hand, and chest, aura, walls of fire, impact, saving throw, shield, explode, AOE ).\nMVC methodology for modifying spell effects ( do logic in precast, then use vars which are picked up by the spells later, look at TG named scripts which can be put in the on enter and on exit of a trigger which allow the damaqe type to be changed inside the trigger )\nCorrecting bugs in NWN2 - lots of work arounds\nComplete redoing of figuring of caster stats\nSeed's dispel magic routine - with options to make it follow SRD rules.\nArea tags that store scores to prevent AOE's from going wonky.\nVisualEffects.2da revamped so as to allow more constants to work.\nLot's of options to control how it works\nIntegration with Kaedrins content, and lots of other third party content.\nNew spells, and reworking of old spells Link .\nPrevention of the Spirit shaman bug which allows a 2nd level caster to get 9th level spells and the practiced caster bugs.\nNew effect removal routines.\nMost code has been refactored and cleaned up, OEI spell scripts have been redone, and common bits of code have been moved to functions.\n\nKnown issues\nReaving does not work yet\nRabbits and triggering of encounters for teleportation is not fully working yet.\nBaleful and Benign teleport are not working.\nSyrus spells are semi-implemented, icons work, SEF's are being looked at, and few are really tested.\nMany spells still have Dex2 specific implementations - which do not have toggles yet-need to make these only happen if preferences are set.\nUsing the PRC compiler, not sure what the issues are with the vanilla compiler that comes with the game.\nVisualeffects.2da low resolution SEFs not working.\nStill needs a lot of testing for the new spells, and probably some tweaking.\n\n\nI also did not include my module event scripts, which have quite a bit of complicated code more related to cheating than anything else.\n\nDiscussion is at the citadel -\nOverview\nLink\nMetamodifier Vars\nLink","Rating":10,"Votes":2,"Awards":[]},"276":{"Name":"Nature's Avatar Reversion Fix","Author":"Lore of Old","Submitted":20090322,"Updated":20090322,"Category":"Spells","Type":"Type - Other","Format":"Code Only","ShowCode":"//::///////////////////////////////////////////////\n//:: Nature's Avatar\n//:: nw_s0_natavatar.nss\n//:: Copyright (c) 2006 Obsidian Entertainment\n//:://////////////////////////////////////////////\n/*\n\tWith a touch, you gift your animal ally with nature's strength, resilience\n\tand speed.  \n\t\n\tThe affected animal gains a +10 bonus on attack and damage rolls, and 1d8\n\ttemporary hit points per caster level, plus the effect of the haste spell.\n*/\n//:://////////////////////////////////////////////\n//:: Created By: Patrick Mills\n//:: Created On: Oct 17, 2006\n//:://////////////////////////////////////////////\n\n\n#include \"nw_i0_spells\"\n#include \"x2_inc_spellhook\" \n#include \"nwn2_inc_metmag\"\n\n\nvoid main()\n{\n    /*\n      Spellcast Hook Code\n      Added 2003-07-07 by Georg Zoeller\n      If you want to make changes to all spells,\n      check x2_inc_spellhook.nss to find out more\n\n    */\n\n    if (!X2PreSpellCastCode())\n    {\n    // If code within the PreSpellCastHook (i.e. UMD) reports FALSE, do not run this spell\n        return;\n    }\n\n// End of Spell Cast Hook\n\n//Major variables\n\tobject \toTarget \t= \tGetSpellTargetObject();\n\tobject \toCaster \t= \tOBJECT_SELF;\n\teffect \teHaste \t\t= \tEffectHaste();\n\teffect \teVis \t\t= \tEffectVisualEffect(VFX_SPELL_DUR_NATURE_AVATAR); \n\teffect \teAttack \t=\tEffectAttackIncrease(10);\n\teffect\teDamage\t\t=\tEffectDamageIncrease(DAMAGE_BONUS_10, DAMAGE_TYPE_SLASHING);\n\teffect\teBonusHP;\n\teffect \teLink;\n\tint\t\tnHP\t\t\t=\td8() * GetCasterLevel(oCaster);\n\tfloat\tfDuration\t=\tRoundsToSeconds(GetCasterLevel(oCaster));\n\n//None of the following meta-magic behaviors can be used in base NWN2, the checks only exist to support epic levels\n//should they be added later.\n//Determine duration\n\tApplyMetamagicDurationMods(fDuration);\n\t\n\n//Determine HP Bonus\n\t\t\tnHP\t\t\t=\tApplyMetamagicVariableMods(nHP, 160);\n\t\t\teBonusHP\t=\tEffectTemporaryHitpoints(nHP);\n\t\n//Link up effects\n\t\t\teLink\t=\tEffectLinkEffects(eHaste,eAttack);\n\t\t\teLink\t=\tEffectLinkEffects(eLink,eVis);\n\t\t\teLink\t=\tEffectLinkEffects(eLink,eDamage);\n\t\t\t//eLink\t=\tEffectLinkEffects(eLink,eBonusHP);\n\n\t\t\teffect eOnDispell = EffectOnDispel(0.0f, RemoveEffectsFromSpell(oTarget, SPELL_NATURE_AVATAR));\n\t\t\teLink = EffectLinkEffects(eLink, eOnDispell);\n\t\t\teBonusHP = EffectLinkEffects(eBonusHP, eOnDispell);\n\n//Validate target and apply effects\n\tif (GetIsObjectValid(oTarget))\n\t{\n\t\tif (spellsIsTarget(oTarget, SPELL_TARGET_ALLALLIES, oCaster))\n\t\t{\n\t\t\tif ((GetRacialType(oTarget) == RACIAL_TYPE_ANIMAL\n\t\t\t\t|| GetRacialType(oTarget) == RACIAL_TYPE_BEAST\n\t\t\t\t|| GetRacialType(oTarget) == RACIAL_TYPE_VERMIN))\n\t\t\t{\n\t\t\t\tRemoveEffectsFromSpell(oTarget, GetSpellId());\n\t\t\t\tApplyEffectToObject(DURATION_TYPE_TEMPORARY, eBonusHP, oTarget, fDuration);\n\t\t\t\tApplyEffectToObject(DURATION_TYPE_TEMPORARY, eLink, oTarget, fDuration);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tFloatingTextStrRefOnCreature(184683, oCaster, FALSE);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\t\t\t\t\n\t\tSelect All Text | View Code in separate window","Patch":"1.22","NWN2Game":"NWN2:MotB","Description":"This allow Druids to cast Nature's Avatar on themselves while wildshaped. This was possible, but was then \"fixed\" by a patch. All work is by Obsidian, basically I just removed a check. This should be compatible with any pack who doesn't have a custom version of the spell.\nThis is BETA. I see a few things that could break, though I don't have the time to fix'em. Namely in the plants form. Say me how it goes.","Rating":"N/A","Awards":[]},"277":{"Name":"Sit on objecs / ActionSit","Author":"DeekingTheMadWizard","Submitted":20090329,"Updated":20090330,"Category":"Scripting routines","Type":"Type - Sitting","Format":"Module and Code","ShowCode":"//::////////////////////////////////////////////////////////////////////\n//:: Placeable OnUse Script\n//::////////////////////////////////////////////////////////////////////\n/*\n\trewrite of patcha's On Sit script\n\twitch aint updated since 15-6-2007\n\tUses SetScale instead of blunt force destroy \n\tand respawn.\n\tthis makes it possible to tint object without\n\tneed to make multiple objects\n\t\n\tuses variables\n\tfloat Offset;   determines the offset of the \n\t\t\t\t\tFacing of the placeable and \t\t\t\n\t\t\t\t\tthe direction the player needs \n\t\t\t\t\tto sit\n\tfloat MedScaleX: the scale from small to med size on the X axis\n\tfloat MedScaleY: the scale from small to med size on the Y axis\n\tfloat MedscaleZ: the scale from small to med size on the Z axis\n\t\t\t\t\t\n\tfloat SmallScaleX: the scale from met to small on the X axis\n\tfloat SmallScaleY: the scale from met to small on the Y axis\n\tfloat SmallScaleZ: the scale from met to small on the Z axis\n\n\tnote: Scale numbers are same as in the blueprints of the toolset\n\t1;1;1 (X,Y,Z)\t\n*/\n//:://///////////////////////////////////////////////////////////////////\n//:: Created By: Meesterslager aka DeekinTheMadWizard\n//:: Created On: 29-9-2009\n//:://///////////////////////////////////////////////////////////////////\n\nvoid AnimationSitDelayWrapper (object oObject)\n{\n\tPlayCustomAnimation (oObject, \"sitidle\", 1, 1.0);\n}\n\n\n// float GetNormalizedDirection(float fDirection):\n// * This script returns a direction normalized to the range 0.0 - 360.0\n// * Copyright (c) 2002 Floodgate Entertainment\n// * Created By: Naomi Novik\n// * Created On: 11/08/2002\nfloat GetNormalizedDirection(float fDirection)\n{\n    float fNewDir = fDirection;\n    while (fNewDir >= 360.0) {\n        fNewDir -= 360.0;\n    }\n    while (fNewDir <= 0.0) {\n        fNewDir += 360.0;\n    }\n\n    return fNewDir;\n}\n\nvoid main()\n{\n\tobject oSit = OBJECT_SELF;\n\t// Checks if seat is taken and stop the script if it is.\n\tobject oLastSitter = GetLocalObject (oSit, \"LastSitter\");\n\tif (GetDistanceBetween (oSit, oLastSitter) <= 0.1 && GetArea(oSit) == GetArea (oLastSitter))\n\t\treturn;\n\telse\n\t{\n\t\tint nSizeSit = GetLocalInt (oSit, \"Size\");\n\t\tint nSizeSitter;\n\t\tlocation lSit = GetLocation (oSit);\n\t\tfloat fOffset = GetLocalFloat (oSit, \"Offset\");\n\t\tfloat fFacing = GetNormalizedDirection (GetFacing (oSit) + fOffset);\n\t\tobject oSitter = GetLastUsedBy();\n\t\t// Check Sitter Size (dwarves are small for sitting purposes)\n\t\tif (GetCreatureSize (oSitter) == CREATURE_SIZE_MEDIUM && GetRacialType(oSitter) != RACIAL_TYPE_DWARF)\n\t\t\tnSizeSitter = 0;\n\t\telse if (GetCreatureSize (oSitter) == CREATURE_SIZE_SMALL ||\n\t\t\t\t GetRacialType(oSitter) == RACIAL_TYPE_DWARF)\n\t\t\tnSizeSitter = 1;\n\t\t// Change the size of 0Sit if sizes dont match\n\t\tif (nSizeSit != nSizeSitter)\n\t\t{\n\t\t\tif (nSizeSit == 0)\n\t\t\t{\n\t\t\t\tSetScale (oSit, GetLocalFloat (oSit, \"SmallScaleX\"), GetLocalFloat (oSit, \"SmallScaleY\"), GetLocalFloat (oSit, \"SmallScaleZ\"));\n\t\t\t\tSetLocalInt (oSit, \"Size\", 1);\n\t\t\t}\n\t\t\telse if (nSizeSit == 1)\n\t\t\t{\n\t\t\t\tSetScale (oSit, GetLocalFloat (oSit, \"MedScaleX\"), GetLocalFloat (oSit, \"MedScaleY\"), GetLocalFloat (oSit, \"MedScaleZ\"));\t\n\t\t\t\tSetLocalInt (oSit, \"Size\", 0);\n\t\t\t}\t\n\t\t}\n\t\t// Timme to start to sit\n\t\t\tAssignCommand (oSitter, ClearAllActions());\n\t\t\tSetLocalObject (oSit,\"LastSitter\", oSitter);\n\t\t\tAssignCommand (oSitter,ActionMoveToLocation\t(lSit));\n\t\t\tDelayCommand (1.5, AssignCommand (oSitter, SetFacing (fFacing)));\n\t\t\tDelayCommand (2.5, AssignCommand (oSitter, AnimationSitDelayWrapper (oSitter)));\n\t}\n}Select All Text | View Code in separate window","Patch":"1.22","NWN2Game":"All","Description":"This code is completely rewritten but inspired by by SitOnObject by Patcha Link\n\nUnfortunatly he stopped supporting his code in 2007, a new function (SetScale) has been made by OEI and his code became messy.\n\nWARNING: this is not backwards compatible with patcha's scripts!\nIts a complete new rewrite\n\nwhat is the main difference?\n\nChecks are improved: new races automaticly work as long as their sit hight is same as their race size (dwarf is an exeption since its a medium race with small race sit height)\n\nNo more blunt destroy/create: now u can tint your object, rename it, add scripts without the need to create new blueprints. it uses setscale witch just change the size of the placeable to fit the Sitter, instead of spawning a new smaller/bigger placeable\n\nNo more needs for blueprints no more need to add blueprints to your mod to make it work, a few variables control it all.\n\nLess Code, better performance This code is small and uses a lot less checks to make it work.\n\n\nSee room for improvement? tell me and ill try to get it in.\n\nSome blueprints added to make your life easy.\n\n","Rating":"N/A","Awards":[]},"278":{"Name":"Uncle FB's NPC control","Author":"Uncle FB","Submitted":20090329,"Updated":20091102,"Category":"Scripting routines","Type":"Type - NPC Players","Format":"Module and Code","Patch":"1.22","NWN2Game":"All","Description":"A method to easily control NPC's. 6 time slots per day plus the ability to run up to 4 separate activities per time slot.\n\nFEATURES:\n1. easy locate and run activities via waypoint.\n2. activity changes at 3,7,11,15,19, and 23 hours\n3. ability to change time and activity between \"standard\" time changes (up to 3 changes per NPC per standard time shift) a total of 24 possible activities per day.\n4. NPCs can switch in and out of ambient behavior (nw_c2_default1 type).\n5. NPC control of lighting in area.\n6. NPCs will cross-area transition to get to their waypoint and perform their activities. \n7. day, swing, and night shift enabled.\n8. use of faction for begin and end of aggressive behaviors.\n9. customizable speak file\n10. customizable armor and weapon settings\n\nSCRIPT SLOTS REQUIRED\n1. NPC heartbeat script slot\n2. Area On Client Enter slot (OPTIONAL) Use the \"npc_oc_enter\" script for areas where the PC might enter while the NPC is sleeping.\n \n \nRELEASE NOTES\nv1.0 Very BETA BETA\nv1.1 Still Beta\nv1.2\nv1.3\n-added cross area transition for NPCs\nv1.4\n-modified cross area transition to search for area specific tags (see Manual).\n-added ambient behavior support. This works really well for a market place. The NPCs will wander around and start conversations with each other.\n-added NpcLightKeeper. This NPC will turn lights on at night and off at day.\n-added NpcBarmaid and NpcBartender\n\nMODS POSTED\nSingle NPC - This is the easiest mod to deconstruct. This mod has 1 NPC and 1 set of NPC waypoints. (v1.3 framework)\nHome - This mod is the only one showing how cross area transition works. It is 2 areas with 4 NPC's and some chickens. (v1.3 framework)\nStress Test - This mod is designed to stress the code, the computer, and the module. (v1.3 framework)\n\nCOMPATIBILITY\nNWN2 only \n-Comment out line 6 \"#include \"ginc_combat\" in script npc_include.nss\n-Comment out line 1151 \"SuspendAI\" in script npc_include.nss\n\nNWN2 and MOTB\n-Comment out line 6 \"#include \"ginc_combat\" in script npc_include.nss\n-Comment out line 1151 \"SuspendAI\" in script npc_include.nss\n\nNWN2, MOTB, and SOZ\nCompatible\n\nComments and suggestions are always welcome.\n\nEnjoy\n\n\n\n","Rating":9.75,"Votes":9,"Awards":[]},"279":{"Name":"SoZ Party max override","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20090406,"Updated":20091120,"Category":"NPCs","Type":"Type - NPC Players","Format":"Code Only","ShowCode":"//\tgui_cohort_selection\n/*\n\tSets the party limit and brings up the Cohort Selection GUI.\n*/\n//\tTDE 8/27/08\n// Brendan Bellina - set nPartyMax to 15 instead of 5; allow leadership feat to add 1 more\n#include \"ginc_debug\"\n#include \"ginc_param_const\"\n#include \"kinc_cohort\"\n\nconst string GUI_COHORT_XML = \"cohortselect.xml\";\nconst string GUI_COHORT_SCREEN = \"SCREEN_COHORT_SELECT\";\n\nint SetPartyLimit(object oPC)\n{\n\tint nPartySize = 0;\n\tint nPartyMax = 15;\t// Unless someone in the party has the Leadership feat, the maximum size of the party is 5.\n\tint nCohorts = CohortsInParty();\n\t\t\n\tobject oFactionMember = GetFirstFactionMember( oPC, FALSE );\n\t\n\twhile ( GetIsObjectValid(oFactionMember) )\n\t{\n\t\tif( GetIsRosterMember(oFactionMember) || GetIsOwnedByPlayer(oFactionMember) )\n\t\t{\n\t\t\tif ( GetHasFeat (FEAT_LEADERSHIP, oFactionMember, TRUE) && ( GetIsPlayerCreated(oFactionMember)  || GetIsOwnedByPlayer(oFactionMember) ) )\n\t\t\t\tnPartyMax++;\t// Someone in the party has the Leadership feat, so allow one more in the party.\n\t\t\tnPartySize++;\n\t\t}\n\t\toFactionMember = GetNextFactionMember( oPC, FALSE );\n\t}\n\t\n\tint bPartyLimit = nPartyMax - nPartySize + nCohorts;\n\tPrettyDebug(\"gui_cohort_selection: Party Limit = \" + IntToString(bPartyLimit));\t\n\n\treturn bPartyLimit;\n}\n\nvoid main()\n{\n\tobject oPC = GetPCSpeaker();\n\t\n\tSetRosterNPCPartyLimit(SetPartyLimit(oPC));\n\t\n\tPrettyDebug(\"gui_cohort_selection: Cohort Select screen opening.\");\n\tDisplayGuiScreen(oPC, GUI_COHORT_SCREEN, FALSE, GUI_COHORT_XML);\n}Select All Text | View Code in separate window","Patch":"1.22","NWN2Game":"NWN2:SoZ","Description":"Put the included (.ncs) script into your override folder to allow up to 15+1 in the SoZ party instead of 5+1. No need to change campaign settings to increase the number of cohorts.\n\nThe number of Player created party members is limited to 4 in the SoZ campaign settings, but that can be increased through the Toolset Campaign Editor plugin.","Rating":7.88,"Votes":2,"Awards":[]},"280":{"Name":"Fixed Reduce Spells","Author":"Wyvern76","Submitted":20090409,"Updated":20090409,"Category":"Spells","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.21","NWN2Game":"NWN2:SoZ","Description":"I was extremely excited to have the reduce line of spells added to NWN2. While I've found Enlarge interesting as it made halflings and other small races grow to the approximate hight of the taller races.\nI wrongly assumed Reduce would do the exact opposite. Indeed Reduce makes players silly doll size small.\n\nI tested in game and found that changing the scale effect in the spells from 0.50 to 0.63 produces the desired effect. That is makes a human match the hight of a halfling instead of a much smaller doll size.","Rating":10,"Votes":1,"Awards":[]},"281":{"Name":"Keep your OC items in MOTB","Author":"Aardison1","Submitted":20090425,"Updated":20091029,"Category":"Other","Type":"Type - Other","Format":"Code Only","Patch":"1.00","NWN2Game":"NWN2:MotB","Description":"Well this is just a file that will override the script which forces you to loose your equipment when you import your chr from the oc or other source. I won't be doing any updates to this becasue the code is directly from the game the only mod i realy did was track it down and comment out the lines of code that striped your chr's items. On a side note, you will still lose your money but I felt that with the items that you have from the oc will more then compensate that loss.\n\nUpdate \n\nI'm sorry people i found out my mistake.\n\njust add all of the files here to your override folder and it should work but if it dosn't please holler on here so i can get my lazy bum back to work","Rating":"N/A","Awards":[]},"282":{"Name":"Anti-magic zone v1.2","Author":"pelhikano","Submitted":20090425,"Updated":20090503,"Category":"Scripting routines","Type":"Type - Spell Cancelling","Format":"Module and Code","Patch":"1.22","NWN2Game":"All","Description":"Anti-magic zone 1.2\nby pelhikano\n\nThis is an implementation of an anti-magic zone, where no spells can be cast, be it by actual casters, from a scroll, wand, potion or other item. \n\nBard songs will also not work, and active (temporary) effects on entering creatures are removed, including effects on currently equipped armor and weapons (like Magic Weapon, Magic Vestment, Flame Weapon and such) as well as anything in inventory. Divine abilities like Divine Shield also don't work.\n\nInside the zone total spell failure as well as Silence affects the creatures. Silence is to ensure Bard inspirations and songs don't work. \n\nWhen you exit the zone, everything should work normally again.\n\nThe code uses the OnEnter and OnExit scripts of a trigger as well as a spell hooking script, 3 scripts in total. \n\nTo make spell hooking work, the *module* variable X2_S_UD_SPELLSCRIPT has to be set to the name of the spellhook script. In the spellhook script, we can check for any conditions that would require the spell to be canceled. Currently this is if a local variable \"ps_anti_magic_zone\" has the value 1 (this is set on any creature that enters the zone, and set to 0 when exiting it).\n\nIf the creature is in the zone, then any spell from scroll, potion, wand or other item is canceled.\n\nProblems:\n- currently a brooch of shielding will still create that shield spell visual effect even though the actual effect is canceled.\n- intentional: healkits work, potions of healing don't (since those are spells).\n- not yet fixed: druid abilities still work in antimagic\n\nChanges:\n\nv1.2:\n- fixed: potions and other items that do not have a valid caster, but a valid target are now correctly disabled in antimagic\n- added a modified script for the Ethereal Jaunt spell that did not have a spellhook, therefore scrolls worked in antimagic\n\nv1.1:\n- fixed bug in OnExit script\n- remove all effects on items in inventory as well\n- demo for using Antimagic in an entire area added\n","Rating":10,"Votes":3,"Awards":[]},"283":{"Name":"Infinite Summon Familiar","Author":"Rolenka","Submitted":20090505,"Updated":20090513,"Category":"Skill/Feats","Type":"Type - Henchmen","Format":"Code Only","Patch":"1.22","NWN2Game":"All","Description":"This mod will let a Wizard or Sorcerer cast Summon Familiar an infinite number of times per day.\n\nIt will not let them summon more than one familiar at a time.\n\nThis mod will not work if the AI summons the familiar (it uses a different script). You have to select the character and summon the familiar yourself.\n\nI created this mod because I didn't like having to rest in MotB just because Kaji died and I wanted to open a lock.","Rating":"N/A","Awards":[]},"284":{"Name":"Zheldon's Levelup Script","Author":"Zheldon","Submitted":20090510,"Updated":20090511,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"This is a simple level up script. It will compensate for the player's racial level adjustment.\n\nYou can modify it to be used other ways. This version will give the player enough XP to go up by one level.","Rating":3.5,"Votes":1,"Awards":[]},"285":{"Name":"Uncle FB's NPC Barmaid","Author":"Uncle FB","Submitted":20090530,"Updated":20090619,"Category":"Scripting routines","Type":"Type - NPC Players","Format":"Module and Code","ShowCode":"//NPC_Barmaid include\n//npc_bminc\n//Uncle FB 05/2009\n//This script uses 2 NPCs \n//1 barmaid npc with the \"npc_barmaid\" script on the \"on heartbeat\" slot\n//1 bartender with the \"npc_bartender\" script in the \"on heartbeat\" slot\n//the bartender tag should be filled out at the beginning of the \"npc_barmaid\" script SEE NOTES in npc_barmaid\n//the bar maid will refer to the bartender by name (listed in properties of bartender in toolset)\n//1 generic waypoint with the tag \"WP_BAR\" for the bar maid to order from and rest at\n//1 generic waypoint with the tag \"WP_BARTENDER\" for the bartender to stand at\n//1 generic waypoint with the tag \"WP_KEG\" for the bartender to go to and fill drink orders\n//the bar maid will randomly choose a customer and take an order\n//the drink list can be customized and will be used throughout the bar maid conversation\n//you can set up to 10 exclusions (other NPCs that the bar maid will not serve)\n//among the exclusions should be the bar maid, and the bartender (maybe the innkeeper and/or musicians)\n//exclusions should be filled out at the beginning of the \"npc_barmaid\" script SEE NOTES in npc_barmaid\n\nvoid  TakeOrder(object oNpc)\n{\nobject oBartender = GetObjectByTag (GetLocalString (oNpc, \"bartender\"));\nstring sBartender = GetName (oBartender);\nint nMultiple;\nstring sOrder1;\nstring sOrder2;\n//Set these conversation strings for the bar maid to speak to the customer\n//when asking if they want to order anything\n    {switch (Random (6))//Bar Maid to customer first question\n        {\n        case 1: SetLocalString (oNpc, \"query\", \"What can I get for you?\"); break; \n        case 2: SetLocalString (oNpc, \"query\", \"What'll you have?\"); break;\n        case 3: SetLocalString (oNpc, \"query\", \"Do you need anything?\"); break; \n        case 4: SetLocalString (oNpc, \"query\", \"Another round?\"); break; \n        case 5: SetLocalString (oNpc, \"query\", \"Will you have the usual?\"); break; \n        default: SetLocalString (oNpc, \"query\", \"We have Thaylian red, black beer, golden mead, fruit wine, and Moorish whiskey\"); break;\n        } \n    }\n//This is the random drink list part 1\n//change this to whatever you want your custom drink list to contain\n    {switch (Random (5))//Roll order part 1\n        {\n        case 1: sOrder1 = \"Thaylian red\"; SetLocalString (oNpc, \"order1\", sOrder1);break;  \n        case 2: sOrder1 = \"black beer\"; SetLocalString (oNpc, \"order1\", sOrder1);break; \n        case 3: sOrder1 = \"golden mead\"; SetLocalString (oNpc, \"order1\", sOrder1);break; \n        case 4: sOrder1 = \"fruit wine\"; SetLocalString (oNpc, \"order1\", sOrder1);break;  \n        default: sOrder1 = \"Moorish whiskey\"; SetLocalString (oNpc, \"order1\", sOrder1);break; \n        }\n    }\n//This is the random drink list part 2\n//change this to whatever you want your custom drink list to contain\n    {switch (Random(5))//Roll order part 2\n        {\n        case 4: sOrder2 = \"Thaylian red\"; SetLocalString (oNpc, \"order2\", sOrder2);break;  \n        case 3: sOrder2 = \"black beer\"; SetLocalString (oNpc, \"order2\", sOrder2);break; \n        case 2: sOrder2 = \"golden mead\"; SetLocalString (oNpc, \"order2\", sOrder2);break; \n        case 1: sOrder2 = \"fruit wine\"; SetLocalString (oNpc, \"order2\", sOrder2);break;  \n        default: sOrder2 = \"Moorish whiskey\"; SetLocalString (oNpc, \"order2\", sOrder2);break; \n        }  \n    }\n//customer order response concatenated with drink list order\n    {switch (Random (6))//customer order to barmaid\n        {\n        case 1: \n        SetLocalInt (oNpc, \"multiple\", 1);\n        if (sOrder1 == sOrder2)\n            {SetLocalString (oNpc, \"response1\", \" I'll have 2 \"+sOrder1+\"s\");}\n            else {SetLocalString (oNpc, \"response1\", \"I'll have \"+sOrder1+\" and bring my friend some \"+sOrder2);}\n        break;    \n        case 2: \t\t\n        SetLocalInt (oNpc, \"multiple\", 1);\n        if (sOrder1 == sOrder2)\n            {SetLocalString (oNpc, \"response1\", \" How about a couple of tankards of \"+sOrder1);}\n            else {SetLocalString (oNpc, \"response1\", \"One \"+sOrder1+\" and one \"+sOrder2);}\n        break; \n        case 3: \t\t\n        SetLocalInt (oNpc, \"multiple\", 1);\n        if (sOrder1 == sOrder2)\n            {SetLocalString (oNpc, \"response1\", \" 2 orders of \"+sOrder1);}\n            else {SetLocalString (oNpc, \"response1\", \"Ill have \"+sOrder1+\" and \"+sOrder2+\" for my partner\");}\n        break; \n        case 4:\n        SetLocalInt (oNpc, \"multiple\", 0);\n        SetLocalString (oNpc, \"response1\", \"I'll take the \"+sOrder1);\n        break;\n        case 5:\n        SetLocalInt (oNpc, \"multiple\", 0);\n        SetLocalString (oNpc, \"response1\", \"I'd like \"+sOrder1);\n        break; \n        default:\n        SetLocalInt (oNpc, \"multiple\", 0);\n        SetLocalString (oNpc, \"response1\", \"Bring me the \"+sOrder1);\n        break;               \n        }\n    }\n//bar maid confirming order with customer\nnMultiple = GetLocalInt (oNpc, \"multiple\");\n    {switch (nMultiple) //Bar maid to customer on way to get order from bartender\n        {\n        default: //single order\n            {switch (Random (3))\n                {\n                case 1:\n                SetLocalString (oNpc, \"response2\", \"One \"+sOrder1+\" coming right up\");\n                break;\n                case 2:\n                SetLocalString (oNpc, \"response2\", \"I'll be right back with your \"+sOrder1);\n                break;\n                default:\n                SetLocalString (oNpc, \"response2\", sOrder1+\" it is, give me just one minute to get it\");\n                break;\n                }\n            }\n\t\tbreak;\t\n        case 1: //multiple order\n            {switch (Random (3))\n                {\n                case 1:\n                if (sOrder1 == sOrder2) \n                    {SetLocalString (oNpc, \"response2\", \"Two \"+sOrder1+\"s coming right up\");}\n                else {SetLocalString (oNpc, \"response2\", \"One \"+sOrder1+\" and one \"+sOrder2+\" coming right up\");} \n                break;    \n                case 2:\n                if (sOrder1 == sOrder2) \n                    {SetLocalString (oNpc, \"response2\", \"It'll be just a minute for those \"+sOrder1+\"s\");}\n                    else {SetLocalString (oNpc, \"response2\", sOrder1+\" and \"+sOrder2+\", I'll be right back\");} \n                break;\n                default:\n                if (sOrder1 == sOrder2) \n                    {SetLocalString (oNpc, \"response2\", \"Let me go get those \"+sOrder1+\"s for you\");}\n                    else {SetLocalString (oNpc, \"response2\", \"I'll be just a minute\");} \n                break;                                          \n                }\n            }\n\t\tbreak;\t\n        }\n    }\n//bar maid issuing order to bartender to be filled\n    {switch (nMultiple)//Bar maid to Bartender\n        {\n        default: //single order\n            {switch (Random (3))\n                {\n                case 1:\n                SetLocalString (oNpc, \"response3\", \"One \"+sOrder1+\" \"+sBartender);\n                break;\n                case 2:\n                SetLocalString (oNpc, \"response3\", sOrder1+\" please\");\n                break;\n                default:\n                SetLocalString (oNpc, \"response3\", sOrder1+\", and shake a leg\");\n                break;\n                }\n            }\n\t\tbreak;\t\n        case 1: //multiple order\n            {switch (Random (3))\n                {\n                case 1:\n                if (sOrder1 == sOrder2) \n                    {SetLocalString (oNpc, \"response3\", \"Two \"+sOrder1+\"s \"+sBartender);}\n                    else {SetLocalString (oNpc, \"response3\", \"One \"+sOrder1+\" and one \"+sOrder2);} \n                break;    \n                case 2:\n                if (sOrder1 == sOrder2) \n                    {SetLocalString (oNpc, \"response3\", sBartender+\", get me two \"+sOrder1+\"s\");}\n                    else {SetLocalString (oNpc, \"response3\", sOrder1+\" and \"+sOrder2);} \n                break;\n                default:\n                if (sOrder1 == sOrder2) \n                    {SetLocalString (oNpc, \"response3\", \"Some thirsty people tonight, two \"+sOrder1+\"s\");}\n                    else {SetLocalString (oNpc, \"response3\", \"One \"+sOrder1+\" and one \"+sOrder2+\" for the big spenders over there\");} \n                break;                                          \n                }\n            }\n\t\tbreak;\t\n        }\n    }\n//bartender confirming order to be filled\n\t{switch (Random (3))//bartender to bar maid\n\t\t{\n\t\tcase 1:\n\t\tSetLocalString (oNpc, \"response4\", \"Got it!\");\n\t\tbreak;\n\t\tcase 2:\n\t\tSetLocalString (oNpc, \"response4\", \"I'm on it\");\n\t\tbreak;\n\t\tdefault:\n\t\tSetLocalString (oNpc, \"response4\", \"Coming right up\");\n\t\t}\n\t}\n//bar maid delivering drinks to customer and assessing drink charges\n\t{switch (nMultiple)// bar maid to customer delivering drinks\n\t\t{\n\t\tcase 1:\n\t\tif (sOrder1 == sOrder2) \n        \t{SetLocalString (oNpc, \"response5\", \"Two \"+sOrder1+\"s, that will be 8 coppers\");}\n\t\t\telse\n\t\t\t{SetLocalString (oNpc, \"response5\", \"One \"+sOrder1+\" and one \"+sOrder2+\" enjoy!  That will be 8 coppers\");}\n\t\tbreak;\n\t\tdefault:\n\t\tSetLocalString (oNpc, \"response5\", \"One \"+sOrder1+\", that will run 4 coppers today.\");\n\t\tbreak;\n\t\t}\n\t}\n//customer to bar maid after receiving drinks\n\t{switch (Random(4))//customer to bar maid\n\t\t{\n\t\tcase 1:\n\t\tSetLocalString (oNpc, \"response6\", \"Ahhh... that hits the spot thank you\");\n\t\tbreak;\n\t\tcase 2: \n\t\tSetLocalString (oNpc, \"response6\", \"Here you go, and a little extra for your speed\");\n\t\tbreak;\n\t\tcase 3:\n\t\tSetLocalString (oNpc, \"response6\", \"MMM... this is good\");\t\n\t\tbreak;\n\t\tdefault:\n\t\tSetLocalString (oNpc, \"response6\", \"If you see my cup starting to get empty, come on back OK?\");\n\t\tbreak;\n\t\t}\n\t}\n//bartender to bar maid after filling drink order from bar maid\n\t{switch (nMultiple)//bartender to bar maid after getting drinks\n\t\t{\n\t\tcase 1:\n\t\tif (sOrder1 == sOrder2) \n        \t{SetLocalString (oNpc, \"response7\", \"Two \"+sOrder1+\"s\");}\n\t\t\telse\n\t\t\t{SetLocalString (oNpc, \"response7\", \"One \"+sOrder1+\" and one \"+sOrder2);}\n\t\tbreak;\n\t\tdefault:\n\t\tSetLocalString (oNpc, \"response7\", \"One \"+sOrder1);\n\t\tbreak;\n\t\t}\n\t}\n//random chatter from bar maid to bartender at rest\n\t{switch (Random (4))//Bar maid to bartender at rest\n\t\t{\n\t\tcase 1: SetLocalString (oNpc, \"response8\", \"That guy in the corner is about to get sick, he has had quite a bit of \"+sOrder1);break;\n\t\tcase 2: SetLocalString (oNpc, \"response8\", \"The tips have been all right today\");break;\n\t\tcase 3: SetLocalString (oNpc, \"response8\", \"OH, he's turning green. That \"+sOrder1+\" will get you every time.\");break;\t\n\t\tdefault: SetLocalString (oNpc, \"response8\", \"This is a thirsty crowd\");break;\n\t\t}\n\t}\n//random chatter from bartender to bar maid at rest\n\t{switch (Random (4))//Bartender to bar maid at rest\n\t\t{\n\t\tcase 1: SetLocalString (oNpc, \"response9\", \"We are running a bit low on the \"+sOrder2);break;\n\t\tcase 2: SetLocalString (oNpc, \"response9\", \"See if you can push the \"+sOrder2);break;\n\t\tcase 3: SetLocalString (oNpc, \"response9\", \"Does this \"+sOrder2+\" smell all right to you?  It looks a little cloudy.\");break;\n\t\tdefault: SetLocalString (oNpc, \"response9\", \"If I have to listen to one more sob story from some guy liquored up on \"+sOrder2+\"...\");break;\n\t\t}\n\t}\t\t\t\n}\n\n//this function counts the current number of creatures in the area where the bar maid is operating\nint GetCreatureCount(object oNpc)\n{\nobject oNpc = OBJECT_SELF;\nint nCount;\nint nResult;\nobject oCount;\nint nPatrons = GetLocalInt (oNpc,\"patrons\");\nif (nPatrons != 0){return nPatrons;}\n\telse \n\t{\n\toCount = GetNearestCreature (CREATURE_TYPE_PLAYER_CHAR, PLAYER_CHAR_NOT_PC, oNpc, nCount);\n\twhile (oCount != OBJECT_INVALID)\n\t\t{\n\t\tnCount++;\n\t\toCount = GetNearestCreature (CREATURE_TYPE_PLAYER_CHAR, PLAYER_CHAR_NOT_PC, oNpc, nCount);\n\t\tnResult = nCount;\n\t\t}\n\tSetLocalInt (oNpc, \"patrons\", nResult);\n\treturn nResult;\t\n\t}\n}\n\n//this function targets a customer that is not on the exclusion list\n//it will try to target four times before returning an invalid object\nobject GetCustomer(object oNpc, int nPatrons)\n{\nobject oExclude1 = GetObjectByTag (GetLocalString (oNpc, \"exclude1\"));\nobject oExclude2 = GetObjectByTag (GetLocalString (oNpc, \"exclude2\"));\nobject oExclude3 = GetObjectByTag (GetLocalString (oNpc, \"exclude3\"));\nobject oExclude4 = GetObjectByTag (GetLocalString (oNpc, \"exclude4\"));\nobject oExclude5 = GetObjectByTag (GetLocalString (oNpc, \"exclude5\"));\nobject oExclude6 = GetObjectByTag (GetLocalString (oNpc, \"exclude6\"));\nobject oExclude7 = GetObjectByTag (GetLocalString (oNpc, \"exclude7\"));\nobject oExclude8 = GetObjectByTag (GetLocalString (oNpc, \"exclude8\"));\nobject oExclude9 = GetObjectByTag (GetLocalString (oNpc, \"exclude9\"));\nobject oExclude10 = GetObjectByTag (GetLocalString (oNpc, \"exclude10\"));\nint nRandom = Random(nPatrons);\nobject oCustomer = GetNearestCreature (CREATURE_TYPE_PLAYER_CHAR, PLAYER_CHAR_NOT_PC, OBJECT_SELF, nRandom);\n    if (oCustomer !=  OBJECT_SELF && oCustomer != oExclude1 && oCustomer != oExclude2 && oCustomer != oExclude3 && oCustomer != oExclude4 && oCustomer != oExclude5\n\t&& oCustomer != oExclude6 && oCustomer != oExclude7 && oCustomer != oExclude8 && oCustomer != oExclude9 && oCustomer != oExclude10)\n\t\t{if (GetIsObjectValid (oCustomer) == TRUE)\n\t\t\t{return oCustomer;}}\nnRandom = Random(nPatrons);\t\n    if (oCustomer !=  OBJECT_SELF && oCustomer != oExclude1 && oCustomer != oExclude2 && oCustomer != oExclude3 && oCustomer != oExclude4 && oCustomer != oExclude5\n\t&& oCustomer != oExclude6 && oCustomer != oExclude7 && oCustomer != oExclude8 && oCustomer != oExclude9 && oCustomer != oExclude10)\n\t\t{if (GetIsObjectValid (oCustomer) == TRUE)\n\t\t\t{return oCustomer;}}\t\nnRandom = Random(nPatrons);\t\noCustomer = GetNearestCreature (CREATURE_TYPE_PLAYER_CHAR, PLAYER_CHAR_NOT_PC, OBJECT_SELF, nRandom);\n    if (oCustomer !=  OBJECT_SELF && oCustomer != oExclude1 && oCustomer != oExclude2 && oCustomer != oExclude3 && oCustomer != oExclude4 && oCustomer != oExclude5\n\t&& oCustomer != oExclude6 && oCustomer != oExclude7 && oCustomer != oExclude8 && oCustomer != oExclude9 && oCustomer != oExclude10)\n\t\t{if (GetIsObjectValid (oCustomer) == TRUE)\n\t\t\t{return oCustomer;}}\t\nnRandom = Random(nPatrons);\t\noCustomer = GetNearestCreature (CREATURE_TYPE_PLAYER_CHAR, PLAYER_CHAR_NOT_PC, OBJECT_SELF, nRandom);\n    if (oCustomer !=  OBJECT_SELF && oCustomer != oExclude1 && oCustomer != oExclude2 && oCustomer != oExclude3 && oCustomer != oExclude4 && oCustomer != oExclude5\n\t&& oCustomer != oExclude6 && oCustomer != oExclude7 && oCustomer != oExclude8 && oCustomer != oExclude9 && oCustomer != oExclude10)\n\t\t{if (GetIsObjectValid (oCustomer) == TRUE)\n\t\t\t{return oCustomer;}}\nSetLocalInt (oNpc, \"barmaid\", 7);\t\t\t\t\t\t\t\nreturn OBJECT_INVALID;\n}\n\nvoid AreaCheck (object oCustomer, object oNpc)\n{\nif (GetArea (oCustomer) != GetArea (oNpc))\n\t{\n\tDeleteLocalInt (oNpc, \"barmaid\");\n\tDeleteLocalObject (oNpc, \"customer\");\n\tSetLocalInt (oNpc,\"patrons\", 0);\n\t}\n}\n\n//Action wrapper for PlayCustomAnimation to allow delay and assign\nvoid ActionPlayCustomAnimation(object oNpc, string sAnimationName, int nLooping, float fSpeed = 1.0f)\n{\n    PlayCustomAnimation(oNpc, sAnimationName, nLooping, fSpeed);\t\n}\n\n/////////////////////////////////BARMAID SCRIPT FOLLOWS ////////////////////////\n\n//npc_barmaid script\n//Uncle FB\n//05/2009\n//fill in appropriate bartender tag\n//fill in exclusion tags (NPCs NOT to be served by the bar maid)\n#include \"npc_bminc\"\n\nvoid main ()\n{\nobject oNpc = OBJECT_SELF;\n//fill in the tag of your bartender NPC below where it currently says \"BARTENDER\"\nSetLocalString (oNpc, \"bartender\", \"BARTENDER\");\n\n//fill in the tags of NPCs you do NOT want the NPC bar maid to serve below\n//be sure to include the bartender and the bar maid (also the innkeeper and musicians perhaps)\n//simply un-comment any extra SetLocalString lines you need to  (up to 10 exclusions allowed)\nSetLocalString (oNpc, \"exclude1\", \"BARMAID\");\nSetLocalString (oNpc, \"exclude2\", \"BARTENDER\");\nSetLocalString (oNpc, \"exclude3\", \"BARD011\");\nSetLocalString (oNpc, \"exclude4\", \"BARD012\");\nSetLocalString (oNpc, \"exclude5\", \"BARDM013\");\nSetLocalString (oNpc, \"exclude6\", \"DANCER014\");\n//SetLocalString (oNpc, \"exclude7\", \"BARDM021\");\n//SetLocalString (oNpc, \"exclude8\", \"BARDM021\");\n//SetLocalString (oNpc, \"exclude9\", \"BARDM021\");\n//SetLocalString (oNpc, \"exclude10\", \"BARDM021\");\n\nint nPatrons = GetCreatureCount (oNpc);\nint nRandom = Random(nPatrons);\nint nMaidState = GetLocalInt (oNpc, \"barmaid\");\nobject oCustomer = GetLocalObject (oNpc, \"customer\");\nfloat fCustomer = GetDistanceToObject (oCustomer);\nstring sQuery;\tstring sResponse1;\tstring sResponse2;\tstring sResponse3; string sResponse4;\nstring sResponse5;\tstring sResponse6;\tstring sResponse7; string sResponse8; string sResponse9;\nstring scust;\nobject oBar = GetWaypointByTag(\"WP_BAR\");\nfloat fBar = GetDistanceToObject (oBar);\nobject oRest = GetWaypointByTag(\"WP_REST\");\nobject oBartender = GetObjectByTag (GetLocalString (oNpc, \"bartender\"));\nint nBusy = GetLocalInt (oBartender, \"busy\");\n\t{switch (nMaidState)\n\t\t{\n//default = bar maid has no target and is searching for new target to serve\n//once target acquired move to within 2.1 of taget before proceeding\t\t  \n\t\tdefault:\t\t\n\t\tif (oCustomer == OBJECT_INVALID)\n\t\toCustomer = GetCustomer (oNpc,nPatrons);\n        SetLocalInt (oNpc, \"barmaid\", 1);\n        SetLocalObject (oNpc, \"customer\", oCustomer);\t\n\t\tActionMoveToObject(oCustomer);\n\t\tif\t(fCustomer >= 1.1){ActionMoveToObject (oCustomer,0,1.0);return;}\n\t\t\telse\n\t\t\t{SetLocalInt (oNpc, \"barmaid\",1);}\n\t\tbreak;\n//1. check distance to customer and make sure is less then 1.1 proceed\t\t\n\t\tcase 1:\n\t\tAreaCheck (oCustomer, oNpc);\n\t\tif (fCustomer >= 1.1) {ActionMoveToObject (oCustomer,0,1.0); return;}\n\t\t\telse\n\t\t\tTakeOrder(oNpc);\n\t\t\tsQuery = GetLocalString (oNpc, \"query\");\n\t\t\tActionSpeakString (sQuery);\n\t\t\tSetLocalInt (oNpc, \"barmaid\", 2);\n\t\tbreak;\t\t\n//2. take order = set random strings on barmaid for future conversation\n//take order from npc and have short conversation and then move towards wp marked WP_BAR\t\n\t\tcase 2:\t\n\t\t\tAreaCheck (oCustomer, oNpc);\n\t\t\tsResponse1 = GetLocalString (oNpc, \"response1\");\n\t\t\tsResponse2 = GetLocalString (oNpc, \"response2\");\n\t\t\tClearAllActions();\n\t\t\tAssignCommand (oCustomer, ClearAllActions());\n\t\t\tActionDoCommand (DelayCommand(0.5, AssignCommand (oCustomer, SpeakString (sResponse1))));\n\t\t\tDelayCommand (4.0, ActionSpeakString (sResponse2));\n\t\t\tDelayCommand (5.0, ActionMoveToObject (oBar));\n\t\t\tSetLocalInt (oNpc, \"barmaid\", 3);\t\t\n\t\tbreak;\n//3. check distance to wp marked WP_BAR if not within 1.0 keep moving to bar and return\n//if within 1.0 of bar converse with bartender to order drinks and them proceed\t\t\n\t\tcase 3:\n\t\tAreaCheck (oCustomer, oNpc);\n\t\tif (fBar >= 1.0) {ActionMoveToObject (oBar,0,0.0); return;}\n\t\t\telse\n\t\t\t{\n\t\t\tsResponse3 = GetLocalString (oNpc, \"response3\");\n\t\t\tsResponse4 = GetLocalString (oNpc, \"response4\");\n\t\t\tActionSpeakString (sResponse3);\n\t\t\tAssignCommand (oBartender, ClearAllActions());\n\t\t\tDelayCommand (1.5, AssignCommand (oBartender, ActionSpeakString (sResponse4)));\n\t\t\tSetLocalInt (oBartender, \"busy\", 1);\n\t\t\tSetLocalInt (oNpc, \"barmaid\", 4);\n\t\t\t}\n\t\tbreak;\n//4. wait for bartender to get drinks and check the bartender status\n//once the bartender is done getting the drinks proceed\t\t\n\t\tcase 4:\t\n\t\tAreaCheck (oCustomer, oNpc);\n\t\tif (nBusy != 0)\n\t\t\telse\n\t\t\t{\n\t\t\tsResponse7 = GetLocalString (oNpc, \"response7\");\n\t\t\tAssignCommand (oBartender, ClearAllActions());\n\t\t\tAssignCommand (oBartender, ActionSpeakString (sResponse7));\n\t\t\tSetLocalInt (oNpc, \"barmaid\", 5);\n\t\t\t}\n\t\tbreak;\n//5. move to customer, check distance if less then or equal to 2.0 proceed\t\t\n\t\tcase 5:\n\t\tAreaCheck (oCustomer, oNpc);\n\t\tActionMoveToObject (oCustomer);\n\t\tif (fCustomer <=2.0) \n\t\t\t{\n\t\t\tsResponse5 = GetLocalString (oNpc, \"response5\");\n\t\t\tActionSpeakString (sResponse5);\n\t\t\tSetLocalInt (oNpc, \"barmaid\", 6);}\n\t\tbreak;\n//6. deliver drinks to customer and converse, wait, then proceed\t\t\n\t\tcase 6:\n\t\tAreaCheck (oCustomer, oNpc);\n\t\t\tsResponse6 = GetLocalString (oNpc, \"response6\");\n\n\t\t\tDelayCommand (1.5,AssignCommand (oCustomer, ActionSpeakString (sResponse6)));\n\t\t\tActionWait (3.0);\n\t\t\tSetLocalInt (oNpc, \"barmaid\", 7);\n\t\tbreak;\n//7. move back to wp tagged WP_BAR\n//once within 1.0 of bar converse with bartender\n//delete local object customer and local integer barmaid (start over)\t\t\n\t\tcase 7:\n\t\tActionMoveToObject (oBar,0,0.0);\n\t\tif (fBar <= 1.0) \n\t\t\t{\n\t\t\tsResponse8 = GetLocalString (oNpc, \"response8\");\n\t\t\tsResponse9 = GetLocalString (oNpc, \"response9\");\t\n\t\t\tActionSpeakString (sResponse8);\n\t\t\tDelayCommand (1.5,AssignCommand (oBartender, ActionSpeakString (sResponse9)));\t\t\n\t\t\tDeleteLocalInt (oNpc, \"barmaid\");\n\t\t\tDeleteLocalObject (oNpc, \"customer\");\n\t\t\tSetLocalInt (oNpc,\"patrons\", 0);}\n\t\tbreak;\t\t\t\n\t\t}\n\t}\t\t\n}\n\n/////////////////////////BARTENDER SCRIPT FOLLOWS//////////////////////////////\n\n//npc_bartender\n//Uncle FB\n//05/2009\n//use 1 generic waypoint tagged \"WP_BARTENDER\" where you want the bartender to stand\n//while waiting for drink orders\n//use 1 generic waypoint tagged \"WP_KEG\" where you want the bartender to get the drinks\n\nvoid main ()\n{\nobject oNpc = OBJECT_SELF;\nobject oBar = GetWaypointByTag (\"WP_BARTENDER\");\nfloat fDirbar = GetFacing (oBar);\nfloat fBar = GetDistanceToObject (oBar);\nobject oKeg = GetWaypointByTag (\"WP_KEG\");\nfloat fKeg = GetDistanceToObject (oKeg);\nint nRandom = Random(4);\nint nBusy = GetLocalInt (oNpc, \"busy\");\n\t{switch (nBusy)\n\t\t{\n//default =  stay near the wp labeled \"WP_BARTENDER\" and do random animations\t\t  \n\t\tdefault:\n\t\tif (fBar >=0.5) {ActionMoveToObject (oBar, 0,0.0); return;}\n\t\telse\n\t\t{switch (nRandom)\n\t\t\t{\n\t\t\tcase 1:\n\t\t\tPlayCustomAnimation (oNpc, \"lookleft\", 0,5.0);\n\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\tPlayCustomAnimation (oNpc, \"lookright\", 0, 5.0);\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tPlayCustomAnimation (oNpc, \"gettable\", 0, 3.5);\n\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tbreak;\n//1. move to the keg and fill the drink order\t\t\n\t\tcase 1:\n\t\tActionMoveToObject (oKeg,0,0.0);\n\t\tif (fKeg <= 1.0)\n\t\t\t{switch (Random (2))\n\t\t\t\t{\n\t\t\t\tdefault:\n\t\t\t\tPlayCustomAnimation (oNpc, \"gettable\", 0, 2.1);\n\t\t\t\tSetLocalInt (oNpc, \"busy\", 2);\n\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\tPlayCustomAnimation (oNpc, \"openlock\", 0, 3.0);\n\t\t\t\tSetLocalInt (oNpc, \"busy\", 2);\n\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\tbreak;\t\t\n//2. after filling order move back to the bar and deliver\t\t\n\t\tcase 2:\n\t\tActionMoveToObject (oBar,0,0.0);\n\t\tif (fBar <= 1.0)\n\t\t\t{\n\t\t\tSetFacing (fDirbar);\n\t\t\tPlayCustomAnimation (oNpc, \"gettable\", 0, 3.5);\n\t\t\tSetLocalInt (oNpc, \"busy\", 0);\n\t\t\t}\t\t\t\n\t\tbreak;\n\t\t}\n\t}\n}\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\tSelect All Text | View Code in separate window","Patch":"1.22","NWN2Game":"All","Description":"Npc Bar maid and bartender\n\nComment section from include file:\n//This script uses 2 NPCs \n//1 barmaid npc with the \"npc_barmaid\" script on the \"on heartbeat\" slot\n//1 bartender with the \"npc_bartender\" script in the \"on heartbeat\" slot\n//the bartender tag should be filled out at the beginning of the \"npc_barmaid\" script SEE NOTES in npc_barmaid\n//the bar maid will refer to the bartender by name (listed in properties of bartender in toolset)\n//1 generic waypoint with the tag \"WP_BAR\" for the bar maid to order from and rest at\n//1 generic waypoint with the tag \"WP_BARTENDER\" for the bartender to stand at\n//1 generic waypoint with the tag \"WP_KEG\" for the bartender to go to and fill drink orders\n//the bar maid will randomly choose a customer and take an order\n//the drink list can be customized and will be used throughout the bar maid conversation\n//you can set up to 10 exclusions (other NPCs that the bar maid will not serve)\n//among the exclusions should be the bar maid, and the bartender (maybe the innkeeper and/or musicians)\n//exclusions should be filled out at the beginning of the \"npc_barmaid\" script SEE NOTES in npc_barmaid\n\nComment section from bar maid script:\n\n//fill in appropriate bartender tag\n//fill in exclusion tags (NPCs NOT to be served by the bar maid)\n\nComment section from bartender script:\n\n//use 1 generic waypoint tagged \"WP_BARTENDER\" where you want the bartender to stand\n//while waiting for drink orders\n//use 1 generic waypoint tagged \"WP_KEG\" where you want the bartender to get the drinks\n\n","Rating":9.44,"Votes":6,"Awards":[]},"286":{"Name":"Uncle FB's NPC Blacksmith","Author":"Uncle FB","Submitted":20090609,"Updated":20090616,"Category":"Scripting routines","Type":"Type - NPC Players","Format":"Module and Code","ShowCode":"//NPC_blacksmith\n//Uncle FB\n//06/2009\n//Multiple location forge behavior\n//Place a general waypoint at the forge tagged \"WP_FORGE\"\n//Place a general waypoint at the anvil tagged \"WP_ANVIL\"\n//Place a general waypoint at the bucket tagged \"WP_QUENCH\"\n//Place an IPOINT placeable at the water level in the bucket tagged \"WP_STEAM\"\n//Place a sound object  \"steamlongbursts\" tagged \"steamlongbursts\" at the water level in your bucket\n//be certain that the sound object is NOT active (SOUNDS ARE OPTIOINAL)\n//Place a sound object \"SmithyHammerings\" taggeed \"SmithyHammerings\" near your anvil\n//be certain that the sound object is NOT active (SOUNDS ARE OPTIONAL)\n//Put this script \"npc_blacksmith\" in the on heartbeat slot of your blacksmith\n//Make sure your blacksmith has the Martial Proficiency in feats\n//\n#include \"ginc_item\"\n#include \"ginc_combat\"\n#include \"ginc_actions\"\n\n//This portion of the script controls the blacksmith one liners\n//Change the int nRand to vary the frequency of speech. Currently this is\n//set to 4 =  1 in 4 times speak.\n//Change the test within \"\" in the case statements listed below the line \"switch (nRand)\"\n//to change the one liners the blacksmith speaks\nvoid NpcBlacksmithSpeak (int nSpeak)\n{\nint nRand = Random (4); //change the integer to vary the frequency of speech\n    {switch (nSpeak)\n        {\n        default:\n        break;\n        case 1:\n            {switch (nRand)\n                {\n                case 0:\n                {switch (Random(4))\n                    {\n                    case 0:\n                    SpeakString ( \"This forge isn't hot enough I need more coal\");\n                    break;\n                    case 1:\n                    SpeakString ( \"Where did I put those tongs?\");\n                    break;\n                    case 2:\n                    SpeakString ( \"OUCH!\");\n                    break;                    \n                    case 3:\n                    SpeakString ( \"Jeez another clinker blocking the tuyere!\");\n                    break;                                                              \n                    }\n                }\n                break;\n                default:\n                break;\n                }\n            }\n        }\n    }\n}\n\n//Action wrapper for PlayCustomAnimation to allow delay and assign\n//no modification necessary\nvoid ActionPlayCustomAnimation(object oNpc, string sAnimationName, int nLooping, float fSpeed = 1.0f)\n{\n    PlayCustomAnimation(oNpc, sAnimationName, nLooping, fSpeed);\t\n}\n\n//Movement function for NPC blacksmith\n//no modification necessary\nvoid DelayJump (object oNpc, object oWp1)\n{\t\n\nfloat fDwp1 = GetDistanceToObject (oWp1);\nfloat fDwp2 = GetFacing (oWp1);\nfloat fFactor = GetMovementRateFactor(oNpc);\nfloat fRateVS = (0.75 * fFactor); float fDVS = (fDwp1 / fRateVS);\nfloat fRateS = (1.25 * fFactor); float fDS = (fDwp1 / fRateS);\nfloat fRateN = (1.75 * fFactor); float fDN = (fDwp1 / fRateN);\nfloat fRateF = (2.25 * fFactor); float fDF = (fDwp1 / fRateF);\nfloat fRateVF = (2.75 * fFactor); float fDVF = (fDwp1 / fRateVF);\nint nRate = GetMovementRate (oNpc);\nint nLocation = GetLocalInt (oNpc, \"atloc\");\n\t{switch (nLocation)\n\t\t{\n\t\tcase 1:\n\t\tbreak;\n\t\tdefault:\n\t\t  {switch (nRate)\n\t\t      {\n\t\t      default:\n              break;\n              case 2:    \n        \t  ActionMoveToObject (oWp1,0,0.0);\n\t          DelayCommand (((fDVS)+0.2), ActionOrientToObject(oWp1,ORIENT_FACE_SAME_AS_TARGET));\n\t          SetLocalInt (oNpc, \"ud\",0);\n\t\t      SetLocalInt (oNpc,\"atloc\",1);\n\t\t      break;\n              case 3:    \n        \t  ActionMoveToObject (oWp1,0,0.0);\n\t          DelayCommand (((fDS)+0.2), ActionOrientToObject(oWp1,ORIENT_FACE_SAME_AS_TARGET));\n\t          SetLocalInt (oNpc, \"ud\",0);\n\t\t      SetLocalInt (oNpc,\"atloc\",1);\n\t\t      break;\n              case 4:    \n        \t  ActionMoveToObject (oWp1,0,0.0);\n\t          DelayCommand (((fDN)+0.2), ActionOrientToObject(oWp1,ORIENT_FACE_SAME_AS_TARGET));\n\t          SetLocalInt (oNpc, \"ud\",0);\n\t\t      SetLocalInt (oNpc,\"atloc\",1);\n\t\t      break;\n              case 5:    \n        \t  ActionMoveToObject (oWp1,0,0.0);\n\t          DelayCommand (((fDF)+0.2), ActionOrientToObject(oWp1,ORIENT_FACE_SAME_AS_TARGET));\n\t          SetLocalInt (oNpc, \"ud\",0);\n\t\t      SetLocalInt (oNpc,\"atloc\",1);\n\t\t      break;  \n              case 6:    \n        \t  ActionMoveToObject (oWp1,0,0.0);\n\t          DelayCommand (((fDVF)+0.2), ActionOrientToObject(oWp1,ORIENT_FACE_SAME_AS_TARGET));\n\t          SetLocalInt (oNpc, \"ud\",0);\n\t\t      SetLocalInt (oNpc,\"atloc\",1);\n\t\t      break;\n              }\n           }                                         \t\t      \n\t\tbreak;\n\t\t}\n\t}\t\t\n}\n\t\t\t\n//Main blacksmith function\nvoid main ()\n{\nobject oNpc = OBJECT_SELF;\nif (IsInConversation (oNpc) == TRUE)\nobject oWp1;\nobject oAnvil = GetWaypointByTag (\"WP_ANVIL\");\nobject oForge = GetWaypointByTag (\"WP_FORGE\"); \nobject oQuench = GetWaypointByTag (\"WP_QUENCH\");\nobject oSoundObject = GetObjectByTag (\"SteamLongBursts\");\nobject oSoundHammer = GetObjectByTag (\"SmithyHammerings\");\nobject oEffectObject = GetObjectByTag (\"WP_STEAM\");\nstring sHammer = \"nw_wblhl001\";\nstring sSword = \"nw_wswss001\";\nstring sSword2 = \"nw_wswss999\";\nint nSpeak = 1;   \nint nWPcontrol = GetLocalInt (oNpc, \"control\");\nint nRand = Random (3)+1;\nSetOrientOnDialog(oNpc, FALSE);\nint nWptag = GetLocalInt (oNpc, \"wptag\");\nif (nWptag == 0) {SetLocalInt (oNpc, \"wptag\", 1);}\n\n//Select which waypoint we should be going to and assign it as oWp1 = current waypoint\nif (nWPcontrol != 1)\n    {\n\tClearAllActions();\n\t\t{switch (nWptag)\n\t        {\n\t        case 1: oWp1 = oAnvil; SetLocalInt (oNpc, \"control\", 1); break;\n\t        case 2: oWp1 = oForge; SetLocalInt (oNpc, \"control\", 1); break;\n\t        case 3: oWp1 = oQuench; SetLocalInt (oNpc, \"control\", 1); break;\n\t        }                \n\t    }\n\t}\n\t\n//Get our new waypoint tag, check the distance and perform animations if within range ONLY\t\nnWptag = GetLocalInt (oNpc,\"wptag\");\t\nfloat fDwp1 = GetDistanceToObject (oWp1);\nint nAction = GetLocalInt (oNpc, \"actioncounter\");\nif (fDwp1 >= 0.3) {SetLocalInt (oNpc,\"atloc\",0);DelayJump(oNpc,oWp1);}\n\tif (fDwp1 <= 0.5)\t\t\t\n\t\t{switch (nWptag)\n\t\t\t{\n\t\t\tcase 1:\n\t\t\t//Location at WP_ANVIL\n\t\t\tSetLocalInt (oNpc,\"atloc\",1);\n\t\t\t     {switch (nAction)\n        \t       {\n                    default:\n\t\t\t\t\t//Anvil animation #1\n\t\t\t\t\t//Equip sword and hammer if not already equipped\n\t\t\t\t\t//Initialize hammering sound\n\t\t\t\t\tEquipNewItem(oNpc, sHammer, 4);\n\t\t\t\t\tDelayCommand (0.4, EquipNewItem(oNpc, sSword2, 5));\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t\t\tDelayCommand (0.5, SoundObjectPlay(oSoundHammer));\n\t\t\t        ActionPlayCustomAnimation (oNpc, \"craft01\",1,5.9);\t\n                    SetLocalInt (oNpc, \"actioncounter\",1);\n                    break;\t   \n                    case 1:\n\t\t\t\t\t//Anvil animation #2\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t        ActionPlayCustomAnimation (oNpc, \"craft01\",1,5.9);\n                    SetLocalInt (oNpc, \"actioncounter\",2);\n                    break;\t  \n                    case 2:\n\t\t\t\t\t//Anvil animation #3\n\t\t\t\t\t//disable hammering sound\n\t\t\t\t\t//set wptag to 3 and go to location for quench\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t\t\tDelayCommand (6.0, SoundObjectStop(oSoundHammer));\n\t\t\t        ActionPlayCustomAnimation (oNpc, \"craft01\",1,5.9);                   \n                    SetLocalInt (oNpc, \"actioncounter\",0); \n                    SetLocalInt (oNpc, \"wptag\" ,3); \n\t\t\t\t\tSetLocalInt (oNpc, \"control\", 0);             \n                    break;\n                    }\t\n                }\n\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t//Location at WP_FORGE\n\t\t\tSetLocalInt (oNpc,\"atloc\",1);\n\t\t\t     {switch (nAction)\n        \t       {\n                    default:\n\t\t\t\t\t//Forge animation #1\n\t\t\t\t\t//remove sword from hand \n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t\t\tDelayCommand (1.1, DestroyItemInSlot (oNpc,5));\t\t\t\n\t\t\t        ActionPlayCustomAnimation(oNpc,\"openlock\",0,2.0);\t\n                    SetLocalInt (oNpc, \"actioncounter\",1);\n                    break;\t   \n                    case 1:\n\t\t\t\t\t//Forge animation #2\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t        ActionPlayCustomAnimation (oNpc, \"dustoff\",0,5.9);\t\n                    SetLocalInt (oNpc, \"actioncounter\",2);\n                    break;\t  \n                    case 2:\n\t\t\t\t\t//Forge animation #3\n\t\t\t\t\t//Get red hot sword from forge\n\t\t\t\t\t//set wptag to 1 and go to location for hammering\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t\t\tDelayCommand (1.1, EquipNewItem(oNpc, sHammer, 4));\n\t\t\t\t\tDelayCommand (1.3, EquipNewItem(oNpc, sSword2, 5));\n\t\t\t        ActionPlayCustomAnimation(oNpc,\"openlock\",0,2.0);\t                   \n                    SetLocalInt (oNpc, \"actioncounter\",0); \n                    SetLocalInt (oNpc, \"wptag\" ,1);\n\t\t\t\t\tSetLocalInt (oNpc, \"control\", 0);              \n                    break;\n                    }\t\n                }\t\t\t\n\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t//Location WP_QUENCH\n\t\t\tSetLocalInt (oNpc,\"atloc\",1);\n\t\t\t     {switch (nAction)\n        \t       {\n                    default:\n\t\t\t\t\t//Quench Animation #1 \n\t\t\t\t\t//Dip sword in water and drop it\n\t\t\t\t\t//Initialize steam sound and fx\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t\t\tDelayCommand (3.0, DestroyItemInSlot (OBJECT_SELF,5));\n\t\t\t\t\tDelayCommand (1.0, SoundObjectPlay(oSoundObject));\n\t\t\t\t\tDelayCommand (1.1, ApplyEffectToObject(DURATION_TYPE_PERMANENT, EffectNWN2SpecialEffectFile(\"fx_chimney\"), oEffectObject));\n\t\t\t        ActionPlayCustomAnimation(OBJECT_SELF,\"torchlightground\",0,4.1);\t\n                    SetLocalInt (oNpc, \"actioncounter\",1);\n                    break;\t   \n                    case 1:\n\t\t\t\t\t//Quench Animation #2\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t        ActionPlayCustomAnimation (oNpc, \"yawn\",0,5.9);\n                    SetLocalInt (oNpc, \"actioncounter\",2);\n                    break;\t  \n                    case 2:\n\t\t\t\t\t//Quench Animation #3\n\t\t\t\t\t//Disable steam sound and fx\n\t\t\t\t\t//Reach down and grab the sword (no longer red hot)\n\t\t\t\t\t//set wptag to 2 and go to location for forge\n\t\t\t        NpcBlacksmithSpeak (nSpeak);\n\t\t\t\t\tSoundObjectStop(oSoundObject);\n\t\t\t\t\tRemoveSEFFromObject(oEffectObject, (\"fx_chimney\"));\n\t\t\t\t\tDelayCommand (2.8, EquipNewItem(oNpc, sHammer, 4));\n\t\t\t\t\tDelayCommand (3.0, EquipNewItem(oNpc, sSword, 5));\n\t\t\t        ActionPlayCustomAnimation(OBJECT_SELF,\"torchlightground\",0,4.1);\n\t\t\t\t\tSetLocalInt (oNpc, \"actioncounter\",0); \n                    SetLocalInt (oNpc, \"wptag\" ,2);\n\t\t\t\t\tSetLocalInt (oNpc, \"control\", 0);             \n                    break;\n                    }\t\n                }\t\t\t\n\t\t\tbreak;\n\t\t\t}\t\t\t\n\t\t}\t\t\t\t\n}Select All Text | View Code in separate window","Patch":"1.22","NWN2Game":"All","Description":"Uncle FB's NPC Blacksmith v1.0\n\nHere is the comment section from the script\n\n//NPC_blacksmith\n//Uncle FB\n//06/2009\n//Multiple location forge behavior\n//Place a general waypoint at the forge tagged \"WP_FORGE\"\n//Place a general waypoint at the anvil tagged \"WP_ANVIL\"\n//Place a general waypoint at the bucket tagged \"WP_QUENCH\"\n//Place an IPOINT placeable at the water level in the bucket tagged \"WP_STEAM\"\n//Place a sound object \"steamlongbursts\" tagged \"steamlongbursts\" at the water level in your bucket\n//be certain that the sound object is NOT active (SOUNDS ARE OPTIOINAL)\n//Place a sound object \"SmithyHammerings\" taggeed \"SmithyHammerings\" near your anvil\n//be certain that the sound object is NOT active (SOUNDS ARE OPTIONAL)\n//Put this script \"npc_blacksmith\" in the on heartbeat slot of your blacksmith\n//Make sure your blacksmith has the Martial Proficiency in feats\n\n\n1.The blacksmith hammers the work piece\n2.After working the work piece the blacksmith quenches it in a water tub (complete with steam sound and visual fx)\n3. Once the blade has cooled the blacksmith takes it to the forge to re-heat.\n4. After the blade is red-hot again the smith will work it on the Anvil.\n\nand on, and on, and on.\n\nThe blacksmith will ignore his regular work if you decide you want to attach a conversation to him (a armor or weapon merchant).\n\nAs always if you have comments or suggestions feel free to email or comment.\n\nCheers,\n\nUncle FB","Rating":9.5,"Votes":6,"Awards":[]},"287":{"Name":"Abyssya Weather System","Author":"Zweiander","Submitted":20090617,"Updated":20100712,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Multiple Effects","Format":"Module and Code","Patch":"1.01","NWN2Game":"All","Description":"I've always wanted to sit down and create a dynamic weather system for our Persistent World, since there are very few out there (and NWN2 doesn't really have a decent system in place, like NWN1). This is the weather system in use on the Abyssya Campaign Persistent World and built completely from scratch, featuring sound effects, lightning effects, change of ambient noise, multi-regional weather (linking areas together), and three different intensity levels.\n\nThe test module includes the ability to automatically change weather at specific intervals (we use the HCR Timer system for this, part of which is included as an example).\n\nThe script can also be used in a conversation or executed from a widget (for DMs). An example conversation is included.\n\nNo haks required!\n\nUPDATE 7/12/10 -- Added readme instructions for integrating the Abyssya Weather System into HCR2 1.05.\n\nUPDATE 6/27/09 -- Added snow effects. This is experimental and may work better with a effects hak due to the wonky nature of the snowfall effect in NWN2.\n\nUPDATE 6/18/09 -- Added AmbientSound.htm reference file. This can be used to match up the default ambient sound tracks of your areas so they can be properly reverted when the weather clears.","Rating":9.5,"Votes":6,"Awards":[]},"288":{"Name":"Uncle FB's NPC Light Keeper","Author":"Uncle FB and Kaldor Silverwand","Submitted":20090619,"Updated":20090619,"Category":"Scripting routines","Type":"Type - Lighting","Format":"Module and Code","ShowCode":"// bb_onused\n// by Brendan Bellina\n// October, 2007\n\n// Used as a replacement onUsed script for light objects so that they can be lit,\n//  unlit, and trigger various actions.\n\n// To allow a light to be lit by damage also use the bb_ondamaged script.\n\n// To be selectable an object should:\n// - have no walkmesh cutter around it (be in the valid walkmesh)\n// - have hit points\n// - not be static\n// - be useable\n\n// Replacement onUsed script capable of:\n//  - apply an effect to an object\n//  - remove an effect from an object\n//  - (de)activate a light\n//  - (un)lock an object\n//  - open an object\n//  - close an object\n//  - (dis)arm a trap\n//  - make an object (un)useable (doesn't work on triggers)\n//  - destroy an object (doesn't work on triggers)\n//  - set the DO_ONCE variable of an object (on FirstPC) to prevent reuse\n//  - execute a speakstring\n//  - start or stop playing a sound object\n//  - give experience points\n//  - update a Journal entry (executes bb_journal_update script)\n\n// Can be restricted to working only when a required item is held.\n\n// If the use action fails then a failed message is displayed. To suppress the message set nSuppressFailMsg to 1.\n\n// UseTemplate can be used to set the variables based on standard actions. The templates require\n// that related objects are named according to these standards: A light object is named with the object tag\n// followed by \"_light\". An Ipoint object is named with the object tag followed by \"_effect\" (using a placed\n// effect object won't work because it won't maintain the effect when you leave the area and return). For\n// the light to be initially off set the light object property \"On?\" to false.\n\n// The template values are:\n//  Light_Candle (lights a candle using a torch with the candle effect)\n//  Light_Tiki (lights a tiki using a torch with the torchglow effect)\n//  Light_Blue (lights a tiki using a torch with the fx_torch_blue effect)\n//  Darken_Light (turns out a light) (this hasn't been tested)\n//  Toggle_Candle (allows toggling a candle on and off using a torch)\n//  Toggle_Tiki (allows toggling a tiki on and off using a torch)\n//  Toggle_Blue (allows toggling a tiki with blue flame on and off using a torch)\n//  Toggle_Fire (allows toggling a fireplace or brazier on and off using a torch)\n// The script uses NearestObject so that common objects such as lamps can all have the same tag.\n\n//EDITED BY UNCLE FB 05/2009 - ADDED FIRE TEMPLATE\n//change definition of oUser to read object oUser = GetNearestObject (OBJECT_TYPE_CREATURE);\n//to get the original un-edited script go to <a target=\"_blank\" href=\"http://www.nwvault.ign.com\">Link</a>\n//and search \"Silverwand Sample Campaign\" or \"King's Festival Campaign\"\n\n#include \"ginc_param_const\"\n\nvoid main()\n{\n\tstring myTag = GetTag(OBJECT_SELF);\n\n\tstring sUseTemplate = GetLocalString(OBJECT_SELF, \"UseTemplate\");\n\tstring sReqItemTag = GetLocalString(OBJECT_SELF, \"ReqItem\");\n\tstring sEffectObject = GetLocalString(OBJECT_SELF, \"EffectObject\");\n\tstring sEffectToApply = GetLocalString(OBJECT_SELF, \"EffectToApply\");\n\tstring sEffectToRemove = GetLocalString(OBJECT_SELF, \"EffectToRemove\");\n\tstring sSpeakString = GetLocalString(OBJECT_SELF, \"SpeakString\");\n\tstring sLightObject = GetLocalString(OBJECT_SELF, \"LightObject\");\n\tint nLight = GetLocalInt(OBJECT_SELF, \"LightState\"); // 0=Inactive, 1=Active (Lit)\n\tstring sSoundObject = GetLocalString(OBJECT_SELF, \"SoundObject\");\n\tint nSound = GetLocalInt(OBJECT_SELF, \"SoundState\"); // 0=Inactive, 1=Active (Playing)\n\tstring sLockedObject = GetLocalString(OBJECT_SELF, \"LockedObject\");\n\tint nLock = GetLocalInt(OBJECT_SELF, \"LockState\"); // 0=Inactive, 1=Active (Locked)\n\tstring sObjectToOpen = GetLocalString(OBJECT_SELF, \"ObjectToOpen\");\n\tint nOpenState = GetLocalInt(OBJECT_SELF, \"OpenState\"); // 0=Close, 1=Open, -1=Reverse State\n\tstring sTrapObject = GetLocalString(OBJECT_SELF, \"TrapObject\");\n\tint nTrap = GetLocalInt(OBJECT_SELF, \"TrapState\"); // 0=Inactive, 1=Active (Armed)\n\tstring sUseableObject = GetLocalString(OBJECT_SELF, \"UseableObject\");\n\tint nUseable = GetLocalInt(OBJECT_SELF, \"UseableState\"); // 0=Unuseable, 1=Useable\n\tstring sDestroyObject = GetLocalString(OBJECT_SELF, \"DestroyObject\");\n\tstring sDoOnceObject = GetLocalString(OBJECT_SELF, \"DoOnceObject\");\n\tint nSuppressFailMsg = GetLocalInt(OBJECT_SELF, \"SuppressFailMsg\"); // 0=Show Fail Msg; 1=Suppress Fail Msg\n\tint nXP = GetLocalInt(OBJECT_SELF, \"XP\"); // experience points to award\n\t\n\t// template values\n\tif (sUseTemplate == \"Light_Candle\") // Lights candle and then makes object unuseable\n\t{\n\t\tif (sReqItemTag == \"\") sReqItemTag = \"NW_IT_TORCH001\";\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToApply == \"\") sEffectToApply = \"fx_candle\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = 1;\n\t\tif (sUseableObject == \"\") sUseableObject = myTag;\n\t\tnUseable = 0;\n\t}\n\telse if (sUseTemplate == \"Light_Tiki\") // Lights tiki and then makes object unuseable\n\t{\n\t\tif (sReqItemTag == \"\") sReqItemTag = \"NW_IT_TORCH001\";\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToApply == \"\") sEffectToApply = \"fx_torchglow\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = 1;\n\t\tif (sSoundObject == \"\") sSoundObject = myTag + \"_sound\";\n\t\tnSound = 1;\n\t\tif (sUseableObject == \"\") sUseableObject = myTag;\n\t\tnUseable = 0;\n\t}\n\telse if (sUseTemplate == \"Light_Blue\") // Lights tiki with blue flame and then makes object unuseable\n\t{\n\t\tif (sReqItemTag == \"\") sReqItemTag = \"NW_IT_TORCH001\";\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToApply == \"\") sEffectToApply = \"fx_torch_blue\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = 1;\n\t\tif (sSoundObject == \"\") sSoundObject = myTag + \"_sound\";\n\t\tnSound = 1;\n\t\tif (sUseableObject == \"\") sUseableObject = myTag;\n\t\tnUseable = 0;\n\t}\n\telse if (sUseTemplate == \"Darken_Light\") // Darkens light and then makes object unuseable\n\t{ // hasn't been tested\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToRemove == \"\") sEffectToRemove = \"fx_torchglow\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = 0;\n\t\tif (sUseableObject == \"\") sUseableObject = myTag;\n\t\tnUseable = 0;\n\t}\n\telse if (sUseTemplate == \"Toggle_Candle\") // Toggle candle on and off\n\t{\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToApply == \"\") sEffectToApply = \"fx_candle\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = (GetLocalInt(OBJECT_SELF,\"LightState\") == 0);\n\t\tif (nLight != 0 && nLight != 1) nLight = 1;\n\t\tSetLocalInt(OBJECT_SELF,\"LightState\",nLight);\n\t\tif (nLight == 0)\n\t\t{\n\t\t\tsEffectToRemove = sEffectToApply;\n\t\t\tsEffectToApply = \"\";\n\t\t\tsReqItemTag = \"\";\n\t\t}\n\t\telse if (sReqItemTag == \"\") sReqItemTag = \"NW_IT_TORCH001\"; // torch rqd to turn on\n\n\t}\n\telse if (sUseTemplate == \"Toggle_Tiki\") // Toggle tiki on and off\n\t{\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToApply == \"\") sEffectToApply = \"fx_torchglow\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = (GetLocalInt(OBJECT_SELF,\"LightState\") == 0);\n\t\tif (nLight != 0 && nLight != 1) nLight = 1;\n\t\tSetLocalInt(OBJECT_SELF,\"LightState\",nLight);\n\t\tif (sSoundObject == \"\") sSoundObject = myTag + \"_sound\";\n\t\tnSound = nLight;\n\t\tif (nLight == 0)\n\t\t{\n\t\t\tsEffectToRemove = sEffectToApply;\n\t\t\tsEffectToApply = \"\";\n\t\t\tsReqItemTag = \"\";\n\t\t}\n\t\telse if (sReqItemTag == \"\") sReqItemTag = \"NW_IT_TORCH001\"; // torch rqd to turn on\n\t}\n\telse if (sUseTemplate == \"Toggle_Blue\") // Toggle tiki with blue flame on and off\n\t{\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToApply == \"\") sEffectToApply = \"fx_torch_blue\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = (GetLocalInt(OBJECT_SELF,\"LightState\") == 0);\n\t\tif (nLight != 0 && nLight != 1) nLight = 1;\n\t\tSetLocalInt(OBJECT_SELF,\"LightState\",nLight);\n\t\tif (sSoundObject == \"\") sSoundObject = myTag + \"_sound\";\n\t\tnSound = nLight;\n\t\tif (nLight == 0)\n\t\t{\n\t\t\tsEffectToRemove = sEffectToApply;\n\t\t\tsEffectToApply = \"\";\n\t\t\tsReqItemTag = \"\";\n\t\t}\n\t\telse if (sReqItemTag == \"\") sReqItemTag = \"NW_IT_TORCH001\"; // torch rqd to turn on\n\t}\n\telse if (sUseTemplate == \"Toggle_Fire\") // Toggle fire  on and off\n\t{\n\t\tif (sEffectObject == \"\") sEffectObject = myTag + \"_effect\";\n\t\tif (sEffectToApply == \"\") sEffectToApply = \"fx_fireplace\";\n\t\tif (sLightObject == \"\") sLightObject = myTag + \"_light\";\n\t\tnLight = (GetLocalInt(OBJECT_SELF,\"LightState\") == 0);\n\t\tif (nLight != 0 && nLight != 1) nLight = 1;\n\t\tSetLocalInt(OBJECT_SELF,\"LightState\",nLight);\n\t\tif (sSoundObject == \"\") sSoundObject = myTag + \"_sound\";\n\t\tnSound = nLight;\n\t\tif (nLight == 0)\n\t\t{\n\t\t\tsEffectToRemove = sEffectToApply;\n\t\t\tsEffectToApply = \"\";\n\t\t\tsReqItemTag = \"\";\n\t\t}\n\t\telse if (sReqItemTag == \"\") sReqItemTag = \"NW_IT_TORCH001\"; // torch rqd to turn on\n\t}\t\n\tint doit = 1;\n\tobject oUser = GetNearestObject (OBJECT_TYPE_CREATURE);\n\tif (sReqItemTag != \"\")\n\t{\n\t\tobject oRH = GetItemInSlot(INVENTORY_SLOT_RIGHTHAND,oUser);\n\t\tobject oLH = GetItemInSlot(INVENTORY_SLOT_LEFTHAND,oUser);\n\t\tdoit = (GetTag(oRH) == sReqItemTag || GetTag(oLH) == sReqItemTag);\n\t}\n\t\n\tif (doit)\n\t{\n\t\tif (sLightObject != \"\")\n\t\t{\n\t\t\tobject oLightObject;\n\t\t\tif (sLightObject == myTag) oLightObject = OBJECT_SELF;\n\t\t\telse oLightObject = GetNearestObjectByTag(sLightObject);\n\t\t\tSetLightActive(oLightObject, nLight);\n\t\t}\n\t\n\t\tif (sSoundObject != \"\")\n\t\t{\n\t\t\tobject oSoundObject;\n\t\t\tif (sSoundObject == myTag) oSoundObject = OBJECT_SELF;\n\t\t\telse oSoundObject = GetNearestObjectByTag(sSoundObject);\n\t\t\tif (nSound == 0) SoundObjectStop(oSoundObject);\n\t\t\telse SoundObjectPlay(oSoundObject);\n\t\t}\n\t\n\t\tif (sLockedObject != \"\")\n\t\t{\n\t\t\tobject oLockedObject;\n\t\t\tif (sLockedObject == myTag) oLockedObject = OBJECT_SELF;\n\t\t\telse oLockedObject = GetNearestObjectByTag(sLockedObject);\n\t\t\tSetLocked(oLockedObject, nLock);\n\t\t}\n\n\t\tif (sObjectToOpen != \"\")\n\t\t{\n\t\t\tobject oObjectToOpen;\n\t\t\tif (sObjectToOpen == myTag) oObjectToOpen = OBJECT_SELF;\n\t\t\telse oObjectToOpen = GetNearestObjectByTag(sObjectToOpen);\n\t\t\tif (nOpenState == 0)\n\t\t\t\tActionCloseDoor(oObjectToOpen);\n\t\t\telse if (nOpenState == 1)\n\t\t\t\tActionOpenDoor(oObjectToOpen);\n\t\t\telse // -1, so Toggle door state\n\t\t\t{\n\t\t\t\tif (GetIsOpen(oObjectToOpen) == TRUE)\n\t\t\t\t\tActionCloseDoor(oObjectToOpen);\n\t\t\t\telse\n\t\t\t\t\tActionOpenDoor(oObjectToOpen);\n\t\t\t}\n\t\t}\n\n\t\tif (sTrapObject != \"\")\n\t\t{\n\t\t\tobject oTrapObject;\n\t\t\tif (sTrapObject == myTag) oTrapObject = OBJECT_SELF;\n\t\t\telse oTrapObject = GetNearestObjectByTag(sTrapObject);\n\t\t\tSetTrapActive(oTrapObject, nTrap);\n\t\t}\n\n\t\tif (sUseableObject != \"\")\n\t\t{\n\t\t\tobject oUseableObject;\n\t\t\tif (sUseableObject == myTag) oUseableObject = OBJECT_SELF;\n\t\t\telse oUseableObject = GetNearestObjectByTag(sUseableObject);\n\t\t\tSetUseableFlag(oUseableObject, nUseable);\n\t\t}\n\n\t\tif (sEffectObject != \"\" && sEffectToApply != \"\")\n\t\t{\n\t\t\tobject oEffectObject;\n\t\t\tif (sEffectObject == myTag) oEffectObject = OBJECT_SELF;\n\t\t\telse oEffectObject = GetNearestObjectByTag(sEffectObject);\n\t\t    ApplyEffectToObject(DURATION_TYPE_PERMANENT, EffectNWN2SpecialEffectFile(sEffectToApply), oEffectObject);\n\t\t}\n\n\t\tif (sEffectObject != \"\" && sEffectToRemove != \"\")\n\t\t{\n\t\t\tobject oEffectObject;\n\t\t\tif (sEffectObject == myTag) oEffectObject = OBJECT_SELF;\n\t\t\telse oEffectObject = GetNearestObjectByTag(sEffectObject);\n\t\t    RemoveSEFFromObject(oEffectObject, sEffectToRemove);\n\t\t}\n\n\t\tif (sDestroyObject != \"\")\n\t\t{\n\t\t\tobject oDestroyObject;\n\t\t\tif (sDestroyObject == myTag) oDestroyObject = OBJECT_SELF;\n\t\t\telse oDestroyObject = GetNearestObjectByTag(sDestroyObject);\n\t\t\tDestroyObject(oDestroyObject, 0.0, TRUE);\n\t\t}\n\t\t\t\n\t\tif (sSpeakString != \"\")\n\t\t\tFloatingTextStringOnCreature(sSpeakString, oUser, FALSE, 3.0);\n//\t\tExecuteScript(\"bb_speakstring\", OBJECT_SELF);\n\n\t\tExecuteScript(\"bb_journal_update\", OBJECT_SELF); // update journal entry\n\n\t\tif (nXP) // award experience points\n\t\t{\n\t\t\tobject oFM = GetFirstFactionMember(oUser, TRUE);\n\t\t\twhile( oFM != OBJECT_INVALID )\n\t\t\t{\n        \t\tGiveXPToCreature( oFM, nXP );\n        \t\toFM = GetNextFactionMember(oUser, TRUE);\n    \t\t}\n\t\t}\n\n\t\tif (sDoOnceObject != \"\")\n\t\t{\n\t\t\tif (sDoOnceObject == myTag) SetLocalInt(GetFirstPC(), \"DO_ONCE\" + ObjectToString(OBJECT_SELF), 1);\n\t\t\telse SetLocalInt(GetFirstPC(), \"DO_ONCE\" + ObjectToString(GetNearestObjectByTag(sDoOnceObject)), 1);\n\t\t}\n\t}\n\telse // display fail msg unless fail msg is suppressed\n\t{\n\t\tif (!nSuppressFailMsg) FloatingTextStringOnCreature(\"Nothing happens.\", oUser, FALSE, 3.0);\n\t}\n}\n//BELOW THIS LINE IS THE HB SCRIPT FOR THE LIGHTKEEPER\n//NPC Lightkeeper by UNCLE FB\n//06/2009\n//set lighton and lightoff variables on\n//the light keeper NPC for when you want\n//the npc to light or extinguish lamps\n\n#include \"ginc_item\"\n#include \"ginc_combat\"\n#include \"ginc_actions\"\n\n\n//Action wrapper for PlayCustomAnimation to allow delay and assign\nvoid ActionPlayCustomAnimation(object oNpc, string sAnimationName, int nLooping, float fSpeed = 1.0f)\n{\n    PlayCustomAnimation(oNpc, sAnimationName, nLooping, fSpeed);\t\n}\n\n//this function returns an object which meets the criteria\n//object tag = string tag passed paramater\n//object state is currently off //NPC will turn state to on\nobject GetInteractiveNight (object oNpc, string sTag)\n{\nstring sTorch = \"nw_it_torch001\";\nobject oTorch = GetItemInSlot (5, oNpc);\nif (oTorch == OBJECT_INVALID){DelayCommand (0.2, EquipNewItem (oNpc, sTorch, 5, 0));}\nobject oArea = GetArea (oNpc);\nobject oInteractive = GetFirstObjectInArea (oArea);\nstring sCheck;\nint nCheck;\n\twhile (oInteractive != OBJECT_INVALID)\n\t\t{\n\t\tsCheck = GetTag (oInteractive);\n\t\tnCheck = GetLocalInt (oInteractive, \"LightState\");\n\t\tif ((sCheck == sTag) && (nCheck != 1))\n\t\t\t{return oInteractive;}\n\t\toInteractive = GetNextObjectInArea (oArea);\n\t\t}\nreturn OBJECT_INVALID;\t\t\t\n}\n\n//this function returns an object which meets the criteria\n//object tag = string tag passed paramater\n//object state is currently on //NPC will turn state to off\nobject GetInteractiveDay (object oNpc, string sTag)\n{\n\nobject oArea = GetArea (oNpc);\nobject oInteractive = GetFirstObjectInArea (oArea);\nstring sCheck;\nint nCheck;\n\twhile (oInteractive != OBJECT_INVALID)\n\t\t{\n\t\tsCheck = GetTag (oInteractive);\n\t\tnCheck = GetLocalInt (oInteractive, \"LightState\");\n\t\tif ((sCheck == sTag) && (nCheck != 0))\n\t\t\t{return oInteractive;}\n\t\toInteractive = GetNextObjectInArea (oArea);\n\t\t}\nreturn OBJECT_INVALID;\t\t\t\n}\n\nvoid main ()\n{\nobject oNpc = OBJECT_SELF;\nstring sTag = GetLocalString (oNpc, \"sTag\");\nint nOn = GetLocalInt (oNpc, \"lighton\");\nint nOff = GetLocalInt (oNpc, \"lightoff\");\nint nHour = GetTimeHour();\nobject oExit = GetWaypointByTag (\"WP_LKEXIT\");\nfloat fExit;\nobject oInteract;\n\tif ((nHour >= nOff) && (nHour <= (nOn -1)))\n\t\t{oInteract = GetInteractiveDay (oNpc, sTag);}\n\telse\n\t\t{oInteract = GetInteractiveNight (oNpc, sTag);}\n\tif (oInteract != OBJECT_INVALID)\n\t\t{SetScriptHidden (oNpc, FALSE, FALSE);}\t\nfloat fDoi = GetDistanceToObject (oInteract);\nstring sVerify = GetTag (oInteract);\n\tif (fDoi >= 3.1)\n\t\t{ActionMoveToObject (oInteract,0,2.9);return;}\n\tif (fDoi <= 3.0)\n\t\t{ActionPlayCustomAnimation (oNpc,\"lighttorchfront\",0,4.0);\t\n\t\tDelayCommand (3.0, ExecuteScript (\"bb_onused\", oInteract));}\n\tif (oInteract == OBJECT_INVALID)\n\t\t{\n\t\tDestroyItemInSlot (oNpc, 5);\n\t\tActionMoveToObject (oExit, 0, 1.0);\n\t\tfExit = GetDistanceToObject (oExit);\n\t\t\tif (fExit <= 2.0)\n\t\t\t{SetScriptHidden (oNpc, TRUE, FALSE);}\n\t\t}\t\t\n}Select All Text | View Code in separate window","Patch":"1.22","NWN2Game":"All","Description":"This NPC will turn lights on or off depending on the time of day.\n\nThe on and off times are set via variable on the NPC and can be changed to suit your specific needs.\n\nLighting object (included in erf file) are not specifically tagged.\n\nLighting Prefabs can be made useabe/non-useable for the PC and still work for the NPC. \nNOTE: PC must have a torch in hand to light any prefab\n\nIf you want to make the prefab useable by the NPC only simply place the prefab in tool set, ungroup it, select the container object (this is the lamp post or brazier itself) and de-select \"useable\" under properties.\n\nEnjoy","Rating":9.5,"Votes":3,"Awards":[]},"289":{"Name":"Combat AI","Author":"Alban","Submitted":20090629,"Updated":20090630,"Category":"Creature AI","Type":"Type - Combat","Format":"Module and Code","Patch":"1.22","NWN2Game":"All","Description":"===================================\n CAUTION !\n===================================\n\n1.23 patch is required for this code to work, due to new functions like GetIsLocationValid().\n\n===================================\n WHAT IS IT ?\n===================================\n\nCombat AI uses nwnx plugins by GrinningFool, which also provided a large part of the system's design.\n\nIn a few words, it is as spawn system based on the idea of a \"controller\" handling a whole team which shares information and morale. \n\n\n===================================\n HOW DOES IT WORK ?\n===================================\n\nIt uses party level, delay and time of the day to decide if spawning occurs when a PC enters a trigger.\n\nThe builder can set a \"Fear Factor\" for the team, as well as stackable \"traits\" for each team member ( Boss, Coward, Archer, Caster and more ). Each member receives also a min/max amount, a CR and one or more (randomized) waypoints to spawn by.\n\nThe encounters then behave as a team, share targets, morale, following their own role. They flee to a waypoint or randomly.\n\nXP can be distributed when they flee, and it is possible to have a team reinforcing the other.\n\nThe use of unique heartbeat and sometimes simplified behaviors as well as other \n\n\n===================================\n WHAT ARE THE CONS ?\n===================================\n\n\nFor now, it is only available for PWs using NWNX, but hopefully some day we can convert it for SP modules.\n\nIt is not something you can use with another spawning system. \n\nIt is not yet really simple to use, as you need to write lines mixing bitwise variables with ResRef strings.\n\n===================================\n WHAT'S NEXT ?\n===================================\n\nDepending on the success of this system, custom magic behaviours, team strategies and other subsystems might be added.\n\nHopefully, a port of this system to SP module will be possible.\n\n\n===================================\n REPORTS AND FEEDBACKS\n===================================\n\nFeel free to test and report here.\n\nYou might as well post on the Khalidine Forums Link\n\nKhalidine will be Beta soon, so you will be able to test it there very soon ;)\n\n\n===================================\n CONTENT IP\n===================================\n\nMost code libraries appear courtesy of GrinningFool.\n\nThanks to Clement Poh for inc_vectors.\nThanks to D. Cambell for autobuff.\n\nThe Khalidine's map \"King's Hills Road\" appears courtesy of Fizzbang, Lead Area Artist @Khalidine.","Rating":"N/A","Awards":[]},"290":{"Name":"Better Invocations","Author":"Warlock of Faerun","Submitted":20090708,"Updated":20090727,"Category":"Scripting routines","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.22","NWN2Game":"NWN2:SoZ","Description":"UPDATED to Version 1.4.3 !\nThis mod aims to increace the effectiveness of warlock invocations and\nwith doing so make the warlock better balanced class.\nThis also contains 2da file that marks Diplomacy and Tumble to warlock class skills.\n(Demons are evasive and charming so why not the warlock ?)\n\nShortly:\n\nLeast invocations now give more skillpoints to more skills. The Dead Walk summons demons/devils.\nDreadSeizure is now is now usefull slowing more and last longer. Walk unseen is undispell able.\nWarlocks Area Spells Last longer and are can hit/grapple better (usefull at epic levels).\nRetributive invisibility has usefull duration. Better dispels.\n\nExactly:\n\nLeast Invocations:\nLeaps and Bounds:\nGives bonus equal to Cha modifer or 6 (if Cha modifer < 6) to Tumble and (Cha - 2) or 4 (if Cha modifer < 6) to Dexterity.\nOtherWordlyWhispers:\nGives bonus equal to Cha modifer or 6 (if Cha modifer <6) to Lore, Spellcraft, UseMacigDevice and Concentration\nBeguiling influence:\nGives bonus equal to Cha modifer or 6 (if Cha modifer <6) to Diplomacy, Intimitate, Bluff, Taunt and Appraise\nEtrohopic Shield:\n25% Concealment (type ranged), bonus equal to Cha modifer or 6 (if Cha modifer <6) to MoveSilently and Hide.\nSeeunseen:\nDarkvision, See Invisibility, bonus equal to Cha modifer or 6 (if Cha modifer <6) to Spot and Search.\nDevilsight:\nGives DarkVision, Ultravision and AB equal to ChaMod/2.\nDarkOnesOwnLuck:\nBonus to Saving throws equal to CHA Modifer. Bonus AC equal ChaMod/2.\nDarkness:\nNow adds Cha Modifier to duration.\n\nLesser Invocations:\nDreadSeizure:\n60% Movement speed decreace, 4 Attack Penalty, for 1/2 casterlevel Seconds\nWalkUnseen:\nMade to be a SuperNatural effect so it is not dispelable, its still removeable by invisibility purge.\nVolarous Dispelling:\nNow the casterlevel cape is raised equal to Cha modifer.\nThe Dead Walk:\nNow summons infernal creatures. Summonable creatures: Imp, Hellhound, Succubus, Erinyes, Hezrou, Horned Devil and Pit Fiend.\nSummons are randomized and scaled to your lever so you won't be summonnig Pit Fiends at level 5. 1 round/level.\nSummons have different summonig visuals. More info at TheDeadWalk.txt (inside the rar archive).\nFlee The Scene:\nGives effects of Haste and Freedom of movement for 1 round/level and 4 AC Dodge for 1 Hour/level (to caster only).\nCurse of Despair:\nAbility Penalty increased from 3 to 4, Attack Penalty increased from 1 to 2.\n\nGreater Invocations:\nDevourMagic:\nNow casterlevel cape is raised equal to Cha modifer.\nWall Of Perilous Fire:\nHas Duration of 1/2 casterlevel.\nChilling tentacles:\nAdds 2 x CHA modifer to AC Penetration check (can grapple 5 + (2x CHA Modifer) + d20)\nTentaglous Plague:\nDuration doubled. CHA modifer effect to AB (to 12 + 2 x CHA Modifer.)\n\nDark Invocations:\nDark Foresight:\nNow Cold Iron DamgeReduction 10 + Class damage reduction. up to 10 points per caster lever (no limit) 1 round/ level\nRetributive inisibility:\nNow 1/2 (insted of 3) round/level (since 1 round/level seemed overpowering).\nWord of Chancing\nNow gives enchantment bonus to Devils STR equal to CHA Modifer and gives effect of devilsight.\n\nNote: This mod contains only scripts of spells so the spell descriptions won't change. \n\nBugs: Ultravision effect doesn't work. Please comment if you expierence more.\n\nInstalling: Put into: ...MyDocuments/NeverwinterNights2/Override.\n\nCompativity: Should work with all game versions.\nShould be compative with most mods. In case that isn't:\nUse numerised folders in overwrite folder to tell the game wich ones are more improtant to use.\nT.ex: \"01-BetterInvocations\", \"02-OtherPack\" If want my mod to be dominate or wise versa if\nyou like t.ex: \"Selea\"s versions of are better. This will overwrite the conflicts.\n\nThanks to:\nAtari, Obsidian etc. for the game and toolset. IGN for NW2 Vault.\nVordan for Hero Creator (it was pretty ideal testing environment).\nHalmabad for many bug reports. And every one for Voting.\n\nUsage: Use/combine however you want.\n\nRelase history: Inside of invocations.txt\n\nPs. I am sorry for my bad english.","Rating":9,"Votes":1,"Awards":[]},"291":{"Name":"the ds-tl NWN2 v2.07 The DS Theater Scripting Language NWN2 version","Author":"DSenset","Submitted":20090716,"Updated":20091004,"Category":"Scripting routines","Type":"Type - General","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"scripting NWScript with plain text\n\n- the ERFs. Just for builders. You don't need this separately -\n\nNWN2. Patch 1.23 required\nv2.07 4. October 2009 \n\nThe port of the NWN1 version. Please refer to this thread: Link\n\nWORKAROUND: just one small workaround: the book no longer contains the script, but is just a pointer to a placeable blueprint (see it's vars).\n\nis it compatible to dstl1? like nwn2 is to nwn1. is it more powerful? like nwn2 to nwn1. more complicated? etc.\n\nNot quite the mess as it looks.","Rating":"N/A","Awards":[]},"292":{"Name":"Dard's game / Juego de dardos","Author":"Belsirk","Submitted":20090807,"Updated":20091104,"Category":"Games","Type":"Type - Friendly","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"The erf include 6 scripts, 1 placeable, 1 item and 1 conversation and 3 XML Files\nThe mod have the game ready to be player by one o more players\n\n-Juegos de dardos\nThis is a dard's game for single o multiplayer (Max 10 players), the player only need follow the indications \nthat the bullseye say (2 steps for be able to play) On this game the players can show how good are them, \nHigher levels can play with handicap (like tie a hand or close a eye, shooting from far) for show his greatest talent or even make cheat. Even the DM could change the settings and making the game more hard for all \nthe players. The best five players will be on the great Top Five Post.\n\nOf course you always could have a pretty good luck even with both eyes closed and 40 foots away from the target\nand if you make history that day you and your friend will have a very cold - AND FREE - ale.\n\nObservations :\nIf the player has Weapon Focurs Dar (or any progresion), being a long distance, be using a attack mode or even bein halfing affect your's attacks\n\n- Adding to your module\n1- Import the erf\n2- Where you want put the bullseye (Usually a bar) place the placeable \n <color=Cyan> Bullseye for play </color> with tag jdar_tiro \n Note: Both Placeable and item are located on Special | Games | Juego de dardos\n3- That is all, the game it's ready \n\n- Tips \n- One single player can play as a multiplayplayer BUT would have problem if they player change his handicap \n- The game can be cancelled anytime (even the DM can do it)\n- The dm can put some placeables there and justify the new difficulty (or just can be Evil)\n- Yes, the distance affect the result, each 5 foots make a harder time (this is easy to change)\n- You can have more than one game on your module, just be sure to have only a bullseye per area.\n\n-Observations\n- I was unable to recover the hit roll used by Atari so, i had to rerroll the dice, with this the only\n incovenient it's the natural 1 from the attack (will be a missed and will not count on game) that is \n why the players alway get enough dards (Those Dards don't have anything dangerous if are used outside the \n game except maybe that are free dards for the players )\n\n- The DM need to talk the bullseye on his true form for change the general difficult.\n\n- If you want to change the system points or the penality for the distance you need edit i_jdar_tiro_dard_hc\n script, of course this is easy because you only need change the numbers on global vars (line 33-57)\n- IF you even want to change some DC you should check inc_jdar_libreria \n","Rating":9.5,"Votes":1,"Awards":[]},"293":{"Name":"AP Combat Cover Systems","Author":"Apep","Submitted":20090812,"Updated":20090813,"Category":"Other","Type":"Type - Combat","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"AP Cover Systems (Release 1)\n\nThis pack provides builders with access to three different systems of combat �cover� with a light, medium and heavy trigger for each system which provide increasingly powerful bonuses. The three systems are as follows:\n\n1)A concealment system where light cover provides 20% concealment, medium cover provides 35% concealment and heavy cover provides 50% concealment.\n\n2)An AC system where light cover provides 4 AC, medium cover provides 6 AC and heavy cover provides 8 AC.\n\n3)An AC+Hide system where light cover provides 4 AC+5 Hide, medium cover provides 6 AC+10 Hide and heavy cover provides 8 AC+15 Hide.\n\nMultiple cover systems are included to increase flexibility and give builders some different options as to what sort of cover they would like to include. I would recommend deleting the ones you don�t plan on using, just in case you accidentally select the wrong triggers. I hope to update these eventually and potentially include some forms of �negative� cover, meaning where an object is exposed, as well as environmental stuff with relevant effects (e.g. a �water� trigger that represents the effects of wading through shallow water).\n\nFeel free to edit the scripts and triggers to suit your individual needs, but be sure to give proper credit. Finally, I would like to thank Lugaid of the Red Stripes, Mithdradates and BrianMeyer for providing much appreciated assistance.\n\n-Apep","Rating":10,"Votes":3,"Awards":[]},"294":{"Name":"KEMO Experience Award System","Author":"KEMO","Submitted":20090815,"Updated":20100204,"Category":"Creature Related","Type":"Type - Rewards","Format":"Code Only","ShowCode":"//EXPLANATORY COMMENTS\n/*\n\tThe basic formula for KEMO-EAS is as follows:\n\t\n\tMultiplier = Base modifier + Party size modifier + Area modifer - Relative level modifier\n\tXP Awarded = Base XP Award * Multiplier\n\t\n\tThe area modifier may be left unused (no variable set for the area). Its main purpose is to give a boost\n\tin low-level areas where the HD or CR of creatures is too low to be worthwhile.\n\t\n\tThe party size modifier may be switched off (KEMO_PARTY_AWARD_SWITCH)\n\tThe relative level modifier may be based on one of the following options:\n\t\t1) Difference between individual PC level and creature Challenge Rating (KEMO_DEFAULT_CREATURELEVEL_TYPE = 1)\n\t\t2) Difference between individual PC level and creature Hit Dice (KEMO_DEFAULT_CREATURELEVEL_TYPE = 0)\n\t\t3) Difference between individual PC level and killer's level (KEMO_USE_KILLER_SWITCH = 1)\n\t\t4) Difference between individual PC level and killer's party's average level (KEMO_USE_KILLER_SWITCH = 2)\n\t\t5) Difference between individual PC level and killer's party's highest level (KEMO_USE_KILLER_SWITCH = 3)\n\t\t6) Difference between individual PC level and killer's party's lowest level (KEMO_USE_KILLER_SWITCH = 4)\n\tPC level may ignore ECL (KEMO_PCLEVEL_TYPE_SWITCH = 0) or use ECL (KEMO_PCLEVEL_TYPE_SWITCH = 1)\n\t\n\tThe base xp award may be set to one of 4 options:\n\t\t1) static value (KEMO_AWARD_BASE)\n\t\t2) static value plus/minus small random fluctuation (KEMO_AWARD_NOISE)\n\t\t3) killed creature level x a chosen amount (KEMO_AWARD_VARBASE)\n\t\t4) #3 with fluctuation\n\t\t\n\tThe determination of who in a party may be given xp can be based on the distance from the PC to the creature\n\tor from the PC to the killer (KEMO_USE_CREATURE_SWITCH = 1). The maximum distance may be set as well\n\t(KEMO_MAX_AWARD_RANGE), or completely ignored (KEMO_MAX_AWARD_RANGE = 0.0f).\n\tThis maximum distance is used when determining the following:\n\t\t1) whether the PC gets xp or not\n\t\t2) size of the party (only members in range are counted)\n\t\t3) average party level (only members in range are counted) -- only needed if KEMO_USE_KILLER_SWITCH = 2\n\t\t4) highest/lowest level party member (members in range counted) -- only needed if KEMO_USE_KILLER_SWITCH = 3 or 4\n\t\t\n\tMinimum and maximum awards (after multiplier) can be set with KEMO_AWARD_MULTIPLIER_MIN and KEMO_AWARD_MULTIPLIER_MAX.\n\t\n\tFinally, it is possible to use a system of xp tokens, which modify the xp award after the multiplier is applied.\nThese tokens (of which there may be any number of variations) are set to a multiplier and an xp range. If the PC is within the\nxp range, the multiplier is applied.\n\tThere are a few good uses for these tokens. Among these are:\n\t\t1) Force level limits apart from the server's primary limit --- for example, if you want to require that players\n\t\t\tcomplete a certain quest before they are permitted to reach a certain level, you would set the token multiplier\n\t\t\tto any negative float (e.g., -1.0f) and the xp range minimum to the xp value of one point below that level.\n\t\t2) Slow down or accelerate xp gain. (Use a value above 1.0f to accelerate, below 1.0f to slow down.)\n\t\t3) Prevent xp awards for PCs fighting in \"death\" areas (e.g., while the PC is dead and striving to return to life).\n\t\n\tAs of 8/23/09 there are 4 different types of tokens:\n\t1) To create a level-based xp token, set the tag of any item to the string referred to by KEMO_XPTOKEN_TAG_LVL (see below). Then\n\t\tassign three variables: float XPMultiplier, int XPMinAllowed and int XPMaxRequired. The token will only operate if the PC's\n\t\tcurrent xp is between XPMinAllowed and XPMaxRequired. Any negative multiplier results in an award of zero (when within range).\n\t2) To create a pool-based xp token (where each \"use\" drains the pool until there is nothing left), set the tag to the string\n\t\treferred to by KEMO_XPTOKEN_TAG_POOL. Then assign two variables: float XPMultiplier and int XPPool. If the XPMultiplier is set\n\t\tto anything below 1.0, the token will never discharge, since the pool is only drained by the amount of xp the PC gains above\n\t\tthe un-multiplied award -- which would be zero if the multiplier is under 1.0.\n\t3) To create a count-based xp token (each \"use\" reduces the count by 1, until it reaches zero), set the tag to the string\n\t\treferred to by KEMO_XPTOKEN_TAG_COUNT. Then assign two variables: float XPMultiplier and int XPCount. The multiplier may be\n\t\tset to any number >= 0.0. The counter will go down regardless of the xp award given.\n\t4) To create a random xp token (similar to #3 but with a decreasing chance of effect), set the tag to the string referred to\n\t\tby KEMO_XPTOKEN_TAG_RND. Then assign four variables: float XPMultiplier, int XPDie, int XPCount and float XPMultiplierAdd.\n\t\tThe token \"rolls\" Random(XPDie) + 1 and compares it to the current XPCount. If the roll is <= XPCount, the XPMultiplier is\n\t\tpermanently increased by XPMultiplierAdd and then applied to the xp award. Once the counter reaches zero the token stops.\n\t\tThe likelihood of the token being triggered goes down each time, but the award goes up whenever it is triggered. It is suggested\n\t\tthat the XPMultiplierAdd float be 1% of the XPDie, so an XPDie = 10 gives XPMultiplierAdd = 0.1. This way the multiplier will\n\t\tnever increase beyond 1.0 over the initial setting.\n*/Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"The KEMO Experience Award System is meant to be a replacement for the standard xp awards that you gain from killing creatures. The standard system, which is based on Hit Dice, is fairly inflexible, and may not reflect the kinds of rewards you want to give your players.\n\nTo implement, do the following:\n1) Add this script to your module.\n2) Go into Module Properties and set XP Scale to 0.\n3) Open the nw_c2_default7 script. Add near the top (before the main function):\n\n#include \"kemo_xpsystem\"\n\nAnd add near the bottom (before the if GetSpawnInCondition line):\n\nif (GetLastKiller() != OBJECT_SELF) KEMOGiveKillAward(oKiller,OBJECT_SELF);\n\n5) Go into the kemo_xpsystem script and set the parameters you want.\n6) Compile nw_c2_default7.\n\nThe main \"switch\" you can flip goes between using a standard base award (default is 100) and using the creature's level to determine the base award.\n\nThe CODE section contains the main commented portion of the script, for ease of reading. It explains how to set up the parameters to have the xp system do what you want.\n\nupdate Aug 18 2009:\n*fixed problem with thresholds when creature level < KEMO_LEVEL_TIER_DIVISOR\n*fixed some glitches in the relative level calculation\n\nupdate Oct 11 2009:\n* uploaded as a file\n* some new settings (see the readme section within the script)\n* the current settings within the file match those used in the Haven PW, so you can see what a \"live\" implementation looks like\n\nupdate Oct 20 2009 (version 1.3):\n* level blocker now fully functional: if KEMO_LEVELUP_XPBLOCK is set to 1, PCs must level up when possible in order to continue getting xp. Previously this function did not work with polymorphed or wildshaped PCs.\n\nupdate Feb 4 2010:\n* fixed error in setup instructions above","Rating":10,"Votes":6,"Awards":[]},"295":{"Name":"Enhanced LevelUp & Events Demo","Author":"0100010","Submitted":20090830,"Updated":20100307,"Category":"Scripting routines","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This demo module contains scripts and modified GUI files (related to the level up gui screens and other gui callback invoked events) to experiment with various enhancements to the level up routines and gui callbacks that I wish to try out.\n\nPlease note that 1.23 patch is explicitly required as it makes use of the new functions provided in that patch.\n\nAlso, although I indicate that SoZ is required, that is only because I have only edited the SoZ levelup GUI xml files. One could edit the MoTB or base gui files with the same modifications in order to make it work with NWN2 alone or NWN2+MotB. \n\nNWN2 only gui levelup xml files:\nlevelup_***.xml\nMotB gui levelup xml files:\nlevelup_***x1.xml\nSoZ gui levelup xml files:\nlevelup_***x2.xml (these are the ones included in the demo mod)\n\nCurrent Modifications:\nThe main purpose of this mod is to demonstrate various custom versions of the level-up screens. \n\nCurrently customized level-up screens:\n\nThe Skills Level-up screen: \none of the advantages of a custom skills level up is to enabled a work around for a bug introduced in the 1.23 patch.\n\nThe bug involves using SetBaseSkillRank to create a skill bonus effect, then using SetBaseSkillRank to remove the bonus effect before level up. Skill Levelup would not recognize the removal (lowering) of the skill adjustment via SetBaseSkillRank and would therefore not allow the player to add ranks to the affected skill.\n\nThe mod creates a custom version of the skills level up screen which is nearly identical to the existing skills level up screen. It uses gui callback scripts to handle, via scripting, increasing the skill rank during level up, decreasing it, and even use of the recommend button. Adjustments are tracked and applied once the level up process is complete.\n\nThis allows for a proper recognition of uses of SetBaseSkill rank prior to entry into the level up process to overcome the bug describe above.\n\nThis also means that one will be able to create custom feats which make use of SetBaseSkill rank to emulate skill bonus effect which need not resort to unstackable magical effects.\n\nCustom feat selection level-up screen\nThis mod also has a custom feat selection level up screen (both bonus and normal feats)\n\nnormal pre-req logic is still checked and only those feat which should be available should be displayed.\n\nFeat checking has been enhanced. It is now possible for the GrantedOnLevel and the GrantedPreReq feat to be respected in the cls_feat_***.2da file for feats with a list type value other than 3.\n\nThis means bonus feats can have an extra granted prereq restruction which controls whether or not they are displayed, as well as a level restriction, resulting in the ability to have entirely different sets of bonus feats to choose from at different levels.\n\nAlso it is now possible to ADD new feat columns which control pre-req requirements.(although code needs to be changed to support such). For example, I have added in support for a MinReflexSave and MinWillSave column which functions similarly to the MinFortSave colum. Now custom content makers can add custom feats which have new qualifying restrictions.\n\n\n\nThe module also demonstrates three new events: OnPreLevelUp, OnCancelLevelUp, and OnPostLevelUp.\nThese events fire for both the PC and Controlled companions.\n\n\nOnHotBarButtonClick event:\nI have edited all the gui xml files which allows the player to drag a button onto the hotbar, in order to ID the button type and other pertinent data (such as skillID, featID, spellID, etc) I then track this data by ButtonID, and have added a callback attach to the OnLeftCLick for the hotbar buttons.\n\nThis creates an effective OnHotBarButtonClick event, which provides me with the button ID that was clicked. The ButtonID can then be used to look up ButtonData assigned to that ButtonID (name the button type and spellID/SkillID/FeatID, etc info)\n\nSo the mod will now display the ButtonType and other Info when you click on a hotbar button.\n\nNOTE: Known issue. Since data tracking only occurs when a button is dragged onto the hotbar, you will get invalid data if you click on hotbar button which were automatically populated with skill/feat buttons upon initial entry into the mod. To fix you have to manually drop them off the hotbar, then replace them by dragging them back onto it form the character info screen.\n\nNOTE, this is still \"beta\" and I am still in need of testing from players and CC makers, to make sure the feat selections work properly. If you find a situation in which it does not please send me a PM on the bioboards and/or describe the build of the character up to the point of level-up in which you got unexpected results.","Rating":10,"Votes":2,"Awards":[]},"296":{"Name":"Writable Parchment v1.0","Author":"pelhikano","Submitted":20090831,"Updated":20090831,"Category":"Scripting routines","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"This item is a simple \"writable parchment\". On activation the player will be able to name the item (new name is \"Parchment: <title>\") and enter the content of the parchment in a text box. Afterwards it can be read from again, either silently (text is only sent to player) or aloud (PC speaks the written text). Also marked invisibly as local variable on the item is the account name and PC name of the writer, and after writing the filled parchment is marked as Plot so it can not be sold. Written parchments hold their content (local variables) when used on PWs.\n\nTo use, simply include the scripts in the .erf and put the parchment item where appropriate.\n","Rating":8.5,"Votes":1,"Awards":[]},"297":{"Name":"Generic PC Stronghold","Author":"Kamal","Submitted":20090903,"Updated":20090904,"Category":"Area","Type":"Type - Other","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"General Stronghold is a skeleton framework for builders to turn into Strongholds for players a la Crossroads Keep in the OC. \n\nAs such it is \"playable\", but only as a proof of concept demo. There is no story or point in doing anything in this demo. When the pc spawns, he can talk to the debugger, who will grant him 1,000,000 gold and \"join\" the sargeants, sufficient for doing anything in the demo.\n\nFiles are in 7zip format, the readme is included in them. I don't really expect problems since it's stripped down OC scripting but hey you never know.\n\nGeneral Stronghold contains the scripting from the OC that handles Crossroads Keep. It has been recommented for additional clarity in some areas and OC specific coding has been removed. Scripts have not been renamed, a builder could do this.\n\nConversations from the OC have been made into a bare skeleton frameworkd. The pc might say \"question about your history?\" to which the npc will reply \"statement!\". If you \"play\" the proof of concept enough, you will get tired of hearing \"statement!\". Conversations are purposely barebones to enable builders to adapt to their own strongholds.\n\nAt this point it contains everything Crossroads Keep stronghold is capable of. Only base NWN2 is needed.\n\nThe \"Crossroads Keep report\" can be customized as I removed references to the tlk file in the original script. This will keep compatibility with any custom tlk files being used. Details are in the readme/scripts. See the screenshot for examples.\n\nAs long as you can see how you could replace one thing with another, if should be simple to customize since it's conversation and string names, you just leave the underlying tags in place. Abstracted out, the stronghold has several features: you build/upgrade things. Remove placeables, recruit soldiers, improve the stronghold generically (lands/roads). Fortunately the system is quite modular, so you could remove something you didn't need.\n\nFor class or race based strongholds this would still work, just with more imagination needed.\n\nLet's say in our story our PC bard inherits his family's run down playhouse that's currently showing a terrible play. He could have the playhouse rebuilt (build/upgrade). He needs to have the old play's props removed (remove placeables) and rebuild the interior for the new play (multiple interiors for one exterior). He also needs to pay for a better scriptwriter and actors (the \"lands/roads\" improvements). We'd remove the soldiers since they don't really fit, or maybe say they are \"wandering touts\" for the play and turn the max number of \"soldiers\" down from 500 to 20, adjusting the scripts to go along with that. Our majordomo is the play director, and the \"stronghold money\" is the cash generated by the play. \"Taxes\" become ticket prices.\n\nA Red Wizard of Thay pc could come across an abandoned wizard tower. The wizard has their minions creating some construct \"soldiers\", maybe upgrade the exterior into a proper tower, and do some interior upgrading to make a alchemy table that gives a crafting bonus available. The \"land\" type upgrades could represent investment into status in the Red Wizard society, so the wizard builds his rank in the society. When the wizard attains a certain status in the Red Wizards, they give our PC wizard a magic amulet as a symbol of the wizard's status. Our wizard has created an iron golem and given it simple commands, the golem functions as the majordomo. Since our wizard just has a remote tower, we can leave out the tax parts and stronghold income parts.","Rating":10,"Votes":2,"Awards":[]},"298":{"Name":"Shadowdancer - Fix","Author":"Alterity","Submitted":20090907,"Updated":20090907,"Category":"Scripting routines","Type":"Type - Combat","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"This was a requested fix for the very weak shadowdancer bonus feats. This is to make the shadowdancer PRC more appealing for a full 10 levels, rather then taking 1 level for hide in plain sight. Things changed are as follows:\n\nShadow Daze: DC is now based on level and dexterity modifier rather then just dexterity modifier. Fomula is 10+shadowdancer level+dex mod.\n\nSummon Shadow: All shadows now have proper shadow damage resistance (Immune to non-magical weapons). The shadows also properly level based on shadowdancer levels, and gain proper HD per level.\n\nShadow Evade:Increased the length to 1 round/level","Rating":8,"Votes":1,"Awards":[]},"299":{"Name":"Skill-based classes","Author":"Wintermist","Submitted":20090908,"Updated":20090909,"Category":"Skill/Feats","Forum Thread":"Link","Type":"Type - Skill Checks","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"I mainly created this \"mod\" so that I could take the roleplay I do in-game to a deeper level.\n\nNow you can pretend to play that knight character using the fighter class, but still get diplomacy.\n\nWhat we have here are two editions of the mod:\n\nTotal Edition:\nAll skills are class skills.\n\nSocial Edition:\nDiplomacy, Bluff and Intimidate are class skills.\n\nInstallation:\n1. Download the version you like.\n2. Extract the folder into: My Documents\\Documents\\Neverwinter Nights 2\\override\\\n3. Play.\n","Rating":8.63,"Votes":2,"Awards":[]},"300":{"Name":"Item Level Restriction","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20090914,"Updated":20091120,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Other","Format":"Code Only","ShowCode":"// k_bb_mod_player_equip (based on k_mod_player_equip from SoZ)\n/*\n    Module equip item script\n    gets the tag of the item and calls:\n    \"i_<tag>_eq\"\n*/\n// ChazM 3/1/05\n// BMA-OEI 9/26/05 moved concat below string trim\n// ChazM 10/20/05 - hook back in to the x2_mod_def* script\n// ChazM 6/18/07 - Okku can't equip items\n// ChazM 6/19/07 - Golem Ally can't equip items\n// ChazM 6/21/07 - OneOfMany added to the evergrowing list of those who can't equip items\n// ChazM 7/13/07 - Okku allowed to wear rings and amulets\t\n// ChazM 8/15/07 - send message indicating item can't be equipped.\n// ChazM 8/16/07 - Okku Right Ring fix.\n// TDE 6/20/08 - Adapted script for NX2\n\n// Brendan Bellina aka \"Kaldor Silverwand\"\n// 5/09 - commented out co_zarl check from SoZ;\n// 9/09 - added support for Item Level Restrictions using module integer variables:\n//       BB_ILR_NWN - Set to 1 to enforce Item Level Restriction for all equippable items using the NWN item value method\n//       BB_ILR_NWN_ADJ - Value adjustment (positive or negative) to item value when calculating ILR when using BB_ILR_NWN\n//       BB_ILR_NWN_DIV - Divide the required level by this number when using BB_ILR_NWN (0 is treated as 1)\n//       BB_ILR_ENHBONUS - Set to 1 to turn on Item Level Restriction for weapons with an Enhancement Bonus\n//       BB_ILR_ENHBONUS_MULT2 - instead of enh bonus plus 2, set to 1 to require enh bonus times 2 levels to equip weapons\n//       BB_ILR_ACBONUS - Set to 1 to turn on Item Level Restriction for Armor and Shields with Armor Class Bonus\n//       BB_ILR_ACBONUS_MULT2 - instead of AC bonus plus 2, set to 1 to require AC bonus times 2 levels to equip armor/shields\n// 9/09 - added support for Item integer variables to also control Item Level Restrictions\n//       BB_ILR - Set to level required to use a particular item. Overrides any module level ILR settings. Set to 1 for no ILR.\n\n#include \"ginc_item\"\n\nconst int STR_REF_NOT_ALLOWED\t= 210757;\nconst int NWN2_LEVEL_CAP\t\t= 30; // This is the level cap in NWN2\n\n//\n// Function Prototypes\n//\n\nint GetLevelRequiredByValue (int nItemVal, int nAdjustment = 0);\n\n//\n// Functions\n//\n\n// Determine level required to equip an item based on the item cost.\n// The level returned is based on the NWN table documented at <http://nwn.wikia.com/wiki/Item_level_restriction>.\n// These values are also in the NWN2 2da file itemvalue.2da\n// by Brendan Bellina, Sept, 2009\n// - int nItemVal: the value of the item in gp\n// - int nAdjustment: an optional positive or negative adjustment to the value \nint GetLevelRequiredByValue (int nItemVal, int nAdjustment = 0)\n{\n\tint nRqdLevel = 0;\n\tnItemVal += nAdjustment;\n\tif (nItemVal <= 1000) nRqdLevel = 1;\n\telse if (nItemVal <= 1500) nRqdLevel = 2;\n\telse if (nItemVal <= 2500) nRqdLevel = 3;\n\telse if (nItemVal <= 3500) nRqdLevel = 4;\n\telse if (nItemVal <= 5000) nRqdLevel = 5;\n\telse if (nItemVal <= 6500) nRqdLevel = 6;\n\telse if (nItemVal <= 9000) nRqdLevel = 7;\n\telse if (nItemVal <= 12000) nRqdLevel = 8;\n\telse if (nItemVal <= 15000) nRqdLevel = 9;\n\telse if (nItemVal <= 19500) nRqdLevel = 10;\n\telse if (nItemVal <= 25000) nRqdLevel = 11;\n\telse if (nItemVal <= 30000) nRqdLevel = 12;\n\telse if (nItemVal <= 35000) nRqdLevel = 13;\n\telse if (nItemVal <= 40000) nRqdLevel = 14;\n\telse if (nItemVal <= 50000) nRqdLevel = 15;\n\telse if (nItemVal <= 65000) nRqdLevel = 16;\n\telse if (nItemVal <= 75000) nRqdLevel = 17;\n\telse if (nItemVal <= 90000) nRqdLevel = 18;\n\telse if (nItemVal <= 110000) nRqdLevel = 19;\n\telse if (nItemVal <= 130000) nRqdLevel = 20;\n\telse if (nItemVal <= 250000) nRqdLevel = 21;\n\telse if (nItemVal <= 500000) nRqdLevel = 22;\n\telse if (nItemVal <= 750000) nRqdLevel = 23;\n\telse if (nItemVal <= 1000000) nRqdLevel = 24;\n\telse nRqdLevel = (20 + nItemVal / 200000);\n\tif (nRqdLevel > 60) nRqdLevel = 60;\n\n\treturn nRqdLevel;\n}\n\nvoid main()\n{\n    object oPC      = GetPCItemLastEquippedBy();\n   \tobject oItem \t= GetPCItemLastEquipped();\n\t\t\n\tint bEquipForbidden = FALSE;\n\n\t// If Item has int variable BB_ILR then must be that level to equip, ignore any other ILR settings\n\t// Use this if you:\n\t//   - are not using an ILR system, but want a particular item to have an ILR\n\t//   - are using the BB_ILR_NWN system, but want a particular item to have a unique ILR (or set to 1 for no ILR)\n\t//   - are using the BB_ILR_ENHBONUS system, but want a particular enhanced weapon to have a unique ILR (or set to 1 for no ILR)\n\t//   - are using the BB_ILR_ACBONUS system, but want a particular armor suit or shield to have a unique ILR (or set to 1 for no ILR)\n\tif (!bEquipForbidden && GetLocalInt(oItem, \"BB_ILR\") > 0)\n\t{\n\t\tint nRqdLevel = GetLocalInt(oItem, \"BB_ILR\");\n\t\tif (nRqdLevel > NWN2_LEVEL_CAP) nRqdLevel = NWN2_LEVEL_CAP;\n\t\tint nLevel = GetTotalLevels(oPC, FALSE); // Do not include negative levels\n\t\tif (nLevel < nRqdLevel)\n\t\t{\n\t\t\tbEquipForbidden = TRUE;\n\t\t\tAssignCommand(oPC, ActionSpeakString(IntToString(nRqdLevel) + \" levels are required to equip this item.\"));\n\t\t}\n\t}\n\telse\n\t{\n\t\t// If module has int variable BB_ILR_NWN == 1 or Item has int variable BB_ILR_NWN == 1 then use\n\t\t//  value to determine level requirement to equip.\n\t\t// Module int variable BB_ILR_NWN_ADJ can be used to adjust the value of the items.\n\t\tif (!bEquipForbidden && (GetLocalInt(GetModule(), \"BB_ILR_NWN\") == 1 || GetLocalInt(oItem, \"BB_ILR_NWN\") == 1))\n\t\t{\n\t\t\t// If BB_ILR_NWN module setting or Item setting then mimic the Item Level Restriction feature of NWN based on item cost.\n\t\t\t// Costs taken from <http://nwn.wikia.com/wiki/Item_level_restriction>.\n\t\t\t// The tag-based equip script will be executed after this only if the item can be equipped.\n\t\t\tint nItemValue = GetGoldPieceValue(oItem);\n\t\t\tint nRqdLevel = GetLevelRequiredByValue(nItemValue, GetLocalInt(GetModule(), \"BB_ILR_NWN_ADJ\"));\n\t\t\tint nILRDiv = GetLocalInt(GetModule(), \"BB_ILR_NWN_DIV\");\n\t\t\tif (nILRDiv != 0) nRqdLevel /= nILRDiv;\n\t\t\tif (nRqdLevel > NWN2_LEVEL_CAP) nRqdLevel = NWN2_LEVEL_CAP;\n\t\t\tint nLevel = GetTotalLevels(oPC, FALSE); // Do not include negative levels\n\t\t\tif (nLevel < nRqdLevel)\n\t\t\t{\n\t\t\t\tbEquipForbidden = TRUE;\n\t\t\t\tAssignCommand(oPC, ActionSpeakString(IntToString(nRqdLevel) + \" levels are required to equip this item.\"));\n\t\t\t}\n\t\t}\t\t\n\t\t\n\t\t// If module has int variable BB_ILR_ENHBONUS == 1 or Item has int variable BB_ILR_ENHBONUS == 1 then determine required level based on enhancement bonus.\n\t\t// Module int variable BB_ILR_ENHBONUS_MULT2 to use enh bonus times 2 instead of enh bonus plus 2.\n\t\t// This applies to handheld weapons only.\n\t\tif (!bEquipForbidden && (GetLocalInt(GetModule(), \"BB_ILR_ENHBONUS\") == 1 || GetLocalInt(oItem, \"BB_ILR_ENHBONUS\") == 1))\n\t\t{\n\t\t\t// If BB_ILR_ENHBONUS then only allow a player to equip an enhanced weapon in their hands\n\t\t\t// if they have enough levels of experience. By default they must have 2 levels more than the\n\t\t\t// weapon enhancement. If module variable BB_ILR_ENHBONUS_MULT2 is set to 1 then the required level\n\t\t\t// is instead two times the enhancement bonus.\n\t\t\t// The tag-based equip script will be executed after this only if the item can be equipped.\n\t\t\t\t\t\t\n\t\t\tif (GetItemHasItemProperty(oItem, ITEM_PROPERTY_ENHANCEMENT_BONUS))\n\t\t\t{\n\t\t\t\tint nSlot = GetSlotOfEquippedItem(oItem, oPC);\n\t\t\t\tif (nSlot == INVENTORY_SLOT_LEFTHAND || nSlot == INVENTORY_SLOT_RIGHTHAND)\n\t\t\t\t{\n\t\t\t\t\tint nLevel = GetTotalLevels(oPC, FALSE); // Do not include negative levels\n\t\t\t\t\tint nEnhBonus = IPGetWeaponEnhancementBonus(oItem);\n\t\t\t\t\tint nRqdLevel = 2 + nEnhBonus;\n\t\t\t\t\tif (GetLocalInt(GetModule(), \"BB_ILR_ENHBONUS_MULT2\") == 1)\n\t\t\t\t\t\tnRqdLevel = 2 * nEnhBonus;\n\t\t\t\t\tif (nRqdLevel > NWN2_LEVEL_CAP) nRqdLevel = NWN2_LEVEL_CAP;\n\t\t\t\t\tif (nLevel < nRqdLevel)\n\t\t\t\t\t{\n\t\t\t\t\t\tbEquipForbidden = TRUE;\n\t\t\t\t\t\tAssignCommand(oPC, ActionSpeakString(IntToString(nRqdLevel) + \" levels are required to equip this +\" + IntToString(nEnhBonus) + \" item.\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\n\t\t// If module has int variable BB_ILR_ACBONUS == 1 or Item has int variable BB_ILR_ACBONUS == 1 then determine required level based on AC bonus.\n\t\t// Module int variable BB_ILR_ACBONUS_MULT2 to use AC bonus times 2 instead of enh bonus plus 2.\n\t\t// This applies to shields and armor (chest) only.\n\t\tif (!bEquipForbidden && (GetLocalInt(GetModule(), \"BB_ILR_ACBONUS\") == 1 || GetLocalInt(oItem, \"BB_ILR_ACBONUS\") == 1))\n\t\t{\n\t\t\t// If BB_ILR_ACBONUS then only allow a player to equip a shield or armor\n\t\t\t// if they have enough levels of experience. By default they must have 2 levels more than the\n\t\t\t// AC Bonus. If module variable BB_ILR_ACBONUS_MULT2 is set to 1 then the required level\n\t\t\t// is instead two times the AC bonus.\n\t\t\t// The tag-based equip script will be executed after this only if the item can be equipped.\n\t\t\t\t\t\t\n\t\t\tif (GetItemHasItemProperty(oItem, ITEM_PROPERTY_AC_BONUS))\n\t\t\t{\n\t\t\t\tint nBaseItemType = GetBaseItemType(oItem);\n\t\t\t\tif (nBaseItemType == BASE_ITEM_ARMOR || nBaseItemType == BASE_ITEM_LARGESHIELD ||\n\t\t\t\t\tnBaseItemType == BASE_ITEM_SMALLSHIELD || nBaseItemType == BASE_ITEM_TOWERSHIELD)\n\t\t\t\t{\n\t\t\t\t\tint nLevel = GetTotalLevels(oPC, FALSE); // Do not include negative levels\n\t\t\t\t\tint nACBonus = IPGetWeaponEnhancementBonus(oItem, ITEM_PROPERTY_AC_BONUS);\n\t\t\t\t\tint nRqdLevel = 2 + nACBonus;\n\t\t\t\t\tif (GetLocalInt(GetModule(), \"BB_ILR_ACBONUS_MULT2\") == 1)\n\t\t\t\t\t\tnRqdLevel = 2 * nACBonus;\n\t\t\t\t\tif (nRqdLevel > NWN2_LEVEL_CAP) nRqdLevel = NWN2_LEVEL_CAP;\n\t\t\t\t\tif (nLevel < nRqdLevel)\n\t\t\t\t\t{\n\t\t\t\t\t\tbEquipForbidden = TRUE;\n\t\t\t\t\t\tAssignCommand(oPC, ActionSpeakString(IntToString(nRqdLevel) + \" levels are required to equip this +\" + IntToString(nACBonus) + \" item.\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\t}\n\t\n\tif (bEquipForbidden == TRUE)\n\t{\n\t\tAssignCommand(oPC, ActionUnequipItem(oItem));\n\t\tSendMessageToPCByStrRef(oPC, STR_REF_NOT_ALLOWED);\n\t\treturn;\n\t}\n\t\n\tExecuteScript(\"x2_mod_def_equ\", OBJECT_SELF);\n}\nSelect All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"This module on equip script can be used to implement customizable Item Level Restrictions.\n\nILR can be implemented using the NWN system based on item values, or based on the enhancement and AC Bonus values of weapons, shields, and armor. The combination of module variables and item variables used allows for a great deal of customizability and special handling for exceptional items.\n\nAll variables are explained in the comment block at the top of the script.\n","Rating":"N/A","Awards":[]},"301":{"Name":"Dead Magic System","Author":"Belsirk","Submitted":20090914,"Updated":20091220,"Category":"Rulesets","Type":"Type - Magic","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"Project Antimagic / Dead Magic Zone/ Wild Magic Zone\n\nAfter some time without playing NWN1 or NWN2 I'm got back to this, i choice to remake my old Antimagic project from NWN1 but this time i choice to use NWNX4 System instead Bioware/Atari system, this was a new world to me because never worked before SQL and was the stronger reason to do it. Right now i have almsot complete the Dead Magic System but some problem (not on my code) are still giving me a product which don't like at 100%\n\nOnce the project is finished will offer (Between other things):\n- A dead Magic System based on NWNx4 \n- A surpress System using NWNX4 too\n- Wild Magic System... NWNX4 of course (Actually custom plugin )\n- A wild Mage Class\n- Antimagif Field spell\n- A rod of Wilderness\n\n\nDead Magic System that come with this first version have:\n- A custom SQL DB (support SQLite and MySQL) for magical items where Local var and itemp propertie togheter with their custom design can be save to the DB. This DB is easy take apart for use as a generic persistent chest for players if you want (Was create with that on mind).\n- A most complete GUI windows where the DM can: \n- See all the DB or a single entry, (Except when usign MySQL because it's giving a problem with Multiple Resulset, but SQLite work perfectly)\n- Control wich area are working with the current systems. \n- Let the DM introduce special items to the DB (Dead Magic System) so he can leave those on the area , the player once retrieve and leave the area get the item\n- The DM can retrieve any item on the DB which help the player recover item they lost.\n- A fully control where the DM can control at fly if the DeadMagic Zone is working fully or partial (Prety easy to use with the GUI )\n- All the point where the performance can be affect you as Builder have a great control... using the const script for each system you can make the thing faster or stronger as fit you best. \n- From version 1.2 the system let you put your random treasure system on the areas with Dead magic, so the simple masterwork sword the player found on the dead magic zone can become a magical item once he leave. \n- If you are using Shadow Weave concept, this system let you work fine with them: Casters will not lost their spells and items crafted with shadow weave magic will not lost\ntheir magic properties.\n- Extraordinary properties from creature will be not lost, so a troll will still having his +5 Regeneration before figter with masterwork items\n- The magical weapons become maserworks weapon (+1 Attack roll) meanwhile stay on the Dead Magic Zone.\n- If you are one of those Builders who have a strict naming structure for local variables , don't worry all the local variable used on players and/or items are easy to modify.\n- By default this system make difference beetwen local vault and server vault - This is for retrieve info from players PC - but if yo want to use a alternative way retrieving the\ninfo from other local variables on the player, no problem, this is pretty easy to do with this system\n- The amount of local vars and item propertie a item can have it's also a factor you can control (by default the system get ALL them ). Since version 1.2 the control on local var is even better: you can select which local var save witouth care how many are already saving. \n- Not all the item get a good day on the Dead Magic Zone, Scrolls and potions will lost their power forever (by default the player will get back a blank scroll or empty magical bottle)\nwands will lost a charge , if that was the last charge - this happen when the player leave the Dead magic zone- by default the player will get a bone wand\n- If the server crash when the player was inside of the dead magic zone, he only need get back to the area and get out for retrieve his items back, now if the item was lost no problem the dm can retrieve it.\n\n- How install the Dead MAgic Zone\n0- Have ready your NWNX4 server (For SQLite or MySQL )\n1- Import the Erf\n2- The areas where you want the Dead MAgic Zone working need to get added the scripts: tr_antimagic_en and tr_antimagic_ex or if you only want a partly part of the area \n have the system then add a trigger with those scripts.\n3- The Mod OnLoad event need the lines that my script inc_antimagic_onload has (a simple ExcecuteScript can help)\n4- Optional you can add the function on my script: tr_antimagic_re (resT) and the other on tr_antimagic_hb (hearbeat on the area with the system )those will help to get a better play \n from the player (Not cheats)\n5- Optional you can update your loot system for add the dead magic effect whe need to the treasure.\n6- Be sure the Spell Hooking system it's working (and of course that work for NPC too) and be sure to copy the function on inc_antimagic_hook script to your own hook system\n7- Put the file : man_antimagic_db.xml on your UI folder\n8- That is, you can get a more custom control like disabling/enabling some dead magic area but are no't necesary to do it\n\nA more define information about how control the system can be found on the script: n_antimagic_const . And the file readme on the rar bring a very complete description of the system\nadvises, and comments how to use it.\n\nWhat is next? \n- Begin the work with the surpress system and the basis for the wildmagic.\n- Begin the NWNX4 plug-in (or actually get the basis for be able to do it) for fix the last problem with the Dead Magic System and try to get the Wild magic and Surpress without changing any of the current spells...\n\nP.d. If anyone know how solve the problem with MySQL from don't getting all the Resulset from a query , please tell me how !\n","Rating":10,"Votes":1,"Awards":[]},"302":{"Name":"Ayrik's Sheet Music","Author":"Ayrik","Submitted":20090922,"Updated":20090922,"Category":"Inventory Item","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a compilation of four items, one placeable, and a script.\n\nThe main item, Sheet Music, will call either a Perform or Dexterity check, and if the activating PC has an instrument (Drum, Mandolin, or Flute) equipped, will play a selection of sounds and an animation on a successful roll.\n\nEach instrument has six sound sets, 3 for Perform Rolls and 3 for Dexterity rolls, some of the sounds are the same between them.\n\nThe other three items are a Drum, Lute, and Flute that to not have any restrictions on who can use them, so anyone can attempt to play the music.\n\nThe placeable is an invisible object that I use to play the sound, it is created and destroyed by the script, so you don't need to worry about it.\n\nI am planning on doing some updates in the future by creating some Magical Sheet Music items that are only useable by creatures with the perform skill, and will have effects based on the player's roll.\n\nHope this can help (or at least be fun for) someone out there.\n\nPlease rate and comment.","Rating":10,"Votes":2,"Awards":[]},"303":{"Name":"KEMO Storage System","Author":"KEMO","Submitted":20090922,"Updated":20100403,"Category":"Scripting routines","Type":"Type - Item Storage","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"The KEMO Storage System allows PCs to store up to 1000 items (excluding containers) by speaking to a deposit box NPC.\n\nThis is based on the Consignment/Auction system, and has some of the same features, such as the ability to do searches for storage contents (for example, type in \"Recipe\" and it will show all of your stored recipes) and the ability to Examine stored items without retrieving them.\n\n(The storage system has been optimized by Tamons, who helped optimize the auctioneer.)\n\nTO IMPLEMENT:\n* Import the ERF into your module.\n* Place the storage placeable and NPC near one another in one of the module's areas (the placeable and NPC are under the KEMO Auction category, which will already exist if you're using the other system).\n* Bake and serve.\n\nUPDATE 11/11/09 (version 1.1):\n* may now store up to 1,000 items\n* Scroll Case interface is now included as a separate download. Activate the scroll case and a GUI opens up that lets you deposit/retrieve spell scrolls into the case, organized by spell type and level. The GUI identifies it as a Thayan Scroll Case, but this can be modified in the XML file easily.\n\nUPDATE 4/3/10 (scroll case 1.1):\n* Added scripts missing from scroll case download","Rating":9.94,"Votes":6,"Awards":[]},"304":{"Name":"Sunjammer's Three Button Message Box","Author":"Sunjammer","Submitted":20090929,"Updated":20090930,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Sunjammer's Three Button Message Box \n29 Sep 2009\nv1.00 \n\nSunjammer's Three Button Message Box allows a configurable message box with up to three buttons to be displayed to a player for those occasions when two buttons simply won't do. When the player clicks one of the buttons or presses the ESC key the message box will close and a custom callback script will be passed a value representing the player's selection allowing a scripter to capture and handle any of those options.\n\nGetting Started \n\nSimply download the ZIP file(s), extract the ERF and import it into your module. You may also find it helpful to extract the template NSS file into the toolset's Templates directory.\n\nIt is a good idea to familiarise yourself with the notes in header section of sj_inc_message_box_3 script as it contains notes on installing and using the system.\n\nRemember use the #include directive to incorporate the main library (sj_inc_message_box_3) into any script you want to call the message box from and into your custom callback script(s). As all public functions are fully prototyped once a script has been saved these functions and all constants will appear in Script Assist, in the Auto-complete menu and (when you click on a function) in the Help tab.\n\nFurther Information \n\nIf you have any questions, suggestions or constructive comments please let me know here, on the NWN2 Forums, or via my website.\n","Rating":9.83,"Votes":3,"Awards":[]},"305":{"Name":"TheIV's Summoning System v1.0","Author":"TheIV","Submitted":20091011,"Updated":20091102,"Category":"Scripting routines","Type":"Type - Henchmen","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"UPDATED v1.0: 11/02/09\n\nTheIV's summoning system is a set of scripts for Neverwinter Nights 2 designed to implement a new system of summoning. Gone are the days of master conjurers who can, at best, summon a mute creature to be a henchman for a maximum of 1 round per caster level! Now you can summon a dynamic range of outsiders, elementals, and more, make them your slaves, befriend them, or even bind them to your swords, armor, or even wands!\n\nThese scripts will give you everything you need to set up individual creatures to be summonable by use of a summoning circle (or really, anything you place the conversation on). Once summoned, you can attempt a custom skill check to bind them, either to your will - making them serve as a henchman - or to your equipment, greatly increasing your gear's power.\n\nI uploaded the files zipped as both .zip and .7z, download whichever you prefer.","Rating":9.81,"Votes":4,"Awards":[]},"306":{"Name":"Random Weapon Generation (With Enchantments)","Author":"Artevere\\Evezial","Submitted":20091101,"Updated":20110325,"Category":"Scripting routines","Type":"Type - Trade Skill and Item Creation","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"This is a Random Item Generator for PW or Single player modules. It allows completely random items to be created without tedious building of items within the tool set. It is very extensible and easy to modify to suit your needs (just give me credit for the base code :)).\n\nCurrently, it only imbues with a single enchantment, and none of them will be a craftable ability (so nothing that you could enchant as a PC in game).\n\nPlease read the administrators guide if you would like more information. If you are a player, and don't want to read the dirty and technical details of the script, click on player's guide for a quick summary.\n\nUPDATE (11/30/09):\n\nI have implemented a relative naming engine to apply a unique name to the item based on what it does.\n\nI am splitting the script into 2 types in my next update:\n\n1) A script for PW's or single campaigns where crafting is an essential part of the game.\n2) A script with more abilities and bonuses for those PW's and single campaigns where crafting is not considered as important.\n\nI am also continuing to balance the power of items out of the box (though keep in mind that you can alter the strength of these items yourself if you wish.)\n\nKNOWN BUGS: There are some properties being applied to items that cannot have them. This causes NWN 2 to immediately destroy the illegal item. I'm still looking for a book or website that lists the base items and their legal properties. As soon as I find this, I'll fix the error.\n\nUPDATE (12/01/09):\n\nI added mundane items into the generator and adjusted the loot percent as follows:\nMagical 10% || Gold 15% || Mundane 65% || Nothing 10%\n\nFixed the chests in the test module to fire the correct script.\nUpdated the Administrator's Handbook with new content.\n\nKNOWN BUGS: There are some properties being applied to items that cannot have them. This causes NWN 2 to immediately destroy the illegal item. I'm still looking for a book or website that lists the base items and their legal properties. As soon as I find this, I'll fix the error.\n____________________________________\nI am currently planning on expanding the script with the following abilities:\n\nRandom look\nSet Items\nUnique magical effects\ncursed items\non equip effects\nin inventory effects\n\nThe script is ready to go as is. Just extract the .erf and place the included chests wherever you wish.\n\nUpdate (03/25/11):\n\nThe bug should be fixed. Please let me know if it is not.\n\nI reorganized the scripts so that there are fewer of them to keep track of. I recommend deleting all of your old random item scripts before importing these.\n\nAdded:\nChests will scan for any stealth/invisibility effects on the PC. If the player is trying to ninja loot, it will send them a message that it is not allowed.\n\nI rebalanced almost every aspect of the script so that it does not give overly powerful items. I will update the admin handbook as soon as I can.\n\nNOTE: The administrator and player handbook are both outdated and thus unreliable!\n\nLevel 30 chest now works.\n\nLoot Chance: Magical 20% || Gold 30% || Mundane 30% || Nothing 20%\n\nEnjoy!","Rating":10,"Votes":1,"Awards":[]},"307":{"Name":"ugly zombie behaviour","Author":"lee_va","Submitted":20091114,"Updated":20091114,"Category":"Creature Related","Type":"Type - Combat","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"some results of my zombie-apocalypse-game-project. As i'm not quite good in scripting, it may looks a bit messed up, but i tested it over and over and it seems to work fine now.\n\nWHAT IT DOES:\n\nFirst of all, you see that a zombie is yet included in the file, which yet has the 3 scripts included and some other settings required for the scripts to work.\n\nThe on-death-script causes zombies to resurrect at night only after a while.\n\nThe heartbeat-script handles chances to strumble or increase walking speed, making mobs look more authentic. \nWhen sun raises, zombies die automatically after some seconds.\nFinally, the on-perception-script checks if zombie has seen the perceived creature, so combined with short perception range, they are quite ugly^^\n\nNot much yet? Well, i'm not satisfied nether yet, so i suppose that i'll keep working on this.\n\nPlease report problems, as there probably still are some flaws.","Rating":"N/A","Awards":[]},"308":{"Name":"RoF Item Property Custom Functions","Author":"Knightmare","Submitted":20091122,"Updated":20091122,"Category":"Other","Type":"Type - Other","Format":"Code Only","ShowCode":"// Identify items in inventory of oTarget if not alreay identified\n// Does not include equiped items\nvoid IdentifyItems(object oTarget)\n\n// Returns TRUE if the classification type of oItem is (melee weapon) - simple\nint GetIsMeleeWeaponSimple(object oItem)\n\n// Returns TRUE if the classification type of oItem is (melee weapon) - martial\nint GetIsMeleeWeaponMartial(object oItem)\n\n// Returns TRUE if the classification type of oItem is (melee weapon) - exotic\nint GetIsMeleeWeaponExotic(object oItem)\n\n// Returns TRUE if the classification type of oItem is (melee weapon) - rogue\nint GetIsMeleeWeaponRogue(object oItem)\n\n// Returns TRUE if the classification type of oItem is (melee weapon) - mage\nint GetIsMeleeWeaponMage(object oItem)\n\n// Returns TRUE of oTarget has the Weapon Specialization feat in oWeap\nint GetIsSpecialized(object oTarget, object oWeap)\n\n// Returns TRUE of oTarget has the Weapon Focus feat in oWeap\nint GetHasWeaponFocus(object oTarget, object oWeap)\n\n// Returns TRUE of oTarget has the Exotic Weapon feat\nint GetHasExoticWeaponFeat(object oTarget)\n\n// Returns TRUE if oTarget has an item in inventory with nProperty\n// Checks equiped items first then general inventory\n// nProperty = ITEM_PROPERTY_*\nint GetDoesHaveItemWithProperty(object oTarget, int nProperty)\n\n// Returns the actual bonus applied to the ability (ie. +1, +2, +12) by oItem\n// Does NOT return which ability gets the bonus\nint GetItemAbilityBonus(object oItem, int nAbilityBonusType = ITEM_PROPERTY_ABILITY_BONUS)\n\n// Returns the actual bonus applied to the skill (ie. +1, +2, +12) by oItem\n// Does NOT return which skill gets the bonus\nint GetItemSkillBonus(object oItem, int nAbilityBonusType = ITEM_PROPERTY_SKILL_BONUS)\n\n// Returns TRUE if oItem has ANY bonus in nSkill\n// nSkill = SKILL_*\nint GetHasSkillBonus(object oItem, int nSkill)\n\n// Returns TRUE if oItem has ANY bonus in nAbility\n// nAbility = IP_CONST_ABILITY_*\nint GetHasAbilityBonus(object oItem, int nAbility)\n\n// Equip oItem to appropriate slot on oTarget based on item base type (no weapons, armor or shields included)\nvoid EquipItemToSlot(object oTarget, object oItem)\n\n// Gets the first item on oTarget that has nAbility bonus\n// Searches equiped slots first, then general inventory\n// Ignores actual ability bonus so returns first item found  \n// with ANY bonus to specified ability\n// nAbility = IP_CONST_ABILITY_*\n// Returns OBJECT_INVALID if no item is found\nobject GetItemWithAbilityBonus(object oTarget, int nAbility)\n\n// Gets the first item on oTarget that has nSkill bonus\n// Searches equiped slots first, then general inventory\n// Ignores actual skill bonus so returns first item found  \n// with ANY bonus to specified skill\n// nSkill = SKILL_*\n// Returns OBJECT_INVALID if no item is found\nobject GetItemWithSkillBonus(object oTarget, int nSkill)\n\n// Searches inventory of oTarget and equips items to appropriate slots by item base type\n// Will only items equip if slots are open\n// Includes equiping best armor and melee weapon\n// Helms and shields not included\nvoid EquipItems(object oTarget)\n\n// Sets all items in inventory of oTarget undroppable\n// Does not include equiped items\nvoid SetItemsNoDrop(object oTarget)\n\n// Returns TRUE if any item on oTarget that has nAbility bonus\n// Searches equiped slots first, then general inventory\n// Ignores actual ability bonus so returns TRUE if item found  \n// has ANY bonus to specified ability\n// nAbility = IP_CONST_ABILITY_*\nint GetDoesHaveItemWithAbilityBonus(object oTarget, int nAbility)\n\n// Returns TRUE if any item on oTarget that has nSkill bonus\n// Searches equiped slots first, then general inventory\n// Ignores actual skill bonus so returns TRUE if item found  \n// has ANY bonus to specified skill\n// nSkill = SKILL_*\nint GetDoesHaveItemWithSkillBonus(object oTarget, int nSkill)Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"I had a need for a bunch of custom functions dealing with various aspects of items and their properties. These have very specific uses based on my needs but I figured that maybe somebody else out there may have a use for them so here they are. File is ERF format for easy installation.\n\nUse as you see fit, credit would be appreciated. Votes and comments welcomed.\n\nDescriptions of each function is in the code box below.","Rating":10,"Votes":1,"Awards":[]},"309":{"Name":"Unique Key system","Author":"Belsirk","Submitted":20091123,"Updated":20091124,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"A system for add a easy time to the DM and builders for add Innkeepers avoiding the problem when a Player it's resting on his room another player get the same key and get on the room too. \n\nThis system let you have custom key for doors, where only a player can get a key, to at least the previous player have the key by a custom amount of time (changes of locks) and for those players who like ask keys and never get back will need to pay a fee for this bad habit.\n\nVery friendly and give flexibility as how save the info (global, campaign or local vars).","Rating":10,"Votes":1,"Awards":[]},"310":{"Name":"Talernon3 Scripts - Expanded Summon Monster I-X spells","Author":"Dragonsbane777","Submitted":20091127,"Updated":20091128,"Category":"Area","Forum Thread":"Link","Type":"Type - Magic","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Dude . . check out Talernon3 Age of Dragons Link\n\n\nA complete system to expand the Summons 1-9 spells, hakless and expandable.\n\nHow it works:\n1) Use the item (included as books, but can be changed to stones, whatever you like)\n2) Cast a summons spell - now your summons list has 9 new monsters!\n\nThe books could be sold in stores, given at temples as themes for deities, be quest rewards, you name it.\n\nIncluded are the following themes: Nature, Air, Earth, Fire, Water, Artifce, Magic\n\nWithout a book, the default theme is Nature, since druids can channel those spells.\n\n\n\nAdd new themes! Very simple!\n1) Copy the book item, change the resref to c_summons_themename - leave its tag alone.\n2) Create 9 new monsters, named c_summons_themename01 to 09\n\nDone!\n\n\n\n\nIn addition!!! Place a variable on NPCs and creatures in your module, and they will summon themes! This makes creatures using summoning spells in areas seem VERY unique.\n\nVariable:\nmai_book_summon = resref of the theme book\n\nex: my red dragon summons fire elementals, so it has mai_book_summon = c_summons_fire as a variable on the creature in the pallete.\n\nI would have included the 9 other themes we have at Talernon3 (paraelementals, Feywild, Shadowfell, and so on) but since we have 10 new skills, creatures in my module bug when exported and tested. Sowwy.\n\nScript done by the magical Maiyin, and creatures done by the old Talernon2 staff.\n\n\n\n\nGet your a@@ on my server! Talernon3 Age of Dragons Link","Rating":10,"Votes":2,"Awards":[]},"311":{"Name":"Talernon3 Scripts - Module Cleaning Script","Author":"Dragonsbane777","Submitted":20091129,"Updated":20091129,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Spawning","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"Check out World of Talernon Age of Dragons Link\n\n\nFor those who run PWs, we all know how laggy it can get when you have monsters left over from players running around in areas.\n\nSo - clean them up!\n\nmai_clean_areaex:\nThis script removes creatures from areas that have been spawned. Simply place the script in the OnExit property of your area, and then place a variable on the area as well:\nmai_clean_delay = int\n\nThe int should be the respawn time for your encounters on the area. Make it the same, and the script will wipe away critters just before the encounters reset.\n\nYou can also set a flag in the script so it cleans up placeables as well, this is nice for PWs that run alot of events.\n\nScripted by the magical Maiyin.\n\nBONUS SCRIPT!\n\nmai_clean_npc:\nA 2nd script - have tons of stores? Think about the lag from 50 stores (Tal2 had over 60). Each has an NPC . . so! Place the script in the OnExit, and place a variable on the -encounter-:\n\nNPCACT = 1\n\nThis script cleans the critters, and -resets- the encounters with the variable so the NPC will spawn right away again. This way, stores only have their NPCs out when needed. Make sure to set the encounter to \"Spawn Once\" true and \"Auto-reset\" to false.\n\nScripted by the magical Maiyin.\n\nGot RP? \nCheck out World of Talernon Age of Dragons Link","Rating":10,"Votes":1,"Awards":[]},"312":{"Name":"E.C.�s Super Include! Access 100s of hidden functions!","Author":"E.C.Patterson","Submitted":20091216,"Updated":20091216,"Category":"Scripting Help","Type":"Type - Other","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"This script will make it easy for you to find useful, ready-made custom functions hidden away in the dozens of Obsidian/Bioware �include� files that come with the game.\n\nThis file has been invaluable to me. It has saved me countless hours of scripting, allowed me to do things I would not have been able to do otherwise and gave me great ideas for my own custom functions.\n\n------------\nINSTRUCTIONS\n- Save the �#EC_super_include.nss� file to your mod directory.\n- In the Toolset, open the script and show Script Assist. You will then see hundreds of custom functions appear in the list. This may take a few seconds. (You may have to flip between Script Assist�s Functions/Globals tabs a couple of times to get the list to show.)\n- When you find a function that sounds interesting, right click it and select �Go to definition�. This will take you to the actual library that defines the function.\n- When you want to include one of these functions in your script, just #include the library in your script as usual.\n\n------------\nHOW IT WORKS:\n- This �script� simply references all known function libraries that come with the game.\n- Use it as a reference only, and not as a template for actual scripts.\n- You will get an error if you try to compile it. You can disregard it.\n","Rating":9.54,"Votes":16,"Awards":[]},"313":{"Name":"Barrels of Alchemist's Fire (for NWN2)","Author":"The Fred","Submitted":20091218,"Updated":20100104,"Category":"Placeable Item","Type":"Type - Combat","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"A large barrel of alchemist's fire which, when it takes fire damage, will explode, dealing 3d6 to all around it and a further 3d8 to all very close.\n\nThis is not dissimilar to the kegs of the stuff from HotU.\n\nClicking on a barrel will pick it up.\n\nIncluded are two placeables (the barrel, and a helper to run the explosion), and item, and 3 (I think) scripts. This requires the default NWN2 tagbased item scripting set-up. If you have changed this, you will need to rename the item drop script.\n\nv1.01: Fixed a couple of minor problems - the placeable now has a description and dynamic collisions. It's also slightly smaller so picking it up looks a bit less odd.\n\nv1.02: Fixed a bug whereby you could drop a keg around yourself and get stuck (since the keg now has collision). NWN used to handle this by not creating the object right on top of you, but NWN2 doesn't I guess... :(","Rating":10,"Votes":2,"Awards":[]},"314":{"Name":"Shockwolf�s Persistent Character Location Saver","Author":"Shockwolf","Submitted":20091221,"Updated":20091221,"Category":"Database Related","Type":"Type - Location Tracking","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2","Description":"Shockwolf�s Persistent Character Location Saver\n\n\nDo you run a Persistent World or just a multiplayer module that can�t rely on server saves? \n\nAre your players sick of having to start at the beginning of the module every time they log in again after a server crash or restart? \n\nNeed a way of recording every body�s character locations every time they rest so that you can return them to where they left off after the server goes down? \n\nThen look no further! These scripts will do just that and more. When a player rests their character, their location will be saved to a database file in the database folder of your servers NWN2 documents. It will also update/save their character to the server vault. If the server goes down for whatever reason and restarts then the saved locations can be recalled and the characters returned to the locations that they last rested. \n\n\nInstructions\n\nThe erf file contains 2 scripts and they are myk_on_rest and myk_jump_pc_2_saved. Import the erf into your module and don�t forget to compile the scripts! \n\nmyk_on_rest needs to go in your modules On Player Rest Script slot and myk_jump_pc_2_saved needs to go in an On Enter Script slot of a Trigger. Then place the trigger over your modules start location.\n\nNow you are good to go. Your module should start saving characters to the server vault and recording their locations and returning players to their rightful place after a server reboot.\n\nEnjoy!\n\n\nPlease note that I am no real scripter, but I can still dabble in the dark arts. >:-) I used and tinkered with code from other author�s projects, such as Leomist�s and Markshire�s to make this work. \n\nThank you.\n\n\nShockwolf\n","Rating":"N/A","Awards":[]},"315":{"Name":"NWN2 OC Nasher Set Fix","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20091224,"Updated":20091224,"Category":"Inventory Item","Forum Thread":"Link","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2","Description":"NWN2 OC Nasher Set Fix\n\nby Brendan Bellina, aka \"Kaldor Silverwand\"\n\nWhat this is:\n\nLord Nasher has four magical items - boots, gloves, cloak, and ring. But in the NWN2 OC you can only get the ring and boots. According to the descriptions these four items when worn together provide additional enhancements, though individually they are outmatched by other items in the OC. These four items were defined in the game toolset but only the boots and ring were placed into the game itself. The ring, although intended to be a unique item, is actually in the OC in two places.\n\nThe included scripts when copied into yur override folder will address three problems:\n- the ring will no longer be available twice\n- the cloak and gloves will now be available\n- when all four items are worn together they will be enhanced\n\n\nCompatibility:\n\nThese scripts should be compatible with the OC, MoTB, and SoZ. MoTB and SoZ are not required.\n\nThese items were created for the OC Makeover SoZ Edition and are included in v20091224 and later of the Makeover, although they can also be used independently of it.\n","Rating":10,"Votes":2,"Awards":[]},"316":{"Name":"E6 Level System","Author":"JohnAndre","Submitted":20100102,"Updated":20100106,"Category":"Other","Type":"Type - Leveling","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"For a brief description of E6 as a level system and its benefits for pnp games, go here: Link \n\nThe system has additional benefits for persistent worlds, where continued playing of pc's can lead to level imbalances on servers and/or higher level pc's than what was intended for the server's setting (epic levels walking around Ravenloft ruing the whole point). \n\nE6 (and E8) solve this by altering the D&D leveling system. Upon achieving level 6 (or level 8 if using E8), the traditional D&D leveling system stops. Instead of gaining levels thereafter, the pc instead is able to select a new feat for every 5000 xp gained after reaching level 6 (or 8 with E8) using an item automatically placed in his or her inventory (right click and use the item once your pc has gained more than 5000 xp after level 8). This changes the otherwise exponential power curve of D&D's traditional leveling structure to a marginal power curve. \n\nThis system was first created for pnp games by Ryan Stou'n of ENworld. Myrk/JohnAndre created this system for Neverwinter Nights 2.\n\nEnjoy.","Rating":"N/A","Awards":[]},"317":{"Name":"The Fred's Combat Placeables","Author":"The Fred","Submitted":20100106,"Updated":20110419,"Category":"Placeable Item","Type":"Type - Combat","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"\"'Tis nae a proper bar brawl if ye cannae throw someone through a table, ye ken?\"\n\nWise words indeed. NWN1 & 2 are full of high-powered indoor fights. Yet how come the innkeeper never charges you for damages? How come the fireball fight in the library never leaves it torched?\n\nWith The Fred's Combat Placeables, these worries are a thing of the past! Now, placeables can catch fire after being torched, and their battered remains can often be seen strewn around afterwards.\n\nBy setting your placeables to non-usable but also non-static, they will be untargetable, but still able to take damage from AoE spells.\n\nThis work includes an OnDamaged script for placeables which allows them to be set on fire, and an OnDeath script which will create a damaged version afterwards. Included are some example placeables so you can get building right away.\n\nSadly, NWN2 doesn't feature much broken furniture, and the broken tables do not look like the unbroken ones et.c. but since the system is quite customisable (through variables set on the placeables) you can easily apply it to custom placeables or any others you want.\n\n\nI have a couple of thoughts on ways to expand this, but I'd be happy to get some feedback first.","Rating":9.5,"Votes":2,"Awards":[]},"318":{"Name":"Vampires with Coffins (for NWN2)","Author":"The Fred","Submitted":20100110,"Updated":20100114,"Category":"Creature Related","Type":"Type - Combat","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"This is basically just my Vampires for Coffins system, converted for NWN2.\n\nIn short, it allows Vampires to respawn in their coffins when killed, and handles them burning to death in sunlight, though there are a number of different variables you can set to tweak things (see the above page).\n\nIn short, everything which applies there applies here. However, I have changed some of the visuals since NWN2 does not feature many of those which were in NWN1. In particular, there was no really good visual for the Vampire in gaseous form, and though I could have made one, I wanted to save the trouble of having to use an override or hakpak, so I've made do with what there is. If you don't like it, it's easy to change (just change the creature's applied effect and consider altering its OnSpawn script).\n\n\nP.S. I will add some more screenshots shortly if I get around to it.","Rating":10,"Votes":1,"Awards":[]},"319":{"Name":"Real time climb system","Author":"Rumata","Submitted":20100123,"Updated":20100127,"Category":"Rulesets","Type":"Type - Other","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"With this, you can climb everything!\n\nThe secret: I erase all the walkmesh of the area and a small script that detects the diferences of Z axis when the PC walk or run.\n\nIf there are a big difference in a short time, the script makes a climb roll, on failure, you fall down.\n\n\nClimb Skill = (STR + DEX)/2\n\nCD = Heightx2\n\n\n\nStealth mode: -4 to climb skill\nSpot mode: +4 to climb skill\n\nStairs -20 to CD by default, but is configurable\n\n\nTip: If you walk, the climb is easy to do. If you run, probably lose some teeth.\n\n\nWhatsnew:\n\n- Script is faster.\n- Now, Send the climb roll to player only when he falls.\n- For default, the stairs substracts 20 to CD, but you can set it changing the local variable 'QLTY' in the stairs trigger (min value 5).\n- Now, this script only works on areas with _CLI suffix in his tag.\n\nTo Do:\n\n- Racial modiffiers.\n- Include a real climb skill in the 2da files.\n- Climbing tools & Clothes.\n\n\nEnjoy!","Rating":10,"Votes":1,"Awards":[]},"320":{"Name":"GetFaction() - Custom Function","Author":"Knightmare","Submitted":20100206,"Updated":20100206,"Category":"Other","Type":"Type - Other","Format":"Module and Code","ShowCode":"// Get the faction of oTarget, return as an Integer\n// 0 - Player\n// 1 - Hostile\n// 2 - Commoner\n// 3 - Merchant\n// 4 - Defender\n// Returns -1 on Invalid Faction\n// By Knightmare, Feb. 06, 2010\nint GetFaction(object oTarget)Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"I had need of a custom function that gets the Faction of oTarget. Figured others may have a use for it as well.\n\nUploaded file is in ERF format. It includes the script function itself, as well as custom Faction Pig creature blueprints to use with the script (they can be found under the Debug section). These Faction Pigs need to exist (be painted down) somewhere in the module for the script to work correctly.\n\nFunction has room to edit so you may add up to 10 custom Factions to it. With some more editing you can add an unlimited number of custom Factions to check against. See comments in function for what to edit in this case.\n\nIf you don't know how to use custom functions or include script, see the related section in my Scripting For Noobs tutorial.","Rating":10,"Votes":1,"Awards":[]},"321":{"Name":"SLS2. Lite version for PW/ SLS2 version reducidad para Servidores Persistentes","Author":"luckybastardo","Submitted":20100210,"Updated":20100211,"Category":"Scripting routines","Type":"Type - Lights (Subtype - Other)","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a revised version of SLS2:\nLink\n\nThis pack have only the basic scripts rewrite without hearbeats events for PW modules.\n\nInclude module, erf and documentation (in spanish, dont worry i will translate it to english too).\n\n----------------------------------------\n\nEsto es una revisada version de SLS2:\nLink\n\nScripts, plantillas de objetos, luces, efectos, sonidos y prefabricados, que ofrecen una gestion rapida para la configuracion y mapeado de luces en un servidor multijugador con baja carga de uso de memoria (heartbeat scripts)\n\nViene con documentacion asociada, un modulo y un erf para su importacion a servidores.\n\n\n","Rating":"N/A","Awards":[]},"322":{"Name":"Modified armor and weapon behavior BETA","Author":"Knsgf","Submitted":20100313,"Updated":20100406,"Category":"Rulesets","Type":"Type - Combat","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Inspired by \"Full plate and packing steel\" for Baldur's Gate II, this mod makes the following changes to gameplay:\n* armor absorbs part of the damage instead of reducing the chance of taking damage,\n* padded armor no longer requires any proficiency,\n* slashing weapons do more damage on average than piercing and blunt ones and inflict more damage on critical hit but are easier to resist,\n* piercing weapons penetrate armor easier and score critical hits more often but require precise handling to be effective,\n* shields provide higher bonus to AC. \n* (lite and full version only) all shields have maximum dexterity bonus to AC which will override that of the armor when equipped,\n* (lite and full version only) big, clumsy weapons impose penalties on attack rolls and heavy armor reduces running speed,\n* (lite and full version only) for every 8 ranks in parry skill (or 5 with \"Improved Parry\" feat) character gains +1 shield bonus to AC. This bonus applies only when wielding a balanced weapon,\n* (full version only) a successful hit with a flail will deny the opponent her shield AC bonus (including parry and two-weapon defense) for 1 round. The \"Skilled Offense\" feat \n(available for fighters with DEX 13+ and INT 13+) allows to do the same with any weapon.\n\nINSTALLATION:\nSee install.txt inside mod_awsb_*.zip.\n\nChangelog:\n21/03/2010:\n* added movement speed penalties when wearing armor,\n* adjusted dual-wielding penalties and parry bonus for high-DEX charactes,\n* adjusted attack penalties for large one-handed weapons which use \"Monkey Grip\" feat,\n* fixed parry bonus not being calculated correctly when unequipping heavy or tower shield,\n* removed numerous typos.\n\n22/03/2010:\n* adjusted movement speed for dwarves, gnomes and halflings,\n* created a basic version,\n* retrofitted changes to lite version into full version,\n* removed even more typos.\n\n5/04/2010:\n* fixed an issue which was causing movement and attack penalties on companion NPCs to stack.\n* a few more typos removed (of course).","Rating":10,"Votes":1,"Awards":[]},"323":{"Name":"Zhentarim PW Time","Author":"Zhentarim Shard","Submitted":20100323,"Updated":20100324,"Category":"Entire Module/PW systems","Type":"Type - Time","Format":"Code Only","ShowCode":"// Saves current time to the database\nvoid SaveDayMonthYear ()\n\n//Advances time by nDays, nMonths and nYears.\nvoid AdvanceTime (int nDays = 1, int nMonths = 0, int nYears = 0)\n\n//Loads and sets day, month and year from the database to server time.\nvoid LoadDayMonthYear ()\n\n//Checks whether this is a past time or a future time. Returns TRUE if the time has passed or FALSE if not yet.\nint GetHasTimePassed (int nYear, int nMonth, int nDay, int nHour, int nMinute, int nSecond, int nMillisecond)\n\n//Creates a time row string from a given time\nstring CreateTimeRow (int nYear = 1762, int nMonth = 0, int nDay = 0, int nHour = 0, int nMinute = 0, int nSecond = 0, int nMillisecond = 0)\n\n//returns a time row for a current time and creates an array on the module object for easier working with each variable.\nstring GetCurrentTimeStart ()\n\n//Destroys the time array from the module. It must be placed somewhere after the previous function.\nvoid GetCurrentTimeStop ()\n\n//Checks whether the time, given in the time row passed or not.\nint GetHasStringTimePassed (string sTime)\n\n//Saves a persistend time variable\nvoid SavePersistentTimeVariable (object oTarget, string sVarName, int nYear, int nMonth, int nDay, int nHour, int nMinute, int nSecond, int nMillisecond)\n\n//Checks a persistend time variable\nint CheckPersistentTimeVariable (object oTarget, string sVarName)\nSelect All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"This is the PW time system made for a russian shard Zhentarim. It works only with NWNx 4 and a configured database.\n\nThe file contains 2 libraries (plan_arrays and z_inc_time), which contain many useful fucntions.\n\nThe time system can:\n\n1) Save Day/Month/Year to the database.\n\n2) Load Day/Month/Year from the database and set them to the module time (possibly - we haven't tested the month and years yet).\n\n3) Advance time forward by nDays, nMonth and nYears.\n\n4) It can check whether the time has passed or not. The functions understand the standard (nYears, nMonths, nDays, nMinutes, nSeconds, nMilliseconds) format and a string \"YEAR:MONTH:DAY:MINUTE:SECOND:MILLISECOND\" format.\n\n5) It can store and load a persistent \"time\" variable on object oObject with name sVarName. It may be used for a PW holiday or a quest, whatever.\n\nThe Hour/Minute/Second/Millisecond server time is not saved or loaded yet. That's in our \"todo\" list, though we don't need it ourselves cause the server restarts by the timer. \n\nTo implement server time saving/loading simply place the SaveDayMonthYear() function on module heartbeat (or whatever else) and the LoadDayMonthYear () function - on module load event.\n\nCode commentaries are currently in russian, should be fixed when the system testing would be finished.\n\nP.S. Sorry for my english.","Rating":9,"Votes":1,"Awards":[]},"324":{"Name":"MotB Spirit Eater Autopause","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20100324,"Updated":20110917,"Category":"Other","Type":"Type - Other","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:MotB","Description":"MotB SE Autopause by Brendan Bellina aka \"Kaldor Silverwand\"\n\nThis mod changes the Mask of the Betrayer Spirit Eater functionality so that spirit eater points will not be consumed while the Spirit Easter is standing still peacefully or when the wait until dusk feature is used. Spirit Eater points will still be consumed when resting, traveling, or fighting.\n\nThe standard behavior is that spirit eater points are consumed anytime that the SE is not in a conversation and the game is not paused.\n\nThis mod prevents the accidental loss of spirit eater points when leveling up or working with inventory and prevents the loss of points when using the wait until dusk rest feature.\n\nThis mod can be installed in the standard My Documents override folder.\n\nNote: This mod is not compatible with the MotB Makeover SoZ Edition also by the author. If you install the MotB Makeover then you should remove the SE Autopause folder from your override folder. The SE Autopause functionality is included with the MotB Makeover.","Rating":"N/A","Awards":[]},"325":{"Name":"Zhentarim Spawn System","Author":"Zhentarim Shard","Submitted":20100325,"Updated":20100325,"Category":"Spawning","Type":"Type - Classic PnP","Format":"Module Only","ShowCode":"//z_inc_spawn contains the foolowing functions:\n\n//At that time just returns the waypoint's location, i've tried to randomize - bad idea.\nlocation GetRandomLocationFromWaypoint (object oWaypoint, object oArea)\n\n//well, that's not the system described. That just spawns 1 creature on each given waypoint, event is not included.\nvoid StartCascadeSpawn (object oArea)\n\n//Use this to find a random waypoint from the created list\nobject GetRandomWaypoint (object oArea)\n\n//Not currently implemented. Destroys all creatures spawned by the \"easier\" system\nvoid StopCascadeSpawn (object oArea)\n\n//Returns a random waypoint, staying farther then 120 feets from a PC.\nobject CheckWaypoint (object oWaypoint, object oArea)\n\n//Respawns dead creature in a random waypoint on a distance from the PC. \nvoid RespawnCascadeCreature (object oTarget, object oArea)\n\n//Calculates encounter for a given CR and table, Stores all information on a given waypoint.\nvoid CalcEncounter (object oWaypoint, string sTable, int nCR)\n\n//That function tries to spawn a creature, writes a log entry if it was a success and commands the creature to run away from that point.\nvoid SpawnCreature (string sCRResRef, location lTarget, object oWaypoint)\n\n//Loads all information stored by CalcEncounter and spawns that encounter. Capped at 10 creatures.\nvoid SpawnEncounter (object oWaypoint, object oArea)\n\n//The main spawn function called by the entering event\nvoid NormalSpawn(object oArea)Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"This is a spawn system made to be as much as possible to be close to the PnP encounters. That is currently a BETA.\n\nIt contains 3 scripts:\n\n1) plan_arrays (that's just arrays, nothing connected with the spawn)\n\n2) z_inc_spawn (that's it, this library contains many spawn fucntions)\n\n3) event_normalloc_enter (that's an area event, that starts a spawning)\n\nInstallation instructions are simple: import the erf, recompile the event script and place on a Client Enter area event.\n\nThen create a number of waypoints on an area, each with the different tag. Then tou should open area Properties/Variables and enter the followings:\n\n1) WPCOUNT - a number of waypoints yo've placed. That's an integer.\n\n2) WP1, WP2, WP3, WP4, ... That's a strings. Enter all waypoint's tags.\n\n3) CHANCE - the chance in % for each waypoint to create an encounter. For each hour area was not visited after the first visit this chance will grow. Positive integer. Anything greater than 100 would not differ from 100.\n\n4) CR. Average difficulty of the area, integer from 1 to 30.\n\n5) TABLECOUNT. Integer - the number of 2DA tables with creature lists.\n\n6) TABLE1, TABLE2, TABLE3, ... The name for each table. For example: BEARS, WOLVES, DEERS, BADGERS for the forest. \n\nEach 2DA table should look as following:\n\n2DA V2.0\n\n NAME CR FACTOR\n0 z_cr_human_bandit1 1 2\n1 z_cr_human_bandit2 1 4\n2 z_cr_human_bandit3 1 0\n\nThe 0 row is the first row. The NAME column is the creature's resref. The CR column is the creature CR. The FACTOR column is the CR factor if it is lesser than 1 (CR, FACTOR 4 = CR 1/4).\n\nThe algorithm: when a player enters an area, the spawning starts. Firstly it checks the d100 for each waypoint. If the check succeeds, the encounter spawning starts at the location of that waypoint. For the first 10 seconds the system counts the encounter. There is a 30% chance of getting an easier encounter (from 1 to the given CR -1). The 15% chance of getting a harder encounter (the CR if raised by 1d4). And the 5% chance of getting a very hard encounter (currently randomised from the given CR+1 to 20). Then the script looks through the table and creates the list of creatures, whose CR is <= than the final gotten CR. It chooses the \"boss\" from this list and creates a second list, containing creatures, whose CR is <= than the boss's CR (including the \"boss\" blueprint itself). If the boss's CR is equal to the final encounter CR, it is just spawned. If not, the encounter continues to be counted. 2 creatures with a CR 3 are CR 4 encounter. 4 creatures with a CR 3 are CR 5 encounter. One creature with a CR 5 and four creatures with a CR 3 is a CR 6 encounter. That's not truly the PnP rules (In general, if a creature's Challenge Rating is two lower than a given Encounter Level, then two creatures of that kind equal an Encounter of that EL), but that's fun.\n\nWhen the counting is finished, the creatures are spawned. The spawning is careful, currently it does not allows more then 10 creatures in 1 encounter, delays their spawning (all creatures should spawn in 1 minute) and commands them to run away from their spawning location to allow for the other creature to appear.\n\nIf there are no players in the area for a long time, all junk should be destroyed. Creatures are not junk though. \n\nThat's a very bad idea to pass more than a 20 waypoints, because the system could spawn for example, 200 creatures on 1 location and that would be very-very bad. 10 - 15 waypoints with a 10-20% chance should work fine.","Rating":8.5,"Votes":1,"Awards":[]},"326":{"Name":"Ultima Return Food System","Author":"Krom","Submitted":20100419,"Updated":20100419,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is UR food system, which is part of the Ultima Return project (www.ultima-return.com).\n\nIt is a small food system that provides a food counter that steadily decreases \nas a function of time. By checking the value of the counter you can determine\nhow starved the character is. The counter can be retrieved by \n\nGetLocalFloat(oPC, \"food_counter\")\n\nThe system supports companions and each companion has an own food counter.\n\nWhen a character eats a food item, the counter is raised by the item's food value, which can be specified as a variable.","Rating":"N/A","Awards":[]},"327":{"Name":"Potions with side- and after-effects","Author":"Knsgf","Submitted":20100427,"Updated":20100513,"Category":"Inventory Item","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"This mod adds side- and after-effects to potions as follows:\n* a character drinking two or more potions in a row during combat\nmust make a fortitude save or suffer constitution damage. In addition\nthere is a 10% chance that the character will choke and become\ndazed for 1d4 + 1 rounds,\n* bull's strength, cat's grace, bear's endurance, fox's cunning,\nowl's wisdom and eagle's splendor: once the effect expires the\ncharacter must make DC 15 fortitude save or become nauseated\n(-2 STR, DEX and INT) for 1 hour,\n* potion of speed: once the effect expires the character must \nmake DC 20 fortitude save or be slowed for 1 hour. This can be\ndelayed by drinking another potion of speed before the haste\neffect wears off,\n* ale/wine/spirits: if the character succeeds on DC 10/15/20\nfortitude save she gets +2/+4/+6 charisma bonus for 1 hour.\nOthewise she will become drunk (-1/-2/-4 DEX, INT and CHA) for 1 hour.\n\nIn addition potions of bless and speed now only affect single character\ninsted of the whole party.\n\nINSTALLATION:\nUnzip to override folder (usually My Documents\\Neverwinter Nights 2\\Override).\n","Rating":9.5,"Votes":2,"Awards":[]},"328":{"Name":"Ultima Return Resting System","Author":"Krom","Submitted":20100505,"Updated":20110212,"Category":"Resting","Type":"Type - Other","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is the resting system used in Return to Serpent Isle project (www.ultima-return.com).\n\nWhen resting command is issued, the system asks for the number of hours that\nyou will rest. After that the system asks who will guard. You can also select\nto have no guard. Then a cutscene that depends on the type of the area will\nstart. If area has encounters, then there is a chance that an encounter will\nbe triggered during the sleep.\n\nThis resting system is based on the Animated Rest System by Borden Ha'elven\nand uses the Gestalt Cutscene system for cutscenes.\n\nUpdate 23.8.2010\n----------------\n\nUploaded a new version of the resting system. Now includes a new GUI for setting resting hours and the guard, and\nthree comfortability levels that affect the amount of hp regen.\n\nUpdate 12.2.2011\n----------------\n\nUploaded a new version, which is the system that is included in Unified System.","Rating":9.88,"Votes":2,"Awards":[]},"329":{"Name":"Difficulty Modifier","Author":"3mily_ranger","Submitted":20100512,"Updated":20100513,"Category":"Area","Type":"Type - Combat","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"This mod uses the 'nw_c2_default9' script and a 2da file to allow users to customize the enemies of NwN2.\nPretty much all credit goes to Reeron and Trekari, who wrote the increased challenge mod which this is based on.\nThe changes I made is that you can customize more than hitpoints and it doesn't automatically add abilities to enemies.\n\nIf you like this mod, check out the original it is based on, along with one of my favorite mods, Spell Fixes and Improvements.\nLink\n\nAnd yet again, if you try this out and like it I hope you visit their page and give a vote.\n\nInstall:\n- Put all files in the MyDocs override folder.\n- Open Difficulty.2da with any text editor (notepad works fine).\n- If you have cdaulepp's random loot generator, you have to find his nw_c2_default9.ncs file and delete it.\n\nDifficulty.2da\n1) Hitpoint_Multiplier: determines the amount to multiply enemy HP.\n (Values below 100 can be used to lower HP, values above to raise.)\n2) Enhance_Weapon: Weapon Enhancement Bonus\n3) AB_Weapon: Weapon Damage Bonus\n4) BONUS_AC: Enemy AC modifier\n5) BONUS ST: Enemy Saving Throw modifier\n6) BONUS_STR to BONUS_CHA: Enemy ability modifiers\n7) BONUS_ITEM: Percent chance enemy gets a bonus item.\n8) RANDOM_LOOT: 1 to turn on cdaulepp's random loot generator, 0 to turn it off or if you don't use it.\n9) DIF_MOD: 1 turns the mod on, 0 off.\n \nNotes: \n- Incompatible with older versions of TonyK's AI (it uses the same script).\n- Feel free to edit this in any way you wish, but be sure to give credit to both me, Reeron and Trekari, and cdaulepp if you're using random loot.\n\nCredits:\nReeron\nTrekari\ncdaulepp\nnssclc - NSS Command-Line Compiler\nNotepad++\nNeverwinter Font @ dafont.com","Rating":10,"Votes":1,"Awards":[]},"330":{"Name":"Weapon Identification Problem","Author":"Calva64","Submitted":20100514,"Updated":20100514,"Category":"Inventory Item","Type":"Type - Combat","Format":"Code Only","ShowCode":"void main()\n{\n\t// The script basically gets the first item in the inventory then gets what type of weapon\n\t// it is, if it is a weapon at all. Next I check the right hand and get the weapon in the hand\n\t// once I have aquired the weapon I then get its item property to determine if it is a base weapon\n\t// or a magical one. If its magical I set the identified property to FASLE, otherwise I leave\n\t// it alone. Next I cycle through the inventory items picking out the weapons and changing there\n\t// identity flag to FALSE if it is magical.\n\n\tobject oItem = GetFirstItemInInventory();\n\n\tint iGetWeaponType = GetWeaponType(oItem);\n\n\tobject oSlotItem = GetItemInSlot(INVENTORY_SLOT_RIGHTHAND,OBJECT_SELF);\n\n\titemproperty ipSlotItem= GetFirstItemProperty(oSlotItem);\n\titemproperty ipItem= GetFirstItemProperty(oItem);\n\t\n\t//SpeakString(\"Property Type = \"+IntToString(GetWeaponType(ipItem)));\n\tif (GetItemPropertyType(ipSlotItem) != -1)\n\t{\n\t\tSetIdentified(oSlotItem,FALSE);\n\t}\n\t\n\twhile (oItem != OBJECT_INVALID)\n\t{\n\t\t\n\t\tif (iGetWeaponType != WEAPON_TYPE_NONE)\n\t\t{\n\t\t\t\n\t\t\tif (GetItemPropertyType(ipItem) != -1)\n\t\t\t{\n\t\t\t\tSetIdentified(oItem,FALSE);\n\t\t\t}\t\n\t\t\t\n\t\t}\n\t\t\n//\t\tSpeakString(\"Property Type = \"+IntToString(GetWeaponType(oItem)));\n\t\t\n\t\toItem = GetNextItemInInventory(OBJECT_SELF)\t;\n\t    ipItem= GetFirstItemProperty(oItem);\n\t}\n} Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"I discovered a problem with Weapons of magical nature being auto Identified when you pick up the loot prior to it going to your inventory. The problem is that in order for a hostile mob to use a weapon the weapon need to be identified. Which mean that the STAFF OF DESTRUCTION will be identified to the player regardless of lore skill. I didnt like this so a created a script for the ondeath.","Rating":"N/A","Awards":[]},"331":{"Name":"Mana Magic System for Sorcerer","Author":"Orion1966","Submitted":20100519,"Updated":20100521,"Category":"Scripting routines","Type":"Type - Magic","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This package contains a custom magic system for the sorcerer class. It simulates a system where the sorcerer needs to provide a catalyst, a spark, to power the spell. This spark comes from the sorcerer's constitution. Whenever a sorcerer casts a spell, his constitution score will lower based on the caster's level and the spell's level. A sorcerer can cast unlimited spells. Only the lowering constitution restricts the number of spells he can cast. A complete rest fully restores lost constitution. Other than the changes described herein, no other changes to the sorcerer class were made.\n\nThe package contains an edited classes.2da, and the spellhook script that powers the system. \n\nThe only changes to the .2da is an overwritten row for sorcerer. No rows were deleted, and none were added. This is the SoZ version .2da. The following columns were edited:\n-HasInfiniteSpells: Changed from 0 to 1.\n-Dex, Con, Cha: Changed to 16, 17, 12, respectively.\n-Primary Ability changed to Constitution, Spell Ability changed to Dexterity.\n\nI originally had both primary and spell ability changed to constitution. However, once the caster started casting spells, the lowered constitution restricted what spell levels the sorcerer could cast. So, a second ability stat was needed to be kept high for the spell ability. Rather than keep the charisma stat high, along with a high constitution, I felt players would rather jack up the dexterity score.\n\nAll that is needed to get this system working is:\n1: Place .2da in the override folder.\n2: Place .ncs, .nss files within module directory\n3: In the variables field of the module properties, put in variable\n X2_US_SPELLSCRIPT within the name field, and within the valuestring field put the name of the script, mana_spellhook\n4: Make sure you compile the script and save your mod\n\nAs this is written so far, this system will work only for the PC. If you wish to have this work for all NPC sorcerers also, then you will have to add this variable to all areas of your mod that you want this mana system to work: X2_L_WILD_MAGIC within the name field and 1 to the ValueInt field.\nAll constructive feedback is welcome.","Rating":"N/A","Awards":[]},"332":{"Name":"Special Abilities","Author":"calva64","Submitted":20100525,"Updated":20100526,"Category":"Creature Related","Type":"Type - Combat","Format":"Code Only","ShowCode":"//custom_special_abilities.nss\n// The script basically allows for custom special abilities\n// The script currently has one special ability in it as of now\n// A petrify gaze which turns the creature to stone.\n\n\nvoid PetrifyGaze();\n\nvoid main()\n{\n\tint iRandom = Random(100)+1;\n\tint iFactor = GetLocalInt(OBJECT_SELF,\"ifactor\");\n\t\n\t//SpeakString(\"Random Value is = \" + IntToString(iRandom));\n\tif (iRandom <= (100/iFactor))\n\t{\n\t\tPetrifyGaze();\n\t}\t\n}\t\n\nvoid PetrifyGaze()\n{\n\t\tint iPetrified = 0;\n\t\tint iSavingThrow = 1;\n\t\tobject oCreature = GetFirstPC();\n\t\tstring sRosterMember = GetFirstRosterMember();\n\t\teffect eEffect = GetFirstEffect(oCreature);\t\n\t\t\n\t\t//SpeakString(\"Attack Target =\" + GetTag(oCreature));\n//\t\tif (GetLastDamager(OBJECT_SELF) == oCreature  && !GetIsDead(oCreature) )\n\t\tif ((GetLastDamager(OBJECT_SELF) == oCreature && GetAttackTarget(oCreature)== OBJECT_SELF) && !GetIsDead(oCreature))\n\t\t{\n\t\t\teEffect = GetFirstEffect(oCreature);\t\n\t\t\t\t\n\t\t\tif ( GetEffectType(eEffect) == EFFECT_TYPE_PETRIFY)\n\t\t\t{\n\t\t\t\tiPetrified = 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twhile (GetEffectType(eEffect) != EFFECT_TYPE_PETRIFY && GetIsEffectValid(eEffect))  \n\t\t\t\t{\n\t\t\t\t\teEffect = GetNextEffect(oCreature);\n\t\t\t\t\tif  (GetEffectType(eEffect) == EFFECT_TYPE_PETRIFY)\n\t\t\t\t\t{\n\t\t\t\t\t\tiPetrified = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\toCreature = GetObjectFromRosterName(sRosterMember);\t\n\t\t\t//while (GetLastDamager(OBJECT_SELF) != oCreature && sRosterMember != \"\" || GetIsDead(oCreature))\n\t\t\twhile ((GetLastDamager(OBJECT_SELF) != oCreature && GetAttackTarget(oCreature) != OBJECT_SELF) && sRosterMember != \"\" || GetIsDead(oCreature))\n\t\t\t{\n\t\t\t\n\t\t\t//SpeakString(\"PC OWNED\");\n\t\t\t\tsRosterMember = GetNextRosterMember();\n\t\t\t\toCreature = GetObjectFromRosterName(sRosterMember);\t\n\t\t\t\n\t\t\t}\n\t\t\teEffect = GetFirstEffect(oCreature);\t\t\n\t\t\t\n\t\t\tif ( GetEffectType(eEffect) == EFFECT_TYPE_PETRIFY)\n\t\t\t{\n\t\t\t\tiPetrified = 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twhile (GetEffectType(eEffect) != EFFECT_TYPE_PETRIFY && GetIsEffectValid(eEffect))  \n\t\t\t\t{\n\t\t\t\t\teEffect = GetNextEffect(oCreature);\n\t\t\t\t\t\n\t\t\t\t\tif  (GetEffectType(eEffect) == EFFECT_TYPE_PETRIFY)\n\t\t\t\t\t{\n\t\t\t\t\t\tiPetrified = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t}\n\t\t//SpeakString(\"Attack Target =\" + GetTag(oCreature));\n\t\t//SpeakString(\"Pertrified = \" + IntToString(iPetrified));\n\t\tif (!iPetrified && !GetIsDead(oCreature))\n\t\t{\n\t\t\teffect eVFX1 = EffectVisualEffect(VFX_BEAM_HOLY);\n\t\t\tApplyEffectToObject(DURATION_TYPE_TEMPORARY,eVFX1,oCreature,2.0);\n\t\t\t\t\n\t\t\tiSavingThrow = FortitudeSave(oCreature,13,SAVING_THROW_TYPE_DEATH);\n\t\t}\n\n\t\tif (!iSavingThrow)\n\t\t{\n\n\t\t\teffect eVFX2 = EffectVisualEffect(VFX_DUR_SPELL_FLESH_TO_STONE);\n\t\t\tApplyEffectToObject(DURATION_TYPE_PERMANENT,eVFX2,oCreature);\n\t\t\t\n\t\t\teffect eSpell = EffectPetrify();\n\t\t\tApplyEffectToObject(DURATION_TYPE_PERMANENT,eSpell,oCreature);\n\n\t\t}\t\t\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"I ran into a problem with the GAZES special ability in NWN2. Basically the don't work. So I created a very nice gaze so that when it hits the enemy it has a chance to turn the enemy to stone. The gaze is used in the end_combat_round scipt. I made it so that the end_combat_round scipt would very it end_combat_round event. In a custom user defined event I coded a executescipt command which call this script. Works great. I include the special effect file for the gaze it goes in the overide directory and overides the holy_beam effect. Try it its cool. The creature will shoot the beams from its eyes and if a fortitude fail vs death magic then the creature turn to stone. One more thing you need to attack to the creature a integer variable call ifactor it controls the frequency of the special ability being used by the creature. Have fun!","Rating":10,"Votes":1,"Awards":[]},"333":{"Name":"tigerbomb's Custom Summons","Author":"tigerbomb","Submitted":20100525,"Updated":20100526,"Category":"Creature Related","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"tigerbomb's Custom Summons\n\nThis is a project that I originally developed for my own module in NWN 1.\nIt is 'very loosely' based on the work of Distorted Shadow.\nThis system allows users to change what creatures they summon using the \nsummoning spells 1-9, if they have them.\nIt allows users to attempt to capture and store creatures for \nsummoning later.\n\nCAPTURING:\n\nThe capture attempts are, by default, made to use a creatures spell resistance (SR)\nvs the player's caster level, when determining the difficulty class (DC) to succeed.\n\nIt was difficult to come up with a logical way to figure out which spell level a creature\nshould be stored at; given that NOT ALL modules make use of (CR) Challenge Ratings with their\nencounters, nor do ALL custom blueprints have proper (CR) challenge ratings set.\n\nThere are numerous settings that can be changed within the coding to allow developers\nto set the system up to their liking. (See Readme for details.)\n\nI've provided as much documentation or instructions as I can think of toward configuring\nthe system, however it could be that the system simply does not have the options you want.\n\nI attempted to make something that would work for most modules and tried to make it adhere to\nthe general rules or policies found in DnD with regards to binding and summoning. \n\nHowever, the practical needs of NwN means that things needed to be changed to make things viable.\n\nSo it is my hope that I have come up with something that, at the very least, offers a good \nfoundation for custom summoning.\n\nPERSISTANT STORAGE:\n\nI decided to use local variables rather than campaign variables or other database functions,\nfor performance reasons. I figured, many modules may already have alot of other systems making \ncalls to other databases, and so, for their sake and given the nature and simplicity of this \nsystem; having it run off a database seemed a bit like carving a steak with a chainsaw.\nHowever, any competent scripter should be able to convert this system to use a database with\nrelative ease.\n\nNOTE: The summons will reset to default over module resets and log outs, though the creatures \n stored on items will persist. Thus the intended summons for each level needs to be \n reassigned in these cases. This is intentional.\n \n\nSCRIPT OVERWRITES:\n\nIt is important to know that there are a handful of default NwN scripts that are overwritten when\ninstalling this system. This was necessary for two reasons:\n\n- To alter the summoning spells so that they will actually summon the chosen creature rather than\n the default. (the default can easily be restored using the GUI)\n- To alter the behaviour of the summoned creatures so that they act and react like henchmen should,\n rather than being mindless zombies that follow a player around.\n\nThe scripts that are overwritten in this system are:\n\n- nw_s0_summon\n- nw_c2_default1\n- nw_c2_default2\n- nw_c2_default3\n- nw_c2_default4\n- nw_c2_default5\n- nw_c2_default6\n- nw_c2_default7\n- nw_c2_default8\n- nw_c2_default9\n- nw_c2_defaultb\n- nw_c2_defaultd\n- nw_c2_defaulte\n\nIt may be a good idea to cache (previously compiled) these scripts in your module to improve performance.\n\nNOTE: This system is designed for modules with 'tag based scripting' enabled.\n If your module does not have this enabled, you will have to add your own\n line of code to your OnActivate script to make the item work.\n\nTHANKS AND CREDITS:\n\nI'd like to thank KEMO and TAMONS for their support with regards to XML, for answering \nquestions and providing excellent projects for the community from which to draw knowledge from.\n\nThanks to DistortedShadow for his work in NwN 1.\n\nThanks to all the folks at bioware and obsidian for the original system and the great game we all\nenjoy.\n\nThanks to the community of players, DMs and developpers for making a great game even greater.\n\nThanks to the folks that created and maintain the NwNVault that help make the community thrive.\n\nIf you use this system in whole or in part, kindly list me in the credits.\n\nEXTRACTION:\n\nFiles are compressed in 7z format. Use Winzip or similar program to extract the files.\nSee Readme file for intructions on installing the decompressed files into your module.\n\nUSAGE:\n\nTo open up the summons manager GUI, a player need only click on themselves.\n\nTo assign a creature to a summon spell, they need to select the creature and click on the 'APPLY' button. Once the creature is assigned to the spell, when the spell is cast, it will summon that creature.\n\nTo attempt to capture a creature, a player simply targets the creature with the item. \n\n******* UPDATE 1.1 26/05/10 *****\n- Added Will Save to Summoning Spell for the custom creatures. Creatures now rebel if they make their saves.\n- Fixed minor issue related to storage \n","Rating":"N/A","Awards":[]},"334":{"Name":"gui_bhvr fixed bug in server log","Author":"Arvirago","Submitted":20100616,"Updated":20100616,"Category":"Other","Forum Thread":"Link","Type":"Type - Other","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"Note: this is useful only for people hosting a NWN2 server.\n\nThis is the gui_bhvr_inc.nss and related scripts recompiled to fix the bug where the server log gets filled with messages like \"Total party members:1\", \"Num party members in puppet mode:0\", or \"nAllPuppetMode = 0\".\nThe bug is described here: Link\n\nI simply commented those debug lines and recompiled the scripts.\n\nYou can put them in the campaign folder (as I do), or in a HAK or override.","Rating":9.5,"Votes":1,"Awards":[]},"335":{"Name":"Ultima Return Death System V1","Author":"DanLoony","Submitted":20100726,"Updated":20100826,"Category":"Death","Type":"Type - Other","Format":"Module and Code","Patch":"1.00","NWN2Game":"NWN2:SoZ","Description":"This is the release version of Team Serpent�s Ultima Death & Injury system. \n\nIt has a lot of enhancements and fixed to the previously submitted Ultima Death system as well as the new Injury and healer system.\n\nThe submission also includes documentation that contains everything you need to know from copyright, installation, and editing and adding content to the system.\n\nThe system is ideal for anyone who would like a death and injury system for their project that deals with death the way we do. Our system includes:\n\nTwo death scenarios: \n\n One revives the player and party at a nearby specified resurrection location when the entire team is killed\n\n Another tackles some party members dying during combat. When this happens the player has a certain amount of time to revive the party members. If that is not done the fallen party members will awake with an injury level.\n\nPlayer and Party death resurrection at a specified nearby location by an NPC\n\nTwo Injury Levels: Light Injury and Heavy Injury\n\nRemove Injury Potions\n\nRemove Injury Spell\n\nHealer NPC that could heal you and your party of a single injury or multiple injuries\n�\n\nConsult the included documentation for contact information, installation and explanation of the system.","Rating":"N/A","Awards":[]},"336":{"Name":"Configuring a character-specific module","Author":"Bob Hall","Submitted":20100727,"Updated":20100727,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","ShowCode":"// endgame_if_wrong_pc\n/*\n    Creature comparison functions.\n    \n    The endgame_if_wrong_pc routine can be run at the start of a\n    module that is designed for a specific player character (rather\n    than a character that was generated by the player). It compares\n    the properties of the PC against those of a creature prototype\n    blueprint in the module. This prototype blueprint should be\n    configured to match the character that the player will be\n    loading, and it should have the \"Script Hidden\" property set to\n    False. On a failure, a message dialog is printed. When the \"Exit\"\n    button is selected, the EXIT_SCRIPT script is run.\n*/\n// RJH 07/09/10\n\n// ************************\n// *** Constants\n// ************************\n\nconst string CAMPAIGN_CHECK_PC\t= \"CAMPAIGN_CHECK_PC\";\nconst string PC_PROTOTYPE_TAG\t= \"pc_prototype_tag\";\nconst string EXIT_CBSCRIPT      = \"gui_exit_to_menu\";\nconst string EXIT_BUTTON        = \"Exit\";\nconst string CONTINUE_BUTTON    = \"Continue\";\n\n// ************************\n// *** Prototypes\n// ************************\n\nint is_race_match( object oPC, object oTC );\nint is_gender_match( object oPC, object oTC );\nint is_ability_match( object oPC, object oTC, int nAbility );\nint is_class_level_match( object oPC, object oTC, int nPosition );\nint is_name_match( object oPC, object oTC );\nint is_hit_points_match( object oPC, object oTC );\nint is_alignment_match( object oPC, object oTC );\nint is_alignment_match( object oPC, object oTC );\nint is_skills_match( object oPC, object oTC );\nint is_pc_match( object oPC, object oTC );\nint is_deity_match( object oPC, object oTC );\nint is_feat_match( object oPC, object oTC, int nFeat );\nint is_domain_feats_match( object oPC, object oTC );\nint is_background_feat_match( object oPC, object oTC );\nint is_prestige_feats_match( object oPC, object oTC );\n\nvoid endgame_if_wrong_pc( string sResref, string sExitMsg, int isTestOnly );\n\n// ************************\n// *** Functions\n// ************************\n\n// Return true only if the race and subrace match\nint is_race_match( object oPC, object oTC )\n{\n  if ( GetRacialType( oPC ) != GetRacialType( oTC ) ) return FALSE;\n  return ( GetSubRace( oPC ) == GetSubRace( oTC ) );\n}\n\n// Return true only if the gender matches\nint is_gender_match( object oPC, object oTC )\n{\n  return ( GetGender( oPC ) == GetGender( oTC ) );\n}\n\n// Return true only if all the ability scores match\nint is_abilities_match( object oPC, object oTC )\n{\n  int n;\n  \n  for ( n = ABILITY_STRENGTH; n <= ABILITY_CHARISMA; n++ ) {\n    int pcAbility = GetAbilityScore( oPC, n );\n    int tcAbility = GetAbilityScore( oTC, n );\n\tif ( pcAbility != tcAbility ) return FALSE;\n  }\n  return TRUE;\n}\n\n// Return true only if the class and level match\nint is_class_levels_match( object oPC, object oTC )\n{\n  int n;\n  \n  for ( n = 1; n <= 3; n++ ) {\n    // Compare class at this position\n    int pcClass = GetClassByPosition( n, oPC );\n    int tcClass = GetClassByPosition( n, oTC );\n    if ( pcClass != tcClass ) return FALSE;\n    \n\t// Compare levels if the class is valid\n\tif ( pcClass != CLASS_TYPE_INVALID ) {\n      int pcLevel = GetLevelByClass( pcClass, oPC );\n      int tcLevel = GetLevelByClass( tcClass, oPC );\n\t  if ( pcLevel != tcLevel ) return FALSE;\n    }\n  }\n  \n  return TRUE;\n}\n\n// Return true only if the full names match\nint is_name_match( object oPC, object oTC )\n{\n  string pcName = GetFirstName( oPC );\n  string tcName = GetFirstName( oTC );\n  if ( pcName != tcName ) return FALSE;\n  \n  pcName = GetLastName( oPC );\n  tcName = GetLastName( oTC );\n  return ( pcName == tcName );\n}\n\n// Return true only if the maximum hit points match\nint is_hit_points_match( object oPC, object oTC )\n{\n  return ( GetMaxHitPoints( oPC ) == GetMaxHitPoints( oTC ) );\n}\n\n// Return true only if the alignments match\nint is_alignment_match( object oPC, object oTC )\n{\n  int pcAlign = GetAlignmentGoodEvil( oPC );\n  int tcAlign = GetAlignmentGoodEvil( oTC );\n  if ( pcAlign != tcAlign ) return FALSE;\n  \n  pcAlign = GetAlignmentLawChaos( oPC );\n  tcAlign = GetAlignmentLawChaos( oTC );\n  return ( pcAlign == tcAlign );\n}\n\n// Return true if all skill ranks match\nint is_skills_match( object oPC, object oTC )\n{\n  int n;\n  \n  for ( n = SKILL_CONCENTRATION; n <= SKILL_SURVIVAL; n++ ) {\n    if ( n == 2 ) continue; // Deleted skill\n    int pcSkillRank = GetSkillRank( n, oPC, TRUE );\n\tint tcSkillRank = GetSkillRank( n, oTC, TRUE );\n\tif ( pcSkillRank != tcSkillRank ) return FALSE;\n  }\n  return TRUE;\n}\n\n// Return true if the deity strings match\nint is_deity_match( object oPC, object oTC )\n{\n  return ( GetDeity( oPC ) == GetDeity( oTC ) );\n}\n\n// Return true if the feat matches\nint is_feat_match( object oPC, object oTC, int nFeat )\n{\n  int bPCHasFeat = GetHasFeat( nFeat, oPC, TRUE );\n  int bTCHasFeat = GetHasFeat( nFeat, oTC, TRUE );\n  return ( bPCHasFeat == bTCHasFeat );\n}\n\n// Return true if the domain feats match\nint is_domain_feats_match( object oPC, object oTC )\n{\n  int n;\n  \n  for ( n = FEAT_WAR_DOMAIN_POWER; n <= FEAT_WATER_DOMAIN_POWER; n++ )\n    if ( ! is_feat_match( oPC, oTC, n ) )\n\t  return FALSE;\n  return TRUE;\n}\n\n// Return true if the background feat matches\nint is_background_feat_match( object oPC, object oTC )\n{\n  int n;\n  \n  for ( n = FEAT_BACKGROUND_BULLY; n <= FEAT_BACKGROUND_WIZARDS_APPRENTICE; n++ )\n    if ( ! is_feat_match( oPC, oTC, n ) )\n\t  return FALSE;\n  return TRUE;\n}\n\n// Return true if the required prestige class feats match\nint is_prestige_feats_match( object oPC, object oTC )\n{\n  int n;\n  \n  if ( ! is_feat_match( oPC, oTC, FEAT_ALERTNESS ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_CLEAVE ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_COMBAT_CASTING ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_COMBAT_EXPERTISE ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_DODGE ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_FEINT ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_GREAT_CLEAVE ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_GREAT_FORTITUDE ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_GREATER_SPELL_PENETRATION ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_IMPROVED_UNARMED_STRIKE ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_IRON_WILL ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_MOBILITY ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_POINT_BLANK_SHOT ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_POWER_ATTACK ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_SKILL_FOCUS_CONCENTRATION ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_SKILL_FOCUS_SPELLCRAFT ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_SPELL_PENETRATION ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_SPRING_ATTACK ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_STEALTHY ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_STUNNING_FIST ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_TOUGHNESS ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_TWO_WEAPON_FIGHTING ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_WEAPON_FINESSE ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_WHIRLWIND_ATTACK ) ) return FALSE;\n  \n  if ( ! is_feat_match( oPC, oTC, FEAT_EMPOWER_SPELL ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_EXTEND_SPELL ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_MAXIMIZE_SPELL ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_QUICKEN_SPELL ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_SILENCE_SPELL ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_STILL_SPELL ) ) return FALSE;\n  \n  if ( ! is_feat_match( oPC, oTC, FEAT_BREW_POTION ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_CRAFT_MAGIC_ARMS_AND_ARMOR ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_CRAFT_WAND ) ) return FALSE;\n  if ( ! is_feat_match( oPC, oTC, FEAT_CRAFT_WONDROUS_ITEMS ) ) return FALSE;\n  \n  for ( n = FEAT_WEAPON_FOCUS_DAGGER; n <= FEAT_WEAPON_FOCUS_TWO_BLADED_SWORD; n++ ) {\n    if ( n == 119 ) continue;\n\tif ( n == 124 ) continue;\n    if ( ! is_feat_match( oPC, oTC, n ) ) return FALSE;\n  }\n  \n  return TRUE;\n}\n\n// Return true only if all the properties match\nint is_pc_match( object oPC, object oTC )\n{\n  // Compare the properties between the player character oPC\n  // and the template character oTC. If any of the properties\n  // don't match, return false.\n  if ( ! is_name_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_race_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_gender_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_abilities_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_class_levels_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_hit_points_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_alignment_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_skills_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_deity_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_domain_feats_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_background_feat_match( oPC, oTC ) ) return FALSE;\n  if ( ! is_prestige_feats_match( oPC, oTC ) ) return FALSE;\n  \n  return TRUE;\n}\n\n/*  Create a creature object using the template resource reference\n *  with the name sResref. If successful, compare the properties to\n *  the player's character. If any of properties don't match, display\n *  a message with the string sExitMsg in a dialog box. On clicking\n *  okay, run the EXIT_SCRIPT script. If bAllowContinue is set to\n *  true, include a continue button to allow player to proceed.\n *\n *    sResName       = Resource name of the prototype.\n *\t  sExitMsg       = Message to print prior to exit.\n *    bAllowContinue = If true, allow option to continue.\n */\nvoid endgame_if_wrong_pc( string sResName, string sExitMsg, int bAllowContinue = FALSE )\n{\n  // Only run once for entire campaign\n  if ( GetGlobalInt( CAMPAIGN_CHECK_PC ) == FALSE )\n  {\n    SetGlobalInt( CAMPAIGN_CHECK_PC, TRUE );\n    \n    // Create a copy of the template creature\n    object oPC = GetFirstPC( TRUE );\n    location locAt = GetLocation( oPC );\n    object oTC = CreateObject( OBJECT_TYPE_CREATURE,\n      sResName, locAt, FALSE, PC_PROTOTYPE_TAG );\n    if ( ! GetIsObjectValid( oTC ) ) return;\n    \n    // Check if the PC does not match the template\n    if ( ! is_pc_match( oPC, oTC ) ) {\n\t  DisplayMessageBox(\n\t  \toPC,            // Display a message box for this PC\n\t\t-1,             // String ref to display\n\t\tsExitMsg,       // Message to display\n\t\tEXIT_CBSCRIPT,  // Callback for clicking \"Exit\"\n\t\t\"\",             // Callback for clicking \"Continue\"\n\t\tbAllowContinue, // Display the \"Continue\" button?\n\t\t\"SCREEN_MESSAGEBOX_DEFAULT\",\n\t\t-1,             // Okay string ref\n\t\tEXIT_BUTTON,    // Override Okay button name\n\t\t-1,             // Cancel string ref\n\t\tCONTINUE_BUTTON // Override Cancel button name\n\t  );\n    }\n  }\n}\n\n// ------------------------------------------------------------\n// gui_exit_to_menu\n/*\n    Exit the game and return to the starting menu.\n*/\n// RJH 07/09/10\n\nvoid main()\n{\n  CloseGUIScreen( OBJECT_SELF, \"SCREEN_MESSAGEBOX_DEFAULT\" );\n  EndGame( \"\" );\n}\n// ------------------------------------------------------------\n#include \"endgame_if_wrong_pc\"\n\nvoid main()\n{\n...\n  // End the game if the PC is not the expected character\n  // WARNING: Do not set the third parameter of endgame_if_wrong_pc()\n  // to FALSE during testing or you can become locked in a loop.\n  string sResName = \"calad_whitecinder\";\n  string sExitMsg = \"This module is designed to be run with \" +\n    \"the pregenerated character named Calad Whitecinder.\";\n  endgame_if_wrong_pc( sResName, sExitMsg, TRUE );\n...\n}\nSelect All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"Sometimes a module author may intend the work for a specific loadable PC, rather than a general character that is generated by the player. This allows the module writer to fine tune the story to fit an individual. The code below can be used to test whether the appropriate character was loaded. Note: It is also a good idea to mention in the module notes the name of the character that needs to be loaded.\n\nThe code is the concatenation of three files: (1) endgame_if_wrong_pc, (2) gui_exit_to_menu, and (3) a code snippet that is placed in the \"On Client Enter Script\" of the module.\n\nThe \"endgame_if_wrong_pc\" code compares the character selected by the player to a creature blueprint. If the parameters of the two do not match, a dialog message appears and the game returns to the starting menu.\n\nThe endgame_if_wrong_pc routine creates a copy of the template creature then performs a series of comparisons with the is_pc_match() routine. If a parameter doesn't match, a DisplayMessageBox, is displayed. When the player selects the \"Exit\" button,\nthe \"gui_exit_to_menu\" call-back routine\nis called to perform the exit.\n\nThe endgame_if_wrong_pc() routine should be called from the \"On Client Enter Script\" of the module's starting area. The \"endgame_if_wrong_pc\" script is included, and a call such as is used in the final code snippet should be made, with the parameters adopted to match your module.\n\nA prototype template could be generated, for example, using the InCharacter plug-in.","Rating":"N/A","Awards":[]},"337":{"Name":"Ultima Return Money Exchange and Shopping System","Author":"Krom","Submitted":20100727,"Updated":20100727,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Ultima Return Money exchange and Shopping system.\n-------------------------------------------------\n\nThis is a part of ultima fan project called Return to Serpent Isle (www.ultima-return.com).\n\nUsage instructions:\n1. Copy the hak and tlk files to their respective directories\n2. Execute the module from main menu of NWN2\n\nThe erf-file includes all the scripts, items and conversation of this module\n\nThis demo has 3 types of currency: gold coins, monetari and guilders.\nThe shop accepts gold coins or guilders which can be changed by clicking\nthe Change currency button.\n\nAll the money the player has is stored in the money bag which is the first item of inventory.\n\n","Rating":"N/A","Awards":[]},"338":{"Name":"Persistent Chest System using MySQL","Author":"Dethia","Submitted":20100809,"Updated":20101220,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"This is a persistent chest system I have written that uses the MySQL database. Obviously it requires nwnx fully functioning.\n\nThis is NOT scripted for SQL lite, sorry.\n\nPlease read the read-me file for information on how the system works and how to set it up. The steps are very simple in general but of course that will vary on user experience. I have included contact information in the Read me file so feel free to contact me about anything related to this system whether it be questions, suggestions or bugs.","Rating":8,"Votes":1,"Awards":[]},"339":{"Name":"Remove spell selection on levelup","Author":"Batmanis64","Submitted":20100816,"Updated":20100816,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"This package removes free spell selection upon levelup, and removes all starting spells and cantrips. Wizards will need to find scrolls to scribe.\n\nThe included erf, xml, and 2da files work together to prevent a wizard from starting with and selecting free spells upon level-up.\n\n***IMPORTANT****\nput levelup_spells*.xml (where the * is your current xp pack of NWN2, change it manually) in the NWN2 custom gui folder.\n\nput packspwiz*.2da (where * is the wizarding school of your choice; 1 is generalist) in the NWN2 override folder.\n\nimport the erf with one script into your module, paint a trigger over the start location, and put the script in the \"OnEnter\" slot.\n\nI haven't tried this with MoTB, I assume you'd just change the end of the XML file to \"X2.\"","Rating":"N/A","Awards":[]},"340":{"Name":"Dethia Tactics","Author":"Dethia","Submitted":20100821,"Updated":20120129,"Category":"Scripting routines","Type":"Type - Combat","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"This is the mini-game tactical combat system I have been working on. It is a turn-based combat system similar to old school turn-based strategy games like Tactics Ogre: Episode VII, Vandal Hearts, Front Mission, Final Fantasy Tactics, etc...\n\nIncluded are all the scripts for the system, along with a module, some already made playable classes as well as baddies.\n\nAdditionally included are the 2da's (as haks) that were changed to give the user an idea on how to implement the skills/spells.\n\nLastly included is the Read Me file that explains things in more detail about the system and its implementation.\n\nNote that this system uses a MySQL database to store creature information.\n\nI've made a short video a while ago that showcases how the system works:\nLink\n\n****************************************","Rating":10,"Votes":3,"Awards":[]},"341":{"Name":"Ultima Return Theft & Detection System","Author":"DanLoony","Submitted":20100826,"Updated":20100826,"Category":"Scripting routines","Type":"Type - Stealing","Format":"Module and Code","Patch":"1.00","NWN2Game":"NWN2:SoZ","Description":"This is the release version of Team Serpent�s Theft & Detection system for our upcoming title: Ultima Return to the Serpent Isle. The system is a valuable asset for anyone who would like a theft and detection system. The system is easy to use and can be enhanced with ease making it a perfect and easy addition to any project.\n\n\nThe package also includes a hefty documentation pdf that explains everything you need to know about the system as well as installation copyright issues and contact details. \n\nThe system has many features such as:\n\nProtecting items against theft\n\nProtecting chests and their contents against theft\n\nNPC behavior if they catch the player stealing an item\n\nCity Guards that will attempt to arrest the player and party\n\nPrison Cell with trap door \n\nPrison Guards\n\nBribing functionality\n\nWanted level reset\n\nAnd much more\n","Rating":10,"Votes":2,"Awards":[]},"342":{"Name":"Ultima Return Britannian Character Creation","Author":"Krom","Submitted":20100903,"Updated":20100904,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Ultima Return Britannian Character Creation\n-------------------------------------------\n\nThis is a system that implements the britannian version of character creation.\n\nUsage Instructions:\n\ncopy the hak packs into hak directory, choose the normal of widescreen version of the creation\nstills. If you want to use the widescreen version, rename the brit_stills_wide.hak to brit_stills.hak and copy it to hak folder\n\ncopy the tlk file to the tlk directory.\n\ncopy the music file into music directory.\n\nYou can start the character creation process by talking to the npc in the starting area.\nYou can only run the creation process once. So you have to restart the module to\ncreate another character class.\n\n","Rating":10,"Votes":3,"Awards":[]},"343":{"Name":"NWN2 Plot Fixes","Author":"WRFan","Submitted":20100921,"Updated":20101121,"Category":"Scripting routines","Type":"Type - Other","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"NWN2 - Plot Fixes first batch, by WRFan, August-Nov 2010. So far OC+MoB campaign fixes. More to be released...\n\nDownload:\n\nIt may take some time for the download to be updated, as all updates have to be verified by admins first. If an update is available, but the download package is outdated, try re-downloading later.\n\nInstallation:\n\nExtract the files to a subfolder in the Override directory. You should always delete the previous package first before installing an update.\n\nNote that MoB fixes haven't been fully tested yet and are meant primarily for the modding community. So use at your own risk or wait until I fully verify them. If you notice ANY problems with them, please report them to me and remove the Plot_Fixes_MOB folder from the Override directory.\n---------\n\nBugFix list update:\n\nBecause the Description field size is limited, I'll only post recent updates here. For a full list of bugfixes, please consult the Readme included in the package.\n--------\n\nUpdate Nov 22, MoB:\n\nMy previous Spirit Eater corruption rate mod wasn't working properly, cause I forgot to recompile one of the scripts, so it would always reset itself back to original value, but that doesn't matter now, cause I had a better idea. How about Auto-suppress? Let the entire party automatically summon spirits, then let the player character suppress, this way no cheating is involved, and you don't waste any time, cause everything happens automatically and instantaneously when you finish resting. If every party member summons a spirit, you regain 13 spirit eater points immediately, which should make up for any loss of SE points suffered before, especiially if your craving level is low. So here's the mod, for details see below or the MOB-readme file in the package, the mod requires some adjustment on your part, instructions included.\n\nIce Berserker Lodge (continued):\n\nYou won't be able to provoke Yurak and other berserkers into a fight any longer, this is just stupid. Either you have OOM with you and then they all go hostile, or you spare Okku and then there's no way to make them hostile\n\nHowever, you now DO get the Ring of Rashemen if you devour the berserker badger behind the lodge. So if the ring was the only reason for provoking Yurak, devour the badger, makes more sense to me, because if the badger has the ring when it enters the lodge after the fight, there is no reason why it shouldn't have it if you devour the annoying animal behind the lodge.\n\nFixed a bug in Nakkai's conversation - if you talk to him after chewing on Okku and BEFORE getting OOM into the party, your journal will be updated, saying something about a ritual and 3 brilliant essences, which doesn't make any sense at this point, is confusing to player and badly messes up the whole Nakkai ritual quest. This journal update is only supposed to happen if you have either Okku or OOM in your party when talking to Nakkai.\n\n-----------\n\nAuto-Suppress: whenever you rest, the entire party will summon spirit creatures and the player will suppress automatically, then all creatures all immediately are unsummoned, everything happens instantaneously to avoid time loss. The entire procedure takes 500 milliseconds and doesn't cost a full-round action, so you can immediately return back to what you were doing before resting. However, in order for this to work properly, it requires some adjustment on your side, both in the game and in the toolset. There is no cheating involved, so in order to summon spirits, you entire party must have the appropriate spells memorized (wizards/clerics/druids) or present in the spell book and able to cast (spirit shamans/bards/sorcerers). The script tries to cast the following spells:\n\nPlayer character: Shadow Conjuration: Summon Shadow (lvl 4 wizard/sorcerer)\nSafiya: same as above\nGann: Summon Creature VII\nDove: Summon Creature VII\n\nThe problem with Shadow Conjuration: Summon Shadow is that it's a sub-radial spell of the Shadow Conjuration spell and as such, the game fails to cast it instantaneously due to some hard-coded bug. So you need to unlink it from the main spell, turning it into a real stand-alone spell. Here are the instructions:\n\nOpen the spells.2da sheet in the toolset:\n\nNavigate to row 344, change the School column letter to \"I\", change column \"Master\" to \"****\" (4 asterisks).\nNavigate to row 159, change the SUBRADSPELL1 column to \"****\" (4 asterisks).\n\nSave the file. Restart the game, use the console to give yourself the actual summon shadow spell (spellID 344). memorize the spell in your spell book. If your character is not a wizard/sorcerer, you are obviously out of luck.\n\nRe-level Safiya. Obsidian auto-levelling sux, I recommend relevelling Safiya as lvl 10 wizard/lvl 10 red wizard, this way you get access to lvl 1-5 illusion spells before it becomes a forbidden school for her. This way you can also learn the Summon shadow spell, which would be usually unavailable to Safiya, cause it's an illusion spell and becomes unavailable once she turns into a Red Wizard, unless she already has it in her spell book. After re-levelling, memorize the Summon Shadow spell in her spell book.\n\nMemorize Summon Creature VII in Dove's spell book and make sure Gann can cast the same spell.\n\nNow rest and at the end of the rest the entire party will summon 4 spirits (two shadows and two elementals) or 3 spirits if your character is not a wizard/sorcerer and player will auto-suppress, immediately regaining 13 SE points (5 base+2 per spirit nearby). Also, if you try to rest while other party members are too far away, they will be automatically jumped right next to the player character, because the spirits need to be summoned close to the player character, otherwise you don't get the Suppress bonus.\n\nIf you don't want to suppress for some reason (for example, if you want to devour something instead), remove the script k_mod_player_rest.NCS from Plot_Fixes_MOB\\Module Scripts and restart the game. If you want to re-enable the auto-suppress, put it back in the folder and restart the game.\n\n-----------\n\nSimplified by Spell Resistance fix, should now work on all creatures with spell resistance, no more resetting itself to 0 and spell resistance decrease will now properly work on all of them (Mord Disjunction/greater spell breach etc.). \n\n---------\n\nGave some bonus rogue features to Kaji and equipped him with the Amulet of the Master, otherwise the stupid familiar fails all disable device checks. He can pickpocket now as well, gave him some base skill. This is done every time he's summoned, so he will always have the new feats/amulet. He gets Skill Mastery, Nimble fingers feats and some skill focus feats important to rogues. Should help with traps and locks until you gain access to OOM.\n\n------\n\nFixed the Death Knights at the Shadow Vault upper level - no more attacking player party if everybody is ethereal! Damn Obsidian and their cheats...\n\nUpdate Nov 19, MoB:\n\nFixed Darovik's and other warpriests' War Glory aura so it only ever affects enemies, even on hardcore difficulty. No longer dispellable as well.\n\n--------------\n\nFixed a problem in Dove's convo where she may fail to tell the player about Akachi's lieutenants, which is problematic, as the player may comment on this later when talking to her, but obviosly only if the player was told about them.\n\nChanged power teaching by companions - you will now always get the loyal power before getting the devoted one, even if your influence with the companion is already devoted. It's interesting to hear their dialogs and besides, when learning powers from Dove, you can bluff her and gain influence with OOM, in vanilla game you miss one opportunity if you go straight from supportive->devoted and get the devoted power right away.\n\n--------\n\nNecromancer, Shadow Mulsantir:\n\nChanged arcane caster check - now everybody with spellcraft >35 can perform the ritual, not just wizards/clerics\n\nFixed stealing from the Necromancer's chest if you revived him and he's not hostile - you are supposed to steal from him without repecussions if the thief has at least 20 skill ranks in move silently and hide and is in stealth mode while disarming the chest/unlocking and stealing, but the script was broken\n\nThe reward ring will be now created on the necromancer even if you revive him without the Tome of Rebirth, if you pass the class/spellcraft check, you qualify now for the reward.\n\n-----------\n\nOkku fight at the gates of Mulsantir:\n\nFixed his immunities to be supernatural so they cannot be dispelled any longer\n\nEnemies including Okku won't attack the player character directly any longer, instead their AI will now properly determine their combat rounds.\n\nThe kill countdown is now displayed in the message window so you know how many enemies you have to kill yet before Okku becomes vulnerable.\n\nImmortality is removed from Okku once he's vulnerable. Really annoying, this immortality, prevents most spells from working properly. While it is more or less needed at the beginning of the fight, there is no need to keep Okku immortal once he's vulnerable. You must kill him now to win the fight, not just reduce to 1 hp. He will be immediately resurrected upon death for the post-battle cutscene.\n\nAll companions you managed to gather so far will be added to your party unless already present at the end of the battle so you can hear their remarks\n\n------------\n\nSuppress spirit eater power: reduced corruption rate from min 0.5 (5%) to min 0.32 (3.2%), this will allow you to completely negate the Spirit Eater points loss caused by resting, otherwise you always need to summon several elementals/shadows and suppress in front of them to negate the penalties, it is extremely annoying if you are playing as a spellcaster, cause spellcasters have to rest all the time and it's an incredible time loss. You begin at corruption rate 1.0 (100%), so you need to suppress a couple of times before the corruption rate drops to 0.32, take care not to die, lol.\n\nUpdate Nov 17, MoB:\n\nFixed several problems in conversations with Safiya where the player speaks with contempt about wizards even if she is a wizardress herself or about Red Wizards even if she's a Red Wizardress herself, why would she insult her own class, huh?\n\nFixed a problem with chaotic alignment shift when robbing the graves in Mulsantir - Obsidian needs to learn that PCSpeaker is not always the player character, same problem as during the troll encounter in OC (Act 3, see my OC bugfixes).\n\nFixed a problem with the stupid badger outside the berserker lodge - it must search for closest valid targets to follow, not stick to the player controlled character all the time, which leads to all kinds of bugs and problems if player switches to another character. It will now search for valid targets once the original intruder exits the area around the lodge (badger can't follow outside the fence). If it finds an intruder nearby, the new target will be set as the new intruder and the badger will follow the new intruder, until it exits, at which point the badger will once again re-evaluate the situation to find a new target to follow. The validity is checked based on the following criteria: a) intruder is a party member, b)intruder is not the exiting object, c) intruder is within the badger's reach, d) intruder is closer to badger than any other intruders that meet the previous criteria.\n\n----------\n\nCompanions:\n\nPlayer won't offer Gann freedom in return for his support if she's passed the spellcraft check before. What is she, stupid? If she passed the check before, she should know that Gann is not really imprisoned, but locked himself up in the prison, cause he's afraid of the bear army. Nobody holds him there against his will.\n\nDisabled Charisma check for males in initial convo with Gann, feels gay. Enabled additional Flirt Background option for females\n\nFixed a problem where Gann and Dove are teleported out of the cutscene before it's over, cause they joins the player too early and are jumped to her and right out of the cutscene.\n\nFixed Gann's and Dove's template and levelup scripts:\n\nthey are now same level as player when they join\n\nthey are level 1 and player can level them up themselves, Obsidian levelup packages suck\n\ntransferred all levelup points wasted on str, con, int into their primary attributes (WIS+Cha, focus on CHA for Gann, focus on WIS for Dove)\n\nDestroyed their crap equipment and gave them stuff appropriate for their levels\n\nDove now has Sun/Evil domains instead of her original crap domains\n\nFixed the Prodigal daughter quest updates when you meet Dove/recruit her, otherwise it leads to all kinds of weird bugs, like asking Darovik if he's seen Dove, even if she's standing right next to you\n\nNo more Lore Ilmater checks if player has Ilmater as deity, what is she, stupid, doesn't she even know who she worships??!\n\nFixed a problem where Dove talks about her eyes and then the player all of a sudden replies \"I have... walked in the Shadow Plane before, yes.\", which doesn't make any sense (bug only occurs if player is Aasimar/Tiefling or Gann is in party). Happens, because a couple of Dove's convo nodes are skipped, fixed, linked to the proper dialog node.\n\n-------------\n\nFixed WIS checks for Bluff/Insight checks in convos with Sheva/Darovik\n\nDarovik convo:\n\nExtremely weird convo:\n\nThe Wall of the Faithless is mentioned 4-5 times in a row and every time the player acts surprised as if she's just heard about it for the first time:\n\n1) What is that wall that surrounds your temple?\n2)The Wall of the Faithless? What is that?\n3) Because Gann's convo with Darovik where he mocks faith is initiated at least twice, maybe even 3 times, you have to pass Lore checks all over and over again: \"[Lore] Do you mean the Wall of the Faithless?\" etc etc\n\nFixed Gann's mocking convo being initiated several times, will only initiate once and will now properly check if player has already heard about the wall before\n\nNo more idiotic questions about the wall, if player already knows about it, either from Darovik or from Dove, no Lore checks, no nothing, either player knows about the wall or she doesn't, she can't be so forgetful as to forget about the wall right after she's been told about it!\n\nFixed some of the Kelemvor clerics/Kelemvor favoured souls checks, they say something different to Darovik\n\nUpdate Nov 15:\n\nNWN2 OC:\n\nFixed a problem with my Garius combat AI fix - he is obviously supposed to cast HARM on himself, as he is undead, sorry, that was a misinterpretation of game rules.\n\nFixed a problem with Greater Shout spell - Fortitude saves should not apply when cast on the portal, because the portal is a placeable for purposes of gameplay, even though it's technically a creature.\n\n-----------------\n\nGeneric cross-campaign fix:\n\nFixed a problem with triggers triggering convos/cutscenes, if you are controlling a familiar when stepping on the trigger, convo will not trigger, cause you can't engage in dialog when controlling a familiar. This can break the game, as some convos must be triggered to proceed. For example, use Kaji to enter the barrier room in the Barrow at the beginning of MoB, Safiya is supposed to talk to the player character here, but convo is not triggered while Kaji is controlled, which prevents important scripts triggered through the convo from running.\n\nAlso, this generic trigger script tries to check if the entering object is a player character, however, checks are totally bugged, both in the hard-coded engine and in scripting: GetIsPossessedFamiliar, GetIsPC, GetOwnedCharacter, and GetFactionLeader functions may fail to return the proper object under many conditions, the checks must be performed differently to circumvent the bug, fixed.\n\n--------\n\nGeneric Gui cross-campaign fix:\n\nChanged the popup menu for game options - will now display an option to open the roster member selection screen to add/remove roster members from current party (button lower left corner of the screen).\n\n\nNWN2 MoB:\n\nMoB crafting:\n\nFixed a problem when adding bonus spell slots to rings - if a ring already has a bonus spell slot property and you try to add another, nothing happens. According to the Obsidian comments in the script, this property is not supposed to be upgradeable, instead, you are supposed to be allowed to add additional slots, so a ring can grant up to 4 bonus spell slots (since the number of item properties is capped at 4 for purposes of crafting). Fixed, you can now add additional slots, but existing slots will not be upgraded and once the number of properties reaches 4, you can't use this item for crafting any longer so be careful.\n----\n\nAutosaves disabled for areas in Shadow Mulsantir, also some other areas, like the Barrow, really annoying\n---\n\nThe Barrow:\n\nFixed a problem where the player will die immediately upon logging into MoB during the initial cutscene (game over), this happens if the player is wizard/sorcerer and has a CON score of <8, since the game applies a \"weakened state\" penalty, which reduces CON by 4, it kills the player right away, cause CON drops below 4, which is deadly for wizards. Also, when the \"weakened state\" is removed later, the player actually ends up with bonus hit points, fixed.\n\nSafiya will now be same level as player character (same amount of XP) when she joins your party at the beginning of the campaign.\n\nFixed a problem with Kaji if you unsummon him right away, he's supposed to speak when you exit the initial room you are in and it is very important that this convo triggers, otherwise it leads to other bugs, so now Safiya will re-summon him for the convo to trigger properly.\n\nFixed a problem where the player is not awarded XP for creating a rejuvenation/superior rejuvenation salve for the golem at the alchemy table.\n\nFixed a problem with a shelf that is not supposed to be lootable, instead, you are supposed to pass a search skill check, if you pass, you \"find\" some scrolls through \"conversation\" with this shelf in the Barrow library.\n\nFixed a problem with the Imaskari rod - Safiya tells you to use it, but how? Player is confused. Safiya will now tell you to engage in convo with the barrier, cause this is how it's \"used\" - through convo. Also, if you use the Imaskari rod, the sacred pouch will be removed, cause it's no longer needed and vice versa.\n\nOkku fight in the Barrow:\n\nOkku is no longer immortal. What is it with Obsidian always putting immortality on everybody? Most spells stop working if the enemy is immortal! He can be killed now, but will be actually resurrected for a couple of seconds afterwards for the visual effects to play properly before he disappears again.\n\nFixed a problem where Okku summons allies at 95% health, he's supposed to do this at 75% health. But really, since he's no longer immortal, I don't recommend damaging him in the first place, instant-kill him instead using death magic or Weird or something.\n\nOkku is supposed to fly into Barbarian rage at 50% health, he won't do it any longer if incapacitated (frightened, paralyzed, petrified, whatever).\n\nFixed some problems with the fight if you petrify Okku or use the Solipsism or Mass Fowl spells on him, the plot may not advance properly, all negative effects must be removed from him once the battle is over.\n\n-----------\n\n\nBugfixes in Safiya's convo file (see also previous fixes in the readme):\n\nRemoved all male checks in Safiya's file so female players have access to those \"male\" conversation nodes now as well.\n\n\n--------------\n\nGates of Mulsantir:\n\nPlayer will now cast Legend Lore on herself automatically during the cutscene (only if she has it memorized and if she's wizard/sorcerer, obviously) to pass Lore check with Safiya. Will also summon familiar in case you have a familiar that grants you a Diplomacy bonus to pass diplo check with Safiya.\n\nPlayer says to Safiya, \"You mentioned Lienna before\". No, she did not! Fixed, won't say it anymore.\n\nSafiya will change her clothing even if she's not wearing the Red Wizard robes, won't do it any longer if she's something else equipped. Also, won't try to remove the disguise clothing if she doesn't have them equipped later on.\n--------------\n\nMulsantir town:\n\nFixed standard faction reputation with commoners and merchants (neutral now) so friendly spells don't affect them, otherwise the merchants' appraise skill goes up if you cast Prayer and stuff around them.\n\nPermanent immobilization to both merchants in the city, they are getting on my nerves, constantly running around, I could never find them.\n\nDisabled camera adjustments when you enter Mulsantir and the Veil theatre, cause the game switches automatically into 1st person view, which is incredibly annoying, cause you can't see shit any more.\n\nFixed both merchants' stores - will now display the markup/markdown percentage as all the other stores (only with my fixes) and Azim will now also grant you a discount if you save the Wood Man, same as Feodorra, the other merchant.\n\n-------------\nThe Veil /Shadow Veil:\n\nSome minor bugfixes to the Red Wizard's combat AI\n\nFixed one of Safiya's convo nodes not triggering when you touch the blood-stained table in Shadow Mulsantir.\n\nUpdate Nov 12:\n\nThis is the final update for the original NWN2 campaign, fixing bugs in the final module (KOS fortress). Further bugfixes will be made available for other campaigns in the future.\n\nBattle with the Garius's Nightwalker, continued:\n\nFixed influence gain with Zhajave/Ammon depending on who you tell to recite the True Name once the Nightwalker dies.\n\n-----------\n\nKOS Fortress:\n\nNeeshka will only become unavailable if the PC holds less than 15 levels in the rogue class, because there are many traps ahead and only Neeshka can disable them. She will be removed from the party when the player enters the inner sanctum, cause she is needed for the Garius cutscene. Also, Zhajave and Ammon won't be forced into the player party. What is it with Obsidian, constantly forcing this stupid phuck Ammon into my party?\n\nUpdated the journal entry for the quest \"Stop the Shadow Reavers\" upon entering the KOS fortress.\n\nDisabled weird attack triggers everywhere that compel enemies nearby to attack you even if the party is invisible/ethereal. Stupid cheats by Obsidian.\n\nOne of the 3 reavers won't be teleporting around any longer if he can't perceive any enemies (in case the party is ethereal after the cutscene).\n\n--------\n\nGarius:\n\nFixed the Garius cutscene, the Bishop influence / persuasion checks were all messed up - if you fail all checks, you are actually rewarded, cause Bishop leaves then, he is only supposed to leave if either your influence with him is very high or it's high+you pass an additional persuasion check. Fixed, the dialog options are varied, but the procedure is the same - first influence check when you ask him to tell you his story, if failure, he joins Garius, then another insane influence check, if success, he leaves, if failure, additional persuasion check+further influence check at a lower DC to make him leave. Also updated the dialogs themselves to reflect the fixes.\n\nFixed influence DCs for various companions, some DCs are pathetic (0-10), others insane (50 for Casavir and others!, reduced to 25)\n\nFixed Casavir player alignment check - Garius is supposed to try to persuade Casavir to join him if player is really evil, but the alignment check is bugged - it checks if player has alignment of <-20, but it simply cannot fall below 0! What Obsidian really wanted to check is if player has alignment <20.\n\nThe shadow gear Garius gives to traitor companions is now lootable after the fight, cool, Sand was given a nice cloak by Garius, I put it on my character right away after the fight, +9 deflection bonus. Thank you very much, Mr. Garius!\n\n---------\n\nGarius fight / Garius combat AI:\n\nFixed Garius's SR - now properly set at 30 and won't reset itself.\n\nThe game features a special AI specifically written for Garius (similar to the Red Dragon /Black dragon AI), unfortunately broken and bug-ridden like hell:\n\nNo more teleporting around, buffing or summoning balors if Garius is incapacitated or if he can't perceive any enemies. The following conditions return TRUE here: Etherealness on all party members, Blindness on Garius (technically, he cannot perceive enemies if blinded before he can see anybody, so if Zhajave sneaks up on him while ethereal, casts Assay Resistance+Word of Faith, he cannot see anything and internal perception checks performed by the engine return OBJECT_INVALID, I checked, all perception checks fail, so no cheating, Obsidian!), Silence, Petrification and Bigby's Forceful hand. Note that if Garius is blinded and you annoy him too much, he WILL eventually perceive you (the script extension I wrote doesn't check for Blindness, it checks for Enemy Perception), resulting in his combat AI kicking in, and believe me, you don't want that, so kill him quickly and don't annoy him with magic missiles and other crap. Silence will not prevent him from teleporting away, but Bigby's grasping hand etc will. Turning is checked too, but you will not be able to turn him, cause he's level 37.\n\nFixed a problem where one of the Garius's buff routines is executed twice in a row, supposed to be once only.\n\nFixed a problem where Garius may cast spells on himself he already has cast before like Displacement\n\nGarius will now only cheat during the initial round when buffing himself, later on he will only cast spells he actually has memorized. Obsidian are damn cheaters!\n\nFixed a problem where the Balor is spawned after Garius is killed and then aggroes during the post-battle cutscene, attacking and casting Dispel Magic during the cutscene. He is supposed to drop dead after Garius's death, problem is, he sometimes spawns 100 milliseconds after Garius's death and isn't auto-killed.\n\nUpdated the undead creatures' AI so that they don't attack ethereal party members, they were using outdated AI back from NWN1 (the undead that spawn when force fields appear).\n\nFixed a problem where the game tries to re-initiate the post-battle cutscene several times in a row, extremely annoying\n\n-------------\n\nKOS battle:\n\nFixed KOS SR - now properly set at 30 and won't reset itself.\n\nFixed King of Shadows' Aura of Draining - it's totally broken, it only deals damage and drains levels when creatures enter the aura, not while they stay inside the aura and if players have several spells on them that give them immunity to negative energy (like Mass death ward AND shadow shield), the immunity actually turns into a vulnerability. Fixed everything, it's now working as it should:\n\n3 levels drained per round (1 negative level every 2 sec)\n30 negative energy damage per round (5 every second)\n\nAnd Mass Death ward/Death ward/Negative Energy protection/Shadow shield are not conflicting with each other any longer. More info here (bugs section): Link\n\nFixed a problem with the Shadow Simulacrum spell - if you create doppelgangers of undestroyable creatures, they may not be unsummoned properly, this fix is required in combination with my other KOS fixes, may be required for some other enemies in the game as well.\n\nFixed a problem where the KOS doppelgangers created by Shadow Simulacrum cast Inspire Frenzy, resulting in decreased AC and damage to the entire party.\n\nFixed Weapon of Impact and Greater Magic Weapon not working on KOS weapons if you create a doppelganger of KOS using Shadow Simulacrum and try casting these spells on the copy. More info here (bugs section): Link\n\nFixed a bug where KOS bypasses premonition and other damage reduction spells when casting Bombardment/Earthquake/Evard Tentacles. That's because he's got an adamantine weapon and there's a hard-coded bug that checks the spellcaster primary weapon penetration instead of the spell effect penetration. Will now also help with any other spellcasters wielding adamantine weapons and casting spells that deal physical damage. More info here (bugs section): Link\n\nDisabled KOS's weird teleports, cause they interfere with spellcasting, extremely annoying\n\nFirst KOS battle:\n\nDisabled special AI for the first KOS you encounter, his AI sux and really, he's just hacking around, so switching to standard AI, cause his \"special\" AI is so stupid, it can't even deal with a situation where he gets stuck for some reason and can't find a path to the closest enemy.\n\nRemoved the cheated Turn Resistance increase from him - he's just lvl 25, so now you can actually turn him provided you have an extremely powerful charismatic cleric with the proper outsider turning domain.\n\nFirst KOS is no longer immortal and can be instant-killed (he will be resurrected for the post-battle cutscene anyway). However, I do not recommend instant-killing him, cause only Dismissal and Banishment will work on him and he's got insane saving throws.\n\nSecond KOS battle:\n\nRemoved the cheated Turn Resistance increase from all the mini-Koses, they are lvl 7, so instant-kill through turning if you have the proper outsider turning domain. The game will now display how many you've killed so you know how many you have to kill yet - 30 overall must be killed.\n\nPaused the game right before the final KOS appears so you can save the game.\n\n-----\nFinal KOS battle:\n\nFixed a problem where Qara fails to talk during the cutscene when the final KOS appears, the game tries to check if she's betrayed the player before or if she's still in the party, but the check is bugged.\n\nFixed a problem with KOS buffs/debuffs: He's got a STR of 21 and he gets +3 STR and +3 AC for every statue, every time a statue is destroyed, 3 penalty to STR and AC to KOS. However, Obsidian probably doesn't know that ability bonus is capped at 12, since there are 5 statues at the beginning, they tried to give him +15 STR bonus, doesn't work, for God's sake! Fixed, now initially implemented as a base ability increase and then switches to ability bonus on his hide when the bonus drops to 12 (after the first statue is destroyed, only 4 left, so 4*3=12, which is ok). Also, Obsidian tried to reduce his STR and AC bonus to 0 when all 5 statues are destroyed. Ok, Obsidian, YOU are the programmers, shouldn't you be aware of the fact that these functions require an integer above 0 and will not work when number 0 is passed to them? Fixed, now AC and STR increasing properties will be completely removed from the KOS hide once all 5 statues are destroyed.\n\nOnce all 5 statues and the portal are destroyed, immortality will be removed from KOS, at which point he can actually be instant-killed. However, I really REALLY discourage you from trying, cause only Dismissal and Banishment will work on him and he's got insane saving throws. He will be resurrected for the final game-over cutscene in any case, regardless of how you kill him. And yes, the victory condition is now to kill him, not reduce him to 1 hp, although it's pretty much the same.\n\nKOS may fail to equip his weapons, cause he's lacking the martial feat. Fixed, but it's kind of pointless, cause he's hardly ever attacking in melee, he's just casting spells.\n\nFinal KOS combat AI:\n\nKOS will now always cast the statue protection spell at the beginning of the battle. He did that before as well, but rarely. This spell grants +50/alignment good protection to all statues.\n\nKOS sometimes casts spells on the silver sword, what a moron. Fixed, will now ignore the sword, cause it can't be damaged anyway.\n\nFixed KOS's spellcasting - he was casting harmful spells on himself, what the hell is wrong with Obsidian? Also, he will now be casting spells directly on enemy, not at enemy location, cause the KOS AI seems to have probs with determining exact enemy location when creatures are moving around so he was casting spells on empty space\n\nKOS won't be casting spells if he's silenced. Blindess does not apply here though!\n\n-----------\n\nI am also providing a buff script to instant-buff your party for the final fight, can't release it for everybody, cause I obviously cannot know what companions you are using for the fight, but modders are welcome to use it - check out BuffPartyKOS.nss.\n\nUpdate Nov 7:\n\n\"Reach the Vale of Merdelain\" quest will now be properly updated, telling you to bring the Tome of Ilkatzar to Aldanon once Grobnar/Sand/Ammon Jerro picks it up.\n\n-------------\nCrossroad Keep / Companions (continued):\n\nFixed a problem where the player may still talk to Zhjave about shards, even after reforming the sword\n\nFixed a problem where the player still asks Aldanon if he knows how to kill Shadow Reavers, even after acquiring the True Name scroll during the Sydney Meeting\n\nFixed a problem with Fadeout/Fadein when telling Ammon about Shandra's past\n\nRemoved the Mephasm summoning charm from Jerro once Mephasm is summoned, no need to carry this useless item around\n-------------------\n\nFixed 1 mio bugs with Aldanon when telling him about the Tome of Iltkazar:\n\n1) Sand and Qara don't need to be spawned, cause they are in the area anyway, whether in player's current party or not\n\n2) The game needs to check if Zhajave, Grobnar and Ammon Jerro are in the same area as Aldanon. Extremely intelligent! The game spawns Sand and Qara, who are there anyway, but fails to spawn Zhajave and Jerro, who may not be there unless the player currently drags them with her when talking to Aldanon about the tome.\n\n3) The convo will still be cut off, even if the bugs above are fixed, because Sand tries to talk to a non-existent object. Aldanon's tag is \"21_aldanon\", not \"aldanon\", Obsidian!\n\n4) The Tome must be removed from player's inventory, when she hands it over to Aldanon. If she gave it to some other companion, the game must check the entire module, since all companions are present somewhere in Crossroad Keep (including Zhajave, who is now properly spawned for the cutscene), the game will now find and destroy the item (as if it were given to Aldanon). Problem is, player can actually drop this item on the floor and forget it somewhere in an inaccessible area. I tried to make the item undroppable, like the Gith sword shards, but for some reason it doesn't work and I don't know why. So just don't drop it, ok?\n\nFixed all the bugs above. Btw, you don't need to worry, you can still upgrade the construct even after giving the tome to Aldanon. I just assume Grobnar borrows it from him for an hour, lol.\n\nZhjave will now spawn at Crossroad Keep similar to all other companions if she's not in current player party. She will be spawned next to Aldanon if library is built or next to Sand if not built yet.\n\nFixed the second Construct upgrade cutscene (when Grobnar uses the Tome of Ilkatzar on him) - camera setting, positioning of player and Grobnar, everything seems to be broken in this game.\n\n---------\n\nKoraboros-Ammon fight:\n\nFixed a problem where you could add Ammon to party after Nevalle returns from the battle at Highcliff, Ammon should not be available at this point, as he is gone to Shandra's farm\n\nFixed a problem where Koraboros and all the other devils continue to summon devils even if disabled. Following states count as disabling and will prevent enemies from summoning further outsiders: Turned, Dominated, Frightened, Paralyzed, Asleep, Stunned, Confused, Dazed, Charmed, Insane, Mesmerized, Cutscene-Paralyzed, Petrified.\n\nIf Koraboros is killed, all other enemies will die immediately, as they are all summons, originating originally from Koraboros. If a master is killed, all summons are unsummoned and I don't see why it should be different with Koraboros.\n\nFixed Koraboros's and other devils' SR - won't reset itself to 0 and is subject to SR decrease by Mord Disjunction or whatever.\n\nIncreased Shandra Influence DC to 20 in the post-battle convo with Ammon, it was set at 10, pathetic.\n\n---------------\nCrossroad Keep, Siege:\n\nFixed Axle-Nasher link - if you fail the Axle quest by killing Axle or not responding to his summon, he will expose you as a member of the Shadow Thieves to Nasher and Nasher will treat you with disdain during the convo at the beginning of the siege.\n\nDestroy the Bridges quest, Siege part 1:\n\nNo allies will join you during this mission. This is not a bug, but changed by me on purpose, because the NPC idiots are completely useless, they are lvl 6, are always in the way and mess up the party order (portraits on the right side of the screen)\n\nImmobilized the first group of undead in the area, cause they are constantly moving around when fighting the allies. They shouldn't do that, especially, since they are invulnerable until the player steps on the trigger next to them. If the player takes too long and they are not immobilized, they may actually leave the area with their invulnerability flag still on and then they stay unkillable when the player attacks them. The immo effect will be removed along with their invulnerability once the player comes close and steps on the trigger.\n\nThe allies fighting these enemies are not invulnerable any longer, their invulnerability is removed along with the enemies' invulnerability once the player gets close. However, one of the 3 allies is still immortal and cannot be killed, because he is needed for the conversation afterwards.\n\nThe second group of enemies/allies spawned once you kill the first group of enemies is now immortal and invulnerable to damage until the player or any other party members comes within 20 feet of them. In unpatched game, they are not invulnerable, which means most players don't even know there are allies ahead, cause they are spawned pretty far away and by the time the player gets there, they are all dead. There are 2 ironfist dwarfs ahead and 2 lizards (only if you gained those alliances before). Again, the enemies are immobilized until the player comes close, at which point, both the invulnerability and immobilization are removed from all NPCs, hostile and allied. However, since one of the 2 dwarfs and one of the 2 lizards are needed for the post-battle convo, they are still immortal and cannot be killed, since one of the shadow priests always tries to cast Harm on them and if they die, the convo will be either cut off or not trigger at all, additionally resulting in the third group of enemies further along the way not spawning at all, no good.\n\nFixed several triggers not spawning enemies properly if the character stepping on them is not the player character. So if you send Neeshka ahead to search for traps and she steps on the triggers, the enemies will not be spawned due to a weird check by Obsidian - the game tries to check if the entering object's faction leader is the same object as the player character, well, it doesn't work this way, Obsidian, I checked and if Neeshka steps on the trigger, the game returns Neeshka HERSELF as her faction leader, and not the player character, so the condition is never evaluated as TRUE and enemies are not spawned. Fixed.\n\nFixed the second bridge enemy group not running towards the player as they should. Note for modders and Obsidian: Never use the group locomoting functions when trying to navigate a group to a location that is very far away, the hard-coded path-finding function is buggy and won't move NPCs to a location too far away. Instead, loop through all the members of a group and tell them to move to an OBJECT close to the location you want them to move to. Moving to an object instead of a location doesn't seem to pose any problems. Once the NPCs are close to the location you want them to move to, set the formation and noise and use the group locomoting functions to move them to the specified location in the specified formation.\n\nDestroy the Bridges, Garius cutscene:\n\nThis cutscene may be cut off in the middle, resulting in all enemies still being friendly towards the player party, fixed.\n\nThe shadow priest is supposed to die in the explosion, but he never does, fixed, will now be killed by Daeghun's explosion along with the 2 skeletons next to him.\n\nFixed the fireball spell that is used by the blast globes explosions as well as by the mages on the battlements during the \"Destroy the Siegetowers quest\" later on - the fireball spell script was not designed to be used for this, the original version only works properly for fireballs and the shade version of fireball, not the infinite range fireball used by blast globes and the allied mages on the Keep battlements.\n\nImmobilized skeleton archers on the hills so they don't simply run away, their perception range is too short. Signalling Daeghun as the initial enemy to them so they have something to attack.\n\nFurther improved my Etherealness fix so enemies without true seeing stop attacking ethereal party members, my previous fixes were insuffient and some enemies attacked by Daeghun and his scouts would still attack party members, cause they can't reach Daeghun, so the AI was looking for secondary targets, ignoring etherealness along the way.\n\n-----------\n\nReturn to the Keep after destroying the bridges, the Siege part 2:\n\nSwapped around the romance options for male / female characters regarding the final love resolution for player<->Elanee/Casavir relationship. If the player is female, she will now be approached by Elanee and vice versa. Yeah, I know, players playing as male characters will probably kill me for this, cause they have to bang Casavir now, but players playing as female characters will love me for this, cause there's always something to say in favor of lesbian love, hehehe. The fake Elanee used for this love cutscene will now wear the same stuff as real Elanee, I wrote a script that copies all of her items and lets the fake Elanee equip them. Fixed Elanee's influence - was originally set at DC 10, which doesn't make any sense, since if you only have an influence of 10 with Elanee, she wouldn't even be here, since she would have left with Naevan during the Circle quest, is now set at DC 20.\n\nWhen the soldier warns you about the approaching undead army in the morning, he will now actually enter the room, otherwise the player gets confused as to who the hell is speaking here, since he speaks from other other side of the door. However, it won't do if anybody just runs into a girl's room while she's banging Elanee, so I changed the convo - you can now yell at the soldier, telling tbis Peepi Tom to phuck off, haha.\n\nFixed a bug where Elanee would talk when the soldier leaves if the player banged Casavir and Casavir would talk if the player banged Elanee, Obsidian accidentally swapped it around.\n\n--------------\n\nDestroy the siegetowers, Siege part 3:\n\nFixed the catapult spell caster level - it was set at 0, meaning it wouldn't damage spell mantles when the catapults accidentally hit party members, since it would subtract 0 levels from spell mantles, now properly set at 3, same as fireball.\n\nWhen siegetowers dock, the game will now pause automatically and the player will be warned in the message window, telling you to destroy it quickly.\n\nFixed the Disintegrate spell so that it ignores ranged touch attacks and fortitude saves for siegetowers, although the siegetowers are implemented as construct race for technical reasons, they are actually placeables and neither RTAs nor saving throws should apply. So if you are so lucky to get 1 on RTA or towers get 20 on save, the spell still deals standard damage. Only applies to siegetowers, otherwise the spell works as usual against all other creatures.\n\nWhen all enemies and siegetowers are destroyed, the game will pause right before the cutscene so the player can save the game and mememorize new spells for the courtyard battle.\n\nThe skeletons attacking the gate aggro against the NPCs on the other side of the gate and totally disrupt the cutscene. Setting all the skeletons neutral so that they stop running around in circles trying to get through the closed gate. Setting them back to hostile once the gate collapses so that they attack the soldiers. Also disabled the collision for them so that they can move away from the gate properly without bumping into each other and getting stuck once the vampire mages are about to cast fireballs on the gate.\n\n-----------\n\nCourtyard battle part 1, Siege part 4:\n\nFixes to the enemy combat AI so enemies don't attack party members they don't perceive (invisibility and stuff).\n\nPaused the game once all enemies are dead so player can save the game\n\n--------\n\nCourtyard battle part 2, Siege part 5:\n\nFixed a problem where Garius aggroes during the cutscene, casting too many spells at friendly NPCs behind the barricades, the idiot is not supposed to do that, he is only supposed to cast spells twice and he is not supposed to cast Delayed Blast Fireballs and Bigby crushing hands during the cutscene.\n\nFixed an incredibly annoying bug where both Garius and the Nightwalker may disappear and re-appear all the time at the beginning of the battle after the cutscene once they turn hostile. This happens, because the game tries to re-trigger the \"Garius appears\" cutscenes several times in a row.\n\nFixed the Summon greater Undead spell used by the Nightwalker, Obsidian gave him the Palemaster version, very intelligent, since the Nightwalker holds 0 levels in Palemaster class, the duration of the spell is 0 and the undead summoned by the nightwalker is immediately unsummoned.\n\nFixed the nightwalker's SR - now properly set at 30, won't reset itself to 0 and is subject to SR decreasing spells.\n\n--------\nAlso wrote two scripts that will allow the party to buff themselves to full degree instantaneously before each battle, because the stupid game doesn't give you time to cast any buffs on yourself, constantly throwing enemies at you. The buffs will not trigger for everybody, cause I can't predict what companions you take along with you, but modders should take a look at the scripts BuffParty.nss and BuffPartyCourtyard.nss and adjust them for their needs. These scripts allow you to summon companions into the party, instant-cast all buff spells available and then unsummon companions you don't need for the battles. Scripts are triggered during or right after cutscenes, through cutscene dialogs and scripts. \n\nThe following buffs are implemented, cast on all appropriate party members, complete with metamagics: SPELL_MIRROR_IMAGE, SPELL_SHIELD, SPELL_NIGHTSHIELD, SPELL_ENERGY_BUFFER, SPELL_SHADOW_SHIELD, SPELL_ELEMENTAL_SHIELD, SPELL_GLOBE_OF_INVULNERABILITY, SPELL_LESSER_SPELL_MANTLE (maximized here), SPELL_TORTOISE_SHELL, Spell Resistance, SPELL_FOUNDATION_OF_STONE, SPELL_REGENERATE, SPELL_MASS_DEATH_WARD, SPELL_SHIELD_OF_FAITH, SPELL_CONVICTION, SPELL_LIVING_UNDEATH, SPELL_STONE_BODY, SPELL_PROTECTION_FROM_ENERGY, SPELL_PRAYER, Recitation, SPELL_MIND_BLANK, SPELL_REDUCE_PERSON_MASS, SPELL_GREATER_HEROISM, SPELL_SUPERIOR_RESISTANCE, SPELL_GREATER_CATS_GRACE, SPELL_GREATER_EAGLE_SPLENDOR, SPELL_HASTE, SPELL_DISPLACEMENT, Mass Invisibility, SPELL_ETHEREALNESS, SPELL_JOYFUL_NOISE, Song of Heroism. The spells are cast instantaneously, but otherwise no cheating occurs - only cast if actually available and only if necessary metamagics is available (although metamagics is bugged for Arcane scholars of Candledeep when spells are cast instantaneously). The following party members are used to cast the spells: player character (wizardress), Sand, Qara, Elanee, Grobnar and Zhajave. The scripts require a great deal of individual adjustment, so can't release them for everybody, but modders are welcome to use them.\n\n----------------\n\nDeparture for KOS fortress:\n\nWhen the player character enters the Keep interior after the Siege and moves forward a little, Aldanon is supposed to talk to her, but the convo is never triggered, fixed.\n\nIf you tell Aldanon that you are not ready to depart yet, the door to the courtyard will be unlocked so that you can say your farewell to Deekin, hehe. Also jumping Ammon to the basement in case you need to speak Mephasm again.\n\nRestored some cut content in Aldanon's departure convo: He will now give the Tome of Iltkazar to Sand and he will now actually create a portal to Merdelain.\n\nUpdate Nov 2:\n\nReforming the Sword, Guardian Ruins:\n\nFixed the initial convo when you enter the area where you met the very first Shadow Reaver earlier in the game. Several conversation nodes may not trigger at all or convo may abruptly cut itself off.\n\nThe CON damage from the Mere poison is now applied every heartbeat tick (6 sec.) unless the player is already affected by it or immune to ability drain. So it's the same as during the The Circle quest in the Mere. Changed this, because there are some extremely clever players out there (I am not pointing my finger at anybody, lol), they will enter the area, get affected by poison drain, cast greater restoration on themselves and just ignore the effect from then on, because in vanilla game it was only applied when entering the area. Well, you may be clever, but I am cleverer, hehe. No more tricks!\n\nAlso fixed a problem where the CON damage would damage and possibly kill arcane spellcasters, this is not supposed to happen. CON drain will not drop below 4, neither in the Circle area, nor in West Harbor area.\n\nDestroyed the convo triggering trigger for the bridge if you've built the bridge. Convo won't trigger if the bridge is built, but problem is, the trigger will still \"talk\" to the player character, forcing the player to switch to the primary character and jumping player next to the trigger, which is extremely annoying, if you are currently controlling some other character, like Neeshka, cause there are some traps ahead. If you don't know what problem I am referring to - try approaching Kana at Crossroad Keep, exactly the same problem occurs every time you approach her, whether convo is triggered or not. A very bad solution by Obsidian, convo inititiation should never be direct, but should always be triggered through scripts that check for conditions. A minor bug, but extremely annoying.\n\nRetta was unhidden too early, which was extremely confusing to the player, because her son will run towards her, then just stop and do nothing for a couple of seconds and player doesn't know what the hell is going on. Actually, Retta is supposed to \"spawn\" during this pause, which makes sense now, fixed.\n\nWhen you kill the Retta-Shadow, she is obviously not supposed to drop 5 shadow residues, but just one, fixed.\n\nSome players out there are extremely clever, and unfortunately, Obsidian is not so clever, so if you give some of the Gith sword shards to companions you are not taking with you to West Harbor, you end up with both the Gith sword and the shards, cause the game can't remove shards that are currently in the possession of companions at Crossroad Keep. Weeell, fortunately, I am not so stupid, so here's a nasty surprise for you - I fixed this exploit. All companions that are currently not in the party are spawned far away so that they don't interfere with the cutscene and if they possess any shards, the game will remove them as well, so no shards for you after the sword is reforged, yeah, I know, I am evil and nasty!\n\nWhen the Reaver drops dead, all of his minions are supposed to drop dead as well, but it doesn't happen due to several bugs in Reaver's death script, which means Zhjave will initiate convo with the player while enemies are still around, fixed like a mio bugs in this script, all enemies will now properly drop dead once Reavi is killed.\n\n--------------------\n\nGeneric fix:\n\nFinally managed to fix a bug where enemies would attack ethereal party members. This usually happens after cutscenes, when enemies go hostile. Only happens with the new AI introduced in expansion packs. Now etherealness will behave exactly like invisibility - no attacks unless, of course, the enemy has True Seeing, like dragons or Erynyes creatures, in such a case etherealness is generally ignored (targeted spellcasting is not possible, but otherwise ignored). Nice, now you can cast etherealness on the entire party and when enemies go hostile, run away, rest and buff yourself for the fight. Try it out with the Reaver in West Harbor!\n\n-------------\n\nCallum-Reaver fight:\n\nFixed influence gain/loss with Nasher when talking to Nevalle before/after the fight.\n\nNo forcing stupid Ammon into my party! Disabled this crap before going to see Callum, however, Ammon will still spawn into party during the convo with the Reaver, cause he's supposed to say something. I removed him afterwards for myself, but won't trigger for you, cause several people complained about me removing their party members, well, then keep the loser in the party. Why anybody'd need him if you have Zhajve to cast the True name is beyond me...\n\nRemoved the soldier that talks to Nevalle, otherwise he would be standing there at the Keep entrance till the end of the game, for god's sake\n\nWhen you enter the area where Callum is fighting the Reaver, all creatures in the area except the Reaver may be positioned incorrectly, problem is, fighting takes place even if the player is not in the area and for some reason Obsidian doesn't realize that, so while you do your stuff at Crossroad Keep, Callum and the golems are fighting and fighting and moving around and then you finally enter the area, you can't even see them or they may end up at the same spot where you enter, which is not supposed to happen and is extremely weird. AI shouldn't even trigger across areas or if player is not in the area. Ok, so much work for me here, jumped everybody to their editor locations and immobilized Callum and his men so that they hold still for a second and stop running out of the cutscene.\n\nFixed the golems' SR, now fixed at 20 and won't reset itself any longer.\n\nDisabled automatic True Name casting, if player wants Zhajve/Ammon to cast it, they can do it manually, no need to force actions on players, Obsidian!\n\nFixed an extremely weird problem where the Reaver may fail to resurrect one of the golems. Beats me why this happens, so I re-wrote the entire resurrection code and the bug just went away.\n\nFixed a problem where the game gets confused and thinks that the player killed Callum, so the player actually get 5 XP when he drops dead. Funny, but gets annoying at some point, exactly the same problem occurs when the Reaver at Castle Never kills a guard (see my previous fixes).\n\nFixed camera movement when Nevalle approaches the player after the Reaver is dead, camera wasn't following Nevalle properly.\n\nNoticed, but didn't fix another bug, I am getting lazy, it seems, the Reaver drops one of the golem blades, read the weapon description, according to the description, one of the golems is supposed to drop it, not the Reaver, but whatever, it's a minor bug, so to hell with it.","Rating":6.17,"Votes":8,"Awards":[]},"344":{"Name":"Kill/Replace script","Author":"Dann Pigdon","Submitted":20100927,"Updated":20100929,"Category":"Placeable Item","Type":"Type - Placeables","Format":"Module and Code","ShowCode":"// Replaces bashed placeable with a broken placeable\n//\n// Set 'Item' string variable on bashable placeable\n// to the template of the replacement object\n//\n// Set 'Material' integer variable to 0, 1, 2 or 3\n// (wood, stone, cloth, glass). Defaults to wood.\n\nstring sTemplate = GetLocalString(OBJECT_SELF, \"Item\");\nint iMaterial = GetLocalInt(OBJECT_SELF,\"Material\");\n#include \"ginc_actions\"\n\nvoid main ()\n{\nlocation lLoc = GetLocation(OBJECT_SELF);\nstring sTag = GetTag(OBJECT_SELF);\nstring sSound;\nobject oPC = GetLastDamager(OBJECT_SELF);\n\nswitch(iMaterial)\n  {\n  case 0:\n  sSound = \"as_cv_woodbreak3\";\n  break;   \n  case 1:\n  sSound = \"c_stonegolembatt_03\";\n  break;   \n  case 2:\n  sSound = \"it_eq_fullcloth03\";\n  break;\n  case 3:\n  sSound = \"as_cv_glasbreak2\";\n  break;    \n  }\nAssignCommand(oPC,ClearAllActions(TRUE));\nAssignCommand(oPC,PlaySound(sSound));\n\neffect eDoorExplode = EffectNWN2SpecialEffectFile( \"fx_wooden_explosion_big\");\nApplyEffectToObject(DURATION_TYPE_INSTANT, eDoorExplode, OBJECT_SELF);\nAssignCommand(GetFirstPC(), DelayCommand(2.0,ActionCreateObject(OBJECT_TYPE_PLACEABLE,sTemplate,lLoc,FALSE,s\nTag+\"1\")));\nDestroyObject(OBJECT_SELF, 0.0);\n}\nSelect All Text | View Code in separate window","Patch":"1.01","NWN2Game":"All","Description":"Attach this script as an 'OnDeath' script to a bashable placeable.\nSet a string variable called 'Item' on the placeable, and give it the template of the broken version of the placeable.\nWhen you kill the placeable, it will be replaced with a broken version rather than just disappearing.\n\nSetting an integer variable called 'Material' on the bashable placeable will change the sound it makes (0=wood, 1=stone, 2=cloth, 3=glass). The default is wood.\n\nThe example module shows some of the placeables that also have broken versions. The replacement placeable will be static and non-clip, so make sure you place a walk mesh cutter around the bashable item (unless you\nwant to be able to walk through it). You could also replace objects with generic piles of broken stone/wood/litter instead of broken versions of a specific model.\n","Rating":10,"Votes":1,"Awards":[]},"345":{"Name":"Improved Frenzy","Author":"evertebrate","Submitted":20101006,"Updated":20101008,"Category":"Skill/Feats","Type":"Type - Combat","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:MotB","Description":"Improved Frenzy by evertebrate aka a1021\n\nUPDATE:\nFixed a bug, now the berserker should attack allies when he can't see any more enemies instead of just when there are no more enemies in the area.\nAlso Inspire Frenzy now gives +10% movement spedd, +10 strength with greater frenzy and 1d10 + 10 temporary hitpoints with deathless frenzy. I wanted to make Inspire Frenzy a kind of insane haste. :D\n\n--\n\nThis is an override version only. To install the changes you need to put the \"improvedfrenzy\" folder inside the archive into your override folder that is located in your \"My Documents\\Neverwinter Nights 2\" folder.\n\nThis will change Frenzy and Inspire Frenzy in the following way:\n\nFrenzy adds a +6 bonus to Strength (+10 with greater frenzy), imposes a -4 penalty to AC, and gives the Frenzied Berserker a single extra attack at their highest Base Attack Bonus. Each round of the frenzy, the frenzied berserker takes 2 points of damage. The effects last 3 + Constitution modifier rounds, after which the frenzied berserker is fatigued for 5 rounds.\nWhile in a frenzy the Frenzied Berserker loses all control and attacks the nearest Enemy. If all Enemies are dead, the Frenzied Berserker must make a will save (DC 20) or be forced to attack her allies.\nDeathless Frenzy makes the Berserker immune to instant death and stun effects and gives temporary hitpoints equal to 10 + 1d12 per class level + 1d12 per point of constitution modifier for the duration of the frenzy.\nA character with full 10 levels of Frenzied Berserker will no longer be fatigued at the end of a frenzy.\n\nInspire Frenzy will now add the frenzy effect automatically to all allies with at least a few levels of a high BAB class. (compares BAB to total levels) All other allies get a will save (DC 17) to avoid being frenzied. Inspire Frenzy has a fixed duration of 3 rounds. Frenzied allies do not lose control, but still take 2 damage per round and can't cast spells for the duration of the frenzy.\n\nNOTE: Ingame descriptions have not been changed.\n\nYou are free to reuse the scripts in any way you want.","Rating":"N/A","Awards":[]},"346":{"Name":"BashChest","Author":"Dann Pigdon","Submitted":20101028,"Updated":20101028,"Category":"Inventory Item","Type":"Type - Item Storage","Format":"Module and Code","ShowCode":"// Container OnDeath script to break fragile items when bashed\nvoid BreakItem(object oContainer, object oItem)\n{\nCreateItemOnObject(\"n2_it_brokenitem\", oContainer, 1,\"\", 0);\nDestroyObject(oItem,0.0,FALSE);\n}\n\nvoid main()\n{\nobject oContainer = OBJECT_SELF;\nif (!GetHasInventory(oContainer))\nreturn;\n\nobject oItem = GetFirstItemInInventory(oContainer);\n\twhile ( GetIsObjectValid(oItem) )\n\t{\n\t\tint iBaseItem = GetBaseItemType(oItem);\t\t\n\n        switch(iBaseItem) // Break fragile items\n\t\t{\n\t\tcase 19: // Amulet\n        BreakItem(oContainer, oItem);\n\t\tbreak;\n\t\tcase 81: // Grenade\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\t\n\t\tcase 39: // Heal Kit\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\n\t\tcase 64: // Trap Kit\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\t\t\n\t\tcase 44: // Magic Rod\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\t\n\t\tcase 46: // Magic Wand\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\t\n\t\tcase 49: // Potion\n        BreakItem(oContainer, oItem);\n\t\tbreak;\n\t\tcase 52: // Ring\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\t\t\t\n\t\tcase 54: // Scroll\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\n\t\tcase 75: // Spell Scroll\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\n\t\tcase 79: // Misc Thin\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\n\t\tcase 24: // Misc Small\n        BreakItem(oContainer, oItem);\n\t\tbreak;\t\t\t\t\n\t\t}\n\t\t\n\t\t// Belts, boots, cloaks, Misc Medium - 50% chance\n\t\tif (iBaseItem == 21 || iBaseItem == 26 || iBaseItem == 80 || iBaseItem == 20)\n\t\t{\n\t\tif (Random(2) == 1)\n\t\t   BreakItem(oContainer, oItem);\n\t\t}\t\t\n\t\toItem = GetNextItemInInventory(oContainer);\n\t}\n}Select All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"Locked container 'OnDeath' script to break fragile items when bashed open.\n\nUses the BASE_ITEM_TYPE_ code of each item in the containers inventory.\n\nAdd additional codes as required. Currently belts, boots, cloaks, and medium miscellaneous items have a 50% chance of being ruined. Anything not included in the list will survive unscathed (such as weapons or armour).","Rating":6.5,"Votes":1,"Awards":[]},"347":{"Name":"Jassperre's AI for NWN2","Author":"Jassperre (NWN2 version by Olblach)","Submitted":20101029,"Updated":20101029,"Category":"Creature AI","Type":"Type - Combat","Format":"Module and Code","Patch":"1.00","NWN2Game":"All","Description":"This is NWN1 Jassperre's AI compiled for NWN2. Not a single change or addition has been made except what was necessary to make it compile:\n- Renaming of Spells and Feats (For example Circle of healing into Mass cure light wounds)\n- Removal of obsolete contents (for example some missing auras).\n\nTwo modules are provided that let you play against various encounters (including yourself).\n\nOne module uses Jassperre's AI and the other the default AI.\n\nAn ERF is provided.\n\nThe base version used was AI 1.4 beta 3\n\n","Rating":10,"Votes":1,"Awards":[]},"348":{"Name":"Instanced Areas","Author":"Olblach","Submitted":20101111,"Updated":20101111,"Category":"Area","Type":"Type - Transitions","Format":"Code Only","ShowCode":"void SendPC(object oPC, object oDest, int party)\n{\n\tif (party)\n\t{\n\t\tJumpPartyToArea(oPC, oDest) ;\n\t}\n\telse\n\t{\n\t\tAssignCommand(oPC, JumpToObject(oDest)) ;\t\n\t}\n}\n\nvoid SendPartyToInstanceOf(object oPC, string wptag, int party=FALSE)\n{\n\tobject oTag = GetWaypointByTag(wptag) ;\n\tobject oArea = GetArea(oTag) ;\n\t\n\tobject oMemo = GetLocalObject(oPC, wptag + \"_instance\") ; \n\tif (GetIsObjectValid(oMemo))\n\t{\n\t\tSendPC(oPC, oMemo, party) ;\n\t\treturn ;\n\t}\n\tif (GetLocalObject(oArea, \"AREA_ORIG\") == OBJECT_INVALID)\n\t{\n\t\tSetLocalObject(oArea, \"AREA_ORIG\", oArea) ;\n\t}\n\telse\n\t{\n\t\toArea = GetLocalObject(oArea, \"AREA_ORIG\") ;\n\t}\n\t// oArea is the original area\n\tobject oNewArea = CreateInstancedAreaFromSource(oArea) ;\n\tif (GetIsObjectValid(oNewArea))\n\t{\n\t\tSetLocalObject(oNewArea, \"AREA_ORIG\", oArea) ;\n\t}\n\telse\n\t{\n\t\tPrintString(\"oNewArea:\" + wptag +\" is invalid!\") ;\n\t}\n\tint count = 0 ;\n\tint found = FALSE ;\n\tobject oNew = GetObjectByTag(wptag, count) ;\n\twhile (!found && GetIsObjectValid(oNew))\n\t{\n\t\tif (GetArea(oNew) == oNewArea)\n\t\t{\n\t\t\tfound = TRUE ;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcount++ ;\n\t\t\toNew = GetObjectByTag(wptag, count) ;\n\t\t}\n\t}\n\tif (found)\n\t{\n\t\tSetLocalObject(oPC, wptag + \"_instance\", oNew) ;\n\t\tSendPC(oPC, oNew, party) ;\n\t}\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"This is how you can send players to instanced areas (party or not).","Rating":10,"Votes":2,"Awards":[]},"349":{"Name":"Personal Impossibility Adjustment","Author":"kevL's et al.","Submitted":20101119,"Updated":20110801,"Category":"Spawning","Type":"Type - Combat","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"'ReadMe_pia_kL.txt'\nthe Personal Impossibility Adjustment (pia)\noriginally by Reeron & Trekari (Increased Challenge)\nenhanced by 3miLy_raNgeR (Difficulty Modifier)\nfurther modified by kevL's, 2010 November 14 (v.1)\nlatest version 2.3, 2011 June 1\n----\n\nI stand on the shoulders of giants.\nYou can see far from up here ..\n\nSome background: I became depressed on my first run-through of the Official Campaign when I realized that basically you can sit on your chair with your arms folded and win every battle (almost). Later, when I researched how many subterranean bugs were left in the game (nwn2) by Obsidian (thanks, Atari!) my eyes lit up excitedly as I found that there are community-built modifications to enhance the game's difficulty, the best of which I found was 3miLy_raNgeR's \"Difficulty Modifier\" (available here). That is heavily based on Reeron & Trekari's \"Increased Challenge\" (available here).\n\nTo the best of my understanding, however, each has its pros and cons: The Increased Challenge scales with the initial difficulty of opponents but has set, very limited enhancements for the monsters; the Difficulty Modifier introduced a very simple & convenient .2da file (difficulty.2da) that is only one row and can be edited quickly in any text or .2da editor. Seriously! But it seems it did not scale with the difficulty of your enemies. So I carefully went through the scripting, line by line, and reintroduced proportional scaling based on a 20 CR creature, as well as tweaking a number of parameters.\n\nThe result you have here is the Personal Impossibility Adjustment. I can't resist letting you know why I came up with the title. It all started on the second run-through of the OC, soon after I'd entered the Vale of Merdelain (The Gauntlet, on the final leg to the final battle with Black Garius and the King of Shadows). Play Testing of the PIA began ..\n\nNow, my playstyle involves micromanaging all Companions (they don't breathe without my say-so) and, as someone else aptly expressed it, \"a plethora of pauses\". Since my initial run of NWN2 was so easy battle-wise I took along all the Companions that I could on the second run - and really, this made things no easier (it can only get so easy ..). Plus I enjoyed the banter and not having to run back and forth with a different company, and perhaps missing some cool & groovy events & items along the way. So with my custom script in place I pump up the difficulty to roughly 500 per cent.\n\nAnd make my way through the Gauntlet. When I teleport through the black fog to the Doom Knights I hit pause and start shaking (my head), \"I'm not going to win this fight, I'm not going to win this battle\" - it's going over and over in my head. Well, suffice to say that I won .. but four of my twelve companions were lying face down on the floor shivering in cold sweat and splurting blood. I never thought I'd be happy to see them get back up with one hitpoint when the scrap was done (I'd previously attempted, without success, to introduce the SoZ death-system into the OC + MotB; I may try again .. perhaps with the Makeover edition). Yet I stubbornly refuse to lessen the difficulty settings.\n\nThen Black Garius summons the Balhog and surrounds me with an energy barrier - with that big blazing demon right in the middle of my group. And the ranger's made his life's ambition to chop Qara's head off. And Black Garius keeps instant-deathing poor Grobnar the minstrel. By now I'm literally shaking from the adrenaline in my seat! Zhaeve is running around with her Wand of Resurrection, Casivir can't touch the Balor, and only Khelgar goes toe to toe while Elanee casts chain-Heals, chain-Stoneskins, and whatever else she can pull out of her *deleted* on that ornery Dwarf.\n\nIt was the only, and I mean only time during NWN or NWN2 when I felt like I was actually facing the Balrog of Moria from the LotR - you know the one, that Gandalf and the Fellowship *ran away from* post haste. Both of these battles took a few hours RT each and unfortunately left me, as a person, shaking and utterly drained: hence, the Personal Impossibility Adjustment. I have since backed the settings off greatly, and the default that comes with this download is roughly 200% (you can't really measure this). Bear in mind that I micromanage and pause a lot, so you might want to back them off more. Or if you're really good at optimizing Character builds (which I'm not) .. heck, you decide. They're only defaults.\n\n----\n'difficulty.2da' Options (originally by 3miLy_raNgeR)\n\nHitpoint_Multiplier - this is the *Bonus* HP that creatures get. Note that it works slightly differently from the Difficulty Modifier, in that \"100\" now will double the creature's initial hitpoints. You can no longer lower hitpoints. (default, 109)\n\nEnhance_Weapon - Weapon Enhancement Bonus. This affects creatures that are wielding weapons (not natural weapons); it increases both attack and damage bonuses. Cannot be lowered. (default, 6)\n\nAB_Weapon - Weapon Attack Bonus. This affects the AB of creatures and NPCs. It also increases the damage delivered by natural weapons. Cannot be lowered. (default, 12)\n\nBONUS_AC - Enemy AC modifier. This one is peculiar. It used to increase the AC of Enhancement, Deflection, and Dodge ACs, effectively tripling the value. Now it increases only the Enhancement and Deflection ACs. Cannot be lessened. (default, 7)\n\nBONUS_ST - Enemy Saving Throw modifier. This deserves special attention. I've set the default to a negative value, firstly because I was sick & tired of never getting a Hold Monster to stick, and secondly because with all these melee increases I believe that magic users (Casters generally) will have a much tougher time taking down an enemy. Their spells deliver only so much damage, and monsters have their hitpoints arbitrarily doubled (more or less). See also the bonuses to Primary Abilities, which indeed also affect saving throws, below. Nota bene, Dragons & Outsiders are immune from ST adjustments (it was in the script and I thought, Cool leave it in). (default, -5)\n\nBONUS_STR\nto\nBONUS_CHA - Enemy Prime Ability modifiers. Cannot be lowered. Note that increases to Strength further increase attack and damage; increases to Constitution further increase hitpoints and also Fortitude Save; increases to Dexterity increase AB for enemies with Weapon Finesse wielding light weapons, AC if enemy armor permits, and Reflex Save; increases to Intelligence increase Save DC of enemy arcane casters; increases to Wisdom increase Save DC of most enemy divine casters, and Will Save; increases to Charisma increase Save DC of other enemy casters, including Warlocks and Bards. It also makes them look good .. (defaults, Str 9, Dex 7, Con 3, Int 5, Wis 5, Cha 3)\n\nBONUS_ITEM - Enemy gets a bonus magical ring. These are changed from the original rings that I believe Reeron introduced; I've turned them into +1 to +3 Rings of Resistance, just to spruce things up & add variety to the ST modifier. There's a 10% chance an enemy will get one: +1 up to CR 6, +2 up to CR 16, and +3 otherwise. Notice that these rings are not droppable, but should a good Rogue happen along .. you might swipe one. (default, 1)\n\nRANDOM_LOOT - This previously turned on and off cdaulepp's Random Loot Generator, but I'm currently using the TCC in MotB and since I don't like to spawn in crafting items with the console I thought I'd throw together a little loot-table for gems, OC-essences, & materials. \"0\" to turn it off, \"1\" for the pia_Loot tables, \"2\" for cdaulepp's Loot Generator, \"3\" for both). (default, 0)\n\nnb. Usage of cd's RLG requires it to be installed separately, and its onSpawn files - 'nw_c2_default9' .nss/.ncs - both be renamed 'nw_c2_default9_bk'. (cf. Compatibility section below. - tks Law)\n\nDIF_MOD - \"1\" turns the whole PIA on, \"0\" for off. (default, 1)\n\nDebug - Turns on and off Debug mode (not the console command, has nothing to do with that). \"1\" gives extensive readout on what the PIA is doing; \"0\" for quiet mode. Use \"1\" if you want to see full print-to-screen of the information that the PIA processes. You'll get a lot of data about the strengths and weaknesses of creatures and NPCs, which is cheating, but you'll also know that the PIA is installed and working correctly. Plus, this can help when fine-tuning the parameters in 'difficulty.2da', to your own playstyle & challenge-level. (default, 1)\n\n\nSpecial notes:\nThis package contains Reeron & Trekari's fix for the SR bug, on monster Creature Armor only (not the SR bug on PCs and Companions, which for see Kaedrin's PrC Pack). It examines their Hide and if SR exists, replaces it with a permanent effect. In addition, I've given all creatures SR equal to their HitDice (if greater) and included the ability to increase the SR of creatures via PC Adjustment. I believe magic doesn't work unless you believe it, so I've given all enemies a better chance to disbelieve it .. I know, i know ..\n\nImportant. Learn to make strategic SaveGames! With this modification you can easily spawn in monsters and enemy NPCs that are impossible to best. Only a SaveGame made *prior* to the spawn-in can save you, or console commands probably can also (haven't looked into it).\n\nPlease note that although the documentation and Debug readouts for the PIA say \"enemy\" much of the time, these boosts will affect any creature or NPC that spawns in via the NWN2 default OnSpawn script ('nw_c2_default9'). Neutrals and Friendlies will get the increases as well (but *not* PCs or Companions). [ nb. this may create issues with NPCs that spawn in and later become members of your Party Roster; feedback on how to check for this potential fault, is welcomed!! ] It also fires on the default Heartbeat script ('nw_c2_default1'), since many monsters in the OC and MotB and elsewhere are ScriptHidden - that is, they do not technically spawn, they simply appear when required - but since the onHeartbeat can take up to six seconds to fire, I think it best to try & catch the onSpawn events.\n\nSince the code checks for a LocalInteger on OBJECT_SELF before firing, this does not tax the game engine on Heartbeat. It basically says to itself, 'oh, that's done!' in about 1ms (probably less). That's 1.7(10^-4) of a round ..\n\n\nInstall:\nThis package contains\n\ndifficulty.2da- formatted .2da text file (one row, see Options above)\nnw_c2_default9.nss- uncompiled nwn2 script that fires onSpawn\nnw_c2_default9.ncs- compiled nwn2 script that fires onSpawn\nnw_c2_default1.nss- uncompiled nwn2 script that fires onHeartbeat\nnw_c2_default1.ncs- compiled nwn2 script that fires onHeartbeat\nkl_oshb_pia.nss- uncompiled nwn2 script that fires when called from the default onSpawn and default onHeartbeat scripts\nkl_oshb_pia.ncs- compiled nwn2 script that fires when called from the default onSpawn and default onHeartbeat scripts\nkl_pia_loot.nss- simply an uncompiled nwn2 treasure script that spawns in gems and OC-essences, when RANDOM_LOOT option is set to \"1\" (optional)\nkl_pia_loot.ncs- simply a compiled nwn2 treasure script that spawns in gems and OC-essences, when RANDOM_LOOT option is set to \"1\" (optional)\nReadMe_pia_kL.txt- yer lookin' at it buster.\n\nMake a subdirectory in your MyDocs override folder, call it 'PIA'. Place the above files there. Load Game. Go get 'em!\n\nUse of this package does *not* require starting a new game. Setting your preferences in 'difficulty.2da' *does* require that you're *not* currently playing the game (ie, close game before editing 'difficulty.2da'). Like 3miLy_raNgeR says, \"notepad works fine\", if you turn off Word Wrap.\n\n\nCompatibility:\nIf you use another modification that changes 'nw_c2_default9' and/or 'nw_c2_default1', search your Override directory structure for these 3rd-party files, make copies and back the originals up safely (nw_c2_default9_bk.nss/.ncs & nw_c2_default1_bk.nss/.ncs), then within the Toolset add the following code near the bottom of your copies:\n\n[code]\n/* begin kL_PIA */\nif (!GetLocalInt(OBJECT_SELF, \"piaDiffSet\"))\n{\nif (Get2DAString(\"difficulty\", \"DIFF_MOD\", 0) != \"0\")\n{\nif (Get2DAString(\"difficulty\", \"Debug\", 0) == \"1\") SendMessageToPC(GetFirstPC(FALSE), \"Running ( kl_oshb_pia ) on spawn/heartbeat\");\nExecuteScript(\"kl_oshb_pia\", OBJECT_SELF);\n}\n}\n/* end kL_PIA */\n[/code]\n\nSave & Compile. Rename the appropriate duplicate files in the 'PIA' folder to\n\nnw_c2_default9_bk.nss\nnw_c2_default9_bk.ncs\nnw_c2_default1_bk.nss\nnw_c2_default1_bk.ncs\n\nand you should be good to go. Notice that a similar procedure can be accomplished on 3rd party CC modules that do not use the default scripts.\n\nPlease note that I've included the pre-compiled script 'nw_c2_default1.nss/.ncs' (onHeartbeat) for TonyK's AI 2.2 in a subdirectory. Don't use it if you don't have TonyK's AI installed (ie, delete the subdirectory). If you do use that excellent AI, search for its onHeartbeat script 'nw_c2_default1.ncs' and rename to 'nw_c2_default1_bk.ncs', then overwrite the files in the PIA directory with the two files from the subdirectory. (Thanks)\n\nWhew. I never realized how much it takes to make something I've taken for granted public. Let me know how it works ... or not!\n\nHappy Hunting, I have some Nightwalkers, Death Knights, and Vampires Ancient to run away from .. \"aiee, Run away! Run away!!!\"\n\n----\nversion 2.1, 2011 May 18\n\nnew Difficulty.2da options:\n\nPC_Adj - PC Adjustment. This value has an inverse relationship and, unlike most of the PIA, *does not scale* with the level of NPCs/monsters. That is, the higher the value, the lower the bonus that NPCs/monsters get, and vice versa. It works like this: The value you set for PC_Adj represents how many levels your main character has to have, before NPCs/monsters get an extra +1 bonus to their Primary Abilities, their Armor Class, their Attack Bonus (weapon, & natural + natural damage), and their Saving Throws (half value) & Spell Resistance (double value). This bonus can be applied independently of other bonuses. I intend it for use two ways: to increase difficulty based on Character Level, and as a quick, simple, convenient way to increase difficulty, by editing only one value in the .2da file. Modest value: 6 (+1 bonus per 6 character levels) (default, 0)\n\nExamples: if PC_Adj is set to \"1\", NPCs/monsters will get a +1 bonus to the above mentioned statistics per level of the main PC (in other words, *do not* set it to 1 unless you want to scream, pull out your hair, run away in frustration and get an arrow for 300 pts in the back of your PC ;). If used at the modest value of \"6\", a 12th level PC will generate +2 bonuses accordingly, and if set to \"5\" a 15th level PC will generate +3 bonuses. Note, the resulting bonus gets rounded down. Default is set at \"0\", because I feel you should understand its inverse relationship before turning it on. Also, leave it turned off for multi-player games (it may not correctly interpret which PC to use for the adjustment when more than one PC is present, a tricky issue to determine when spawning critters).\n\nUsePrime - Use Primary Ability Map. This is complicated to describe; the Primary Ability bonus values that you set in the .2da file are now mapped to mean Primary Ability bonus 1, Primary Ability bonus 2, Primary Ability bonus 3 ... through Primary Ability bonus 6. The PIA attempts to determine (and rank) an NPC's/monster's Primary Abilities from highest to lowest; then the BONUS_STR value is mapped onto whatever Ability pops up as Primary Ability 1, BONUS_DEX onto Primary Ability 2, BONUS_CON onto Primary Ability 3 ... and BONUS_CHA onto Primary Ability 6. get it? 1 turns on Primary Ability Mapping (default, 0)\n\nThis means, strictly speaking, that if you turn on Primary Mapping you should order or rank the values of BONUS_(ability) from highest to lowest, in the following order: Strength, Dexterity, Constitution, Intelligence, Wisdom, Charisma. The Strength value (BONUS_STR) now becomes the bonus to whatever Primary Ability the designer has set as an NPC's/monster's highest Primary Ability, down through the ranks (so to speak) until the Charisma value (BONUS_CHA) now becomes the bonus to whatever Primary Ability the designer set as the NPC's/monster's lowest Primary Ability. Hence a lich, with a high set Intelligence, gets its biggest bonus to Intelligence, and a Rogue-like creature, with a high set Dexterity, gets its biggest bonus to Dexterity, and so on.\n\nneat, huh - but you'll notice I left the default value of BONUS_CON quite low, which meant only that I personally enjoy some vagaries in the application of Ability bonuses. You can set them however you like. Although, left this turned off as default, again to help ensure that you understand what it does before turning it on, which I earnestly recommend!!!\n\n\nNote: The .2da option Enhance_Weapon is not a bonus, it rather sets the Enhancement from scratch. Also, if a shield is equipped on the NPC/monster, it should get Shield Enhancement AC (at half value). These potential bonuses do not take effect if the enemy does not have its weapon(s)/shield equipped when the PIA runs. Also, if an NPC is designed to give you its equipped and enhanced weapon(s)/shield as a drop, you should then get the PIA-enchanted items for the Prize ...!\n\nAuxilliary notes: I don't think a bonus to Constitution actually increases HitPoints; this is properly handled by the Hitpoint_Multiplier, 'natch. It probably increases Fortitude Saves still, but all I am genuinely concerned with is just making the darn fights tuffer (ie, there are ambiguities in what this script actually does, but it certainly seems to get the job done). Originally I tried balancing the PIA with the OC + MotB, in some way. However, these new additions were made during a play of SoZ, so ... hey-whot!!\n\n\nAdded excitement: an upgrade to the optional Loot tables. This uses an advanced algorithm to calculate drops of gems, OC essences and crafting materials, based on the level of the PC and the critter (useful for OC-style crafting). You'll get lots of Malachite, but as your character level increases, so does the chance of Beljurils, King's Tears, Radiant essences, etc. The PIA is still compatible with cdaulepp's Random Loot Generator; in fact, if RANDOM_LOOT is set to \"3\" both loot tables should run (note you would need to install the RLG separately).\n\n- removed spellnode spawn (was very bothersome).\n- changed default Save penalty, BONUS_ST, from -6 to -5 (should help those poor monsters a bit).\n- changed defaults for Enhance_Weapon (from 5 to 7, see above) and AB_Weapon (from 10 to 9)\n- reconfigured Enhance_Weapon section to give bonuses to non-magical weapons & shields (did not do this before, if a weapon was non-enchanted it got no enhancement at all)\n- added parameter to 'difficulty.2da' ( PrimeMap ) to turn on or off Primary Ability aliasing: take Primary Ability integers and alias them to creature's most-to-least used Abilities (ie, ranked & re-mapped values, see above)\n- added parameter to 'difficulty.2da' ( PC_Adj ) to account for PC level (increases enemy Prime Abilities)\n- added PC_Adj bonus to AC, AB (weapon, & natural + natural damage), ST sections, in addition to Primary Ability section\n- adjusted ST bonus for PC_Adj to half value of other PC_Adj's (double value for Spell Resistance)\n- reformatted debug text as well as script itself\n- changed Spell Resistance to equal HitDice (if greater)\n\nTooltags for OC crafting:\nSmith Hammer - 'smithhammer'\nMortar and Pestle -'mortar'\neg, 'giveitem smithhammer'\n\n----\nversion 2.3, 2011 June 1\n\nnewer Difficulty.2da option:\n\nTuffSR - Toughen Spell Resistance. There are four possible settings: 0, use normal SR rules; 1, grant critters SR equal to their Hit Dice, if greater; 2, grant critters SR equal to double the calculation result of PC_Adj; 3, add both Hit Dice and PC Adjustment calculation for SR rule. All with Reeron's SR Fix on creature items. Note that the game itself does not do SR checks properly for lingering Area of Effect spells. (default, 1)\n\nAlso,\n- changed default Enhance_Weapon to \"6\" and AB_Weapon to \"12\"\n- changed Extraordinary to SupernaturalEffect() for Primary Abilities\n- adjusted gem-dropping probabilities for Pia_Loot (wip)\n- minor niceties in the code ..\n\n----\nNota bene: the Pia, with Debug & PC_Adj both set to \"0\" (zero), ought be multi-player compatible.\n\n7-Zip can be downloaded from here.","Rating":9.93,"Votes":9,"Awards":[]},"350":{"Name":"DISARM'd","Author":"kevL's","Submitted":20101128,"Updated":20130309,"Category":"Creature AI","Type":"Type - Banter","Format":"Code Only","ShowCode":"/* begin kL_DISARMd */\nobject oPC = GetModuleItemLostBy();\nif (GetIsInCombat(oPC)\n\t\t&& GetWeaponType(oItem) != WEAPON_TYPE_NONE\n\t\t&& GetFactionEqual(oPC, GetFirstPC()))\n{\n\tAssignCommand(oPC, SpeakString(\"<c=#CC0000>DISARM'd !</c>\"));\n\n\t// don't bother attempting retrieval if oItem is in an inventory:\n\tif (!GetIsObjectValid(GetItemPossessor(oItem)))\n\t{\n\t\tSendMessageToPC(oPC, \"<c=bisque>Attempting to retrieve weapon . . .</c>\");\n\t\t// integrated from Kaedrin's PrC Pack, v1.41.1; added Reflex Save\n\t\tint iDC = 30 - GetAbilityScore(oPC, ABILITY_DEXTERITY);\n\t\tif (iDC < 2) iDC = 2;\n\n\t\tif (ReflexSave(oPC, iDC))\n\t\t{\n\t\t\tDelayCommand(0.1f, AssignCommand(oPC, ClearAllActions(TRUE)));\n\t\t\tDelayCommand(0.2f, AssignCommand(oPC, ActionPickUpItem(oItem)));\n\t\t}\n\t}\n}\n/* end kL_DISARMd */Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"This is a small chunk of code that lets the Player know, in no uncertain terms, that he or she has been Disarmed. It floats \"DISARM'd !\" in big bright red letters above the PC's or Companion's head, as a SpeakString().\n\nDISARMd by kevL's\n2013 mar 9\n\nI like others got tired of wasting a few rounds punching with my fists (ianamonk) before noticing that my character had been Disarmed; or worse, actually leaving an area, only to scurry back feverishly hunting the ground for my precious \"Uber-favorite custom-crafted Sword of BBQ Ribs\". The only message that the default game gives is in plain white text above the disarmer's head and a *clunk* sound - both of which are easily lost with the sounds & messages of combat. This'll fix that!\n\nOn a rare occasion you might get an anomalous \"DISARM'd !\" when you purposely drop or barter a weapon .. but considering the alternative it's not that much a concern. It shouldn't show up outside of combat. Any comments, ideas, or suggestions that could be implemented to improve this are welcome!\n\n\nInstallation:\nThis piece of code modifies 'x2_mod_def_unaqu' - which is called from the default OnUnacquireItem script, 'k_mod_unacquire'. Search your MyDocs->Override directories for 'x2_mod_def_unaqu' ( esp. TonyK's AI ) or copy it from the Campaign folder for MotB. Backup the script and insert the codeblock appropriately. Compile!\n\nNotes:\nIt checks if you're in combat, and then if a member of your party unacquires a weapon, the player ought get a red \"DISARM'd !\" message scrolling above their toon's head. Then if a ReflexDC is made against Dexterity, and the item is left lying on the ground, the character will be cleared of Actions and pick up the weapon.\n\n\nMay none of your Disarms go noticed","Rating":7.88,"Votes":2,"Awards":[]},"351":{"Name":"AllowPartyToTalkInOC","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20101129,"Updated":20101130,"Category":"Spawning","Type":"Type - Other","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2","Description":"The included script can be used to override the standard spawn script in the NWN2 OC, allowing spawned creatures to talk any member of the player's party rather than just the main PC.\n\nUnzip and follow the instructions in the included text file to install.\n\nIf you are already using the NWN2 OC Makeover SoZ Edition then you do not need this because this functionality is included with the makeover.","Rating":10,"Votes":1,"Awards":[]},"352":{"Name":"Bagel's Portable Props and Placeables","Author":"Amphibious Bagel","Submitted":20101211,"Updated":20101228,"Category":"Placeable Item","Type":"Type - Other","Format":"Module and Code","Patch":"1.00","NWN2Game":"All","Description":"These scripts allow module builders to create portable placeables for DMs and players to use.\n\nTo install, just import the BagelPortableProps.erf file into your module. The ERF includes five small scripts and blueprints for all of the placeables shown in the test module. These items are listed in the \"Items\" and \"Placeables\" category under the classifications \"* Portable Props\" and \"* Portable Containers\" respectively.\n\n\nFeatures:\n- DMs can rename the item or the placeable, and the name will persist through exchanges.\n- Placeables/items with inventory are supported; as a warning, these are not guaranteed exploit-free.\n- Placeables can have multiple VFX attached. (Such as multi-flame candelabras.)\n\n\n\nTo make a new prop:\nMake a new placeable blueprint with a unique Resource Reference name and set the following options on it to:\n\nStatic: False\nPlot: True (Recommended, so players don't destroy it.)\nUsable: True\nWalkable: True (Recommended, to prevent players from boxing themselves in.)\n\nAnd create a new String Variable on the placeable called \"PropRes\" with the value set as the Resource Reference name of the item that the placeable becomes when used.\n\nNext, create a new item blueprint with the same Resource Reference name as the one that you listed for the placeable's \"PropRes\" value. In the item properties, add the power \"Cast Spell: Activate Item (Touch) [- Unlimited Uses]\" to it (or one of the other unique/on activate powers that will suit your purposes). Then add a new String Variable to it called \"PropRes\" with the value set to the Resource Reference name of the corresponding placeable.\n\n\nFor props with inventory:\nPut the \"plc_pcprop_pickup\" script in the \"On Close\" handler for it, then make sure that both it and it's corresponding item blueprint are marked as True (or checked) to have inventory.\n\n\nFor props with \"off center\" or multiple VFX attached:\nOpen the toolset and put the prop placeable down without rotating it in any way. Write down the \"Position No Snap\" numbers. (These numbers represent the X,Y,Z coordinate position of the placeable on the map.)\n\nNext, place any VFX that you would like to spawn with the placeable (as an example, put candle flames on the candles). Be as accurate as possible, then write down their coordinates too.\n\nNow, go to the Item Blueprint for your prop and add the following variable for each new VFX:\nVFXNAME#: Make this a string variable. The # at the end needs to be in order, so always start with the number 1 for your first VFX, 2 for the second, etc. The value of the variable should be the Resource Name for the VFX.\nVFXX#: Make this a floating point variable. The # should be the number of the associated VFX. The value of the variable should be the X value you get by subtracting the VFX X-coordinate from placeable X-coordinate. (For values that ultimately equal 0, you do not need to enter a variable.)\nVFXY#: Same as above, but for the Y value.\nVFXZ#: Same as above, but for the Z value.\n\n\nFor destructible placeables:\nIf your Placeable Blueprint is not set to \"Plot\", attach the \"plc_pcprop_death\" script to the \"On Death\" handler for it. This will make sure that any attached VFX are removed when the placeable is destroyed.\n\n\n\nDisclaimer and other information:\nThis very thing has been done on multiple PWs in various forms, so the idea is not an original one, though these scripts are. I do not guarantee that these are exploit-free, so if there are scripters/bug testers out there with constructive feedback, I'd love to hear it!\n\nBlueprints for various prop collections will be added as I have time to make them. I hope this eases some of the burden on builders.\n\nCheers!","Rating":10,"Votes":2,"Awards":[]},"353":{"Name":"PowerTurn","Author":"kevL's (Obsidian/Bioware, Kaedrin)","Submitted":20101211,"Updated":20101212,"Category":"Skill/Feats","Type":"Type - Manipulation","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"PowerTurn, v1\nkevL's (Obsidian/Bioware, Kaedrin)\n2010 December 10\n\nBack in the good ol' days you could count on your Cleric to turn the tide of battle against undead critters. You know how those skeletons and zombies like to swarm! Well, the PowerTurn is an attempt to bring back the glory days of NWN, when a good Cleric was an essential ingredient of every anti-Evil Safari.\n\n\nChanges to Turn Undead ability:\n- prints \"Rebuk'd\" above the turned creature(s) in a dusky orange color (so now you know!).\n- does both Rebuke and Damage (bypassing Kaedrin's innovative PrC switch). was, one or the other\n- gives less damage than K's original script does: d4(nTurnLevel - 2). was, d6(nTurnLevel)\n- increases amount of TotalHD affected to (d8() * d2() * nTurnLevel / 4) + ChaMod + nTurnLevel - 2 (gives much greater variation, and low levels have a really tuff time while high levels can truly shine!). was, d6(2) + ChaMod + nTurnLevel\n- Rebuke effect lasts less duration: only 8 rounds. was, 10 rounds\n- decreases MaxHD of Turn by 2 (but has bonus for high LoreRank though).\n- Lore bonus (affects only MaxHD & TotalHD & SaveDC of Turn, not destroy-ability or Damage): increases effective Level by 1 per 10 LoreRanks.\n- reduced TurnCheck by 2; makes it harder to achieve MaxHD (bonuses for high Charisma & SunDomain remain).\n- increases effectiveness of SunDomain: additional d8 HD turned, and +d6 to TurnCheck (makes it easier to achieve MaxHD). was d6 & d4\n- reduces area of effect by 20%.\n- accrued penalties are no longer dispellable (ExtraordinaryEffect).\n- changed WillSave to FortitudeSave vs. Damage effect.\n- fixes Saving Throw routine (half damage if successful FortitudeSave).\n- rewrote & re-implemented function PrintTurningDamage().\n- bit nicer formatting of FeedBack messages (note, Failed message will be in English, for those with non-English Dialog.TLK file).\n- streamlined code ( .. what a mess .. )\n\n(and if you don't believe me, here's what one of the Obsidian coders had to say about it:\n // had to change this WACK system to support the\n.. Lol).\n\nThe abilities of various Domain powers (apart from Sun, above), as well as the Empowered, Improved, and Extra Turning feats remain as-is.\n\n\nInstallation:\nSimply create a folder in your MyDocs->Override, called \"PowerTurn\". Place these two files there:\n\nnw_s2_turndead.NSS\nnw_s2_turndead.NCS\n\n(contained in 7-Zip download)\n\n\nNote you should not need Kaedrin's PrC Pack to use this effectively; the proprietary switches have been remarked, and the remaining constants should either be ignored or utilized depending on whether or not you have that PrC Pack already installed. In any case, you should search your Overrides for any other instances of 'nw_s2_turndead' (besides PowerTurn) and rename them as backup versions. Tks.\n\nRecommended for use with the PIA. Care has been taken, though, to retain balance with the standard game; the major changes are an increase in total HD affected, and the inflection of Damage. Characters of very low level will have an extremely tough time and may need to boost their Charisma to climb out of negative values - due to their lack of faith and their Deity's lack of trust ..\n\nps. If you are using Kaedrin's PrC Pack, the (two) switches in cmi_options.2da for \"AlternateTurnUndead\" (only) will not work with PowerTurn. The rest ought work fine ..\n\n\nScreenshots:\n1st Pic - Kaelyn Turning at Level 27 (22 Cleric, 5 Master of Radiance), with 24 Charisma (+7 modifier); a magnificent turn!\n2nd Pic - Death Lord\n3rd Pic - Kaelyn Turning at Level 23 (21 Cleric, 2 Master of Radiance), with 24 Charisma (+7 modifier); a poor turn.\n4th Pic - Kaelyn Turning as in 3rd Pic; low MaxHD, high TotalHD.\n5th Pic - Dorin Amon at Level 3 Cleric, with Improved Turning (EL 4) and 12 Charisma (+1 modifier); please note that this is a cheatshot, it was taken when I was testing the function for extra turn resistance, that some Undead have. Hence it shows Dorin rebuking a Ghast and destroying a Ghoul - he actually would be very lucky to get a rebuke on the Ghoul.\n\nAs always, comments & insights appreciated.\n\nLoading Area ...","Rating":10,"Votes":2,"Awards":[]},"354":{"Name":"Combat Mode Fixes for Puppet Mode","Author":"_MAU_","Submitted":20101220,"Updated":20111227,"Category":"Creature AI","Type":"Type - Combat","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Updated 12/12/11 for Kaedrin's v1.41.4 compatibility.\n\nThe purpose of this bunch of scripts is to fix the way your char will sometimes switch off their combat mode (rapid shot etc.) when you're not directly controlling them. It works ONLY in puppet mode so if you play with the AI on you have no reason to download this. By using The Fred's awesome Scriptable Party mod you can assign a specific script for every character, who will then attempt to turn on a mode at the start of every round as instructed in my scripts. The only (known) unfortunate side-effect is that as long as the character has that mode assigned, they will keep turning it on every round even if you switched it off unless you directly control the character in which case the script is not run at all. UPDATE: As of version 1.02 you can toggle modes on and off, see readme for details/issues.\n\nThe only combat mode not included is parry because it sucks and I imagine setting it on automatically all the time would do more harm than good.\n\n---Installation---\n- Download and install \"The Fred's Scriptable Party\" - Link \n- Dump my files into the override folder in either your installation directory or at My Documents/Neverwinter Nights 2/override.\n\n---Usage in Game---\n- Open the character screen behavior tab and hit the \"change\" button right on the top \n- If the button isn't there then another mod you're using has a conflicting characterscreen.xml file (like Tony K's AI). You can either remove that file from the other mod, or simply type the following to bring up the window that lets you assign the script:\n##debugmode 1\n##rs gui_fredai_change\n##debugmode 0\n-Type in the name of one of the following scripts to assign a combat mode for the char:\ndefault_puppet// Empty script. If simply entering nothing into the field doesn't return things to normal this should do it\nforce_rs// Rapid Shot\nforce_pa// Power Attack\nforce_ipa// Improved Power Attack\nforce_ce// Combat Expertise\nforce_ice// Improved Combat Expertise\nforce_fob // Flurry \nforce_dc // Defensive Casting\nforce_rs_and_pa// Rapid Shot when using ranged, Power Attack when using melee\nforce_rs_and_ipa// You can guess the rest I'm sure\nforce_rs_and_ce\nforce_rs_and_ice\nforce_rs_and_fob\n\n---Compatibility---\nIf you're using Tony K's AI you'll have to delete the file called \"gb_comp_combat.ncs\" from his pack. This is the only core script being modified so it's what you should check for in other mods as well. I play tested briefly with this change and everything seemed to go fine. If enemies are doing something weird after you install this then removing Tony K's pack completely is worth a try. The script in question should not have anything major stored in it (the core version basically just instructs creatures to run their AI script again every round) so I doubt there will be any issues, but without knowing what Tony K has modified in it I can't say for sure.\n\n---Thanks To---\n\n- The Fred for making his Scriptable Party mod and helping me with these scripts. His mod is doing most of the work here, my script simply lets it run in puppet mode.\n- The helpful community members at the NWN2 forums for answering my stupid questions:\nMasterChanger, _Knightmare_, painofdungeoneternal, kevL\n\n-------- Updates in v1.01 ------------\n- Flurry of Blows now supported\n\n- Added compatibility for the Risen Hero campaign (v 1.50). Install the campaign first, then replace the Risen_Hero_2DA.hak with my version. This removes the same file that causes a conflict with Tony K's (as Risen Hero has Tony K's built in).\n\n-------- Updates in v1.02 ------------\n- Defensive Casting now supported\n- New optional feat system that makes it possible to toggle modes on and off.\n\n-------- Updates in v1.03 ------------\n-Manyshot toggle now works for rangers","Rating":"N/A","Awards":[]},"355":{"Name":"Out of Date","Author":"Out of Date","Submitted":20101228,"Updated":20110928,"Category":"Scripting routines","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Out of Date","Rating":10,"Votes":3,"Awards":[]},"357":{"Name":"Out of Date","Author":"Out of Date","Submitted":20101228,"Updated":20110928,"Category":"Scripting routines","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Out of Date","Rating":10,"Votes":3,"Awards":[]},"358":{"Name":"Out of Date","Author":"Out of Date","Submitted":20101228,"Updated":20110928,"Category":"Scripting routines","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Out of Date","Rating":10,"Votes":4,"Awards":[]},"359":{"Name":"Ultima Return Unified System","Author":"Jaakko Kuusela and Daniel G. Haddad","Submitted":20110126,"Updated":20110126,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a public beta release of Team Serpent's Unified System. The system contains all the \nsubsystems we have made during the project's first year. This is intended to be as an aid\nfor people doing Ultima style adventures on NWN2 platform.\n\nThe features of the system include:\n\n8 level experience system\nCustom party system\nCustom Death & Injury system\nStealing / Prison system\n8 level spell system based on mana and reagents\nUltima style stat system\nSome custom combat mechanics\nUltima style resting system\nShopping and money exchange system\nEncumberance system\nTraining points based skill training\nCustom skill system\nHarvesting system\nFood system\nHit/Mana regeneration system\nUltima style poison system\nUltima style virtue based character creation\nUltima style character classes\nWeapon/Armor condition system\n\n\nIncluded in the release files is a pdf document that explains all the systems and their \nimplementation. It also contains installing instructions and a short guide to the test\nmodule.","Rating":10,"Votes":3,"Awards":[]},"360":{"Name":"Ultima Return Food System v2.0","Author":"Krom","Submitted":20110128,"Updated":20110128,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is UR food system v2.0, which is part of the Ultima Return project (www.ultima-return.com).\n\nIt is a small food system that provides a food counter that steadily decreases\nas a function of time. By checking the value of the counter you can determine\nhow starved the character is. The counter can be retrieved by\n\nGetLocalFloat(oPC, \"food_counter\")\n\nThe system supports companions and each companion has an own food counter.\n\nWhen a character eats a food item, the counter is raised by the item's food value,\nwhich can be specified as a variable.\n\nWhen character is starved, he gets a penalty to each stat. The penalty gets worse as the \ncounter lowers.\n\nThe system also defines the following variables, which can be used with other systems:\n\nreg_modifier, this tells how much hit regen is affected\n\nmana_reg_modifier, this tells how much mana regen is affected\n\nrest_modifier, this tells how much resting is affected by starvation\n\nfood_modifier, the food consumption rate (default 1.0)\n\nThe following scripts should be set in module properties:\n\nmod_heartbeat: Module heartbeat script\nur_setup_food: On PC Loaded script\n","Rating":10,"Votes":3,"Awards":[]},"361":{"Name":"Yellow Mold (for NWN2)","Author":"The Fred","Submitted":20110205,"Updated":20110205,"Category":"Placeable Item","Type":"Type - Traps (Subtype - Other)","Format":"Module Only","Patch":"1.23","NWN2Game":"NWN2","Description":"An NWN2 version of my Yellow Mold object. Yellow Mold is a simple, trap-like encounter from PnP D&D, which releases poisonous spores when disturbed.\n\nThis mold can be spotted with a DC16 Survival check (granting 25 XP) and inflicts a DC15 (I think) poison. These values can easily be edited by making minor modifications to the scripts, however.\n\nThis system works in almost every way like the orginal NWN1 version, but uses an NWN2 VFX, a Survival check, and takes into account placeable scaling (when spotted, the static placeable is replaced with a non-static one).","Rating":9.75,"Votes":3,"Awards":[]},"362":{"Name":"Ultima  Return Mana / Reagents System","Author":"Krom","Submitted":20110208,"Updated":20110208,"Category":"Other","Type":"Type - Magic","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a separate release of Team Serpent's magic system included in the Unified System. This implements mana and reagents based spellcasting using the original spells of NWN2. \n\nInstructions and detailed information for this release can be found in the included pdf documentation.","Rating":10,"Votes":2,"Awards":[]},"363":{"Name":"SoZ Crafting Plus System","Author":"Kaldor Silverwand / Brendan Bellina","Submitted":20110210,"Updated":20121012,"Category":"Scripting routines","Type":"Type - Trade Skill and Item Creation","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"The SoZ Crafting Plus System was created by the author when developing the King's Festival Campaign and has been used with the OC Makeover SoZ Edition and the MotB Makeover SoZ Edition.\n\nThis guide is primarily intended for builders experienced with modifying scripts and who are interested in having SoZ style crafting in their own campaigns.\n\nThe SoZ Crafting Plus system is an enhanced version of the Neverwinter Nights 2 recipe-based crafting system introduced with the Storm of Zehir expansion. SoZ Crafting Plus does not include the trading system also introduced in Storm of Zehir, which shares dependency on the same core scripts.\n\nThe SoZ Crafting Plus system uses recipe books and recipes to allow party members to craft and enchant items. This functionality does not interfere with the crafting systems introduced in the NWN2 Official Campaign and Mask of the Betrayer expansions. It is possible to have all three systems implemented in the same campaign.\n\nIn addition to addressing many of the bugs and limitations in standard SoZ crafting, the SoZ Crafting Plus system allows a modder to easily create custom recipes without the need for modifying 2DA files. This will allow modders to release recipe packs that will be fully compatible with one another without requiring 2da merging.\n\nAlso included are stores that contain the crafting components required for the standard SoZ recipes and sample scripts demonstrating how to easily integrate these stores into your campaign.\n\n5/29/11 update made to correct a bug in the crafting kinc_bb_crafting include file (and k_mod_activate) that prevented recipes from working if they had no spell requirements.\n\n11/06/11 patch (20111106) - This corrects the blueprints for crafted poison arrows and mild poison arrows.\n\nPatch 2012-04-13:\n\nThe Warlock IMBUE ITEM feat can be used to meet the spell requirements of a crafting if the Warlock has the feat and has a Use Magic Device skill greater than or equal to the Innate level of the spell plus 15 for arcane spells or plus 25 for divine spells. So if the required spell is an arcane spell with an Innate level of 7 then the Warlock must has UMD of at least 22. It it was a divine spell with an Innate level of 7 then the UMD must be at least 32. (Note: This is different than the IMBUE ITEM fix that Obsidian made specifically for SoZ in patch 1.23, which only added a check for the feat ignoring UMD.) A spell will not be consumed if a Warlock in the party meets the requirements.\n\nFor enchantments that requires a minimum spell caster level (in SoZ crafting only enchantments ever check spell caster level) the minumum spell caster level is calculated based on the classes and will include the adjustment of up to +4 for the Practiced Spellcaster Feat. So, for example, a Fighter/Wizard with levels 4/6 and the Practiced Spellcaster Wizard feat would meet a requirement for a minimum spell caster level of 10. In unmodified SoZ and prior to this patch to SoZCraftingPlus the spell caster level was derived by checking each party member to see what the spell level was of the spell they had most recently cast.\n\nPatch 2012-10-12:\n\nModification to isMageBench, isAlchBench, and isSmithBench functions to allow recipes to specify benches with a broader variety of tags. Note that if a bench is required then the tag has to either be a match for the one specified in the recipe or it has to have one of the standard nx2 or PLC tags used in the OC, MotB, and SoZ (see function CheckPlaceablePrereq())\nDo not allow enchanting on unidentified items\nCheckEnchantmentNumber function no longer counts Light, VFX, use limitation, inherent material bonuses, and penalizing properties against the maximum allowed properties on an item (this relies on functions in the ginc_item.nss include file)\nDo not count one property of masterwork items. (items whose tag ends in _mast)\nAlways allow enchanting of properties that do not count against property count (such as Light and VFX)\nEpic casters (> 20 levels) can add 4 enhancements to an item rather than only 3\n*** Credit to Marc Allard and The Complete Craftsman mod by ChainsawXIV for inspiring the CheckEnchantmentNumber enhancements\n\n","Rating":10,"Votes":1,"Awards":[]},"364":{"Name":"Deekin Keep Dialog","Author":"kevL's","Submitted":20110210,"Updated":20110219,"Category":"Conversation","Type":"Type - Merchant","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2","Description":"2011, February 10\nDeekin Keep Dialog\nby kevL's\n\nIn the OC at Crossroad Keep, the merchant Deekin's dialog is, how shall I say, rather buggy. The inspiration for this comes from clalima's Deekin Inventory (Dialog) Fix - and further investigation relegated a more comprehensive dialog to a necessity. Many hidden nodes seemed left untapped, conditional scripts were left as actions, inventory prices going up instead of down, etc. If you're having the common problem of Deekin not even showing his store, this file 21_deekin.DLG might fix it, but it really makes no claim to do that; instead, the Deekin Keep Dialog is an attempt to bring out more of the Deek's personality and, incidentally, Grobnar's as well.\n\nInstallation: Drop the file 21_deekin.DLG into your MyDocs->Override folder. Search your overrides for other file(s) of the same name and if they exist, rename them as back-up versions. You should be able to install / uninstall the file (to uninstall, simply move it out of your override or delete it) at any time prior to or during the OC. It shouldn't cause too much of a muck in any case :)\n\nupdate v1.1 - 13 Feb. fixed references to Dialog.tlk, for non-English adventurers.\n\nupdate v1.2 - 19 Feb. changed Wenderkazoo easter egg to plain ol' Grobnar chuckle.","Rating":9.88,"Votes":2,"Awards":[]},"365":{"Name":"Ultima Return Equipment Condition System","Author":"Krom","Submitted":20110213,"Updated":20110213,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a standalone release of the equipment condition system included in the Ultima Game System by Team Serpent. It implements conditions for weapons and armor. The armor/shield condition decreases when player gets hit by an enemy. The weapon condition decreases when player successfully damages an enemy. The conditions also decrease slowly as a function of time due to wear and tear.\n\nWeapons and armor can be repaired by using a repair workbench. When an item is placed into workbench's inventory a repair attempt is made. If it succeeds the condition of item is raised by one class. There is a 5% chance that repair fails, which causes the item to get damaged even more. Also there is 1% chance that repair attempt fails critically, which causes the item to get permanently broken. Permanently broken items cannot be repaired.","Rating":10,"Votes":2,"Awards":[]},"366":{"Name":"Ultima Return Skill & Stats Training System","Author":"Krom","Submitted":20110217,"Updated":20110217,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a standalone release of Team Serpent's training points system. The idea is that when leveling up you no more get skills or stats. Instead you get 10 training points, which you can then use with various types of trainers to train skills and stats. Each trainer can have any selection of skills or stats that can be trained. Training one rank of skill costs one training point and training one point of stat costs 5 points. The amount of training points left is displayed on the character screen GUI below the hit points counter.","Rating":9.5,"Votes":2,"Awards":[]},"367":{"Name":"Ultima Return Harvesting System","Author":"Krom","Submitted":20110217,"Updated":20110217,"Category":"Other","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This system implements harvestable items to the NWN2 game. Any placeable can be set to work with the system. You can specify which items grow inside the harvestable and how long it takes for them to grow. There is also a daily limit set for the area that limits the number of items that can be collected during one day.\n\nThe second form of harvesting that is implemented is overland hidden items. This system depends on the Search skill of the character. If Search skill is high enough then there is a chance that character will find a hidden item on the overland map. After the item has been picked up and enough time passes a new hidden item will be grown. On overland map the areas where items grow are defined by trigger polygons. Each trigger polygon can have its own daily harvesting limit, which prevents new items from growing if the limit is exceeded.","Rating":8.63,"Votes":2,"Awards":[]},"368":{"Name":"Ultima Return Poison System","Author":"Krom","Submitted":20110218,"Updated":20110218,"Category":"Other","Type":"Type - Other","Format":"Module Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"When I started working on the Ultima Return project I quickly noticed that the original poison system of NWN2 isn't to my liking. I like more a traditional poison system where poison causes physical damage instead of reducing stats and such. So I developed an Ultima style poison system, where hit points get reduced at regular intervals when the character is poisoned.\n\nThe system includes two types of poisoning. The first is poisoning a party member and the second is poisoning a monster. Party members can get poisoned if a poisonous monster successfully hits them. The strength of the poison can be defined and it affects the damage the poison causes. Monsters can get poisoned by casting a poisoning spell on them. When monster is poisoned it takes damage on every combat round.","Rating":10,"Votes":1,"Awards":[]},"369":{"Name":"Simple Day Night Cycle Lighting System","Author":"Vanes","Submitted":20110303,"Updated":20110304,"Category":"Entire Module/PW systems","Type":"Type - Lighting","Format":"Module and Code","ShowCode":"/*---------------------------------\n  --   DayNight Cycle Lighting   --\n  ---------------------------------\n\t\t\n  Created By: Vanes from irc.nwn2source.net #NWN2CR\n\n  Usage: \n  \n  1.  Include this script anywhere, most preferably to an area event script and call it whenever you want by using\n      DoAreaDayNightLighting(oArea); where oArea is the Area Object.\n\t  It will change the lighting for a single area. It will only change anything once for each cycle on an area.\n\t\t \n  2.  Place waypoints with the tag specified below (DAYNIGHT_LIGHT_WP) where-ever you want in the area.\n  \n  3a. Create lights as blueprints for all the cycles and edit the waypoints to have variables named:\n      DAWN,DAY,DUSK,MOONRISE,NIGHT,MOONSET (as defined below) to point to the resrefs of these lights.\n\t \n\t  Example: variable named \"Sunrise\" with value \"mylight1\", \"Moonrise\" with value \"mylight7\"\n\t \n  3b. Instead of doing that, just use a naming convention for your light resrefs where you have\n      sets of lights with \"_\" + DAWN/DAY/DUSK/MOONRISE/NIGHT/MOONSET appended to them.\n\t \n\t  Example: \"mylight_sunrise\", \"mylight_daytime\", \"mylight_sunset\" etc.\n\t \n\t  To use these lights instead of the ones in the variables, you must have the variable \"USE_NEAR_LIGHT\" = 1\n\t  on the waypoints and have one of these lights near the waypoint (within 2m). \n\t  \t\t \t\t\n  4.  It should work now. Have fun! :)\n\t  \n*/\n\n\n\n\n\n//Configuration:\n\n//Debug on/off\nconst int DEBUG_DAYNIGHTLIGHTS = FALSE;\n\n//The object with this tag holds the information about the lights\n//If not valid, will use the area instead.\n//Only place one of these objects in the module.\nconst string LIGHT_MANAGER = \"LIGHT_MANAGER\";\n\n//This is the tag used for all the waypoints that need lights that change\n//depending on the DayNight Cycle.\nconst string DAYNIGHT_LIGHT_WP = \"wp_daynight_light\";\n\nconst string DAWN = \"Sunrise\";\nconst string DAY = \"Daytime\";\nconst string DUSK = \"Sunset\";\nconst string MOONRISE = \"Moonrise\";\nconst string NIGHT = \"Nighttime\";\nconst string MOONSET = \"Moonset\";\n\n//This is the height of lights compared to the WPs. Not used if USE_NEAR_LIGHT = 1\nconst float LIGHT_DEFAULT_HEIGHT = 2.5f;\n\n//This is the distance that lights can be from the WPs if USE_NEAR_LIGHT = 1\nconst float LIGHT_DEFAULT_DISTANCE = 2.5f;\n\n\n//Methods:\n\n//This returns the current DayNight Cycle as a string\nstring GetCurrentDayNightCycle();\n//This replaces just one light at a waypoint with its proper counter-part for the cycle.\nvoid ReplaceLight(object oWP, string sCycle);\n//This replaced all the Lights in the area that have a specific tag to their right counter-parts for\n//the current DayNight Cycle.\nvoid ReplaceDayNightLightObjects(object oArea, string sCycle);\n//Just basic debug info\nvoid DebugS(string s);\n//This only investigates if the object is too far to the X/Y directions\nint GetIsNear(object o1, object o2);\n\n\n\n\n\n//This is the main script\nvoid DoAreaDayNightLighting(object oArea)\n{\nobject oLightManager = GetObjectByTag(LIGHT_MANAGER);\nif (oLightManager==OBJECT_INVALID) oLightManager = oArea;\n\nstring sLastCycle = GetLocalString(oLightManager,\"LCYCLE_\" + GetResRef(oArea));\nstring sCurCycle = GetCurrentDayNightCycle();\n\nDebugS(\"Current Cycle: \"+sCurCycle + \", Previous Cycle: \"+sLastCycle);\n\n//The cycle hasn't changed..so don't do anything\nif (sCurCycle == sLastCycle) return;\n\n//This does all the heavy lifting\nReplaceDayNightLightObjects(oArea,sCurCycle);\n\nSetLocalString(oLightManager,\"LCYCLE_\" + GetResRef(oArea),sCurCycle);\n}\n\n\n\n\n\n//This returns the current DayNight Cycle as a string\nstring GetCurrentDayNightCycle()\n{\nstring sCycle;\nint iHour = GetTimeHour();\n//Dawn == Sunrise == 6\nint iDawn = GetIsDawn();\nif (iDawn) sCycle = DAWN;\n//Day == 7-17\nint iDay = GetIsDay();\nif (iDay) sCycle = DAY;\n//Dusk == Sunset == 18\nint iDusk = GetIsDusk();\nif (iDusk) sCycle = DUSK;\n//Moonrise == 19\nint iMoonRise = (iHour==19);\nif (iMoonRise) sCycle = MOONRISE;\n//Night == 20-4\nint iNight = GetIsNight();\nif (iNight && !iMoonRise) sCycle = NIGHT;\n//Moonset == 5\nint iMoonSet = (iHour==5);\nif (iMoonSet) sCycle = MOONSET;\nreturn sCycle;\n}\n\nvoid DebugS(string s)\n{\nif (DEBUG_DAYNIGHTLIGHTS) AssignCommand(GetModule(),SpeakString(s,TALKVOLUME_SHOUT));\n}\n\n//This only investigates if the object is too far to the X/Y directions\nint GetIsNear(object o1, object o2)\n{\nvector v1 = GetPosition(o1);\nvector v2 = GetPosition(o2);\n\nif (fabs(v1.x - v2.x) + fabs(v1.y - v2.y) <= LIGHT_DEFAULT_DISTANCE) return TRUE;\nreturn FALSE;\n}\n\n//This replaces just one light at a waypoint with its proper counter-part for the cycle.\nvoid ReplaceLight(object oWP, string sCycle)\n{\nstring sResref;\nint iUseNearLight = GetLocalInt(oWP,\"USE_NEAR_LIGHT\");\nobject oLight = GetNearestObject(OBJECT_TYPE_LIGHT,oWP,1);\nif (oLight!=OBJECT_INVALID && !GetIsNear(oLight,oWP)) oLight = OBJECT_INVALID;\nlocation lLoc;\n\nif (iUseNearLight && oLight!=OBJECT_INVALID)\n\t{\t\n\tsResref = GetResRef(oLight);\n\tint iFind = FindSubString(sResref,\"_\") + 1;\t\t\n\tif (iFind!=0)\n\t\t{\n\t\tsResref = GetSubString(sResref,0,iFind) + GetStringLowerCase(sCycle);\n\t\t}\n\tlLoc = GetLocation(oLight);\t\n\t\n\tvector vPos = GetPositionFromLocation(lLoc);\n\tDebugS(\"Using nearest light. sResref = \"+sResref);\n\t}\nelse\n\t{\n\tsResref = GetLocalString(oWP,sCycle);\n\tif (sResref == \"\") \n\t\t{\n\t\tDebugS(\"No variable specified and not using Nearest Light. Aborting.\");\n\t\treturn;\n\t\t}\n\tlLoc = Location(GetArea(oWP),GetPosition(oWP) + Vector(0.0f,0.0f,LIGHT_DEFAULT_HEIGHT),0.0f);\n\tvector vPos = GetPositionFromLocation(lLoc);\t\n\tDebugS(\"Using resref from variable. sResref = \"+sResref);\n\t}\t\t\n\nif (oLight != OBJECT_INVALID)\n\t{\n\tDestroyObject(oLight);\t\n\t}\n\t\nCreateObject(OBJECT_TYPE_LIGHT,sResref,lLoc);\n}\n\n//This replaced all the Lights in the area that have a specific tag to their right counter-parts for\n//the current DayNight Cycle.\nvoid ReplaceDayNightLightObjects(object oArea, string sCycle)\n{\nobject oStart = GetFirstObjectInArea(oArea);\nobject oWP;\nstring sTag = GetTag(oStart);\nint i = 1;\nint n = 0;\nif (sTag == DAYNIGHT_LIGHT_WP) \n\t{\n\tReplaceLight(oStart,sCycle);\n\tn += 1;\n\t}\noWP = GetNearestObjectByTag(DAYNIGHT_LIGHT_WP,oStart,1);\n\nwhile(oWP!=OBJECT_INVALID)\n\t{\n\tReplaceLight(oWP,sCycle);\n\ti += 1;\n\tn += 1;\n\toWP = GetNearestObjectByTag(DAYNIGHT_LIGHT_WP,oStart,i);\n\t}\n\t\nDebugS(\"Replaced \"+IntToString(n)+\" daynight light objects\");\t\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"This is something I thought people could use. It's simply enough a system that handles lighting in a module. It will change the lighting based on the current DayNight Cycle. \n\nThe script itself has all the instructions needed in 3 simple steps.\n\nBut here's an example setup that works without downloading the erf and using the files there. If you download the erf, you have the lights/waypoints created for you. They use a naming convention so you can have multiple different sets of lights. Also you can fully specify the different daynight lights by using variables in the waypoints instead.\n\n1. Create waypoints in your templates with tag \"wp_daynight_light\"\n2. Edit the waypoint to have the variable \"USE_NEAR_LIGHT\" set to 1.\n3. Create lights to your templates with the following resrefs:\n\nmylight_sunrise\nmylight_daytime\nmylight_sunset\nmylight_moonrise\nmylight_nighttime\nmylight_moonset\n\n4. Place the waypoint we made earlier in any place you're going to need lights that change states with cycles.\n\n5. Place any one of those lights right next to all the waypoints. It can be as high as you want, but must not be too far from the waypoint in X/Y directions.\n\n6. Create a waypoint with tag \"LIGHT_MANAGER\" anywhere in your area. Only one of these per module.\n\n7. Play! :)","Rating":10,"Votes":1,"Awards":[]},"370":{"Name":"Dethia Shop","Author":"Dethia","Submitted":20110321,"Updated":20120226,"Category":"Entire Module/PW systems","Type":"Type - Merchant","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a custom shop system I have written for nwn2. It should be easy to implement (add the hak, import-compile the shop scripts and add some variables to the shops.)\n\nThe screenshots speak for themselves on the changes and additions. If you have questions don't hesitate to ask, you can find my contact information in the read-me file.\n\nI have also written a trade-hub system (which includes an Auction, Bountyand Warehouse system) geared towards PW's. This system is optional and requires NWNX. Check the read-me file for some more details.\n======================================\nOlder version notes are now in the read-me file as the last section. It is always the latest version that is available here, please report bugs or problems if you find any.\n\n-2.11- Fixed an issue where the ds_sell_mod and ds_buy_mod were interchanged.\n\n* Added a feature whereby now users can double click to buy/sell items. When doing so only one item is bought/purchased unless the item is ammunition in which case a whole stack is exchanged. Also added right click support for examining items.","Rating":9.88,"Votes":6,"Awards":[]},"371":{"Name":"Controllable Animal Companions","Author":"Lofgren","Submitted":20110406,"Updated":20110407,"Category":"Spells","Type":"Type - Spell effects","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"This package will allow any druid, ranger, or cleric to control their animal companion directly. See the included text file for more details","Rating":9.83,"Votes":3,"Awards":[]},"372":{"Name":"Simple Secret Object Script","Author":"Dann Pigdon","Submitted":20110509,"Updated":20110509,"Category":"Scripting routines","Type":"Type - Skill Checks","Format":"Module and Code","ShowCode":"// Local variables to set on non-static & non-usable placeable:\n//\n// Radius = search radius from object (float)\n// SearchDC = search rank required (integer)\n// Spawn = resref of placeable to spawn, if using Ipoint (string)\n//\n// Use an Ipoint instead of a placeable to spawn a\n// hidden object from a blueprint (see 'Spawn' variable above)\n\nvoid main()\n{\nlocation lTarget = GetLocation(OBJECT_SELF);\nfloat fRadius = GetLocalFloat(OBJECT_SELF,\"Radius\");\nint iSearchDC = GetLocalInt(OBJECT_SELF,\"SearchDC\");\nstring sSpawn = GetLocalString(OBJECT_SELF, \"Spawn\");\nint iSkill;\nint iSearching;\n\nif (GetLocalInt(OBJECT_SELF,\"Found\") == 1)\n  return;// Already found the object once\n\nobject oSearcher = GetFirstObjectInShape(SHAPE_SPHERE, fRadius, lTarget, TRUE, OBJECT_TYPE_CREATURE);\nwhile ( GetIsObjectValid(oSearcher) )\n  {\n  // If actively searching, add 1D10 to search skill\n  iSearching = GetDetectMode(oSearcher) == DETECT_MODE_ACTIVE;  \n  iSkill = GetSkillRank(SKILL_SEARCH,oSearcher) + (d10(1)*iSearching);\n\n  // If a party member\n  if(GetFactionEqual(oSearcher, GetFirstPC()) || GetIsPC(oSearcher))\n    {\n\tif ( iSkill >= iSearchDC )\n\t  {\n      PlayVoiceChat(VOICE_CHAT_LOOKHERE, oSearcher);\t  \t  \n      SetUseableFlag(OBJECT_SELF,1);// Make a non-usable placeable usable\n\t  effect eVis = EffectNWN2SpecialEffectFile(\"fx_nolaloth\");\n      ApplyEffectToObject(DURATION_TYPE_TEMPORARY,eVis,OBJECT_SELF,10.0);\n      PlaySound(\"sim_magsee\");\n\t  SetLocalInt(OBJECT_SELF,\"Found\",1);\t  \n\n\t  if (sSpawn != \"\")\n\t    {\n\t\t// Spawn in a hidden object (optional)\n\t    CreateObject(OBJECT_TYPE_PLACEABLE,sSpawn,lTarget);\n\t    }\n\t  }// end if found object\t\n\t}// end if party member\n  oSearcher = GetNextObjectInShape(SHAPE_SPHERE, fRadius, lTarget, TRUE, OBJECT_TYPE_CREATURE);    \n  }// end while\n}Select All Text | View Code in separate window","Patch":"1.22","NWN2Game":"All","Description":"A very simple 'Secret Object' heartbeat script that can do two things; either make a non-static and non-usable object usable, or spawn in a hidden object from a blueprint. Use it as the heartbeat script of either the non-usable object (to make it usable when found), or use an Ipoint to spawn something in from scratch.\n\nThe test module includes three searches:\n\nA rock placeable that is non-static, non-usable (so it doesn't highlight using the Z key) and has collison on so that it blocks a hidden doorway. A successful search causes it to become usable, so you can 'talk' to it and choose to destroy it via a conversation.\n\nA non-static, non-usable collision-on tapestry that hides a doorway behind it. Finding it makes it usable and bashable. A second Kill/Replace script then replaces the 'dead' tapestry with a non-clip damaged version, revealing the doorway behind it.\n\nA completely hidden lever that will spawn at an Ipoint location with a successful search check.\n","Rating":9.75,"Votes":2,"Awards":[]},"373":{"Name":"FB4A's Character/Player Library","Author":"FoamBats4All","Submitted":20110529,"Updated":20111009,"Category":"Database Related","Type":"Type - PC Players","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"VERSION 1.3, 2011-10-09\n\nThis helper library provides synchronization and helper functions for interacting with players and their characters.\n\nFeatures include:\n - Keeping character locations persistent between server restarts.\n - Keeping a unique fingerprint of every player to log into your server.\n - Allowing logs of certain player or character actions.\n - Set/unset persistent variable flags on characters.\n - ... some other random functions thrown into the mix, outlined below.\n - Ensuring that player accounts are protected now that the authentication servers are down.\n\nThis REQUIRES NWNX's SQL module. It was tested on MySQL, but might work on SQLite as well.\n\nAn example OnPCLoaded script can be found here: LINK.\n\n= fb4a_lib_misc - Misc Library =\nThis library holds functions that don't fit into any other areas. \n\nHasFlag : Checks to see if a character has a flag. Flags are persistent and stored in the database.\nHasFlags : Checks to see if a character has multiple flags. Otherwise same as above.\nResetFlags : Removes all flags from a character.\nUnsetFlag : Removes a single flag from a character.\nSetFlag : Adds a single flag to a character.\nTeleportToWaypointByTag : Teleports the character to a waypoint, found by tag.\nTeleportToLocation : Teleports a character to a waypoint, by location.\nColorText : Colors text surrounded by a particular flag. Handy for coloring emotes pink.\n\n= fb4a_lib_player - Player Library =\nLogEventByPlayerName : Inputs a log event by a player name.\nLogEventByPlayer : Redirects to LogEventByPlayerName.\nRegisterPlayer : Registers a unique ip address, cd key, and gamespy account name to the 'accounts' table. Stores the first and latest. Can be used to locate player alternative accounts, to ensure banned players stay banned.\nCDKeyLock : Boots a player if they are not logging in from the same CD keys as they usually are, and logs the discrepancy.\n\n= fb4a_lib_character - Character Library =\nGetFormattedName : Returns a string in the format \"Firstname Lastname (( Playername ))\".\nLogEventByCharacter : As with LogEventByPlayerName, but for characters. Used to log character activity (house selling, specific item usage, etc.) activities, as opposed to player-specific activities.\nSaveToServervault : Synchronizes player with the servervault.\nSaveToDatabase : Synchronizes the player with the database.\nSyncCharacter: Synchronizes the player with both the servervault and database.\nSaveCharacterHeartbeat : Timed event to synch character every X seconds. Amount of time between saves is configurable as a global constant variable.\nReturnToDatabasePosition : Reads the area, position, and rotation of the character from their last SaveToDatabase call, and returns them there.\nRegisterCharacter : Must be called OnPCLoaded, before any save/return calls, to ensure the character is registered in the database. Also sets their unique character ID as a local variable, for other call checks.\nGetRootCharacter : Gets the actual player character, as opposed to a companion or familiar.\nGetID : Gets the unique ID (created on RegisterCharacter) of the player.\nGetCharacterByID : Gets a character by their unique character ID, or OBJECT_INVALID if they are not logged in.\nIsValidCharacter : Returns TRUE if a character is a player character, not a DM, and has a valid unique character ID.\n\n== Change Log ==\n2011-05-29 : v1.0 : Initial release.\n2011-05-31 : v1.1 : Fixed a bug where flags were not loaded correctly.\n2011-05-31 : v1.2 : Fixed an SQL syntax error and updated documentation.\n2011-10-09 : v1.3 : Added CD key checking for player authentication.\n\n== Need Help? ==\nFeel free to send me an email or instant message. I would be happy to help you integrate one or any of my works into your PW.","Rating":10,"Votes":2,"Awards":[]},"374":{"Name":"Dethia Emotes","Author":"Dethia","Submitted":20110612,"Updated":20110612,"Category":"Other","Type":"Type - Multiple Effects","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"The highly unanticipated and undemanded emote system is here! Yes ye all roleplayers hate it but hey I made it, so here it is.\n\nA visual-effect based emote system (as opposed to using animations or text). Take a look at the screenshots for more information. If you wish to know about the system in more detail (how to add it to your module, or change it), check out the read-me file.","Rating":8.33,"Votes":3,"Awards":[]},"375":{"Name":"Updated Dragon Special Ability Scripts","Author":"Dann Pigdon","Submitted":20110623,"Updated":20110710,"Category":"Creature Related","Type":"Type - Combat","Format":"Code Only","Patch":"1.22","NWN2Game":"All","Description":"Updated scripts for dragon special abilities (breath weapons, wing buffet, tail slap). This is a work in progress, so there will be much tinkering in the future (and perhaps support for other breath weapon types).\n\ndragon_breath_scripts.erf contains the new scripts, which can be imported into a module.\n\ndragon_breath_effects.zip contains the new breath weapon visual effects. Place these in the override folder, or put them in a HAK and associate it with the module.\n\nBreath weapons with new visual effects include cold, gas, lightning, negative energy, paralysis, and fear.\n\nWing buffet now plays the correct dragon animation (for want of removing a single asterix in the script).\n\nTail slap now does damage in a full circle, rather than just behind the dragon. The dragon should now do a 120 degree turn while playing the tail slap animation. Disarm has also been fixed, and bludgeoning damage added.\n\n[Some of the breath weapons appear in the 'Special Abilities' list in the toolset twice. These updated scripts use the second of each pair of options. The Bronze and Blue dragon blueprints in the toolset use the FIRST entry though. I have now included an updated version of the first script, which works for Bronze Dragons (but not so well for Blue Dragons)]","Rating":9.94,"Votes":4,"Awards":[]},"376":{"Name":"ga_do_damage","Author":"Dann Pigdon","Submitted":20110703,"Updated":20110703,"Category":"Conversation","Type":"Type - PC Players","Format":"Module and Code","ShowCode":"// Damage types:\n// 1 bludgeoning, 2 piercing, 4 slashing,\n// 8 magical, 16 acid, 32 cold,\n// 64 divine, 128 electrical, 256 fire,\n// 512 negative, 1024 positive, 2048 sonic\n//\n// Use sTagOverride to target others, otherwise\n// applies damage to PC Speaker\nvoid main(int iAmount, int iType, string sTagOverride)\n{\nif (iAmount < 1 || iType < 1)\n  return;\n\nint iDamagePower = DAMAGE_POWER_ENERGY;\nif (iType < 8)\n  iDamagePower = DAMAGE_POWER_NORMAL;\n  \nobject oPC = GetPCSpeaker();\nif (sTagOverride != \"\")\n  oPC = GetNearestObjectByTag(sTagOverride, OBJECT_SELF);\n  \nint iVFX;\nstring sSound;\nstring sSoundNo = IntToString(Random(2)+1);\n\nswitch (iType)\n{\ncase 1:\n{\niVFX = 460;\nsSound = \"cb_ht_fleshleth\";\nbreak;\n}\ncase 2:\n{\niVFX = 109;\nsSound = \"cb_ht_daggrleth\";\nbreak;\n}\ncase 4:\n{\niVFX = 109;\nsSound = \"cb_ht_bladeleth\";\nbreak;\n}\ncase 8:\niVFX = 76;\nbreak;\ncase 16:\niVFX = 44;\nbreak;\ncase 32:\niVFX = 63;\nbreak;\ncase 64:\niVFX = 98;\nbreak;\ncase 128:\niVFX = 74;\nbreak;\ncase 256:\niVFX = 61;\nbreak;\ncase 512:\niVFX = 81;\nbreak;\ncase 1024:\niVFX = 584;\nbreak;\ncase 2048:\niVFX = 588;\nbreak;\n}\n\nint iCurrentHP = GetCurrentHitPoints(oPC);\neffect eAmount = EffectDamage(iAmount, iType, iDamagePower, FALSE);\nApplyEffectToObject(DURATION_TYPE_INSTANT, eAmount, oPC);\nint iDamagedHP = GetCurrentHitPoints(oPC);\nif (iType <= 4 && iCurrentHP == iDamagedHP)\n  iVFX = 118;// change physical VFX if damage resisted\neffect eVFX = EffectVisualEffect(iVFX);\nif (iType > 4)// Do energy hit VFX\n  ApplyEffectToObject(DURATION_TYPE_INSTANT, eVFX, oPC);\nelse// Do physical hit VFX  \n  {\n  float fZ = GetCreatureSize(oPC)*0.3;\n  vector vLoc = GetPosition(oPC)+Vector(0.0,0.0,fZ);\n  location lLoc = Location(GetArea(oPC), vLoc, GetFacing(oPC));\n  ApplyEffectAtLocation(DURATION_TYPE_INSTANT, eVFX, lLoc);\n  }\nif (iCurrentHP == iDamagedHP && sSound != \"\")\n  sSound = \"cb_pa_bld0\";// Physical damage resisted  \nif (sSound != \"\")// If physical damage, play sound\n  AssignCommand(oPC, PlaySound(sSound+sSoundNo));    \nif (oPC == GetPCSpeaker() && iDamagedHP > 0 && iCurrentHP != iDamagedHP)\n  PlayCustomAnimation(oPC, \"damage01\", 0, 1.0);// Flinch if damage taken\n}Select All Text | View Code in separate window","Patch":"1.22","NWN2Game":"All","Description":"This is a script to do damage and visual effects to either the PC speaker or a targeted NPC/creature during a conversation.\n\nSpecify the damage amount and type in the conversation node, with an optional override tag to target others (if left blank, the script damages the PC speaker)\n\nThe example module allows you to masochistically damage yourself via the torture equipment. Various protective equipment is available to demonstrate how the script behaves if you resist the damage. If sadism is more your thing, there is a Gimp on offer who will gladly take whatever you dish out.","Rating":"N/A","Awards":[]},"377":{"Name":"Restricted Companion Multiclassing","Author":"The Fred","Submitted":20110707,"Updated":20110707,"Category":"NPCs","Type":"Type - Leveling","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Companions in the OC were unable to multiclass. This is rather restrictive, so many builders turn on unrestricted level-up for their campaigns. However, what if you don't want unrestricted level-up, but you do want certain NPCs to be able to take Prestige Classes? What if you want to allow some multiclass options, but not all? This simple script allows a middle road between a multiclassing free-for-all and the complete lack of it as seen in the OC.\n\nTo prevent a character from leveling up in a given class, set a variable named \"DisableClass\" + name of the class, without spaces (e.g. \"DisableClassFighter\", \"DisableClassDivineChampion\") to TRUE on them. If you set the variable \"InvertClassRestrictions\" to TRUE, only classes WITHOUT the corresponding variable will be disabled (if you only want to allow a couple of classes, for example, it's easier to do this).\n\nKnown Issue: If you disable the last class a character took, they can still level-up in it.\n\nThis package requires a minor UI modification (to the levelup_class.xml file). Since the new version of this file should go in your Campaign folder anyway, I've left the script loose to be put in with it (you can of course copy it into your module(s)).","Rating":10,"Votes":2,"Awards":[]},"380":{"Name":"Set Items","Author":"Evezial Hall","Submitted":20110719,"Updated":20110810,"Category":"Scripting routines","Type":"Type - Unique Items","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"Version 1.1 - 8/9/2011\nUpdated with some screenshots and admin guide. I will continue to revise the guide and update with equipment to make use of the built-in code (basically stuff that I already programmed but didn't add items for). \n\nVersion 1.1 - 7/19/2011\nThis script adds set items, a la Diablo/Torchlight. The more items of a set that a player equips, the more bonuses they will gain.\n\nCurrently there is a maximum of 8 bonuses and 9 items in a set (though only 2 items are required for a set to work). \n\nIncluded are some sample sets and items.\n\nWhen making your own items, don't forget to add local variables:\n\nstring sKitID = SetName\nint IsSet = 1\n\nYou can look at one of the sample items for a better idea. I will be writing an administrator/player handbook, and will probably add a few more sets.","Rating":"N/A","Awards":[]},"381":{"Name":"Creature Size and Stat Randomizer","Author":"Rasael","Submitted":20110720,"Updated":20130108,"Category":"Creature Related","Type":"Type - Combat","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"Creatures can both gain or lose size in SMALL, MEDIUM or LARGE variations -- coupled with appropriate stats.\n\nSo there are 7 possibilities:\nSmallest - Smaller - Small - Average - Big - Bigger - Biggest\n\nThe idea here is that the Small, Big and Average will be by far the most common players will encounter - since they represent an average size.\n\n-Smaller creatures lose half of the gained Ability integer in CON and STR.\nThey don't get bonus HP and only gain Dodge AC. Smaller creatures gain an Attack bonus. (so + 5 Abilty means +5 on DEX but CON and STR will be lowered by half that amount which is - 2)\n\n-Bigger creatures don't gain DEX but only STR. this is specified with ability integer. \nThey don't get an Attack Bonus but do receive a natural AC increase. \n\n\n1. There's a chance to alter the creature when it spawns\n2. If so then determine by how much to change him\n3. Determine stats according to the sort of change\n4. Apply appropriate size and stats for the determined size\n\n\nIn step two it determines for example a SMALL Change (size = 1.06 or 0.94) for example with appropriate stats for that. So it becomes either a bigger or smaller creature randomly.\n\nDoing it this way there's a one in six chance that IF a creature is going to be altered it will be a LARGE change.\nThen there's a two sixth chance that it will be a MEDIUM change.\nAnd finally a three sixth chance that it will be a SMALL change with appropriate small effects.\n\nThe chance that a creature gets changed in ANY way is six twelfths so the total chance for having such a creature with a LARGE change (with appropriately adjusted stats) are --- 6/12 * 1/6 = 12/ 144ths but actually 6/144ths for a biggest creature and again 6//144ths for a smallest creature (Size = 1.16 or 0.84) \n\nThe MEDIUM change to either bigger or smaller has a somewhat bigger chance but overal the SMALL variation and NO varation will be by far the most common to be spawned. (which is appropriate I think since they represent an average)\n\nThis script is executed from the OnSpawn event for all HOSTILE creatures.\n\n\n\n//Update 23 July 2011\n--suggested stats have been added to the CR list per creature category.\nThis only changes the stats creatures gain or lose when grown / shrunk to be more balanced. (in theory)\n\nKudos to Eldebryn for the suggestion!","Rating":9.75,"Votes":3,"Awards":[]},"382":{"Name":"Creature Taunts","Author":"Rasael","Submitted":20110720,"Updated":20130108,"Category":"Creature Related","Type":"Type - Combat","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"The DMFI system is used for this package mainly because it includes different languages.\n\nIt supports the following:\n-Taunt Target or nearby enemy (using own Deity, target Gender, target race)\n-Taunt my attacker (using own Deity, target Gender, target race and half HP)\n-General Taunt (using only deity and half HP)\n\nRight now I have Ogres, Trolls, Orcs, Goblins and Spiders. They have about 20 different random taunts with situational context each.\n\nSo I have trolls commenting on targets that have dissapeard (hideses!) and Orcs calling you a coward if you stealth away \n\nYou have to understand Orcish to get that though, Trolls currently speak Common - not Giant - so they're always understandably funny.\n\nThe script is executed from the OnCombatRound Event in creatures.\n\n\n//Update 26 July 2011\n--All generic creatures now have taunts\n\n//Update 23 July 2011\n--Many taunts added for creatures. Left to do are: Animals, playable races (bandits and factions), Horned Devils, Shapechanger, Lizard kind (including Kobolds), Fey, Gnolls and Undead ","Rating":10,"Votes":3,"Awards":[]},"383":{"Name":"Demon and Devil Behavior","Author":"Rasael","Submitted":20110722,"Updated":20130108,"Category":"Creature Related","Type":"Type - Combat","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"Demons and Devils become HOSTILE to anyone not of their own race (Demon or Devil) or protected from evil / Circle against evil.\n\nIf the Demon / Devil is already hostile towards someone protected from evil in any form they will become neutral to the creature for the duration of the spell.\n\nThe script is attached to the OnPerception Event and triggers only for an outsider (If the seeing object is an Outsider himself) There is then a check to see if he is a Demon / Devil and how he should react to whichever creature he sees.\n\n\nFor Developers: This works using personal reputation so make sure you switch that \"on\" in your campaign. Normal modules have this switched off!\nPlaytesting works if you load it in a Campaign! (test campaign included)\n\n//----Updated 29/08/2011\nFixed the script to loop properly\nand update the status of the creature.\nWill now check if prot vs evil has expired and react accordingly. (or if a creature has just cast the spell then become neutral etc..)\n\nThe loop will continue while a player is nearby and is triggered by a perception event.","Rating":10,"Votes":1,"Awards":[]},"384":{"Name":"OC Silver Sword Override","Author":"Dragon Slayer","Submitted":20110731,"Updated":20110818,"Category":"Other","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"These are the Silver Sword scripts for the OC that allow the Silver Sword to be used in any module without using ERF'S there are no plans for the motb scripts as i dont have motb but there is a slim chance that they may be forthcoming dont forget to comment (and vote) it may help me to decide what to do next! (this supports any patch)","Rating":"N/A","Awards":[]},"385":{"Name":"Cursed Items","Author":"Rasael","Submitted":20110803,"Updated":20130108,"Category":"Area","Type":"Type - Other","Format":"Module Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"There are three curse types:\n1. Up to four random negative item properties get added while all others are removed\n2. The item functions intermittently. It sometimes switches off and then on again. The item properties used are random.\n3. The item applies an effect upon being equipped. This can be a polymorph or even confusion. 12 possible effects\n\n\n//Update 12-09-2011\nFixed all reported issues and added a needed manner to remove curses using the remove curse spell. (needs a small 2da change in the targettype field as the script mentions)","Rating":10,"Votes":3,"Awards":[]},"386":{"Name":"Legacy Items","Author":"Original by Choirmaster, Updated by Eric","Submitted":20110805,"Updated":20110825,"Category":"Scripting routines","Type":"Type - Unique Items","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"Choirmasters Legacy Artifact System modified for use in NWN2.\n\nAllows easily creating custom items with properties that depend on character level.\n\nHas a few other options too. See the original work for a more detailed description: \nLink \n\nIf people are actually using this I'll put a bit more work in to it. It's just something I'd been using for myself for years.\n\nUpdate:\n\nI added the ability to calculate parameters based on total level (L) and class levels (C#).","Rating":10,"Votes":1,"Awards":[]},"387":{"Name":"Wand Icons and Recharging","Author":"Eric","Submitted":20110805,"Updated":20110805,"Category":"Scripting routines","Type":"Type - Manipulation","Format":"Code Only","Patch":"1.00","NWN2Game":"All","Description":"On acquire script and cast at script for the player crafted wands to give them different icons, allow them to be recharged, and modify the charges per use.\n\nAlso allows them to be automatically renamed, as is it just corrects the name for spells that can be cast in multiple ways to remove the version part of the name.\n\nHopefully well commented and easy to edit so even a complete script newbie can remove recharge cost if desired.\n\nWill not do anything to non-crafted wands. If you want the non-crafted wands to use the recharge script make a retagging script.\n","Rating":"N/A","Awards":[]},"388":{"Name":"LocalInt requirement for class","Author":"Eric","Submitted":20110822,"Updated":20110927,"Category":"Scripting routines","Type":"Type - PC Players","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"Fix to the broken VAR requirement for class requirements. Accomplished by removing listbox rows so disabled classes won't even show up. I may redo the entire page to restore the ability to read the info page of unavailable classes. If I get really, really bored.\n \nAdds a SCRIPT requirement which actually just executes a script with the name of the first parameter, likely to set a local variable.\nAdds a DEITY requirement, which is always an or type requirement. If any deity requirement is listed then the PCs deity must be listed to be able to level in that class. Two name deities use firstname in first parameter and lastname in second parameter.\n\nVariable checked is on the object of the PC leveling up, first parameter is variable name, second is required value. Works the way the VAR requirement was supposed to work.\n\nI put this down as SoZ because I only edited the levelup_classx2.xml file, it would be pretty easy for anyone actually doing custom content to modify the others if they want. I think for the file in question just copying and renaming is sufficient.\n\nThe included levelup_classx2.xml is the one from the enhanced levelup package. If you don't actually have the enhanced levelup package it will work anyway, it'll just fail when attempting to fire off a couple scripts (I think.)\n\nI'm including requirement overrides for Doomguides to follow Kelemvor and Stormlords to follow Talos. Small files so included in main download.\n\nFor a further example I made monk and paladin orders as a separate download. \nI'm not a PnP DnD player so there's probably lots of stuff that will make some people cringe at my ignorance. I just took the info off the wiki and followed it literally.\n\nI also made an example module that will allow gaining some of the order feats and leveling a character to try it out.","Rating":10,"Votes":1,"Awards":[]},"389":{"Name":"Sleepable beds","Author":"Barnabas","Submitted":20111015,"Updated":20111016,"Category":"Resting","Type":"Type - Other","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"This is a module, that contains a script to use for beds. With this script the player will be able to rest in a rest restricted area. Also the module shows, how to modify a bed from the toolset to let the character sleep in it.\nThe script has also a variable with which the builder is able to control the \"sleeping time\"","Rating":10,"Votes":1,"Awards":[]},"390":{"Name":"Auto-Closing Doors","Author":"Rossman","Submitted":20111019,"Updated":20111020,"Category":"Placeable Item","Type":"Type - Doors","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"This script will automaticaly close your doors.\nIt will work even with doors linked with a transition.\nIt can \"respawn\" lock on the doors.\n\nFull options for delays and locks.","Rating":10,"Votes":3,"Awards":[]},"391":{"Name":"Dice Cup","Author":"Eric","Submitted":20111023,"Updated":20111026,"Category":"Inventory Item","Type":"Type - Unique Items","Format":"Module Only","Patch":"1.00","NWN2Game":"All","Description":"A conversation based scripted dice cup.\nSuitable for dice games that require hidden rolls like liars dice.\nAllows rolling dice in a cup and peaking then revealing later. Conversation is private so others won't see what you're doing except for a message about when you roll the dice or when you reveal the dice.\nHas options to cheat as well by altering the dice under the cup or subtly moving a dice in or out of the cup.\nStill under development. The cheating detection functions aren't working quite right yet.","Rating":10,"Votes":1,"Awards":[]},"392":{"Name":"Dragons in the OC","Author":"kevL's","Submitted":20111123,"Updated":20120117,"Category":"Creature AI","Type":"Type - Combat","Format":"Code Only","Patch":"1.23","NWN2Game":"NWN2","Description":"Dragons in the OC\n-------------------\n- by kevL's\n\nThis pack contains fixes & amendments for the toughest creatures in the NwN2 OC, the dragons ...! Version 1 fixed & tweaked Tholapsyx the Red Dragon,\n\nVersion 2 adds & conforms functionality to the Black Dragons' fight in Nolaloth's Valley.\n\nUPGRADING TO VERSION 2 : Please delete version 1.x and extract version 2+ to your MyDocs->NwN2->Override folder.\n\n\nver.2.1\n2012 January 17\n\n- tweaked the AI-chance of casting a spell or using a Dragon Ability (increase). Also tweaked the technique of choosing a spell in combat.\n- added code to the UserDefined heartbeat that checks of any nearby PCs are in conversation (stops random behaviors & PC stalking).\n- changed kL_DoDragAttack() to use variable BAB for determining whether or not Power Attack is used.\n\nver.2.0\n2012 January 14\n- 3090_a_crys_heart.NSS/.NCS - deletes the old Black Dragons and spawns in two new ones from blueprints, 3090_large_bdragon1.UTC & 3090_large_bdragon2.UTC : this runs from either the Valley's entry cutscene or the Crystal Heart's dialog.\n- the new dragons use an updated creature hide, 3090_nw_it_creitemdr4.UTI that simply removes Spell Resistance itemproperty to work around the SR bug (SR is now assigned via OnSpawn, using a custom algorithm based on hitdice)\n- an OnDeath script klai_od_blackdragon.NSS/.NCS has been added to the Black Dragons' event slots (to ensure their corpses decay after they are looted)\n- two AI scripts ( ai_blackdragon_spawnscript.NSS/.NCS & ai_blackdragon_roundend.NSS/.NCS ) do for the Black Dragons what the corresponding scripts, described below, do for Tholapsyx, nearly exactly. The only real difference is that the Spells used by black & red dragons are slightly different.\n- (technote for builders) there is now a function in the klai_inc_dragon.NSS include, struct kL_GetDragonType(), that returns the Name, the Race, the DragonDC modifier, the DragonSR modifier, and the DragonScale modifier for dragon types. Note that only the Red and Black types have been done, although the function is formatted and ready to accept appropriate data from other types. ( yaya, it really shouldn't be done as a struct but I need the practice :)\n\n- changes to the Black Dragon blueprints:\n\nProperties tab\n- Casts Shadows? from \"Cast shadows from point and directional lights\" to \"Cast shadows from all lights, and self-shadow\"\n- Receives Shadows? from \"Receive shadows from point and directional lights\" to \"Receive shadows from point lights\"\n- Classification from \"3090\" to \"kL|3090\"\n- Faction ID from custom OC \"Neutral\" to \"Defender\"\n- Bump State from \"Default\" to \"Un-Bumpable\"\n- Animal Companion Type from \"Badger\" to \"NONE\"\n- Familiar Type from \"Bat\" to \"NONE\"\n\nBasics tab\n- Alignment from Chaotic Evil to Neutral Evil (five dragons together isn't quite 'chaotic' anymore ...)\n- Challenge Rating from \"22\" to \"23.5\"\n\nStatistics tab\n- Intelligence from \"16\" to \"17\"\n- Wisdom from \"17\" to \"16\"\n- Charisma from \"16\" to \"22\" (SaveDC +3 vs spells they cast)\n\n- Saving Throws, all types -1 (Reflex, Fortitude, Will)\n\n- Current Hit Points, Reset to MAX from \"350\" to \"488\"\n\nFeats tab\n- added BlindFight, Improved Critical (Creature), Resist Poison, Skill Focus (Listen), Skill Focus (Spot), Weapon Focus (Creature)\n\nSkills tab\n- Concentration from \"18\" to \"20\"\n- Hide from \"2\" to \"0\"\n\nSpecial Abilities tab\n- removed Wall of Fire and all Dragon Spellabilities (Breath, Buffet, Sweep, Aura of Fear, which are automatically engaged by script)\n\nSpellabilities, current:\n- acid fog\n- fear\n- slow\n- vitriolic sphere\n- greater dispel magic\n- displacement\n- elemental shield\n- haste\n- lesser spell mantle\n- protection from energy\n- stoneskin\n\n\nchanges to Creature Hide:\n- removed Spell Resistance (it's bugged, do SR on spawnscript).\n\n\n\nThe following describes Tholapsyx in the Fiery Canyon & Fire Giants' Canyon, on Mt. Galardrym:\n\nver.1.3\n2012 January 13\n- added check for Area (Fiery Canyon) before playing Tholly's FireBreath intro (so the Black Dragons in Nolaloth's Valley don't!). See ai_dragon_userdef.nss\n\nver.1.2\n2012 January.\n- added a function to Tholapsyx' OnDeath event script; occasionally her corpse would not decay properly, and there is a very slight but real chance that this could cause problems - I believe the issue is hardcoded in the game engine (& not these scripts), so this version includes a transparent workaround just in case. (See 3031_ds_tholapsyx.nss and/or klai_od_blackdragon.nss for details.)\n\nver.1.1\n2012 January.\n- tweaked some conditions & functions to help ensure Dragon does not stick on a deceased opponent. GetNearestPerceivedEnemy(), GetIsDead() - although I never saw this happen during testing, this change is Defensive Scripting!\n- added some extra code to userDefined heartBeat, to help Dragon find a hostile target. GetLastHostileActor()\n- changed some comments and little oversights, like text color & \".0f\" to fModelScale.\n- consolidated the application of Aura of Fear effects, so code runs a nanosecond faster :p\n- deepened red & blue hues of Fear Aura .Sef visual; made the VFX Supernatural so it won't risk being dispelled (the Aura itself was already Super); removes the .Sef VFX when Tholapsyx' unique OnDeath script fires (custom modders would have to do something similar, or just let the VFX disappear when the dragon corpse evaporates).\n- added check for Breath distance before engaging.\n- slightly increased chance of buffing during combat.\n- put in assorted checks for ScriptHidden creatures, so they don't risk getting affected by SpellAbilities.\n- added check for combat activity, so Dragon doesn't waste time trying to move around (in userDefined heartBeat, alongside checks for conversation & spellcasting).\n\nver.1.0\n2011 August ... Sept/Oct/Nov.\n\n\n\nOC info (Tholapsyx)\n-------\nmodule: 3000_Neverwinter_A3\n\narea: {3032}th_canyon\narea tag: 3032_tcanyon\narea name: Fiery Canyon\n\narea: {3033}fg_canyon\narea tag: 3033_fgcanyon\narea name: Seat of the Mountain\n\ntag: \"3031_tholapsyx\"\nutc (resref): 3031_tholapsyx\nhide (resref): 3032_tholap_skin\n\n\nOC info (Black Dragons)\n-------\nmodule: 2100_Crossroad_Keep_A2\n\narea: 3090_avalley\narea tag: 3090_avalley\narea name: Ancient Valley\n\ntag: \"3090_dragon1\"\nutc (resref): 3090_large_bdragon1\ntag: \"3090_dragon2\"\nutc (resref): 3090_large_bdragon2\nhide (resref): 3090_nw_it_creitemdr4 (was, nw_it_creitemdr4)\n\n\n\nFile info\n---------\nDragons use three unique scripts that implement and control their RoundEnd AI.\n\n1) ai_reddragon_spawnscript - called from OnSpawn (.nss/.ncs)\n1b) ai_blackdragon_spawnscript - version 2+ for Black Dragons (.nss/.ncs)\n2) ai_dragon_userdef - the UserDefined slot (.nss/.ncs)\n3) ai_reddragon_roundend - the Red Dragon AI (.nss/.ncs)\n3b) ai_blackdragon_roundend - version 2+ for Black Dragons (.nss/.ncs)\n\nAdditional custom files:\n4) klai_inc_dragon - include file (.nss)\n5) kl_dragon_fearaura - Special Effect VFX for dragon's Fear Aura (.sef)\n6) klai_od_blackdragon - black Dragon's OnDeath script (.nss/.ncs)\n\nAnd these are default NwN2 dragon files that have been re-worked:\n6) nw_s1_auradrag - activates dragon's Aura of Fear (.nss/.ncs)\n7) nw_s1_dragfeara - OnEnter for the Aura of Fear (.nss/.ncs)\n8) nw_s1_dragfire - dragon Fire Breath (.nss/.ncs)\n8b) nw_s1_dragacid - dragon Acid Breath (.nss/.ncs)\n9) nw_s1_dragwbuffet - dragon Wing Buffet (.nss/.ncs)\n10) nw_s1_dragtslap - dragon Tail Sweep (.nss/.ncs)\n\nBlueprints:\n11) 3031_tholapsyx - Tholapsyx creature (.utc)\n11b) 3090_large_bdragon1 - Black Dragon creature (.utc)\n11c) 3090_large_bdragon2 - ditto (.utc)\n12) 3032_tholap_skin - Tholapsyx hide (.uti)\n12b) 3090_nw_it_creitemdr4 - Black Dragon hide (.uti)\n\nPlot files for NwN2 OC, Mt. Galardrym:\n13) 3031_ds_tholapsyx - Tholapsyx' OnDeath script (.nss/.ncs)\n14) 3032_oncliententer - OnClientEnter of Tholapsyx' Canyon (.nss/.ncs)\n15) 3033a_fireking - conversation blocks for Fire Giants' Canyon (.nss/.ncs)\n\nPlot for NwN2 OC, Nolaloth's Valley:\n16) 3090_a_crys_heart - replaces both the black Dragons at the Crystal Heart (.nss/.ncs)\n\nPlot files, custom:\n17) kl_ondeath_groups - begins conversations after Tholapsyx and Fire Giants fight (.nss/.ncs)\n\n\n\nGeneral info\n------------\nTholapsyx is placed or 'pre-instanced' (so does not spawn from a blueprint), as are the Black Dragons in Nolaloth's Valley. What follows was written for Tholapsyx, but the idea is the same for the later dragons.\n\nThis package, however, deletes those instances and replaces them from resrefs 3031_tholapsyx.UTC (including a new creature hide 3032_tholap_skin.UTI). While the hide simply has its Spell Resistance itemproperty removed (SR is now assigned via the SpawnScript, to bypass SR bug), Tholapsyx herself has a number of changes. Her Challenge Rating is increased from 25.0 to 28.5; Strength is decreased from 37 to 35; Dexterity is increased from 10 to 12; Charisma is increased from 22 to 24 (SaveDC +1 vs spells). Saves: Fortitude, Reflex, and Will reduced by 1. HitPoints have been Reset to MAX: to 686, up from 606.\n\nAdditional Feats assigned: Blind-Fight, Combat Casting, Darkvision, Improved Initiative, Low-light Vision, Resist Poison, Skill Focus (Listen), Skill Focus (Spot), Weapon Focus (Creature), Weapon Specialization (Creature).\n\nSpecial Abilities removed: Acid Fog, Spell Resistance. (note: Dragon Breath Fire, Dragon Tail Sweep, & Dragon Wing Buffet have all been removed; they are now automatically engaged via scripting.)\n\nFactionID was changed from custom Neutral to Defender.\n\nNo other changes have been done. Her inherent difficulty remains very similar to the original. Her AI scripts will however make combat against her more problematic.\n\n\nShe is 'scripthidden', appearing when the PC crosses a trigger and conversation is engaged ... and she uses the following special OnEvent scripts:\n\nOnDeathScript: 3031_ds_tholapsyx\n- sorts out her issues with the Fire Giants, and assigns a Dragon Slayer feat (note there are 2 Dragon Slayer feats in NwN2+, this is the one that appears in gold text color and does not grant any combat bonuses, #1714 not #2224 in Feat.2da). There is also mention of Ivarr, etc.\n\n- changed a function to ensure the PC gets the Dragon Slayer feat on death of Tholapsyx (and it does not go to a controlled Companion instead). Also added improved message feedback on gaining the Dragon Slayer feat.\n\nOnUserDefinedEventScript: ai_dragon_userdef\n- previously included routines for EVENT_HEARTBEAT and EVENT_END_COMBAT_ROUND. The first tells her to attack, while the second manages her Breath, Buffet, and Tailsweep attacks.\n\n- the EVENT_END_COMBAT_ROUND routines have now been subsumed under EVENT_HEARTBEAT. This is to ensure that a dragon's special combat ability counters increment even when it is not in combat per se. Dragon Behaviors (Taunt, Breathe, Buffet) ought animate a dragon when no enemy is perceived.\n\n- Event \"2100\" has been introduced (cannot move to target) to assist some issues when unable to close against a valid target.\n\n\nA string variable on Tholapsyx herself is \"SpawnScript = ai_reddragon_spawnscript\". This script gets called by the default OnSpawnInScript (nw_c2_default9). It sets up her Breath, Buffet, and Tailsweep attack counters and specifies her AI script, ai_reddragon_roundend. Tholapsyx' special spawnscript also prepares the userdefined event, EVENT_HEARTBEAT, to fire, and adjusts her combat overrides to not allow Attacks of Opportunity on her (reversed from not allowing her to have AoO's).\n\nAdditionally, the special spawnscript sets her Spell Resistance based on HitDice, resulting in increased SR.\n\nai_reddragon_roundend is where everything happens .... basically it attempts to find a valid target and then attack it with everything - no sorry. Tholapsyx' first round is an instant buffing routine. She will then pick out a target (generally the closest enemy) and depending on her health and some random chance may attack with one of her special combat abilities, choose to buff more or heal herself, attack with a spell, or simply do tooth & claw attack possibly w/ Knockdown or Power Attack.\n\n\n\nNota Bene: Tholapsyx can also appear for combat with the Fire Giants under the right plot circumstances.\n\n\nOther files contained in this package:\nklai_inc_dragon - include file w/ functions & constants for the above scripts.\n\n3032_oncliententer - includes Kaldor Silverwand's insertion of Nasher's Cloak of Protection (should be used with NWN2 OC Makeover SoZ Edition or NWN2 OC Nasher Set Fix but shouldn't cause problems regardless). This file also spawns an upgraded version of Tholapsyx with an upgraded creature hide (3031_tholapsyx.UTC & 3032_tholap_skin.UTI) that is only slightly more difficult than the original dragon (Casters, get your Assays readied). It is done for consistency with the fixed & upgraded scripts, mainly buffs and spell-casting, and if you don't want the upgraded dragon you'll have to either change the code here or simply delete this OnClientEnter script and its corresponding .ncs file *before entering* Tholapsyx' Fiery Canyon. (This is similarly true for the Black Dragons in Nolaloth's Valley, you could change or simply delete 3090_a_crys_heart.NSS/.NCS) The scripts offered here will use either the stock dragon blueprints or the upgrades - which are not much tougher per se.\n\n3033a_fireking - replaces GroupOnDeathBeginConversation() w/ GroupOnDeathExecuteCustomScript() because the latter is far more reliable in starting conversation(s) after/if Tholapsyx fights the Fire Giants.\n\nkl_ondeath_groups - this is a custom script that gets called after/if Tholapsyx fights the Fire Giants; it starts either dialog as appropriate (either with Tholapsyx or the Fire Giant King), if any are still alive.\n\nnw_s1_*.nss - dragon spellabilities: Fear Aura (cast + AoE onEnter), Breath Fire, Wing Buffet, Tail Sweep (all extensively re-worked).\n\nkl_dragon_fearaura.sef - a silly Special Effect VFX file i made for Dragon Aura (instantiated from NW_S1_AuraDrag.nss). To let players know they are entering the Fear Zone.\n\nReadMe_kL_Tholapsyx.txt - this here text file.\n\n\nInstallation\n------------\nSimply place these files in a subfolder of your MyDocs->NwN2->Override folder, preferably before entering Act III (or the '3000_Neverwinter_A3' module specifically). If that module has been loaded, however, you should still get most of the benefits/challenge from the UserDefined and RoundEnd scripts (ie. after Tholapsyx has been spawned/created). It is hereby strongly suggested that you make a perma-Save before entering Tholapsyx' canyon - if you don't know where that is, consult a walkthrough on the Internets.\n\nUPGRADING TO VERSION 2 : Please delete version 1.x and extract version 2+ to your MyDocs->NwN2->Override folder.\n\nDe-installation:\nDelete these files from your Override directory. No changes were made to other game files.\n\n\nCredits & kudos\n---------------\nThanks to WRFan and DannPigdon, for snips of code and inspiration. And Pain of Dungeon Eternal 2 (video) for the beer ;)\n\nAlso to members of the NwN2 community for their interest.\n\n\n* all scripts compiled with Skywing's Advanced Script Compiler, r9 (docs @ BSN).\n\n\nTechnote: modders, scripters, designers should freely modify, alter, snatch this stuff and re-implement it for whatever purposes, with or without credit. It contains one basically working Red Dragon plus two Blacks.\n\n\n\n7-zip can be downloaded from 7-zip.org.","Rating":9.94,"Votes":4,"Awards":[]},"393":{"Name":"MotB Date/Time GUI Scripts","Author":"Dann Pigdon","Submitted":20111124,"Updated":20120606,"Category":"Time Devices","Type":"Type - Other","Format":"Code Only","ShowCode":"//On Module Heartbeat script\n#include \"ginc_time\"\n\nvoid main()\n{\n\tstruct CHoursPassed rHP = CheckTime();\n\tint nNumModuleHoursPassed =\trHP.nNumModuleHoursPassed;\n\tint nNumCampaignHoursPassed = rHP.nNumCampaignHoursPassed;\n\t\n\tif ((nNumModuleHoursPassed > 0) ||\n\t\t(nNumCampaignHoursPassed > 0))\n\t{\n\t\tUpdateClockForAllPlayers();\n\t}\t\t\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"NWN2:MotB","Description":"To use the Mask of the Betrayer date/time GUI in your own modules, add the following lines to the module's OnPCLoaded script:\n\n//On PC Loaded Script\n#include \"ginc_time\"\n\nvoid main()\n{\nobject oPC = GetFirstPC();\nSetClockOnForPlayer(oPC, TRUE);\n}\n// End code\n--\n\nThen have the module use the Module Heartbeat script in the 'Show Code' window above. An animated day/night icon will appear on the bottom left of the screen, which shows the date and time when the cursor is hovered over it.","Rating":10,"Votes":1,"Awards":[]},"394":{"Name":"Horn of the Skymage script","Author":"Dann Pigdon","Submitted":20111205,"Updated":20111206,"Category":"Inventory Item","Type":"Type - Spawning","Format":"Code Only","ShowCode":"// i_wyvernhorn_ac\n//\n// Activation script for 'Horn of the Skymage' item\n// Give the item a tag of 'wyvernhorn' and give it an activate item (long range) property\n// Summons a wyvern according to Zhentarim Skymage rules (PC level + CHA bonus + 1)\n// Claw & bite damage, & size, vary with level\n\n#include \"ginc_item\"\n\nvoid Summon(location lLoc)// Summon wyvern for 8 hours\n{\neffect eSummon = EffectSummonCreature(\"c_wyvern\",VFX_CAST_BARD_SONG, 3.6, 1);\nApplyEffectAtLocation(DURATION_TYPE_TEMPORARY, eSummon, lLoc, 28800.0);\n}\n\nstring WyvernClaw(int nHD)\n{\nstring sResref = \"nw_it_crewpsp005\";\nif (nHD > 4)\n  sResref = \"nw_it_crewpsp010\";\nif (nHD > 9)\n  sResref = \"nw_it_crewpsp015\";\nif (nHD > 14)\n  sResref = \"nw_it_crewpsp027\";\nreturn (sResref);        \n}\n\nstring WyvernBite(int nHD)\n{\nstring sResref = \"nw_it_crewps010\";\nif (nHD > 4)\n  sResref = \"nw_it_crewps012\";\nif (nHD > 9)\n  sResref = \"nw_it_crewps017\";\nif (nHD > 14)\n  sResref = \"nw_it_crewps016\"; \nreturn (sResref);\n}\n\n// Strip all properties from an item\nvoid StripItem(object oItem)\n{  \nitemproperty ipEffect = GetFirstItemProperty(oItem);\nwhile (GetIsItemPropertyValid(ipEffect))\n{\nRemoveItemProperty(oItem, ipEffect);\nipEffect = GetNextItemProperty(oItem);\n}// end while\n}\n\n// Level up summoned wyvern using Zhentarim Skymage rules\nvoid LevelUp(object oPC)\n{\nobject oSummoned = GetAssociate(ASSOCIATE_TYPE_SUMMONED, oPC);\nint iCharisma = GetAbilityModifier(ABILITY_CHARISMA, oPC);\nif (iCharisma < 0)\n  iCharisma = 0;\nint iLevel = GetHitDice(oPC) + iCharisma +1;\nif (iLevel < 1)\n  iLevel = 1;\nif (iLevel > 20)\n  iLevel = 20;\n\n// Level up the wyvern\nstring sXPArray = \"0000010030060100150210280360450550660780911051201361531711902102312532763003253\n51378406435\";\nstring sXP = GetSubString(sXPArray, (iLevel-1)*3, 3);\nint iXP = StringToInt(sXP)*1000;\nResetCreatureLevelForXP(oSummoned, iXP, 0);\nint iFactor = iLevel / 5;\nfloat fScale = 1.0 + ((iFactor - 1) * 0.1);\nSetScale(oSummoned, fScale, fScale, fScale);\n\nEquipNewItem(oSummoned, WyvernClaw(iLevel), 15, TRUE);\nEquipNewItem(oSummoned, WyvernBite(iLevel), 16, TRUE);\n\n// Create droppable & equipable wyvern sting (sickle)\nobject oSting = CreateItemOnObject(\"nx1_sickle01\", oSummoned, 1);\nStripItem(oSting);\nSetFirstName(oSting, \"Wyvern Sting\");\nSetDescription(oSting, \"This is the stinger from the tail of a wyvern.\");\nitemproperty ipAdd = ItemPropertyOnHitProps(IP_CONST_ONHIT_ITEMPOISON, IP_CONST_ONHIT_SAVEDC_14, IP_CONST_POISON_1D2_CONDAMAGE );\nAddItemProperty(DURATION_TYPE_PERMANENT, ipAdd, oSting);\nAddItemProperty(DURATION_TYPE_PERMANENT, ItemPropertyVisualEffect(0), oSting);\nSetDroppableFlag(oSting, TRUE);\n\n// Set follow distance\nExecuteScript(\"nw_ch_dist_18\", oSummoned);\nAssignCommand(oSummoned, ClearAllActions(TRUE));\n}\n\nvoid main()\n{\nobject oPC = GetItemActivator();\nlocation lLoc = GetItemActivatedTargetLocation();\n\nif (GetIsAreaInterior(GetArea(oPC)))\n  {\n  SendMessageToPC(oPC, \"<color=red>You must be outside to summon a wyvern\");\n  return;\n  }\nAssignCommand(oPC, PlaySound(\"as_pl_horngood1\"));  \nAssignCommand(oPC, PlaySound(\"as_n2_dragoland2\"));\nAssignCommand(oPC, Summon(lLoc));\nDelayCommand(4.6, LevelUp(oPC));\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"An activation script for a 'Horn of the Skymage' usable item, to summon a wyvern using the Zhentarim Skymage ability rules. See script comments.","Rating":"N/A","Awards":[]},"395":{"Name":"Generic Foraging System","Author":"Kamal","Submitted":20111220,"Updated":20130116,"Category":"Scripting routines","Forum Thread":"Link","Type":"Type - Other","Format":"Code Only","ShowCode":"/*\ngerneic foraging system. checks entire party for highest skills, which skills, animations, dc's etc are stored on the placeable.\nwyrin's foraging system is included here as a special case in two versions, the new version checks the entire party for the skills, the original is also included but commented out, it only checks the placeable user.\nwyrin's system has hardcoded skills.\n\n*/\n\n//CreateItemOnObject is bugged or it's description is unclear, if you try to create a quantity greater than 1\n// of an item that is not stackable, you only get 1. Worked aorund with while loop. Kamal. \n\nvoid main()\n{\n//we need to track who actually used the object, so they can play the animation\n//even though another members skills may be used.\nobject oItemUser = GetLastUsedBy();\n\n//will be used to cycle through party\nobject oPC = GetFirstFactionMember(GetFirstPC(), FALSE);\n\n// oPartyHighest are objects created to store which party member has the highest relevant skill values in party\n// when skillchecking, since regular skill checking is only pc\nobject oPartyHighest1;\nobject oPartyHighest2;\n\n//controls how many we give to player, we'll make it one if unspecified\nint iStack = GetLocalInt(OBJECT_SELF, \"iStack\");\n\n//tag of item received for success and partial success\nstring sReward = GetLocalString(OBJECT_SELF, \"sReward\");\nstring sPReward = GetLocalString(OBJECT_SELF, \"sPReward\");\n\n// sound and animation to play\nstring sSound = GetLocalString(OBJECT_SELF, \"sSound\");\nint iAnimation  = GetLocalInt(OBJECT_SELF, \"iAnim\");\n//reference\n//ANIMATION_LOOPING_GET_LOW =12\n//ANIMATION_LOOPING_GET_MID =13\n\n\n// we can also play any success, partial success, or failure message\nstring sSuccess = GetLocalString(OBJECT_SELF, \"sSuccess\");\nstring sPSuccess = GetLocalString(OBJECT_SELF, \"sPSuccess\");\nstring sFailure = GetLocalString(OBJECT_SELF, \"sFailure\");\n\n//give ourselves control over what skills to use\n//these are the in the script editor list of globals, SKILL_APPRAISE for instance\n/*\nSKILL_CONCENTRATION =1\nSKILL_DISABLE_TRAP = 2\nSKILL_DISCIPLINE =3 (not in nwn2)\nSKILL_HEAL = 4\nSKILL_HIDE = 5\nSKILL_LISTEN = 6\nSKILL_LORE = 7\nSKILL_MOVE_SILENTLY =8\nSKILL_OPEN_LOCK =9\nSKILL_PARRY = 10\nSKILL_PERFORM =11\nSKILL_DIPLOMACY =12\nSKILL_SLEIGHT_OF_HAND =13\nSKILL_SEARCH =14\nSKILL_SET_TRAP = 15\nSKILL_SPELLCRAFT =16\nSKILL_SPOT =17\nSKILL_TAUNT =18\nSKILL_USE_MAGIC_DEVICE =19\nSKILL_APPRAISE =20\nSKILL_TUMBLE =21\nSKILL_CRAFT_TRAP = 22\nSKILL_BLUFF =23\nSKILL_INTIMIDATE = 24\nSKILL_CRAFT_ARMOR =25\n SKILL_CRAFT_WEAPON =26\nSKILL_CRAFT_ALCHEMY =27\nSKILL_RIDE = 28 (not in nwn2)\nSKILL_SURVIVAL =29\n*/\nint iSkill1 = GetLocalInt(OBJECT_SELF, \"iSkill1\");\nint iSkill2 = GetLocalInt(OBJECT_SELF, \"iSkill2\");\n\n//and give control over DC, plus make sure they're valid.\nint iDCSkill1 = GetLocalInt(OBJECT_SELF, \"iDC1\");\nif (iDCSkill1 == 0)\n\t{iDCSkill1 = 15;}\nint iDCSkill2 = GetLocalInt(OBJECT_SELF, \"iDC2\");\nif (iDCSkill2 == 0)\n\t{iDCSkill2 = 15;}\n\t\n\t\n\t\n/*\nwe're checking the entire party for the skills, so find highest values in party\n*/\n \t\nobject oMember = GetFirstFactionMember(oPC);\n//initialize the int to record highest party skill, we're using these to record them for later\nint iPartyHighForSkill1 = 0;\nint iPartyHighForSkill2 = 0;\n\n//find highest skill in party of skill we're checking\nwhile (GetIsObjectValid(oMember))\n\t{  \n\t//store the skill of the party member we're checking\n\tint iPartyMemberSkill1 = GetSkillRank(iSkill1,oMember, FALSE);\n\toPartyHighest1 = oMember;\n\t//compare member's skill against party high, and set new high if member's skill higher\n\tif (iPartyMemberSkill1 > iPartyHighForSkill1)\n\t\t{\n\t\tiPartyHighForSkill1 = iPartyMemberSkill1; //store party high\n\t\toPartyHighest1 = oMember; //remember this is the party member with highest skill for later skill checking\n\t\t}\n\t\toMember=GetNextFactionMember(oMember, FALSE);\n\t\t\n\t\tstring sTest1 = IntToString(iPartyHighForSkill1);\n\t\t//\tSendMessageToPC(oItemUser, \"party's skill1 high = \" + sTest1);\n\t}\n\t\n// now record party high for skill 2\t\n\n \t\nobject oMember2 = GetFirstFactionMember(oPC);\n\twhile(GetIsObjectValid(oMember2))\n\t{  \n\tint iPartyMemberSkill2 = GetSkillRank(iSkill2,oMember2, FALSE);\n\toPartyHighest2 = oMember2;\n\tif (iPartyMemberSkill2 > iPartyHighForSkill2)\n\t\t{\n\t\tiPartyHighForSkill2 = iPartyMemberSkill2;\n\t\toPartyHighest2 = oMember2;\n\t\t}\n\t\toMember2 = GetNextFactionMember(oMember, FALSE);\n\t\t\t\n\t\t\tstring sTest2 = IntToString(iPartyHighForSkill2);\n\t//\t\tSendMessageToPC(oItemUser, \"party's skill2 high = \" + sTest2);\n\t}\n\t\n\n// detect wyrin's original forage items and all others using the same tag system, applies wyrin's system, except redone to use party high for skills.\n//comment this out and use the next section instead for wyrin's original behavior, checking only the user of the object.\nif (FindSubString(GetTag(OBJECT_SELF), \"forage_\")!=-1)\n{\nFloatingTextStringOnCreature(\"Using wyrin's system\", oItemUser); //debug\n\tif (GetLocalString (OBJECT_SELF, \"sProduce\") == \"produce_reeds\")\n\t\t{\n\t\tiStack = 10;\n\t\t}\n\tstring sProduce = GetLocalString(OBJECT_SELF,\"sProduce\");\n\tstring sForage = GetLocalString(OBJECT_SELF,\"sForage\");\n\t\n\tif (//(GetIsSkillSuccessful(oItemUser, SKILL_SURVIVAL, GetLocalInt(OBJECT_SELF, \"iSurvival\"))) && ( //commenting out wyrin original code\n\tGetIsSkillSuccessful(oItemUser, SKILL_CRAFT_ALCHEMY, GetLocalInt(OBJECT_SELF, \"iAlchemy\")))//)\n\t\t{\n\t\t\n\t\tAssignCommand(oItemUser, ActionPlayAnimation(ANIMATION_LOOPING_GET_LOW, 1.0f, 1.0f));\n\t\twhile (iStack>0)\n\t\t\t{\n\t\t\tCreateItemOnObject(sReward, oItemUser, iStack);\n\t\t\tiStack--;\n\t\t\t}\n\t\tSendMessageToPC(oItemUser, \"You successfully forage the \" + sForage);\n\t\tFloatingTextStringOnCreature(\"This \" + sForage + \" should come in useful!\", oItemUser);\n\t\tGiveXPToCreature(oItemUser, 30);\n\t\tPlaySound(\"as_na_leafmove3\");\n\t\t}\n\telse\n\t\t{\n\t\tAssignCommand(oItemUser, ActionPlayAnimation(ANIMATION_LOOPING_GET_LOW, 1.0f, 1.0f));\n\t\tSendMessageToPC(oItemUser, \"You fail to gather the \" + sForage + \" correctly and the plant is wasted\");\n\t\tFloatingTextStringOnCreature(\"Curses! I'll have to find another source!\", oItemUser);\n\t\t}\nDestroyObject(OBJECT_SELF, 0.5);\n}\n\n/*\n// detect wyrin's original forage items and all others using the same tag system, applies wyrin's system, does not check party, same as wyrin's original system\nif (FindSubString(GetTag(OBJECT_SELF), \"forage_\"))\n{\n\tif (GetLocalString (OBJECT_SELF, \"sProduce\") == \"produce_reeds\")\n\t\t{\n\t\tiStack = 10;\n\t\t}\n\tstring sProduce = GetLocalString(OBJECT_SELF,\"sProduce\");\n\tstring sForage = GetLocalString(OBJECT_SELF,\"sForage\");\n\t\n\tif ((GetIsSkillSuccessful(oItemUser, SKILL_SURVIVAL, GetLocalInt(OBJECT_SELF, \"iSurvival\"))) && (GetIsSkillSuccessful(oItemUser, SKILL_CRAFT_ALCHEMY, GetLocalInt(OBJECT_SELF, \"iAlchemy\"))))\n\t\t{\n\t\t\n\t\tAssignCommand(oItemUser, ActionPlayAnimation(ANIMATION_LOOPING_GET_LOW, 1.0f, 1.0f));\n\t\tCreateItemOnObject(sProduce, oItemUser, iStack);\n\t\tSendMessageToPC(oItemUser, \"You successfully forage the \" + sForage);\n\t\tFloatingTextStringOnCreature(\"This \" + sForage + \" should come in useful!\", oItemUser);\n\t\tGiveXPToCreature(oItemUser, 30);\n\t\tPlaySound(\"as_na_leafmove3\");\n\t\t}\n\telse\n\t\t{\n\t\tAssignCommand(oItemUser, ActionPlayAnimation(ANIMATION_LOOPING_GET_LOW, 1.0f, 1.0f));\n\t\tSendMessageToPC(oItemUser, \"You fail to gather the \" + sForage + \" correctly and the plant is wasted\");\n\t\tFloatingTextStringOnCreature(\"Curses! I'll have to find another source!\", oItemUser);\n\t\t}\nDestroyObject(OBJECT_SELF, 0.5);\n}\n\n*/\n\t\n\n\n/* \nKamal\ndraw on local ints on the placeable to determine what skills to check, what dc, message, reward, animation, sound etc.\n*/\nelse\n{\n//record success. by doing this before the if we don't have a case where the party succeeds in only one check for complete success,\n//thus failing that, then failing both partial success checks. Since the skill check is displayed to players, that looks very strange to them.\nint iSuccess1 = GetIsSkillSuccessful(oPartyHighest1, iSkill1, iDCSkill1);\nint iSuccess2 = GetIsSkillSuccessful(oPartyHighest2, iSkill2, iDCSkill2);\n\niStack = GetLocalInt(OBJECT_SELF, \"iStack\");\nSendMessageToPC(GetFirstPC(), \"Debug: Kamal script foraging.\");\n\n\n\n//note that createobject uses the template, not the tag.\n\t\t//player succeeds in both skillchecks\n\t\tif ((iSuccess1==1) && (iSuccess2==1) )\n\t\t{\n\t\t\t//actions to take on success\n\t\t\tAssignCommand(oItemUser, ActionPlayAnimation(iAnimation, 1.0f, 1.0f));\n\t\t\twhile (iStack>0)\n\t\t\t\t{\n\t\t\t\tCreateItemOnObject(sReward, oItemUser, iStack);\n\t\t\t\tiStack--;\n\t\t\t\t}\n\n\t\t\tPlaySound(sSound);\n\t\t\tSendMessageToPC(oItemUser, sSuccess); //note the message is stored on the object\n\t\t//\tDestroyObject(OBJECT_SELF, 0.5);\n\t\t}\n\t\t//failed at least one check, check again for partial success.\n\t\telse if ((iSuccess1==1) ||  (iSuccess2==1) )\n\t\t\t{\n\t\t\t\t//actions to take on partial success\n\t\t\t\tAssignCommand(oItemUser, ActionPlayAnimation(iAnimation, 1.0f, 1.0f));\n\t\t\t\twhile (iStack>0)\n\t\t\t\t\t{\n\t\t\t\t\tCreateItemOnObject(sReward, oItemUser, iStack);\n\t\t\t\t\tiStack--;\n\t\t\t\t\t}\n\t\t\t\tPlaySound(sSound);\n\t\t\t\tSendMessageToPC(oItemUser, sPSuccess);\n\t\t//\t\tDestroyObject(OBJECT_SELF, 0.5);\n\t\t\t}\n\t\t//well party failed\n\t\telse\n\t\t\t{\n\t\t\t\t//what to do on failure\n\t\t\t\tAssignCommand(oItemUser, ActionPlayAnimation(iAnimation, 1.0f, 1.0f));\n\t\t\t\tSendMessageToPC(oItemUser, sFailure);\n\t\t\t\tPlaySound(sSound);\n\t\t//\t\tDestroyObject(OBJECT_SELF, 0.5);\n\t\t\t}\n}\n}Select All Text | View Code in separate window","Patch":"1.00","NWN2Game":"All","Description":"This is an generic, flexible foraging system that is backwards compatible with wyrin's foraging system (http://nwvault.ign.com/View.php?view=NWN2Scripts.Detail&id=225). It uses the same script name, so it can be retrofit to any module that uses his system with no additional work, or used as an override by a player. I haven't tested PW use, as I don't develop for one.\n\nDifferences:\nAllows customization of rewards (stack size supported), skills to check, skill dc, animations/sounds/messages to play. These are stored as local variables on the placeable. Partial success is allowed, with separate rewards and player messages. Skill checks are party-wide, not just the user of the placeable (not fully tested that bit yet).\n\nUsage: In addition to the normal foraging of plants, you could \"forage\" a painting by checking appraise and or lore, discover a sword is heirloom quality with craft weapon, make the pc dance a jig on success, etc.\n\nSupport for wyrin's system:\nWyrin's system includes placeables, and these are treated as a special case, checked for by their tag. Wyrin's items all start their tag \"forage_\", so that's what's checked for (so don't tag your new forage-able placeable that way). Script includes both wyrin's original skill checks (item user's skills only), and party-wide skills checked, so you can pick what you prefer.\n\n1/16/2013: put CreateItemOnObject into a while loop so it would correctly create more than one of a non-stackable object.","Rating":10,"Votes":1,"Awards":[]},"396":{"Name":"eyesolated Encounters","Author":"eyesolated","Submitted":20120109,"Updated":20120109,"Category":"Scripting routines","Type":"Type - Spawning","Format":"Module Only","Patch":"1.23","NWN2Game":"All","Description":"This is sort-of a WiP (Work in Progress) release of an encounter system i worked on extensively last year. It's a pretty advanced system for designing encounters in any NWN/NWN2 module. Despite it being WiP it is fully usable and tested quite extensively, there's only some (optional) functionality missing that i planned to include.\n\nThe basic idea was to enable everyone to create interesting multi-phase encounters without any scripting knowledge whatsoever. With this system it is possible to create interesting and engaging encounters that go that extra step beyond what is normally possible in NWN. Included in the .rar file are modules including the scripts and demo encounters both for NWN and NWN2 as well as a .pdf documentation.\n\nAn example of what is possible:\nImagine a goblin tribe in a cave. As you enter the \"village\", some goblins spawn in front of various huts and the battle starts. After you have dealt with those foot soldiers, a shaman comes out. While battling the shaman, every 5 seconds an additional goblin appears. Upon defeating the shaman, the goblin tribe's leader and two elite guards spawn. Upon defeating the tribe's leader, the door to his hut unlocks and the heroe's can enter and get loot.\n\nWithout eE, this would be quite complicated to setup. With eE, all you need to do is create the encounter object, setup the 3 phases of the encounter (objects and variables) and link them together (all without even entering the script editor). Maybe you want the goblin soldiers in the first phase to reflect the PC count in the encounter area? No Problem, this feature is included in eE. And you can easily tweak several encounter variables to your liking. Just remember: Design your encounter on paper at first (including tags and other things of note) and you will have an easier time creating your encounter in eE.\n\nAs eE Encounters are basically objects, it is even possible to share your creations with other eE users by exporting them into .erf files!","Rating":9.5,"Votes":2,"Awards":[]},"397":{"Name":"Gender Based Item Scripting.","Author":"erikbreau","Submitted":20120308,"Updated":20120309,"Category":"Inventory Item","Type":"Type - Conditionals","Format":"Code Only","ShowCode":"// A simple, tagged based script that will make clothing and equipable items gender based. \n// Application; \n// step 1 - the Toolset/Gameclient will do all the work, simply apply one of the two scripts below into your module, replace the part of the script title called 'tagofitem' with the actual tag of the item, and compile the script. \n// Note: Each item must have its own script. You must repeat all steps for each tem.\n// step 2 - make sure the item 'Identified?\" is set to TRUE.\n// step 3 - in the item's 'Behaviour' section, open up 'item properties' and set the item to \"Cast Spell: Unique Power\" and set it to [- Unlimited Uses].\n// You are done. \n//Variations: the entry 'INVENTORY_SLOT_CHEST' can be changed to any body slot; _HEAD, _BELT, _NECK, _BOOTS, _CLOAK, _ARMS, _LEFTHAND, _RIGHTHAND, _LEFTRING, _RIGHTRING.\n\n---Script starts on next line---------------------------------------------------------------------\n// Will unequip an armor or chest piece clothing item if PC is male. \n//Created by erikbreau - 08-03-12\n#include \"x2_inc_switches\"\nvoid main()\n{\n        int nEvent =GetUserDefinedItemEventNumber();             \n        // Exit if not an equip event\n        if(nEvent != X2_ITEM_EVENT_EQUIP)return;\n        // Your script here\nobject oPC = GetPCItemLastEquippedBy();\nobject oItem;\noItem = GetPCItemLastEquipped();\nif (!GetIsPC(oPC)) return;\nif (GetGender(oPC)==GENDER_MALE)\n   {\n   AssignCommand(oPC, ActionUnequipItem(GetItemInSlot(INVENTORY_SLOT_CHEST)));\n   }\n}\t\t\n---Script starts on next line---------------------------------------------------------------------\n// Will unequip an armor or chest piece clothing item if PC is female. \n//Created by erikbreau - 08-03-12\n#include \"x2_inc_switches\"\nvoid main()\n{\n        int nEvent =GetUserDefinedItemEventNumber();             \n        // Exit if not an equip event\n        if(nEvent != X2_ITEM_EVENT_EQUIP)return;\n        // Your script here\nobject oPC = GetPCItemLastEquippedBy();\nobject oItem;\noItem = GetPCItemLastEquipped();\nif (!GetIsPC(oPC)) return;\nif (GetGender(oPC)==GENDER_FEMALE)\n   {\n   AssignCommand(oPC, ActionUnequipItem(GetItemInSlot(INVENTORY_SLOT_CHEST)));\n   }\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"A simple set of scripts & instructions to make equip-able items gender only. So easy to use, even a noob like me can do it.","Rating":"N/A","Awards":[]},"398":{"Name":"Danaan Tactics","Author":"J.E. McKellar","Submitted":20120325,"Updated":20130219,"Category":"Creature AI","Type":"Type - Combat","Format":"Module Only","Patch":"1.23","NWN2Game":"NWN2","Description":"This module is a quick sandbox demonstration of the improved tactical AI for my upcoming rebuild of 'The Last of the Danaan'.\n\nIn keeping with the setting of the series, the tactics are vaguely Napoleonic, and assume a low-magic world.\n\nThis can be played as a sort of real-time-tactics game, or you can simply set back and watch the battles unfold. Healers and bards may be able to fulfill a supporting role.\n\nv1.01 - Additions\n-4 new set-piece battle options\n-Goblin troops\n-Chat commands\n-Grass terrain triggers (for stealth)\n-New clean-up options\n-Option to be neutral towards Imperials\n","Rating":9,"Votes":2,"Awards":[]},"399":{"Name":"Fearsome Roster Feats Fix","Author":"kamal","Submitted":20120328,"Updated":20120328,"Category":"Scripting routines","Forum Thread":"social.bioware.com/forum/1/topic/169/index/10557735","Type":"Type - Other","Format":"Module Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"The script for Fearsome Roster and Improved Fearsome Roster in NWN2 Storm of Zehir does not match the ingame description. The script makes enemy overland map encounters flee if they are 4 (Improved Fearsome Roster), 5 (Fearsome Roster) or 6 (no feat) levels below the party. Ingame text for the feat indicate enemies should flee at 2/3/4 levels, respectively.\n\nThis fixes that by adjusting the script to match the ingame description.\n\nInstallation: unzip the download and put the files into your My Documents/Neverwinter Nights 2/Override folder. This will affect save games. ","Rating":10,"Votes":1,"Awards":[]},"400":{"Name":"kamals companion ai","Author":"kamal","Submitted":20120401,"Updated":20120403,"Category":"Area","Type":"Type - Henchmen","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"Amazing ai upgrade\nPerfect for companions\nRealistic\nInnovative concept\nLearning ai.\n\nFoolproof installation\nOriginal code\nOutstandingly implemented\nLayers and layers of depth\nSimply unpack into override folder to install. ","Rating":"N/A","Awards":[]},"401":{"Name":"MySQL Library","Author":"Crom","Submitted":20120610,"Updated":20120708,"Category":"Database Related","Forum Thread":"Link","Type":"Type - Menu","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"Library using MySQL to store and generate books for players\n \nAvailable in French or Englih ;)\n \n\n==================> How does it work?\n\n- The player can read or buy books\n\n- Books are filtered by category end ordered by title\n\n- Books are dematerialized : no custom blueprints are needed. Books are created with a base blueprint and modified with the informationin the database\n\n- You can have multiple libraries containing different books\n\n- Recently added books are marked with a N (stands for New)\n\n- Books are stored in the db with :\ncode : (unique & mandatory) used for the book blueprint ans as the book identifier\ndate : Date when the book has been added\nlibtag : libraries tags that possess the book multiple tags are separated with a comma \",\". To display a book in all libraries, enter \"*\"\nprice : Cost of the book in gp\nicon : Number of the icon (see notes). Optional\ncat : Category name of the book (ex : Monsters, Module, ...)\nsource : Source of the book (HRP) (Wikipedia, Gemmaline, ...). if ='', will not be shown in the book\nauthor : Writer of the book (RP) (ex : Elminster, Volo, ...). if ='', will not be shown in the book\ntitle : Book's title\ntext : Book's content, up to 10000 char\n\n\n\n\n==================> Installation\n\nNWN :\n- Import Scripts.erf (contains gui_library.nss and library_onused.nss)\n- Import [LANGUAGE]/Scripts.erf (contains library_inc.nss)\n- Assign 'library_onused' to the OnUsed script of the placeable to click to browse the books (and remember the placeable tag ;))\n- Put [LANGUE]/library.xml into the folder documents/nwn2/ui/custom\n- If there is already a file named \"ingamegui.ini\" in documents/nwn2/ui/custom, add the folowing line at the end of [MandatoryGUI] :\n SCREEN_LIBRARY=library.xml\nelse add the \"ingamegui.ini\" from the svn into documents/nwn2/ui/custom\n\n\nMySQL :\nUsing the library require a nwnx4 server and a SQL database & table ;)\nTo create the needed table, execute this request :\nCREATE TABLE `library` (\n `code` varchar(45) NOT NULL,\n `date` timestamp NOT NULL default CURRENT_TIMESTAMP,\n `libtag` varchar(45) default '*',\n `price` int(6) default '10',\n `icon` int(11) default '229',\n `cat` varchar(45) default 'Other',\n `source` varchar(45) default '',\n `author` varchar(45) default '',\n `title` varchar(100) NOT NULL,\n `text` varchar(10000) NOT NULL,\n PRIMARY KEY (`code`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n\nNote : You can execute the script in [LANGUAGE]/Books.sql to add some sample books\n\n\n\n\n==================> Notes\n \nID icon - icon name examples\n\n 183 : it_qi_golembook\n 223 : it_expensivebook\n 224 : it_lockedbook01\n 225 : it_lockedbook02\n 226 : it_elfbook\n 227 : it_demonbook\n 228 : it_plainbook01\n 229 : it_plainbook02\n 230 : it_plainbook03\n 231 : it_fancyrecipebook\n 232 : it_recipebook01\n 233 : it_recipebook02\n 1204 : it_qi_bookjustdesserts\n 1221 : it_qi_numberbook\nAnd many others with nwn2_icons.2da\n\n\n\n==================> Thanks\n\nSilver Oak for the sample books in English\n\n","Rating":9,"Votes":1,"Awards":[]},"402":{"Name":"Chess-like minigame Sava","Author":"Shinn","Submitted":20120623,"Updated":20120626,"Category":"Games","Type":"Type - Other","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"This is a multiplayer minigame from polish PW server Aeris 2, based upon Sava, drow board game from Forgotten Realms setting. \n\nTwo players take command of their pieces on a chess board with one goal - eliminate opponent's Matron Mother. \n\nMost pieces are pretty much similar to chess pieces with some variation. \n\nBiggest difference from chess is a random factor of dice throwing. Each player can throw dices to select a special ability to be used once in a game, from taking enemy's piece, converting them, to upgrading your own. \n\nSava comes with a game saving mechanics, you can save current game to an item and continue at any time. \n\nHOW TO INSTALL INTO A MODULE:\n- Import erf files shinn_sava_resources.erf\n- Place one Green Player and Yellow Player controllers near each other\n- Place one game hub near controllers\n- Compile scripts\n- You're done! You can place as many sets as you wish\n\n","Rating":10,"Votes":4,"Awards":[]},"403":{"Name":"MetaPrepa","Author":"kevL's et al.","Submitted":20120716,"Updated":20130308,"Category":"Spells","Type":"Type - Multiple Spells","Format":"Code Only","Patch":"1.23","NWN2Game":"All","Description":"The MetaRod of Preparations allows PC and Companions to quickly and consistently recast spell buffs as well as refresh Bardic Inspirations.\n\n===============================================================================\n\nMetaPrepa\nMetaRod of Preparations ( MRoP )\nv.beta.92\n2013 jan 7\n\n\n-------------------------------------------------------------------------------\nEditor:\nkevL's, a variant of Lost Creation's Rod of Preparation\n\nContact:\nNeverwinter Nexus or the BSN boards, or perhaps NwVault page.\n\nWebpages:\nLink\nLink\n\n\n-------------------------------------------------------------------------------\nCredits:\n\nMetaPrepa is a variant of the Rod of Preparation by Matt McMahon (aka \"Lost\nCreation\") which can be found on NwVault:\n\nLink\n\n\nThe RoP is a complete rewrite of Loudent's Rod of Full Party Buffing which can\nbe found here on NwVault:\n\nLink\n\n\nArkalezth of the BSN boards, the Don Quixote who offered insightful feedback\nthat broadened the scope and generally urged the tone of this project.\n\nLink\n\n\nSky FM radio - Mostly Classical\nLink\n\n\n-------------------------------------------------------------------------------\nHow it works:\n\nIf you're familiar with LC's Rod of Preparation, there are three major\ndifferences.\n\n1. The primary purpose of this Rod, the MetaPrepa rod, is to implement\nmetamagics on buffing spells. It does this by using a spellhook, while\nattempting to respect modules that are designed with a spellhook already in\nplace. ( See the hook script for further information. )\n\n2. To do that, the MetaRod has two modes of operation - Learn and Play modes.\nBoth are activated by double-clicking the Rod and activating it on itself. First\nup is Learn mode; this searches through a list of spells when a party member\ncasts a spell, and if the buff is found ( or if it's one of the 7 Bardic\nInspirations ) a Page of Preparation is added to a Book of Preparations on the\ncaster of that buff. This lets the spellhook capture the metamagic type, as well\nas other things, and write it as a variable on the preparation. Play mode then\nneeds to be activated for regular play and re-buffing after resting. If you\nforget to switch from Learn to Play modes it should not break anything, but\nthere might be a few more preparations in your Books than you want. Watch for\nmessages that are intended as reminders of which mode your Rod is in ...\n\n3. Feats work differently because technically they do not use a spellhook. They\nalso are not always 'spells' at all. Feats have ... issues. So far the only\nfeats that are allowed to be prepared are the 7 Bardic Inspirations. This\nrequired adding the spellhooking code to those 7 scripts ( included ).\n\nFurther, spellscripts are included to cover buffs that are cast on items in\ncharacters' inventories - armor, shields, and weapons basically. I did this so\nthat items which have received buffs do not need to passed back to a caster when\nre-buffing with the Rod.\n\nKaedrin's 1.41.4 PrC Pack scripts were used where available. All spellscripts\nincluded have been tidied and recompiled, so if you have issues with any of them\ntalk to me, or fix them yourself. The only potential problem I see is that if\nyou want to recompile some of the scripts you may need Kaedrin's #includes ( not\nincluded ). caveat emptor! And since I find Kaedrin's material slightly\noverpowered I backed off a couple of Massive Critical properties etc by a notch.\n\nno, I don't want to keep two versions of spells. nyah!\n\n\n-------------------------------------------------------------------------------\nInstallation:\n\nUnzip the MetaPrepa to your MyDocs->NwN2->override folder. MAKE SURE THAT FILES\nARE NOT DUPLICATED IN THE OVERRIDE FOLDER! This means searching for duplicate\nspellscripts + Inspirations, then rename, back up, or remove them. If you have\nKaedrin's PrC Pack or any other spell fixes pack, you will very likely have\nduplicates kicking around.\n\nThe core MRoP files do not conflict with previous Rod of Preparation files.\n\n\nUninstallation:\n\nRemove the MetaPrepa folder from MyDocs->NwN2->override. Revert all spellscripts\nand Inspiration scripts that you had backed up.\n\n\n-------------------------------------------------------------------------------\nSetup:\n\nIn the game, open the console by typing\n\n`\nDebugMode 1\n\nthen enter,\n\nRunScript mrop\n\nIf you are not controlling your PC, control will be switched to your PC. This is\nsimply a safety measure and should help focus your attention on what comes next.\nThen exit the console by typing\n\nDebugMode 0\n`\n\nOr you can do it from the chat window.\n\n##DebugMode 1\n##RunScript mrop\n##DebugMode 0\n\n\nYour PC should receive a MetaRod. Then activate the Rod on anything ( your PC,\nthe ground, wherever ) to get things moving along. A GUI will pop up with the\nsetup screen if everything is progressing nicely. The only setup is chosing\nwhether you want re-buffing to happen Instantly or As Actions. Instantly means\nall buffs are cast instantly, and As Actions means each preparation takes a\nnormal round to cast. If you want to change your previous setup, repeat the\nconsole commands above.\n\nCongratulationz!!! the MetaPrepaRoP is installed!\n\n\n-------------------------------------------------------------------------------\nUsage:\n\nActivate the Rod on itself\n- switches between Learn and Play modes. Learn allows buffs ( and Bardic\nInspirations!! ) to be turned into preparations, Pages in the Book of\nPreparations that get created on each caster that prepares ( casts ) a buff from\nthe list of spells in the spellhook script. Pages of Preparation are created\nonly for buffs cast on PC faction members or their equipment. When done,\nre-activate the Rod on itself to switch to Play mode. Adventure as usual ...\nand after a rest - or whenever you like really -\n\nActivate the Rod on anything except itself\n( but not on a Book of Preparations ) - this causes the buffing sequence to\nbegin, whether Instantly or As Actions. Spells that are not memorized will\nmerely be skipped, as will buffs that were cast on targets that are no longer\navailable. If a character still has effects from a previous buffing, the buffs\nshould refresh ( rather than be skipped ).\n\nActivate the Rod on a Book of Preparations\n- this brings up a GUI asking if you wish to destroy the Book and all its Pages\n& contents. A confirmation is required if you then want to destroy the Book.\n\nActivate a Page of Preparation on itself:\n- brings up a GUI asking if you wish to destroy the Page. A confirmation request\nis not given.\n\n\nnote: Anyone in the party can carry and activate the MetaRod.\n\n\n-------------------------------------------------------------------------------\nTips:\n\nPages can be taken out of the Book and put back in at your discretion. Only\nPages that are in a Book will be cast during the buffing routine.\n\nPages of Preparation can be added one ( or several ) at a time to a Book by\nentering Learn mode, casting the buff(s), then returning to Play mode.\n\nBardic Inspirations that are prepared have special considerations. A bard can\nhave only one Inspiration active, but you will find that the Rod allows up to\nall 7 to be prepared as Pages. My advice is to prepare two or three Inspirations\nthat you like to use as your standard Bard defaults, then take them out of your\nBook and swap in only the one that you want to go with for a while. If you\nchange your mind later, just swap in a different one ( without having to enter\nLearn mode ).\n\nIf a Page of Preparation is examined, you should see a lot of arcana there -\nthat is for debugging and, well ... arcana lore. It has occult significance ...!\n\nA Book of Preparations is cursed and cannot be gotten rid of except by\nactivating the Rod on it and chosing to destroy it. Pages however can be passed\naround freely, although if you put one into the Book of a caster to which it\ndoes not belong and your cat happens to scratch your eye out as a result, I am\nnot responsible. Thanks!\n\nPages at the top of the Book get cast first .....\n\nThe MetaRod is not meant for combat. It cannot be placed into Learn mode when\na member of the party is in combat. You can do the buffing routine while combat\nis near, but the Rod will cast spells As Actions even if Instantly was chosen\nduring setup.\n\nDo not store anything in the Books apart from Pages of Preparation. ( I don't\nknow why, exactly, it just sounds good to get that out of the way. )\n\nDruidic Spontaneous Conversion is not supported. The Bardic Inspirations will\nwork Instantly if you chose Instantly during setup. Other feats should not work\nat all ( as of v.beta.7 ). As of v.beta.8, the Animal Companion and Summon\nFamiliar feats have been added - they require the special scripts that are\nincluded, just like the Bardic Inspiration scripts ( and buff-on-item scripts ).\nAs of v.beta.92, fixed a bad bug that kept Animal Companions at low level iff\nKaedrin's PrC Pack wasn't installed correctly. dam animals ...\n\nMetaPrepa ought work with or without the kPrC Pack!!! Note: Cyphre's Companions\nare also supported.\n\nSpells that are cast from subradial menus need to use 'cheat casting' by the\nRod, as such they will be cast at CL 10 and will have \"(10)\" on their Pages'\ndescriptions.\n\nSpells that were granted to a character by Clerical Domain Powers are also\nproblematic. Since, like subradial spells mentioned above, they are not fully\nregistered as known by the caster these must also be cheat-cast at CL 10. Their\nPages of Preparation will not have \"(10)\" in the description, because the method\nof determining which casts come from Domain granted powers is not absolute. I\nbelieve the underlying issue is hard-coded.\n\nThe MetaRop has added code to spellscripts that cast buffs on items. This allows\nitems such as armor, shields, and weapons to be buffed in the caster's\ninventory during Learn mode and then passed to other characters, where they\nwill be targetted directly for rebuffing during regular Play mode. Again, the\nmethod used is not foolproof: it depends on (a) the caster, (b) the name of the\nitem, and (c) the spell. When an idea occurs that would make this more solid, it\nshould be done.\n\nFinally, spells that are cast on the ground will never be prepared. All\npreparations need a targetted object to maintain integrity. Usually this means\nthat if you try to prepare a summons such as Planar Ally or Summon Creature, the\nfile Spells.2da ( and Feat.2da ) have to be configured to cast the spell or\nperform the feat on an object, which ought then allow a Page to be written in a\nBook of Preparation. In addition, don't expect to prepare a summons and then\nbuff it during the buffing routine: the target will be invalid since it hasn't\nbeen summoned yet. If you want to buff your summons you need to have it out\nalready, or call it before engaging the buffing routine ....\n\n\nnb. There is a maximum number of spells that can be lined up on the Action\nQueue. It's about 20.\n\n\n-------------------------------------------------------------------------------\nBug Reports requested:\n\nIf you notice any spell buffs that MetaPrepa does not prepare, feel free to tell\nme about them.\n\nIf you notice any spell buffs that were cast on items ( armor, shields,\nweapons ) that do not get correctly re-applied, please let me know about these.\n\nIf you have a favorite Feat that you would like to see implemented, I'll\nlook into it - no guarantee though.\n\nAnd anything else that goes the wrong direction, after you've ruled out as many\npossibilities as you can on your end. Tks!\n\nPlayers will and have noticed that numerous spell descriptions do not match\ntheir actual use in NwN2; this is because descriptions are in a file called\nDialog.Tlk while spell usage is handled by Spells.2da and the spellscripts. It\nis far beyond the purview of the MetaPrepa to address those inconsistencies, but\nthere it is.\n\n\n-------------------------------------------------------------------------------\nA Note About 2DAs:\n\nThe .2da files that come with Lost Creation's Rod of Preparation are not used\nby the MetaRod. Instead, Spells.2da is used and Feats are handled partly as\nspells.\n\nOf particular interest in Spells.2da are the columns: MetaMagic, TargetType,\nImpactScript, and FeatID; also Name and SpellDesc.\n\n\n-------------------------------------------------------------------------------\nFile Manifest:\n\nblueprints:\nmrop_rod.uti\nmrop_book.uti\nmrop_page.uti\n\nscripts:\nmrop.nss/ncs ( setup )\n\nmrop_inc.nss ( #include )\nmrop_inc_preps.nss ( #include )\nmrop_inc_gui.nss ( #include )\n\nmrop_spellhook.nss/ncs ( spellhook )\n\ni_mrop_rod_ac.nss/ncs ( activate rod )\ni_mrop_page_ac.nss/ncs ( activate page )\n\ngui_mrop_ok.nss/ncs ( gui accept )\ngui_mrop_cancel.nss/ncs ( gui cancel )\n\nspellscripts ( nss/ncs )\n7 inspirations ( nss/ncs )\n\nnw_s2_animalcom.nss/ncs ( Animal Companion )\nnw_s2_familiar.nss/ncs ( Familiar )\nkl_cmi_animcom ( #include )\n\n\n+ a few ReadMe's scattered about ...\n\n\n-------------------------------------------------------------------------------\nSpellhooking:\n\nIf a module author has already implemented a spellhook script, the MetaRod will\ndo its best to switch back and forth between that script and the MRoP spellhook.\nMessages ought appear in the chat window to the effect that spellhooking is\nalready enabled and that the module's author should be contacted, or at least\nthat the two scripts should be merged ( see the MRoP spellhook script\n'mrop_spellhook' for detailed info ).\n\nWild Magic works in conjunction with the spellhook and will switch back and\nforth as appropriate. The spellhook and Wild Magic need to be enabled during\nLearn mode only. Play mode operates with neither.\n\n\nFinally, tag-based scripting has to be enabled by the module author for the\nMetaPrepa to work in that module.","Rating":9.81,"Votes":4,"Awards":[]},"404":{"Name":"Kamal's Generic Commoner AI","Author":"Kamal","Submitted":20120728,"Updated":20130115,"Category":"Scripting routines","Type":"Type - Other","Format":"Module and Code","Patch":"1.00","NWN2Game":"NWN2:SoZ","Description":"This is an ai system for the generic commoners that occupy your towns/cities etc. It is not meant for anyone you meant to follow a specific behavior or schedule, though it can be used to do that. The goal is to provide an simple to implement, but relatively advanced AI for those \"unimportant nameless npc\" groups that fill out and add ambiance to game worlds. This ai allows your generic commoners to have schedules and carry out quasi realistic actions, automatically, and in as simple for a builder to implement manner as possible. \n\nv1.2 New \"generic\" scripts trade the activity flexibility and location variability of my commoner ai for increased performance. Usage is even easier than the full ai, with many only requiring putting a heartbeat on the npc.\n\nThis system is based on:\nUncle FB's original NPC control code: Link\nIt also includes additional activities provided by Lugaid of the Red Stripes from his Dana'an series Link and Link. \nDannJ's Handy VFX Link has been integrated, since it handles a number of things there are activities for but not items to equip, such as books.\n\nThere is a demo module, as well as an erf plus the vfx used. And a readme on usage.\n\nTo greatly improve performance if you are using a lot of commoner ai npc's, in the script sh_npc_leg_oh, add the following at the beginning of the main() function.\n if (GetAILevel(OBJECT_SELF) == AI_LEVEL_VERY_LOW)\n {\n return;\n }\nThen npc's will not run their routines if players are out of the area. This will be less realistic as players enter the area and then the npc's adjust to a new time.\n\nadditional credit:\nkevL, who provided a superior waypoint selection function\nkevL, Lugaid of the Red Stripes, and MasterChanger, for assistance with a looping bug. See:\nLink\n_Knightmare, Kaldor Silverwand, Lugaid of the Red Stripes, and Shallina for code on selecting at random from objects with the same tag.","Rating":10,"Votes":3,"Awards":[]},"405":{"Name":"Return-On-Hit Throwing Weapons","Author":"Dann Pigdon","Submitted":20120919,"Updated":20121025,"Category":"Inventory Item","Type":"Type - Combat","Format":"Code Only","ShowCode":"// i_itemtag_hc\n// Tag-based OnHit script for thrown weapons\n// that return on a successful hit\nvoid main()\n{\nobject oItemHit = GetSpellCastItem();\nif (!GetIsObjectValid(oItemHit)) return;\n\nobject oTarget = GetSpellTargetObject();\nobject oPC = GetItemPossessor(oItemHit);\nlocation lPC = GetLocation(oPC);\nlocation lTarget = GetLocation(oTarget);\n\nSetItemStackSize(oItemHit, GetItemStackSize(oItemHit)+1, FALSE);\nSpawnItemProjectile(oTarget, oPC, lTarget, lPC, GetBaseItemType(oItemHit), PROJECTILE_PATH_TYPE_HOMING, OVERRIDE_ATTACK_RESULT_PARRIED, 0);\n} Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"All","Description":"This tag-based OnHit script can be used in conjunction with the \"Unique Power (On Hit)\" item property to cause thrown weapons (axes or darts) to return on a successful hit.\n\nThe script also works on ammo, but the returning visual effect doesn't fire. Missed attacks result in the stack decreasing as usual.\n\nGive a stack of throwing weapons or ammo the \"On Hit Cast Spell: Unique Power (On Hit)\" item property, give the stack a unique tag, then name the script i_itemtag_hc (where 'itemtag' is replaced with the unique tag you gave the stack).\n","Rating":"N/A","Awards":[]},"406":{"Name":"Althéa Weather System (LB) (v1.05)","Author":"Lance Botelle","Submitted":20121006,"Updated":20130504,"Category":"Other","Forum Thread":"Link","Type":"Type - Daily Routine","Format":"Module and Code","Patch":"1.23","NWN2Game":"All","Description":"==========\nATTENTION!\n==========\n\nTHUNDER SOUND INDOORS: By default, the thunder clap sounds are now TURNED OFF whenever the PC goes indoors. However, if you prefer to have the thunder sound play when they go inside, simply comment out or completely remove the following line inside the area's ON CLIENT ENTER script:\n\nif(GetIsAreaInterior(oArea)){SetGlobalInt(\"LIGHTNINGON\", 0);} // STOP THUNDER SOUND INDOORS\n\nVERY IMPORTANT: The ON CLIENT ENTER needs to be attached to EVERY AREA in your module, including INTERIOR ones, as this code turns off the thunder when you enter an interior area.\n\nFOG COLOUR SETTINGS: I not very good when it comes to colour (being colour blind) and so I often find my colours (fog related ones included) may not be to your liking. Kamal has posted some other settings in the posts below. Please feel free to post any other settings you feel may benefit the system!\n\nNOTE TO USERS OF VERSION 1.00: There have been many changes from the original. You will need to replace the original hak for the new one. (Or copy the files and overwrite existing ones if you use the campaign folder.) Furthermore, you need to add a new Sound Object (the Blizzard/Dust storm sound) to each area as a fifth sound object. Lastly, the core include script has undergone many changes and will also need to be imported over the original. I would recommend importing the new erf and overwriting all files.\n\nUPDATES WITH v1.05\n==================\n\n1) Made some clarifications in the manual to emphasise the ON CLIENT ENTER script should be placed on every area.\n\n2) Set default weather timer to 300 seconds from 60 seconds.\n\nFIXES WITH v1.04\n================\n\n1) Fixed transition between interior and exterior and weather setup system. Ensured system would restart from an interior, while not setting up when indoors.\n\n=======================\n\nAn easy to implement comprehensive weather system. Automatic variation in weather according to time of year.\n\nFeatures Incuded:-\n\n1) Sound variations (including thunder - close and distant).\n2) Three cloud covers: Grey, dark grey and black. (Auto use correction check.)\n3) Lightning flashes wth thunder claps.\n4) Three snow types: Light, heavy and blizzard.\n5) Three dust storm settings.\n6) Fog added to help blend the sky and horizon contrast.\n\nAdvanced Settings:\n==================\n\nA GLOBAL variable can be set to immediately update the weather condition for the module.\n\nA LOCAL variable can be set on an area to force \"desert\" or \"snow\" settings.\n\nA LOCAL variable can be set on an area to override the automatic cloud setting.\n\nSimple Setup:\n=============\n\nIt takes only four easy steps to have the basic system up and running in your module:-\n\n1) Import the erf.\n2) Associate the hak.\n3) Place the five sound objects in each outdoor area using the system.\n4) Attach the On Client Enter script to EVERY area using the system, including interior areas, as the code turns off thunder when entering an interior area.\n\nA PDF (v1.05) has been included to help explain the running of the system and step by step setup and FAQ. (Contains the updates and fixes since v1.00)","Rating":9.88,"Votes":2,"Awards":[]},"407":{"Name":"Kamal's Jumping System","Author":"Kamal","Submitted":20121019,"Updated":20121021,"Category":"Scripting routines","Type":"Type - Other","Format":"Module and Code","Patch":"1.00","NWN2Game":"All","Description":"Rewrite of the Markshire Climbing system (http://nwvault.ign.com/View.php?view=nwn2scripts.detail&id=103) into a jumping system. There's not a whole lot of Markshire code left.\n\nIncluded demo area includes jumping to a waypoint destination, and jumping dynamically around at area based on player facing. Dynamic jumping is blocked by sufficient obstruction, or lack of a line of sight to the destination. Falling damage is calculated how far you fall on the z axis (in other words, it reads from the actual map and determines the distance of the fall. Jumping/falling is handled per d20 srd rules for jumping and falling.\n\nThe dynamic jumping would be suitable for implementation as a feat, presumably with some sort of cooldown. You'd probably want to make the player select a destination, and could use some of the DC code from the waypoint jump function to determine the DC.\n\nTechnically, the pc doesn't actually jump and inhabit the space of the path. The code for dynamic jumping looks for obstructions in the determined path of the jump, and won't jump if there's too many invalid locations in between, or if the jumper's line of sight is blocked (there are included messages for each).\n\nDirectional Jumping:\nThe jumper can jump towards destinations that they do not have line of sight to, the script calculates the location closest to the line of sight blocking object and the jump ends there. (if you try to jump over a wall, you wind up at the base of the wall).\n\nThe jumper can jump towards an obstructed destination in a similar manner as the line of sigh blocked destinations. The jumper winds up at the closest unobstructed destination to their original jump point (if you try to jump over a section of crates, you wind up at the point closest to the crates.\n\nJumping to Waypoints:\nIf the jump winds up in an unwalkable location, the pc instead jumps to the closest walkable destination short of the original destination. (in other words, always short.)\n\nyoutube video showing directional jumping:\nLink\n\nThanks to KevL for assistance with an invalid location bug.","Rating":9.5,"Votes":1,"Awards":[]},"408":{"Name":"C-info","Author":"kevL's","Submitted":20130308,"Updated":20130420,"Category":"Scripting Help","Type":"Type - Player State Tracking","Format":"Code Only","ShowCode":"///////////////////////////////////////////////////////////////////////////////\n/* 'c-info'\n//\n//\tThis is purely an informational script; it doesn't change anything about\n//\tthe gamestate. It outputs data to the chat window of the player who runs\n//\tit.\n//\n//\tIt is designed to access, test, and help in the understanding of various\n//\tPC-character functions. It always gives readout on the owned character(s),\n//\tthen a controlled character if different from the owned character, and\n//\tlastly on any targeted character ( whether PC-faction or not ) if they\n//\tare different from the owned & controlled character(s).\n//\n//\tAt the end is information about all PC Faction & Roster members. This\n//\tscript may also be used by designers and scripters to quickly check if\n//\ttheir characters are who they think they are ... */\n//\n//\tThanks : Kaldor Silverwand\n//\n//\tInstallation\n//\t- copy the script to a new textfile in your MyDocs->Override folder.\n//\t- name the file \"c-info.nss\"\n//\t- open it with the toolset and Compile.\n//\tUsage\n//\t- load NwN2 and select/target any characters, then\n//\t- fire it from the console in DebugMode : \"rs c-info\"\n///////////////////////////////////////////////////////////////////////////////\n// 2011 oct 27, kevL's\n//\t- displays info. about PC-faction Character functions.\n// 2013 mar 2\n//\t- updated & displays info. about Faction & Roster.\n// 2013 mar 5\n//\t- added more info. about Targeted Creature.\n// 2013 mar 6\n//\t- checks to prevent redundant data display.\n//\t- added info. about Roster status.\n//\t- expand character info. further\n//\t- add MaxHenchmen and # on Roster\n// 2013 mar 7\n//\t- fixed bug in getting RosterMember var's.\n//\t\t- still remains an issue of Neeshka at the end of the OC *not* showing\n//\t\ton the partyMenu yet also *not* registered as a CampaignNPC ...\n// 2013 mar 8\n//\t- tweaks & string constants.\n// 2013 mar 11\n//\t- slight amendments for public consumption :)\n//\t- <a target=\"_blank\" href=\"http://nwvault.ign.com/View.php?view=NWN2Scripts.Detail&id=408\">Link</a>\n// 2013 mar 31\n//\t- subtle wording.\n//\t- create list of (a) PC-only Faction members (b) 'NPC-only' Faction members.\n// 2013 april 20\n//\t- clarified wording a bit.\n\n\n// Send messages to the controlled character:\nobject oDebug = OBJECT_SELF;\n\n// ________________\n// ** Constants ***\n\nconst string sNAME\t\t= \"no Name\";\nconst string sTAG\t\t= \"no Tag\";\nconst string sINVALID\t= \"Object INVALID\";\nconst string sNONE\t\t= \"NONE\";\nconst string sLEADER\t= \" ( Leader )\";\n\nconst string sCOLOR\t\t= \"<c=aquamarine>\";\nconst string sCOL_end\t= \"</c>\";\n\n// ________________\n// ** Prototype ***\n\n// returns the OwnedPC object of oCreature\n//\t- oCreature must be PC-faction;\n//\t\telse, returns OBJECT_INVALID\nobject kL_GetRealPC(object oCreature = OBJECT_SELF);\n\n\n// ___________\n// ** MAIN ***\n\nvoid main()\n{\n\tSendMessageToPC(oDebug, sCOLOR + \"\\n___oO c-info Oo___\" + sCOL_end);\n\n\t// GetPlayers.\n\tSendMessageToPC(oDebug, \"Players ( PC only )\");\n\tstring sPC;\n\tint i;\n\n\tobject oPC = GetFirstPC();\n\tobject oLeader = GetFactionLeader(oPC);\n\twhile (GetIsObjectValid(oPC))\n\t{\n\t\t++ i;\n\t\tif (\"\" == (sPC = GetName(oPC))) sPC = sNAME;\n\t\tif (oLeader == oPC)\n\t\t{\n\t\t\tsPC += sLEADER;\n\t\t}\n\t\tSendMessageToPC(oDebug, IntToString(i) + \" . \" + sPC);\n\n\t\toPC = GetNextPC();\n\t}\n\n\t// GetPlayers(FALSE).\n\tSendMessageToPC(oDebug, \"\\nPlayers ( ! PC only )\");\n\ti = 0;\n\toPC = GetFirstPC(FALSE);\n\twhile (GetIsObjectValid(oPC))\n\t{\n\t\t++ i;\n\t\tif (\"\" == (sPC = GetName(oPC))) sPC = sNAME;\n\t\tif (oLeader == oPC)\n\t\t{\n\t\t\tsPC += sLEADER;\n\t\t}\n\t\tSendMessageToPC(oDebug, IntToString(i) + \" . \" + sPC);\n\n\t\toPC = GetNextPC(FALSE);\n\t}\n\n\n//\tobject oPC\t\t= GetFirstPC();\n//\tobject oSelf\t= OBJECT_SELF;\t\t\t\t\t\t\t// this *is* the ControlledCharacter.\n\tobject oOwn\t\t= kL_GetRealPC();\t\t\t\t\t\t// should always get an OwnedCharacter, possibly the partyLeader's in MP.\n\tobject oControl\t= GetControlledCharacter(oOwn);\t\t\t// this *should be* OBJECT_SELF in SP.\n\tobject oTarget\t= GetPlayerCurrentTarget(oControl);\n\n\tint bControl;\n\tif (oOwn != oControl) bControl = TRUE;\n\n\tint bTarget;\n\tif (GetIsObjectValid(oTarget)\n\t\t\t&& GetObjectType(oTarget) == OBJECT_TYPE_CREATURE\n\t\t\t&& oOwn != oTarget\n\t\t\t&& oControl != oTarget)\n\t\tbTarget = TRUE;\n\n\n\tstring\tsOwnName,\t\tsOwnTag,\n\t\t\tsControlName,\tsControlTag,\n\t\t\tsTargetName,\tsTargetTag;\n\n\tif (\"\" == (sOwnName\t= GetName(oOwn)))\tsOwnName\t= sNAME;\n\tif (\"\" == (sOwnTag\t= GetTag(oOwn)))\tsOwnTag\t\t= sTAG;\n\tif (bControl)\n\t{\n\t\tif (\"\" == (sControlName\t= GetName(oControl)))\tsControlName\t= sNAME;\n\t\tif (\"\" == (sControlTag\t= GetTag(oControl)))\tsControlTag\t\t= sTAG;\n\t}\n\tif (bTarget)\n\t{\n\t\tif (\"\" == (sTargetName\t= GetName(oTarget)))\tsTargetName\t\t= sNAME;\n\t\tif (\"\" == (sTargetTag\t= GetTag(oTarget)))\t\tsTargetTag\t\t= sTAG;\n\t}\n\n\n\tSendMessageToPC(oDebug, \"\\nobject oOwned : \" + sOwnName + \" ( \" + sOwnTag + \" )\");\n\tSendMessageToPC(oDebug, \". . Is PC : \"\t\t\t\t\t+ IntToString(GetIsPC(oOwn)));\n\n\tSendMessageToPC(oDebug, \". . Is Owned By Player : \"\t\t+ IntToString(GetIsOwnedByPlayer(oOwn)));\n\tSendMessageToPC(oDebug, \". . Is Player Created : \"\t\t+ IntToString(GetIsPlayerCreated(oOwn)));\n\tSendMessageToPC(oDebug, \". . Is Roster Member : \"\t\t+ IntToString(GetIsRosterMember(oOwn)));\n\n\tSendMessageToPC(oDebug, \". . Is DM : \"\t\t\t\t\t+ IntToString(GetIsDM(oOwn)));\n\tSendMessageToPC(oDebug, \". . Is DM Possessed : \"\t\t+ IntToString(GetIsDMPossessed(oOwn)));\n\tSendMessageToPC(oDebug, \". . Is Possessed Familiar : \"\t+ IntToString(GetIsPossessedFamiliar(oOwn)));\n\n\tSendMessageToPC(oDebug, \". . Is Dead : \"\t\t\t\t+ IntToString(GetIsDead(oOwn, TRUE)));\n\tSendMessageToPC(oDebug, \". . Is Dying : \"\t\t\t\t+ IntToString(!GetIsDead(oOwn, TRUE) && GetIsDead(oOwn)));\n\n\tSendMessageToPC(oDebug, \". . . Immortal : \"\t\t\t\t+ IntToString(GetImmortal(oOwn)));\n\tSendMessageToPC(oDebug, \". . . Plot Flag : \"\t\t\t+ IntToString(GetPlotFlag(oOwn)));\n\n\tif (bControl)\n\t{\n\t\tSendMessageToPC(oDebug, \"\\nobject oControlled : \" + sControlName + \" ( \" + sControlTag + \" )\");\n\t\tSendMessageToPC(oDebug, \". . Is PC : \"\t\t\t\t\t+ IntToString(GetIsPC(oControl)));\n\n\t\tSendMessageToPC(oDebug, \". . Is Owned By Player : \"\t\t+ IntToString(GetIsOwnedByPlayer(oControl)));\n\t\tSendMessageToPC(oDebug, \". . Is Player Created : \"\t\t+ IntToString(GetIsPlayerCreated(oControl)));\n\t\tSendMessageToPC(oDebug, \". . Is Roster Member : \"\t\t+ IntToString(GetIsRosterMember(oControl)));\n\n\t\tSendMessageToPC(oDebug, \". . Is DM : \"\t\t\t\t\t+ IntToString(GetIsDM(oControl)));\n\t\tSendMessageToPC(oDebug, \". . Is DM Possessed : \"\t\t+ IntToString(GetIsDMPossessed(oControl)));\n\t\tSendMessageToPC(oDebug, \". . Is Possessed Familiar : \"\t+ IntToString(GetIsPossessedFamiliar(oControl)));\n\n\t\tSendMessageToPC(oDebug, \". . Is Dead : \"\t\t\t\t+ IntToString(GetIsDead(oControl, TRUE)));\n\t\tSendMessageToPC(oDebug, \". . Is Dying : \"\t\t\t\t+ IntToString(!GetIsDead(oControl, TRUE) && GetIsDead(oControl)));\n\n\t\tSendMessageToPC(oDebug, \". . . Immortal : \"\t\t\t\t+ IntToString(GetImmortal(oControl)));\n\t\tSendMessageToPC(oDebug, \". . . Plot Flag : \"\t\t\t+ IntToString(GetPlotFlag(oControl)));\n\t}\n\n\tif (bTarget)\n\t{\n\t\tSendMessageToPC(oDebug, \"\\nobject oTarget : \" + sTargetName + \" ( \" + sTargetTag + \" )\");\n\t\tSendMessageToPC(oDebug, \". . Is PC : \"\t\t\t\t\t+ IntToString(GetIsPC(oTarget)));\n\n\t\tSendMessageToPC(oDebug, \". . Is Owned By Player : \"\t\t+ IntToString(GetIsOwnedByPlayer(oTarget)));\n\t\tSendMessageToPC(oDebug, \". . Is Player Created : \"\t\t+ IntToString(GetIsPlayerCreated(oTarget)));\n\t\tSendMessageToPC(oDebug, \". . Is Roster Member : \"\t\t+ IntToString(GetIsRosterMember(oTarget)));\n\n\t\tSendMessageToPC(oDebug, \". . Is DM : \"\t\t\t\t\t+ IntToString(GetIsDM(oTarget)));\n\t\tSendMessageToPC(oDebug, \". . Is DM Possessed : \"\t\t+ IntToString(GetIsDMPossessed(oTarget)));\n\t\tSendMessageToPC(oDebug, \". . Is Possessed Familiar : \"\t+ IntToString(GetIsPossessedFamiliar(oTarget)));\n\n\t\tSendMessageToPC(oDebug, \". . Is Dead : \"\t\t\t\t+ IntToString(GetIsDead(oTarget, TRUE)));\n\t\tSendMessageToPC(oDebug, \". . Is Dying : \"\t\t\t\t+ IntToString(!GetIsDead(oTarget, TRUE) && GetIsDead(oTarget)));\n\n\t\tSendMessageToPC(oDebug, \". . . Immortal : \"\t\t\t\t+ IntToString(GetImmortal(oTarget)));\n\t\tSendMessageToPC(oDebug, \". . . Plot Flag : \"\t\t\t+ IntToString(GetPlotFlag(oTarget)));\n\t}\n\n\n\tobject\toChar;\n\tstring\tsChar,\n\t\t\tsTag,\n\t\t\tsAssoc;\n\tint\t\tiAssoc;\n\n\t// oOwn\n\tSendMessageToPC(oDebug, \"\\n( oOwned ) . . . . return\");\n\toChar = GetFactionLeader(oOwn);\n\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\telse\n\t{\n\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\tsChar += \" ( \" + sTag + \" )\";\n\t}\n\tSendMessageToPC(oDebug, \". Faction Leader ( \" + sOwnName + \" ) : \" + sChar);\n\n\toChar = GetOwnedCharacter(oOwn);\n\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\telse\n\t{\n\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\tsChar += \" ( \" + sTag + \" )\";\n\t}\n\tSendMessageToPC(oDebug, \". Owned Character ( \" + sOwnName + \" ) : \" + sChar);\n\n\toChar = GetControlledCharacter(oOwn);\n\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\telse\n\t{\n\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\tsChar += \" ( \" + sTag + \" )\";\n\t}\n\tSendMessageToPC(oDebug, \". Controlled Character ( \" + sOwnName + \" ) : \" + sChar);\n\n\toChar = GetMaster(oOwn);\n\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\telse\n\t{\n\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\tsChar += \" ( \" + sTag + \" )\";\n\t}\n\tSendMessageToPC(oDebug, \". Master ( \" + sOwnName + \" ) : \" + sChar);\n\n\t// oControl\n\tif (bControl)\n\t{\n\t\tSendMessageToPC(oDebug, \"\\n( oControlled ) . . . . return\");\n\t\toChar = GetFactionLeader(oControl);\n\t\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Faction Leader ( \" + sControlName + \" ) : \" + sChar);\n\n\t\toChar = GetOwnedCharacter(oControl);\n\t\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Owned Character ( \" + sControlName + \" ) : \" + sChar);\n\n\t\toChar = GetControlledCharacter(oControl);\n\t\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Controlled Character ( \" + sControlName + \" ) : \" + sChar);\n\n\t\tiAssoc = GetAssociateType(oControl);\n\t\tsAssoc = sNONE;\n\t\toChar = GetMaster(oControl);\n\t\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t\tif (iAssoc)\n\t\t\t{\n\t\t\t\t// This should come up FAMILIAR *only.*\n\t\t\t\tif (ASSOCIATE_TYPE_HENCHMAN\t\t\t== iAssoc) sAssoc = \"henchman\";\n\t\t\t\tif (ASSOCIATE_TYPE_ANIMALCOMPANION\t== iAssoc) sAssoc = \"animal companion\";\n\t\t\t\tif (ASSOCIATE_TYPE_FAMILIAR\t\t\t== iAssoc) sAssoc = \"FAMILIAR\";\n\t\t\t\tif (ASSOCIATE_TYPE_SUMMONED\t\t\t== iAssoc) sAssoc = \"summons\";\n\t\t\t\tif (ASSOCIATE_TYPE_DOMINATED\t\t== iAssoc) sAssoc = \"dominated\";\n\t\t\t}\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Master ( \" + sControlName + \" ) : \" + sChar);\n\t\tSendMessageToPC(oDebug, \". . . Associate Type : \" + sAssoc);\n\t}\n\n\t// oTarget\n\tif (bTarget)\n\t{\n\t\tSendMessageToPC(oDebug, \"\\n( oTargeted ) . . . . return\");\n\t\toChar = GetFactionLeader(oTarget);\n\t\tif (!GetIsObjectValid(oChar)) \t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Faction Leader ( \" + sTargetName + \" ) : \" + sChar);\n\n\t\toChar = GetOwnedCharacter(oTarget);\n\t\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Owned Character ( \" + sTargetName + \" ) : \" + sChar);\n\n\t\toChar = GetControlledCharacter(oTarget);\n\t\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Controlled Character ( \" + sTargetName + \" ) : \" + sChar);\n\n\t\tiAssoc = GetAssociateType(oTarget);\n\t\tsAssoc = sNONE;\n\t\toChar = GetMaster(oTarget);\n\t\tif (!GetIsObjectValid(oChar))\t\t\tsChar\t= sINVALID;\n\t\telse\n\t\t{\n\t\t\tif (\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t\tif (iAssoc)\n\t\t\t{\n\t\t\t\tif (ASSOCIATE_TYPE_HENCHMAN\t\t\t== iAssoc) sAssoc = \"HENCHMAN\";\n\t\t\t\tif (ASSOCIATE_TYPE_ANIMALCOMPANION\t== iAssoc) sAssoc = \"ANIMAL COMPANION\";\n\t\t\t\tif (ASSOCIATE_TYPE_FAMILIAR\t\t\t== iAssoc) sAssoc = \"FAMILIAR\";\n\t\t\t\tif (ASSOCIATE_TYPE_SUMMONED\t\t\t== iAssoc) sAssoc = \"SUMMONS\";\n\t\t\t\tif (ASSOCIATE_TYPE_DOMINATED\t\t== iAssoc) sAssoc = \"DOMINATED\";\n\t\t\t}\n\t\t}\n\t\tSendMessageToPC(oDebug, \". Master ( \" + sTargetName + \" ) : \" + sChar);\n\t\tSendMessageToPC(oDebug, \". . . Associate Type : \" + sAssoc);\n\t}\n\n\n\t// Faction ( PC-only ) of\n\tSendMessageToPC(oDebug, \"\\no_ Faction Members ( PC only ) of \" + sOwnName + \" _o\");\n\ti = 0;\n\toChar = GetFirstFactionMember(oOwn);\n\twhile (GetIsObjectValid(oChar))\n\t{\n\t\t++ i;\n\t\tif\t(\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\tif\t(\"\" == (sTag = GetTag(oChar)))\t\tsTag\t= sTAG;\n\t\tsChar += \" ( \" + sTag + \" )\";\n\t\tSendMessageToPC(oDebug, IntToString(i) + \" . \" + sChar);\n\n\t\toChar = GetNextFactionMember(oOwn);\n\t}\n\n\t// Faction ( PC-all ) of\n\tSendMessageToPC(oDebug, \"\\no_ Faction Members ( ! PC only ) of \" + sOwnName + \" _o\");\n\ti = 0;\n\toChar = GetFirstFactionMember(oOwn, FALSE);\n\twhile (GetIsObjectValid(oChar))\n\t{\n\t\t++ i;\n\t\tif\t(\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\tif\t(\"\" == (sTag = GetTag(oChar)))\t\tsTag\t= sTAG;\n\t\tsChar += \" ( \" + sTag + \" )\";\n\t\tSendMessageToPC(oDebug, IntToString(i) + \" . \" + sChar);\n\n\t\toChar = GetNextFactionMember(oOwn, FALSE);\n\t}\n\tSendMessageToPC(oDebug, \"\\n. . Max Henchmen : \" + IntToString(GetMaxHenchmen()));\n\n\t// Faction ( NPC ) of\n\tif (bTarget\n\t\t\t&& !GetFactionEqual(oOwn, oTarget))\n\t{\n\t\tSendMessageToPC(oDebug, \"\\n\\no_ Faction Members ( 'PC' only ) of \" + sTargetName + \" _o\");\n\t\ti = 0;\n\t\toChar = GetFirstFactionMember(oTarget);\n\t\t// this should never run:\n\t\twhile (GetIsObjectValid(oChar))\n\t\t{\n\t\t\t++ i;\n\t\t\tif\t(\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif\t(\"\" == (sTag = GetTag(oChar)))\t\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t\tSendMessageToPC(oDebug, IntToString(i) + \" . \" + sChar);\n\n\t\t\toChar = GetNextFactionMember(oTarget);\n\t\t}\n\t\t// this should always return:\n\t\tif (!i)\n\t\t{\n\t\t\tSendMessageToPC(oDebug, \". . . . \" + sNONE);\n\t\t}\n\n\t\tSendMessageToPC(oDebug, \"\\no_ Faction Members ( ! 'PC' only ) of \" + sTargetName + \" _o\");\n\t\ti = 0;\n\t\toChar = GetFirstFactionMember(oTarget, FALSE);\n\t\twhile (GetIsObjectValid(oChar))\n\t\t{\n\t\t\t++ i;\n\t\t\tif\t(\"\" == (sChar = GetName(oChar)))\tsChar\t= sNAME;\n\t\t\tif\t(\"\" == (sTag = GetTag(oChar)))\t\tsTag\t= sTAG;\n\t\t\tsChar += \" ( \" + sTag + \" )\";\n\t\t\tSendMessageToPC(oDebug, IntToString(i) + \" . \" + sChar);\n\n\t\t\toChar = GetNextFactionMember(oTarget, FALSE);\n\t\t}\n\n\t\tint iRep = GetReputation(oOwn, oTarget);\n\t\tSendMessageToPC(oDebug, \"\\n. Reputation ( \" + sTargetName + \" ) vs PC ( \" + sOwnName + \" ) : \" + IntToString(iRep));\n\t}\n/*\tif (!GetFactionEqual(oOwn, oTarget))\n\t{\n\t\t// to do this, I'd have to spawn in creatures of knownFaction\n\t\t// and test oTarget against them ... nah.\n\n\t\tSendMessageToPC(oDebug, \". Faction : \" + sFaction);\n\t} */\n\n\t// Roster\n\tSendMessageToPC(oDebug, \"\\n\\no_ Roster Members _o\");\n\n\ti = 0;\n\tsChar = GetFirstRosterMember();\n\twhile (\"\" != sChar)\n\t{\n\t\t++ i;\n\t\tSendMessageToPC(oDebug, IntToString(i) + \" .\\nRoster Name : \" + sChar);\n\n\t\toChar = GetObjectFromRosterName(sChar);\n\t\tif (GetIsObjectValid(oChar))\n\t\t{\n\t\t\tstring sName;\n\t\t\tif (\"\" == (sName = GetName(oChar)))\tsName\t= sNAME;\n\t\t\tif (\"\" == (sTag = GetTag(oChar)))\tsTag\t= sTAG;\n\n\t\t\tSendMessageToPC(oDebug, \". . . . . ig Name : \" + sName + \" ( tag : \" + sTag + \" )\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tSendMessageToPC(oDebug, \". . . . . not IG\");\n\t\t}\n\n\t\tSendMessageToPC(oDebug, \". . Campaign NPC : \"\t+ IntToString(GetIsRosterMemberCampaignNPC(sChar)));\n\t\tSendMessageToPC(oDebug, \". . Available : \"\t\t+ IntToString(GetIsRosterMemberAvailable(sChar)));\n\t\tSendMessageToPC(oDebug, \". . Selectable : \"\t\t+ IntToString(GetIsRosterMemberSelectable(sChar)));\n\n\t\tsChar = GetNextRosterMember();\n\t}\n\n\tif (!i)\n\t{\n\t\tSendMessageToPC(oDebug, \". . . . \" + sNONE);\n\t}\n\n\tSendMessageToPC(oDebug, \"\\n. . . Roster NPC Party Limit : \" + IntToString(GetRosterNPCPartyLimit()));\n\n\tSendMessageToPC(oDebug, sCOLOR + \"__o EOF o__\" + sCOL_end);\n}\n\n\n\n// _______________\n// ** Function ***\n\n// returns the Owned PC object of oCreature in SP\n// or the Owned PC Faction Leader of oCreature in MP.\n//\t- oCreature must be PC-faction; else, returns OBJECT_INVALID\nobject kL_GetRealPC(object oCreature = OBJECT_SELF)\n{\n\tobject oMaster = GetMaster(oCreature);\n\twhile (GetIsObjectValid(oMaster))\n\t{\n\t\toCreature = oMaster;\n\t\toMaster = GetMaster(oMaster);\n\t}\n\n\tif (GetIsOwnedByPlayer(oCreature))\n\t{\n\t\treturn oCreature;\n\t}\n\telse if (GetIsRosterMember(oCreature))\n\t{\n\t\toCreature = GetFactionLeader(oCreature);\n\t\toCreature = GetOwnedCharacter(oCreature);\n\n\t\treturn oCreature;\n\t}\n\telse\n\t{\n\t\treturn OBJECT_INVALID;\n\t}\n}Select All Text | View Code in separate window","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This script is designed to access, test, and help in the understanding of various PC-character functions. It always gives readout on the owned character(s), then a controlled character if different from the owned character, and lastly on any targeted character ( whether PC-faction or not ) if they are different from the owned & controlled character(s).\n\nIt is a purely informational script; it doesn't change anything about the gamestate. It outputs data to the chat window of the player who runs it.\n\nAt the end is information about all PC Faction & Roster members. This script may also be used by designers and scripters to quickly check if their characters are who they think they are ...\n\nThanks : Kaldor Silverwand\n\n\nInstallation\n- copy the script to a new textfile in your MyDocs->Override folder.\n- name the file \"c-info.nss\"\n- open it with the toolset and Compile.\n\nUsage\n- load NwN2 and select/target any characters, then\n- fire it from the console in DebugMode : \"rs c-info\"","Rating":"N/A","Awards":[]},"409":{"Name":"SoZ Trade System Demo and Documentation","Author":"kamal","Submitted":20130426,"Updated":20130426,"Category":"Tutorials","Type":"Type - Other","Format":"Module Only","Patch":"1.23","NWN2Game":"NWN2:SoZ","Description":"This is a demo module implementing the Storm of Zehir trade system, as well as documentation for it since I was never able to find documentation of the system. The documentation also shows how to modify the trade system, as shown in the demo module.","Rating":"N/A","Awards":[]}}
